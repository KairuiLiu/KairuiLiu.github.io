<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="manifest" href="/images/manifest.json"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CPT+Sans:300,300italic,400,400italic,700,700italic%7CFira+Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/greem/pace-theme-minimal.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"blog.liukairui.me","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.13.1","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"width":320},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"GPJGYFJZH3","apiKey":"594eec10fca5caccffae82e82d066310","indexName":"hexo","hits":{"per_page":10}}}</script><script src="/js/config.js"></script><meta name="description" content="闲来无事仔细了解一下 Unicode 编码规则, 并尝试实现一些 &amp;#x6709;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3662;&amp;#3662;&amp;#3662;&amp;#3662;&amp;#3657;&amp;#3657;&amp;#3657;&amp;#3657;&amp;#x8da3;&amp;#3657;&amp;#3657;&amp;#3657;&amp;#3657;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3662;&amp;#36"><meta property="og:type" content="article"><meta property="og:title" content="一些字符编码规则"><meta property="og:url" content="https://blog.liukairui.me/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/"><meta property="og:site_name" content="LiuKairui&#39;s Blog"><meta property="og:description" content="闲来无事仔细了解一下 Unicode 编码规则, 并尝试实现一些 &amp;#x6709;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3662;&amp;#3662;&amp;#3662;&amp;#3662;&amp;#3657;&amp;#3657;&amp;#3657;&amp;#3657;&amp;#x8da3;&amp;#3657;&amp;#3657;&amp;#3657;&amp;#3657;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3662;&amp;#36"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-12-11T16:00:01.000Z"><meta property="article:modified_time" content="2022-12-11T16:00:01.000Z"><meta property="article:author" content="Liu Kairui"><meta property="article:tag" content="编码规范"><meta property="article:tag" content="Unicode"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://blog.liukairui.me/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.liukairui.me/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/","path":"article/Unicode编码规范/","title":"一些字符编码规则"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>一些字符编码规则 | LiuKairui's Blog</title><script>var titleTime,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="我们活着是为了什么? | "+OriginTitile,clearTimeout(titleTime)):(document.title="整点薯条 | "+OriginTitile,titleTime=setTimeout(function(){document.title=OriginTitile},2e3))})</script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="LiuKairui's Blog" type="application/atom+xml"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">LiuKairui's Blog</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">整点薯条</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-新活"><a href="/ff_monthly/" rel="section"><i class="fa fa-solid fa-newspaper fa-fw"></i>新活</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fas fa-hashtag fa-fw"></i>标签</a></li><li class="menu-item menu-item-收藏夹"><a href="/favorites/" rel="section"><i class="fab fa-gratipay fa-fw"></i>收藏夹</a></li><li class="menu-item menu-item-留言板"><a href="/messageBoard/" rel="section"><i class="fab fa-facebook-messenger fa-fw"></i>留言板</a></li><li class="menu-item menu-item-项目"><a href="/projects/" rel="section"><i class="fa fa-satellite fa-fw"></i>项目</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container"><div class="algolia-stats"><hr></div><div class="algolia-hits"></div><div class="algolia-pagination"></div></div></div></div><script async src="/js/wobblewindow.js"></script><script async>window.addEventListener("load",function(){768<window.innerWidth&&($("body>main>header").wobbleWindow({radius:50,movementTop:!1,movementLeft:!1,movementRight:!1,debug:!1}),$("body>footer").wobbleWindow({radius:50,movementBottom:!1,movementLeft:!1,movementRight:!1,debug:!1}))})</script></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#unicode-%E7%BC%96%E7%A0%81%E8%A7%84%E5%88%99"><span class="nav-text">Unicode 编码规则</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ascii"><span class="nav-text">ASCII</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unicode"><span class="nav-text">Unicode</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%8A%E8%A7%92%E5%85%A8%E8%A7%92"><span class="nav-text">半角&#x2F;全角</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#htmlxml%E5%AE%9E%E4%BD%93%E8%BD%AC%E4%B9%89"><span class="nav-text">HTML&#x2F;XML实体转义</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#html"><span class="nav-text">HTML</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xml"><span class="nav-text">XML</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unicode-encoding-forms"><span class="nav-text">Unicode Encoding Forms</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#utf32"><span class="nav-text">UTF32</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#utf16"><span class="nav-text">UTF16</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#utf8"><span class="nav-text">UTF8</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#byte-order-mark"><span class="nav-text">Byte order mark</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#endianness"><span class="nav-text">endianness</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#byte-order-mark-1"><span class="nav-text">Byte order mark</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E5%AD%97%E7%AC%A6"><span class="nav-text">组合字符</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9B%B6%E5%AE%BD%E5%AD%97%E7%AC%A6"><span class="nav-text">零宽字符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#emoji-%E4%B8%AD%E7%9A%84%E9%9B%B6%E5%AE%BD%E5%AD%97%E7%AC%A6"><span class="nav-text">Emoji 中的零宽字符</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Liu Kairui" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">Liu Kairui</p><div class="site-description" itemprop="description">LiuKairui's Personal Website</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">72</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">34</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">80</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0thaXJ1aUxpdQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;KairuiLiu"><i class="fab fa-github fa-fw"></i>GitHub</span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOm1lQGxpdWthaXJ1aS5tZQ==" title="E-Mail → mailto:me@liukairui.me"><i class="fa fa-envelope fa-fw"></i>E-Mail</span> </span><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9xbS5xcS5jb20vY2dpLWJpbi9xbS9xcj9rPW9hZjNUb09sTjE3aHI1c0hWOThiVDhxeHNOWUdhdzVMJm5vdmVyaWZ5PTA=" title="QQ → https:&#x2F;&#x2F;qm.qq.com&#x2F;cgi-bin&#x2F;qm&#x2F;qr?k&#x3D;oaf3ToOlN17hr5sHV98bT8qxsNYGaw5L&amp;noverify&#x3D;0"><i class="fab fa-qq fa-fw"></i>QQ</span> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a> </span><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9saXVrYWlydWkuYmxvZy5jc2RuLm5ldA==" title="CSDN → https:&#x2F;&#x2F;liukairui.blog.csdn.net"><i class="fab fa-cuttlefish fa-fw"></i>CSDN</span></span></div><div class="cc-license site-overview-item animated" itemprop="license"><span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></span></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.liukairui.me/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Liu Kairui"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="LiuKairui's Blog"><meta itemprop="description" content="LiuKairui's Personal Website"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="一些字符编码规则 | LiuKairui's Blog"><meta itemprop="description" content="闲来无事仔细了解一下 Unicode 编码规则, 并尝试实现一些 &#x6709;&#3655;&#3655;&#3655;&#3655;&#3662;&#3662;&#3662;&#3662;&#3657;&#3657;&#3657;&#3657;&#x8da3;&#3657;&#3657;&#3657;&#3657;&#3655;&#3655;&#3655;&#3655;&#3662;&#3662;&#3662;&#3662;的&#x7279;&#x20dd; &#x0333;&#x0333;&#x308;&#x303;&#x6548;&#x200b;&#x0333;&#x0333;&#x308;&#x303;"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">一些字符编码规则</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-12-12 00:00:01" itemprop="dateCreated datePublished" datetime="2022-12-12T00:00:01+08:00">2022-12-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/" itemprop="url" rel="index"><span itemprop="name">瞎折腾</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" itemprop="url" rel="index"><span itemprop="name">编码规范</span></a> </span></span><span id="/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" class="post-meta-item leancloud_visitors" data-flag-title="一些字符编码规则" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" itemprop="commentCount"></span> </a></span><span class="post-meta-item theme_switch_wapper hidden" id="theme_switch_wapper"><span class="post-meta-item-icon"><i class="fa-brands fa-markdown"></i></span> <span class="post-meta-item-text">主题： </span><select name="theme_switch" id="theme_switch"><option>sneh</option><option>mo</option><option>with</option><option>next</option></select> </span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>11k</span></span></div><div class="post-description">闲来无事仔细了解一下 Unicode 编码规则, 并尝试实现一些 &#x6709;&#3655;&#3655;&#3655;&#3655;&#3662;&#3662;&#3662;&#3662;&#3657;&#3657;&#3657;&#3657;&#x8da3;&#3657;&#3657;&#3657;&#3657;&#3655;&#3655;&#3655;&#3655;&#3662;&#3662;&#3662;&#3662;的&#x7279;&#x20dd; &#x0333;&#x0333;&#x308;&#x303;&#x6548;&#x200b;&#x0333;&#x0333;&#x308;&#x303;</div></div></header><div class="post-body" itemprop="articleBody"><h1 id="unicode-编码规则">Unicode 编码规则</h1><blockquote><p>以下部分转自: <span class="exturl" data-url="aHR0cHM6Ly93YW5nd2wubmV0L3N0YXRpYy9wYWdlcy91bmljb2RlLmh0bWw=">一文彻底搞懂Unicode编码问题<i class="fa fa-external-link-alt"></i></span></p></blockquote><h2 id="ascii">ASCII</h2><p>最基础的编码格式，打字机时代的产物，共128个字符，其包含键盘上每一个可显字符，可应对只有英文字母场景下的编码需求。</p><p>ASCII编码，共128个字符，编码范围为0~127，每个字符占用一个字节(8位)，但ASCII实际7位就够用了，所以第8位可用于保存额外的信息，早期多用来做奇偶校验，目前都是填充0。</p><p>其中第32到126的字符( - 7E)，共95个，为可显字符(printable character)，为空格、数字、字母、标点符号、和几个特殊符号(例如脱字符^)。其中：</p><ul><li>32()，为空格</li><li>48-57(-)，数字0-9</li><li>65-90(-5A)，字母A-Z</li><li>97-122(-7A)，字母a-z</li></ul><p>前32个字符和最后1个字符(0到32和127)，共33个字符，称之为控制字符(Control character)。</p><p>每个控制字符除了通过ASCII编码表示，还有另外的「脱字符表示法」(Caret notation )，第0个为<code>^0</code>，后续26个为<code>^A</code>~<code>^Z</code>，剩余的为<code>^[</code>，<code>^\</code>，<code>^]</code>，<code>^^</code>，<code>^_</code>，最后一个为<code>^?</code>。在JS中的正则表达式中，用<code>\c</code>来替代脱字符匹配控制字符，例如<code>\cJ</code>代表<code>^J</code>。 另外，有几个特殊的在现在编码中仍然有用的控制字符，还有「转义符表示法」(escape sequence)。如下表所示：</p><table><colgroup><col style="width:10%"><col style="width:17%"><col style="width:17%"><col style="width:26%"><col style="width:14%"><col style="width:14%"></colgroup><thead><tr class="header"><th style="text-align:center">十进制</th><th style="text-align:center">脱字符表示</th><th style="text-align:center">转义符表示</th><th style="text-align:center">名称</th><th style="text-align:center">名称简写</th><th style="text-align:center">作用</th></tr></thead><tbody><tr class="odd"><td style="text-align:center">0</td><td style="text-align:center">^@</td><td style="text-align:center">\0</td><td style="text-align:center">Null</td><td style="text-align:center">NUL</td><td style="text-align:center">空</td></tr><tr class="even"><td style="text-align:center">7</td><td style="text-align:center">^G</td><td style="text-align:center"></td><td style="text-align:center">Bell</td><td style="text-align:center">Bel</td><td style="text-align:center">振铃</td></tr><tr class="odd"><td style="text-align:center">8</td><td style="text-align:center">^H</td><td style="text-align:center">Backspace</td><td style="text-align:center">BS</td><td style="text-align:center">退格</td><td style="text-align:center"></td></tr><tr class="even"><td style="text-align:center">9</td><td style="text-align:center">^I</td><td style="text-align:center">Horizontal Tab</td><td style="text-align:center">HT</td><td style="text-align:center">水平制表</td><td style="text-align:center"></td></tr><tr class="odd"><td style="text-align:center">10</td><td style="text-align:center">^J</td><td style="text-align:center"></td><td style="text-align:center">Line Feed</td><td style="text-align:center">LF</td><td style="text-align:center">换行</td></tr><tr class="even"><td style="text-align:center">11</td><td style="text-align:center">^K</td><td style="text-align:center">Vertical Tab</td><td style="text-align:center">VT</td><td style="text-align:center">垂直制表</td><td style="text-align:center"></td></tr><tr class="odd"><td style="text-align:center">12</td><td style="text-align:center">^L</td><td style="text-align:center">Form feed</td><td style="text-align:center">FF</td><td style="text-align:center">换页</td><td style="text-align:center"></td></tr><tr class="even"><td style="text-align:center">13</td><td style="text-align:center">^M</td><td style="text-align:center">Carriage Return</td><td style="text-align:center">CR</td><td style="text-align:center">回车</td><td style="text-align:center"></td></tr><tr class="odd"><td style="text-align:center">27</td><td style="text-align:center">^[</td><td style="text-align:center"></td><td style="text-align:center">Escape</td><td style="text-align:center">ESC</td><td style="text-align:center">换码</td></tr></tbody></table><p>显然128个字符对于英文表达足够了，但是明显不适用中文，以及其他非英文表达的语言，所以中国后来有了GBK编码。ASCII编码在早期遇到编码不够用的时候，也有一些扩展和变体，例如「扩展ASCII」可表示256个字符。不过由于后来有了Unicode编码格式，这些都没用了，所以就没必要去了解了。</p><h2 id="unicode">Unicode</h2><p>Unicode编码标准，可表示目前全世界所有语言的所有字符。同时兼容ASCII编码。</p><p>Unicode的前128个字符编码和ASCII是一致的，即向后兼容ASCII，对于使用ASCII编码的程序可以直接使用Unicode规范。在Unicode中，对于每一个字符编码的值，叫做<code>code point</code>。例如小写字母a的<code>code point</code>为97，对应十六进制为<code>\x61</code>。下文为了方便对<code>code point</code>称作「码位」。</p><p>在Unicode中，码位的总范围为<code>\x0</code>到<code>\x10FFFF</code>，共1,114,112个码位。2048个用于编码代理(UTF-16)，66个非字符码位(例如BOM)，137,468个预留给私人使用，最终剩余974,530用于普通字符分配。</p><p>码位的最大值为<code>\x10FFFF</code>，对应二进制有21位，我们将2<sup>16个值分为一组，则Unicode总共可以分为17份，每一份称之为平面(Plane)，每一个平面有65,536(2</sup>16)个码位。</p><p>为什么Unicode的最大值为<code>\x10FFFF</code>？因为对于<code>UTF16</code>编码，双字节最多可编码2<sup>20个字符，单字节可编码2</sup>16个字符，加起来共17个平面的字符数。</p><p>下表为每个平面详情：</p><table><colgroup><col style="width:12%"><col style="width:18%"><col style="width:10%"><col style="width:58%"></colgroup><thead><tr class="header"><th style="text-align:center">平面编号</th><th style="text-align:center">码位范围(十六进制)</th><th style="text-align:center">名称简写</th><th style="text-align:center">名称</th></tr></thead><tbody><tr class="odd"><td style="text-align:center">Plane 0</td><td style="text-align:center">0000–FFFF</td><td style="text-align:center">BMP</td><td style="text-align:center">基础多语言平面(Basic Multilingual Plane)</td></tr><tr class="even"><td style="text-align:center">Plane 1</td><td style="text-align:center">10000–1FFFF</td><td style="text-align:center">SMP</td><td style="text-align:center">补充多语言平面(Supplementary Multilingual Plane)</td></tr><tr class="odd"><td style="text-align:center">Plane 2</td><td style="text-align:center">20000–2FFFF</td><td style="text-align:center">SIP</td><td style="text-align:center">补充表意语言平面(Supplementary Ideographic Plane)</td></tr><tr class="even"><td style="text-align:center">Plane 3</td><td style="text-align:center">30000–3FFFF</td><td style="text-align:center">TIP</td><td style="text-align:center">第三表意语言平面(Tertiary Ideographic Plane)</td></tr><tr class="odd"><td style="text-align:center">Planes 4–13</td><td style="text-align:center">40000–DFFFF</td><td style="text-align:center">- (未分配)</td><td style="text-align:center">- (未分配)</td></tr><tr class="even"><td style="text-align:center">Plane 14</td><td style="text-align:center">E0000–EFFFF</td><td style="text-align:center">SSP</td><td style="text-align:center">补充特殊用途平面(Supplementary Special-purpose Plane)</td></tr><tr class="odd"><td style="text-align:center">Planes 15–16</td><td style="text-align:center">F0000–10FFFF</td><td style="text-align:center">SPUA-A/B</td><td style="text-align:center">补充私有使用区平面(Supplementary Private Use Area planes)</td></tr></tbody></table><p>BMP为基础平面，目前收录了全球范围内大部分的字符。剩余的16个平面均为补充平面，用于进行新的字符的补充。其中私有平面，用于给个人做编码扩展，Unicode不指定字符编码。比如我编写了一个英雄联盟相关的程序，然后定义某一个字符代表一种游戏里的操作，就可以使用私有平面。</p><p>Unicode中还有一个概念：对于逻辑上属于一类的字符，称之为块(block)。例如:</p><ul><li><code>C0 Controls and Basic Latin</code>块，<code>\x0000</code>-<code>\x007F</code>，就是从ASCII继承来的前128个字符。</li><li><code>CJK Unified Ideographs</code>块，<code>\x4E00</code>-<code>\x9FFC</code>，包含大部分的中日韩文字，</li><li><code>Halfwidth and Fullwidth Forms</code>，<code>\xFF00</code>-<code>\xFFEF</code>，用于英文字母/数字/日文/个别符号等一些字符的全角-半角相互转换。</li><li><code>Miscellaneous Symbols and Pictographs</code>，<code>\x1F300</code>-<code>\x1F5FF</code>，<code>Supplemental Symbols and Pictographs</code>，<code>\1F900</code>-<code>\1F9FF</code>，包含大部分emoji表情</li></ul><p>另外还有一个比较重要的块<code>General Punctuation</code>，码位在<code>[2000,206F]</code>，包含一些符号以及一些特殊的分隔符、连接符、空格符等，这些符号不一定是可显字符，而是告诉解释器该如何操作当前字符。对于所有块，<span class="exturl" data-url="aHR0cHM6Ly91bmljb2RlLm9yZy9jaGFydHMvbmFtZXNsaXN0Lw==">可通过该链接查阅<i class="fa fa-external-link-alt"></i></span>。</p><h2 id="半角全角">半角/全角</h2><p>对于全角字符，在展示上占用的宽度是半角字符的两倍。每个字符都在Unicode标准里定义了是全角还是半角，对于不需要精确计算的简单业务场景，也可以简单的认为码位大于128的都是全角字符。</p><p>半角和全角，对应英文为halfwidth，fullwidth。半角全角对应的是UI显示的概念，对于定宽的字体，全角字符占用的宽度是半角字符的两倍。Unicode中每个字符都有一个<code>East_Asian_Width</code>属性，用于指示当前是全角字符还是半角字符，<span class="exturl" data-url="aHR0cHM6Ly93d3cudW5pY29kZS5vcmcvcmVwb3J0cy90cjQ0L3RyNDQtMjYuaHRtbCNWYWxpZGF0aW9uX29mX0VudW1lcmF0ZWQ=">具有以下值<i class="fa fa-external-link-alt"></i></span>：</p><ul><li>A， Ambiguous，根据上下文决定</li><li>F， Fullwidth，全角</li><li>H， Halfwidth，半角</li><li>N， Neutral，中立，作为半角</li><li>Na， Narrow，半角</li><li>W， Wide，全角</li></ul><p>在<span class="exturl" data-url="aHR0cHM6Ly93d3cudW5pY29kZS5vcmcvUHVibGljL1VDRC9sYXRlc3QvdWNkL0Vhc3RBc2lhbldpZHRoLnR4dA==">EastAsianWidth.txt文件<i class="fa fa-external-link-alt"></i></span>中列举了已显示声明<code>East_Asian_Width</code>属性的字符。对于不在该文件内的字符，符合下列规则的为<code>W</code>(全角)：</p><ul><li>the CJK Unified Ideographs Extension A block， 对应区间： <code>\x3400</code>..<code>\x4DBF</code></li><li>the CJK Unified Ideographs block， 对应区间： <code>\x4E00</code>..<code>\x9FFF</code></li><li>the CJK Compatibility Ideographs block， 对应区间： <code>\xF900</code>..<code>\xFAFF</code></li><li>the Supplementary Ideographic Plane， 对应区间： <code>\x20000</code>..<code>\x2FFFF</code></li><li>the Tertiary Ideographic Plane， 对应区间： <code>\x30000</code>..<code>\x3FFFF</code></li></ul><p>其余未列出的，默认为<code>N</code>(半角)。</p><p>在一些编码集中，有的字符既有全角形式也有半角形式，Unicode为了实现与这些编码集之间的无损转换，在第一平面的最后，<code>\xFF00</code>到<code>\xFFEF</code>区段，定义了用于半角全角转换的字符，如下所示：</p><ul><li><code>\xFF01</code>–<code>\xFF5E</code> 为ASCII的<code>\x21</code>到<code>\x7E</code>的全角形式。其中空格没有纳入进来，因为全角空格已通过<code>\x3000</code>定义。</li><li><code>\xFF65</code>–<code>\xFF9F</code> 为半角的日语字符。</li><li><code>\xFFA0</code>–<code>\xFFDC</code> 为半角的汉语字符。</li><li><code>\xFFE0</code>–<code>\xFFEE</code> 包含了一些符号，有半角有全角。</li></ul><p>对于在JS中判断字符是全角还是半角，目前下载量比较多的一个npm包：<code>is-fullwidth-code-point</code>。<code>string-width</code>依赖<code>is-fullwidth-code-point</code>计算字符长度。不过实际测试，<code>is-fullwidth-code-point</code>没有完全覆盖所有全角字符(<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9pcy1mdWxsd2lkdGgtY29kZS1wb2ludC9pc3N1ZXMvMTI=">issue<i class="fa fa-external-link-alt"></i></span>)，不过对于日常中文场景的开发够用了。</p><p>在日常开发中，对于UI展示的场景中，会比较关心字符宽度的问题。但是在涉及存储的时候，更关心的其实是存储该字符占用了几个字节。所以在涉及存储的场景下，关注点就不应该是全角/半角的概念，而是字符编码所占用的字节数。对于<code>UTF8</code>编码，码位小于等于128的使用1字节存储，大于128的会根据需要，使用双字节，三字节或四字节存储。所以多数场景下，为了简便，前后端都可以通过码位是否大于128来判断全角/半角。</p><h2 id="htmlxml实体转义">HTML/XML实体转义</h2><p>我们常说的HTML转义，实际正式应该称之为HTML实体引用。对应有两种引用方式：数字字符引用(numeric character reference) 和 字符实体引用(character entity reference)。</p><p>先说常见的字符实体引用，语法为：<code>&amp;name;</code>，name必须小写。例如：<code>&lt;</code>表示小于号<code>&lt;</code>。</p><p>可以进行引用的实体，称之为命名实体。命名实体有两种，一种是语法中内置的，另一种是在DTD中显示声明的：<code>&lt;!ENTITY name "value"&gt;</code>。</p><p>数字字符引用方式：</p><ul><li>十进制：<code>&amp;#nnnn;</code></li><li>十六进制：<code>&amp;#xhhhh;</code>， x必须小写。hhhh大小写可以混用。</li></ul><p>还是同样的例子，小于号<code>&lt;</code>如果使用数字字符引用的方式，为：<code>&lt;</code>。</p><h3 id="html">HTML</h3><p><span class="exturl" data-url="aHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvbmFtZWQtY2hhcmFjdGVycy5odG1sI25hbWVkLWNoYXJhY3Rlci1yZWZlcmVuY2Vz">通过该链接查看目前HTML5中支持的命名实体<i class="fa fa-external-link-alt"></i></span>。</p><h3 id="xml">XML</h3><p>XML规范中，有5个预定义的实体，如下所示，如果需要使用更多的实体转义，需要在DTD中声明。</p><table><colgroup><col style="width:5%"><col style="width:5%"><col style="width:16%"><col style="width:14%"><col style="width:9%"><col style="width:47%"></colgroup><thead><tr class="header"><th style="text-align:center">名称</th><th style="text-align:center">字符</th><th style="text-align:center">码位十六进制</th><th style="text-align:center">码位十进制</th><th style="text-align:center">标准</th><th style="text-align:center">名称全称</th></tr></thead><tbody><tr class="odd"><td style="text-align:center">quot</td><td style="text-align:center">"</td><td style="text-align:center"></td><td style="text-align:center">34</td><td style="text-align:center">XML 1.0</td><td style="text-align:center">quotation mark</td></tr><tr class="even"><td style="text-align:center">amp</td><td style="text-align:center">&amp;</td><td style="text-align:center"></td><td style="text-align:center">38</td><td style="text-align:center">XML 1.0</td><td style="text-align:center">ampersand</td></tr><tr class="odd"><td style="text-align:center">apos</td><td style="text-align:center">'</td><td style="text-align:center"></td><td style="text-align:center">39</td><td style="text-align:center">XML 1.0</td><td style="text-align:center">apostrophe (1.0: apostrophe-quote)</td></tr><tr class="even"><td style="text-align:center">lt</td><td style="text-align:center">&lt;</td><td style="text-align:center">003C</td><td style="text-align:center">60</td><td style="text-align:center">XML 1.0</td><td style="text-align:center">less-than sign</td></tr><tr class="odd"><td style="text-align:center">gt</td><td style="text-align:center">&gt;</td><td style="text-align:center">003E</td><td style="text-align:center">62</td><td style="text-align:center">XML 1.0</td><td style="text-align:center">greater-than sign</td></tr></tbody></table><h2 id="unicode-encoding-forms">Unicode Encoding Forms</h2><p>Unicode字符编码格式(Unicode Encoding Forms)，简写为:UTF，即：将一个Unicode字符保存为字节序列的格式规范，用于文件存储、数据传输等。Unicode标准支持3种编码格式，如下：</p><ul><li>UTF-32: 使用4字节表示一个Unicode字符。</li><li>UTF-16: 变长的编码格式，码位大于<code>\xFFFF</code>的字符，使用4字节存储，小于等于<code>\xFFFF</code>的字符，使用2字节存储。</li><li>UTF-8: 变长的编码格式，码位大于<code>\xFFFF</code>的字符，使用4字节存储，小于等于<code>\xFFFF</code>大于<code>\x07FF</code>的使用3字节，小于等于<code>\x07FF</code>大于<code>\x007F</code>的使用2字节，小于等于<code>\x007F</code>使用1字节。</li></ul><p>Unicode标准支持3种编码格式，<code>UTF32</code>/<code>UTF16</code>/<code>UTF8</code>，用于映射码位为 <code>\x0000</code>到<code>\xD7FF</code> 和 <code>\xE000</code>到<code>\x10FFFF</code> 的字符，即除去高位代理和低位代理的所有字符。至于什么是高位代理和低位代理后面会讲到。</p><h3 id="utf32">UTF32</h3><p>是一种定长编码格式，使用32位(4字节)表示Unicode中的一个码位。由于Unicode的码位实际只用了21位，所以多余部分前导0。例如字符小写字母a，对应码位为<code>\x61</code>，存储的字节序列为：<code>\x00000061</code>。</p><h3 id="utf16">UTF16</h3><p>变长编码格式，按平面区分，位于第一平面中的字符(<code>\x0000..\xD7FF</code>和<code>\xE000..\xFFFF</code>)，使用16位(2字节)存储，使用和码位相同的值。位于其他平面的字符(<code>\x10000..\x10FFFF</code>)，通过高位和低位代理使用32位(4字节)表示。</p><p>对于位于第一平面的值，即小于等于<code>\xFFFF</code>的值，使用2个字节就足够表示，所以直接使用两个字节表示其码位的值，如下所示：</p><table><thead><tr class="header"><th style="text-align:center">code point</th><th style="text-align:center">UTF16编码后实际存储的值</th></tr></thead><tbody><tr class="odd"><td style="text-align:center">xxxx xxxx xxxx xxxx</td><td style="text-align:center">xxxx xxxx xxxx xxxx</td></tr></tbody></table><p>位于其他平面平面的值，即大于<code>\xFFFF</code>的值，使用4个字节表示，如下所示：</p><table><colgroup><col style="width:41%"><col style="width:58%"></colgroup><thead><tr class="header"><th style="text-align:center">code point</th><th style="text-align:center">UTF16编码后实际存储的值(wwww = uuuuu - 1)</th></tr></thead><tbody><tr class="odd"><td style="text-align:center">000u uuuu hhhh hhxx xxxx xxxx</td><td style="text-align:center">1101 10ww wwhh hhhh 1101 11xx xxxx xxxx</td></tr></tbody></table><p>位于其他平面的值，即<code>\x10000</code>到<code>\x10FFFF</code>的值，二进制最高使用21位。将其拆分为两部分，即前11位和后10位，前11为用<code>hhhhhh hhhh</code>表示，后10位用<code>xxxxx xxxxx</code>表示。其中，前11位中，前5位是用来表示位于第几个平面，所以这里也特殊标注出来，用u表示，即前11位为：<code>uuuuuh hhhhh</code>。</p><p>由于这里前五位的有效值为<code>\x1</code>到<code>\x10</code>，所以可以减1，让有效值从0开始，则有效值变成了<code>\x00</code>到<code>\x0F</code>，即4位，减1后的值用w表示，从而前11位可以表示为： wwwwh hhhhh。</p><p>将前10位前导<code>110110</code>，后10位前导<code>110111</code>，即<code>UTF16</code>对于大于<code>\xFFFF</code>字符的表示如上述表格所示。</p><p>这里, 二进制<code>1101 1000 0000 0000</code>为<code>\xD800</code>，二进制<code>1101 1100 0000 0000</code>为<code>\xDC00</code>，从而，该规则简单描述如下：</p><ul><li>假设某个字符x位于<code>\x10000</code>到<code>\x10FFFF</code>之间，将其减去<code>\x10000</code>，得到x'，x'的范围为：<code>\x00000</code>–<code>\xFFFFF</code>。</li><li>将x'分成两部分，前10位和后10位，用w1和w2表示，其范围为<code>\x0000</code>–<code>\x03FF</code>。</li><li>将w1加上<code>\xD800</code>，得到w1'，范围为：<code>\xD800</code>–<code>\xDBFF</code>.</li><li>将w2加上<code>\xDC00</code>，得到w2'，范围为：<code>\xDC00</code>–<code>\xDFFF</code>.</li></ul><p>将w1'和w'2转换为二进制，即<code>UTF16</code>下x存储的字节序列。</p><pre class="line-numbers language-none"><code class="language-none">x&#39; &#x3D; yyyyyyyyyyxxxxxxxxxx   &#x2F;&#x2F; x - 0x10000
x1&#39; &#x3D; 110110yyyyyyyyyy      &#x2F;&#x2F; 0xD800 + yyyyyyyyyy
x2&#39; &#x3D; 110111xxxxxxxxxx      &#x2F;&#x2F; 0xDC00 + xxxxxxxxxx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="utf8">UTF8</h3><p>变长编码格式，是直接兼容ASCII的编码格式，对于能在1字节内保存的，直接保存为1字节。否则进行类似<code>UTF16</code>高低位代理的方式，最高位使用4字节。</p><p><code>UTF8</code>中没有减1的逻辑，只是简单的增加前缀，具体规则如下:</p><table style="width:100%"><colgroup><col style="width:26%"><col style="width:30%"><col style="width:10%"><col style="width:10%"><col style="width:10%"><col style="width:10%"></colgroup><thead><tr class="header"><th style="text-align:center">范围</th><th style="text-align:center">码位(二进制)</th><th style="text-align:center">第1个字节</th><th style="text-align:center">第2个字节</th><th style="text-align:center">第3个字节</th><th style="text-align:center">第4个字节</th></tr></thead><tbody><tr class="odd"><td style="text-align:center">.. 007F(7位)</td><td style="text-align:center">00000000 0xxxxxxx</td><td style="text-align:center">0xxxxxxx</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr class="even"><td style="text-align:center">.. 07FF(11位)</td><td style="text-align:center">00000yyy yyxxxxxx</td><td style="text-align:center">110yyyyy</td><td style="text-align:center">10xxxxxx</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr class="odd"><td style="text-align:center">..</td><td style="text-align:center">zzzzyyyy yyxxxxxx</td><td style="text-align:center">1110zzzz</td><td style="text-align:center">10yyyyyy</td><td style="text-align:center">10xxxxxx</td><td style="text-align:center">-</td></tr><tr class="even"><td style="text-align:center">.. 10FFFF</td><td style="text-align:center">000uuuuu zzzzyyyy yyxxxxxx</td><td style="text-align:center">11110uuu</td><td style="text-align:center">10uuzzzz</td><td style="text-align:center">10yyyyyy</td><td style="text-align:center">10xxxxxx</td></tr></tbody></table><p>在<code>UTF8</code>中，</p><ul><li>如果字节序列以<code>0</code>开头，代表当前字节本身表示了一个字符。</li><li>如果为<code>10</code>开头，则代表当前字节为多字节字符中的一个字节。</li><li>如果当前字符以<code>11</code>开头，则前面<code>1</code>的个数，代表当前字符所使用的字节数，2个<code>1</code>代表使用两个字节表示一个字符，3个<code>1</code>代表使用3个字节表示一个字符。</li></ul><h2 id="byte-order-mark">Byte order mark</h2><p>字节顺序标记(Byte order mark)，指预定义的，放置在文本流开头的，一段特殊的字节序列，用于标记当前文本使用的哪种编码格式(<code>UTF32</code>/<code>UTF16</code>/<code>UTF8</code>)。具体规则如下：</p><table><thead><tr class="header"><th style="text-align:center">编码格式</th><th style="text-align:center">文本流开头的字节序列</th></tr></thead><tbody><tr class="odd"><td style="text-align:center">UTF-8</td><td style="text-align:center">EF BB BF</td></tr><tr class="even"><td style="text-align:center">UTF-16 (BE)</td><td style="text-align:center">FE FF</td></tr><tr class="odd"><td style="text-align:center">UTF-16 (LE)</td><td style="text-align:center">FF FE</td></tr><tr class="even"><td style="text-align:center">UTF-32 (BE)</td><td style="text-align:center">00 00 FE FF</td></tr><tr class="odd"><td style="text-align:center">UTF-32 (LE)</td><td style="text-align:center">FF FE 00 00</td></tr></tbody></table><p>例如Windows的记事本应用，将文本保存为<code>UTF8</code>格式时，会在文本内容的开头添加<code>\xEF</code>,<code>\xBB</code>,<code>\BF</code>3个字节。记事本应用在读取一个文本文件的时候，发现前三个字节为<code>\xEF</code>,<code>\xBB</code>,<code>\BF</code>，则认为接下来的字节流通过<code>UTF8</code>形式解析。</p><h3 id="endianness">endianness</h3><p>字节顺序(endianness)，这里特指当保存一个数字类型数据时，存储的字节序列的顺序。分为大端序(big-endian，简写BE)和小端序(little-endian，简写LE)。</p><p>假设当前要将一个16位的整型数字<code>\x0A0B</code>指向内存地址。</p><p>对于大端序的CPU，随着内存地址的增加，认为其存储的值的重要性是递减的，所以大端序的CPU会在100的位置上存储<code>\x0A</code>，在101的位置上存储<code>\x0B</code>。</p><p>对于小端序的CPU，随着内存地址的增加，认为其存储的值的重要性是递增的，所以小端序的CPU会在100的位置上存储<code>\x0B</code>，在101的位置上存储<code>\x0A</code>。</p><p>所以反过来，假设现在在内存中，地址100的地方存储了<code>\xAA</code>，在101的地方存储了<code>\xBB</code>，假设有一个<code>int16</code>变量指向，对于大端序CPU会认为该变量的值为<code>\xAABB</code>，对于小端序CPU会认为该变量的值为<code>\xBBAA</code>。</p><h3 id="byte-order-mark-1">Byte order mark</h3><p>因为各个系统之间的字节顺序不同，所以在传输和交换Unicode文本时，要告诉对方当前是以什么顺序保存的，从而接收方才能有效的进行解析。</p><p>字节序列标记(Byte order mark，简写BOM)，特指<code>\xFEFF</code>字符。在文本的开头，添加<code>\xFEFF</code>字符，用于标识当前文本的字节顺序。</p><ul><li>对于<code>UTF8</code>编码格式，该字符会被保存为<code>\xEFBBBF</code></li><li>对于<code>UTF16 BE</code>编码格式，该字符会被保存为<code>\xFEFF</code></li><li>对于<code>UTF16 LE</code>编码格式，该字符会被保存为<code>\xFFFE</code></li><li>对于<code>UTF32 BE</code>编码格式，该字符会被保存为<code>\x0000FEFF</code></li><li>对于<code>UTF32 LE</code>编码格式，该字符会被保存为<code>\xFFFE0000</code></li></ul><p>所以，解析程序通过判断BOM即可确定接下来的文本所使用的编码格式以及字节顺序。在Unicode中，<code>\xFEFF</code>是专门用作BOM的，如果该字符出现在文本中间，会被当做「零宽非换行空格」(zero-width non-breaking space)，其实就是跳过的意思。同样的，对于它的一个镜像字符<code>\xFFFE</code>，如果出现也会被跳过。</p><p>BOM可以省略，不是必须的，因为：</p><ol type="1"><li>在某些场景下已经预设了编码格式或字节顺序，例如W3C的HTML5规范中，如果指定charset为utf-8，则会默认按照utf-8解析，而如果文件流指定了BOM，则会优先使用BOM指定的编码格式和字节顺序。</li><li>当BOM被省略时，大部分解析器都会对文本流进行推算，推算出编码格式和字节顺序，但是这个推算并不是绝对可靠的。</li></ol><p>当使用<code>UTF8</code>格式保存文本时，Unicode标准建议，如果原文本没有BOM，则不要添加BOM。因为：</p><ol type="1"><li><code>UTF8</code>是单字节存储的，不存在字节顺序问题。</li><li>解析器会默认使用<code>UTF8</code>解析文本。</li><li>因为ASCII和<code>UTF8</code>是一一对应的，如果不添加BOM，则ASCII和Unicode可以相互兼容，如果加上了BOM，就打破了相互兼容。</li></ol><p>不过当前很多系统或平台并没有按照规范来，在解析文本的时候会要求<code>UTF8</code>要有BOM，以及在保存文本的时候会加上BOM，例如windows系统的记事本。</p><p>而对于<code>UTF16</code>和<code>UTF32</code>，要添加BOM，不然在解析的出的文本可能就是乱码，因为解析器在对字节顺序的推算上，并不能保证完全可靠。</p><h1 id="组合字符">组合字符</h1><p>Unicode 有一类字符称为组合字符，它可以附加在前一个非组合字符上，从而使整体看起来像是一个字符。 Unicode 组合字符设计上，并没有加组合数量限制，这样使我们可以无限加这类组合字符, 例如汉语拼音字母「ü」上面的两个小点，或「á」、「à」字母上面的音标。</p><p><strong>组合字符有两种</strong></p><ul><li>组合字符: 将组合字符置于需要修饰的目标字符后边，使目标字符被渲染（或打印）成相应结果。</li><li>预组合字符: 事先将字符组好并赋予码位。字符串中有可能同时使用组合字符和预组字符。这导致了若要比较两个unicode字符串时，需要先运行unicode字符的等价性。</li></ul><p><strong>组合字符在 Unicode 统一码中存在多个区块，编码范围主要有：</strong></p><ul><li><p>组合用附加符号（<span class="exturl" data-url="aHR0cHM6Ly91bmljb2RlLm9yZy9jaGFydHMvUERGL1UwMzAwLnBkZg==">Combining Diacritical Marks<i class="fa fa-external-link-alt"></i></span>）：区间从 <code>U+0300</code> 到 <code>U+036F</code> 共 80 字。</p><p>它常与字母组合，修饰字母的读音。但其实它的定义比较宽泛，不但包括了拉丁、希腊及西里尔系文字中的变音记号，也包括那些不是变音但不占据宽度的附加标记。例如<code>&amp;#x61;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3655;&amp;#3662;&amp;#3662;&amp;#3662;&amp;#3662;&amp;#3657;&amp;#3657;&amp;#3657;&amp;#3657;</code> 为 a็็็็๎๎๎๎้้้้</p></li><li><p>组合用附加符号补集（<span class="exturl" data-url="aHR0cHM6Ly91bmljb2RlLm9yZy9jaGFydHMvUERGL1UxREMwLnBkZg==">Combining Diacritical Marks Supplement<i class="fa fa-external-link-alt"></i></span>）：区间从 <code>U+1DC0</code> 到 <code>U+1DFF</code> 共 64 字。</p><p>它常与一些符号组合，用于渲染和修饰符号. 例如: <code>&amp;#x1DD0;&amp;#x1DD0;&amp;#x61;&amp;#x1DC4;&amp;#x1DC4;</code> 为 ᷐᷐a᷄᷄</p></li><li><p>组合用记号（<span class="exturl" data-url="aHR0cHM6Ly91bmljb2RlLm9yZy9jaGFydHMvUERGL1UyMEQwLnBkZg==">Combining Diacritical Marks for Symbols<i class="fa fa-external-link-alt"></i></span>）：区间从 <code>U+20D0</code> 到 <code>U+20FF</code> 共 48 字。例如: <code>&amp;#x6587;&amp;#x20dd;</code> 为 文⃝</p></li><li><p>组合用半形符号（<span class="exturl" data-url="aHR0cHM6Ly91bmljb2RlLm9yZy9jaGFydHMvUERGL1VGRTIwLnBkZg==">Combining Half Marks<i class="fa fa-external-link-alt"></i></span>）：区间从 <code>U+FE20</code> 到 <code>U+FE2F</code> 共 16 字。</p><p>多个附加字符可以叠加到一个基础字符上. 例如 <code>&amp;#xFE20;&amp;#xFE2D;&amp;#x61;</code> 为 ︭︠a</p></li></ul><p>组合字符也可以用于 Emoji, 例如 <code>&amp;#x270B;</code> 为 ✋, <code>&amp;#x270B;&amp;#x1F3FB;</code> 为 ✋🏻</p><h1 id="零宽字符">零宽字符</h1><p>零宽字符不可见，不可打印，主要作用于调整字符的显示格式.</p><p><strong>零宽字符主要有以下几类：</strong></p><ul><li>零宽度空格符 (zero-width space) U+200B : 用于较长单词的换行分隔</li><li>零宽度非断空格符 (zero width no-break space) U+FEFF : 用于阻止特定位置的换行分隔</li><li>零宽度连字符 (zero-width joiner) U+200D : 用于阿拉伯文与印度语系等文字中，使不会发生连字的字符间产生连字效果</li><li>零宽度断字符 (zero-width non-joiner) U+200C : 用于阿拉伯文，德文，印度语系等文字中，阻止会发生连字的字符间的连字效果</li><li>左至右符 (left-to-right mark) U+200E : 用于在混合文字方向的多种语言文本中（例：混合左至右书写的英语与右至左书写的希伯来语），规定排版文字书写方向为左至右</li><li>右至左符 (right-to-left mark) U+200F : 用于在混合文字方向的多种语言文本中，规定排版文字书写方向为右至左</li></ul><p><strong>零宽字符可以用于:</strong></p><ul><li>数据防爬: 将零宽度字符插入文本中，干扰关键字匹配。爬虫得到的带有零宽度字符的数据会影响他们的分析，但不会影响用户的阅读数据。</li><li>信息传递: 将自定义组合的零宽度字符插入文本中，用户复制后会携带不可见信息，达到传递作用。</li><li>传递隐密信息: 利用零宽度字符不可见的特性，我们可以用零宽度字符在任何未对零宽度字符做过滤的网页内插入不可见的隐形文本。下面是一个简单的利用零宽度字符对文本进行加密/解密的</li><li>隐形水印: 通过零宽度字符我们可以对内部文件添加隐形水印。在浏览者登录页面对内部文件进行浏览时，我们可以在文件的各处插入使用零宽度字符加密的浏览者信息，如果浏览者又恰好使用复制粘贴的方式在公共媒体上匿名分享了这个文件，我们就能通过嵌入在文件中的隐形水印轻松找到分享者了。</li><li>加密信息分享: 通过零宽度字符我们可以在任何网站上分享任何信息。敏感信息的审核与过滤在当今的互联网社区中扮演着至关重要的角色，但是零宽度字符却能如入无人之境一般轻松地穿透这两层信息分享的屏障。对比明文哈希表加密信息的方式，零宽度字符加密在网上的隐蔽性可以说是达到了一个新的高度。仅仅需要一个简单的识别/解密零宽度字符的浏览器插件，任何网站都可以成为信息分享的游乐场。</li><li>逃脱敏感词过滤: 通过零宽度字符我们可以轻松逃脱敏感词过滤。敏感词自动过滤是维持互联网社区秩序的一项重要工具，只需倒入敏感词库和匹配相应敏感词，即可将大量的非法词汇拒之门外。使用谐音与拼音来逃脱敏感词过滤会让语言传递信息的效率降低，而使用零宽度字符可以在逃脱敏感词过滤的同时将词义原封不动地传达给接受者，大大提高信息传播者与接受者之间交流的效率。<strong>开发时只过滤 <code>\u200b</code></strong> 就够了</li></ul><h2 id="emoji-中的零宽字符">Emoji 中的零宽字符</h2><p>零宽字符可以用于 Emoji 的组合, 例如</p><ul><li><p>在构建 👨🏻‍🦳 时</p><ul><li>👨🏻‍🦳 为 <code>&amp;#x1F468;&amp;#x1F3FB;&amp;#x200D;&amp;#x1F9B3;</code></li><li>👨🏻‍ 为 <code>&amp;#x1F468;&amp;#x1F3FB;&amp;#x200D;</code></li><li>👨🏻 为 <code>&amp;#x1F468;&amp;#x1F3FB;</code></li><li>👨 为 <code>&amp;#x1F468;</code></li></ul><p>其中</p><ul><li>👨 - U+1F468 - 基础字符</li><li>🏻 - U+1F3FB - 组合字符，表示肤色</li><li><ul><li>U+200D - <strong>零宽度连字符</strong>，表示上下相连</li></ul></li><li>🦳 - U+1F9B3 - 基础字符，表示发型</li></ul><p>零字宽字符连接了发型与颜色</p></li><li><p>👩‍❤‍👨 为 <code>&amp;#x1F469;&amp;#x200D;&amp;#x2764;&amp;#x200D;&amp;#x1F468;</code>, 其中</p><ul><li>👩 - U+1F469 - 基础字符</li><li><ul><li>U+200D - 零宽度连字符，表示上下相连</li></ul></li><li>❤ - U+2764 - 基础字符</li><li><ul><li>U+200D - 零宽度连字符，表示上下相连</li></ul></li><li>👨 - U+1F468 - 基础字符</li></ul></li><li><p>👩‍👩‍👦‍👦 为 <code>&amp;#x1F469;&amp;#x200D;&amp;#x1F469;&amp;#x200D;&amp;#x1F466;&amp;#x200D;&amp;#x1F466;</code>, 其中</p><ul><li>👩 - U+1F469 - 基础字符</li><li><ul><li>U+200D - 零宽度连字符，表示上下相连</li></ul></li><li>👩 - U+1F469 - 基础字符</li><li><ul><li>U+200D - 零宽度连字符，表示上下相连</li></ul></li><li>👦 - U+1F466 - 基础字符</li><li><ul><li>U+200D - 零宽度连字符，表示上下相连</li></ul></li><li>👦 - U+1F466 - 基础字符</li></ul></li></ul></div><footer class="post-footer"><p class="post-end-coffee">-------- 本文结束 <i class="fa-solid fa-mug-hot"></i> 感谢阅读 --------</p><script>let post_body = document.querySelector('.post-body');
  let theme_switch = document.getElementById('theme_switch');
  const theme = {};
  Object.defineProperty(theme, 'value', {
    set(v){
      post_body.setAttribute('theme', v);
      localStorage.setItem('md_theme', v);
      theme_switch.value = v;
    }
  })
  theme.value = localStorage.getItem('md_theme') || 'sneh';
  theme_switch.addEventListener('change',e=>theme.value = e.target.value)
  document.getElementById('theme_switch_wapper').classList.remove('hidden');</script><div class="reward-container"><div></div><button>赞赏</button><div class="post-reward"><div><img src="/images/wechatpay.png" alt="Liu Kairui 微信"> <span>微信</span></div><div><img src="/images/alipay.png" alt="Liu Kairui 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>Liu Kairui</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://blog.liukairui.me/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" title="一些字符编码规则">https://blog.liukairui.me/article/Unicode编码规范/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div><div class="post-tags"><a href="/tags/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" rel="tag"><i class="fa fa-tag"></i> 编码规范</a> <a href="/tags/Unicode/" rel="tag"><i class="fa fa-tag"></i> Unicode</a></div><div class="post-nav"><div class="post-nav-item"><a href="/article/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E9%80%9F%E8%AE%B0/" rel="prev" title="🏗️前端面试题速记"><i class="fa fa-chevron-left"></i> 🏗️前端面试题速记</a></div><div class="post-nav-item"><a href="/article/VueConf2022-Vue%E7%9A%84%E8%BF%9B%E5%8C%96%E5%8E%86%E7%A8%8B/" rel="next" title="VueConf 2022 - Vue 的进化历程">VueConf 2022 - Vue 的进化历程 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Liu Kairui</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span>总字数：</span> <span title="总字数">1.8m</span></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9taXN0Lw==">NexT.Mist</span> 强力驱动</div><div class="addthis_inline_share_toolbox"><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-630c5bd30a606ba8" async></script></div><div id="time_and_count"></div><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script><script>function timer() {
    var ages = moment.preciseDiff(moment(),moment(20201101,"YYYYMMDD"));
    ages = ages.replace(/years?/, "年");
    ages = ages.replace(/months?/, "月");
    ages = ages.replace(/days?/, "天");
    ages = ages.replace(/hours?/, "小时");
    ages = ages.replace(/minutes?/, "分");
    ages = ages.replace(/seconds?/, "秒");
    ages = ages.replace(/\d+/g, '<span class="daysCnt" style="color: #1890ff">$&</span>');
    div.innerHTML = `小站已悄悄运行了 ${ages}`;
    div.className="workDays";
  }
  let div = document.createElement("div");
  let time_and_count = document.getElementById("time_and_count");
  time_and_count.appendChild(div);
  timer();
  setInterval("timer()",1000)</script><script>let footer = document.querySelector('.footer-inner')

let wordCount = document.querySelector('.wordcount')
wordCount.innerHTML = wordCount.innerText.replace('：',': ').replace('m','M')
if(wordCount){
  time_and_count.appendChild(wordCount);
}

let busaunzi = document.querySelector('.busuanzi-count')
if(busaunzi){
  footer.appendChild(busaunzi);
}

let powerby = document.querySelector('.powered-by')
if(powerby){
  footer.appendChild(powerby);
}</script></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.14.2/algoliasearch-lite.umd.js" integrity="sha256-dImjLPUsG/6p3+i7gVKBiDM8EemJAhQ0VvkRK2pVsQY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/4.46.3/instantsearch.production.min.js" integrity="sha256-TDBtvQ4sIGgJS5bk8VOKto+yvrblCB/JxE/9odR5u+M=" crossorigin="anonymous"></script><script src="/js/third-party/search/algolia-search.js"></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.8/pdfobject.min.js","integrity":"sha256-tu9j5pBilBQrWSDePOOajCUdz6hWsid/lBNzK4KgEPM="},"url":"/lib/pdf/web/viewer"}</script><script src="/js/third-party/tags/pdf.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":"forest","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.7/mermaid.min.js","integrity":"sha256-G58AID1YoX5YaEtWfXSI0VLrZ6N4kvNvwg0BI8zUFxE="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"ABKlVtS4cyaWYEwunPyK3sXt-9Nh9j0Va","app_key":"xxGXdTTEGEVifs2TLB35844I","server_url":"https://abklvts4.lc-cn-e1-shared.com","security":false}</script><script src="/js/third-party/statistics/lean-analytics.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/js/third-party/math/mathjax.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":false,"archive":false,"delay":true,"timeout":3000,"priority":true,"url":"https://blog.liukairui.me/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/"}</script><script src="/js/third-party/quicklink.js"></script><script src="https://unpkg.com/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options = {
  bottom: '71px',
  right: 'unset',
  left: '30px',
  time: '0s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#222',
  buttonColorLight: '#222',
  saveInCookies: true,
  label: '',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();</script><script>NexT.utils.loadComments('#valine-comments', () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    new Valine(Object.assign({"enable":true,"appId":"ABKlVtS4cyaWYEwunPyK3sXt-9Nh9j0Va","appKey":"xxGXdTTEGEVifs2TLB35844I","serverURLs":"https://abklvts4.lc-cn-e1-shared.com","placeholder":"请开始你的表演","avatar":"identicon","meta":["nick","mail","link"],"pageSize":10,"lang":"zh-CN","visitor":false,"comment_count":true,"recordIP":true,"enableQQ":true,"requiredFields":[]}, {
      el: '#valine-comments',
      path: "/article/Unicode%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/",
      serverURLs: "https://abklvts4.lc-cn-e1-shared.com"
    }));
  }, window.Valine);
});</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"right",width:150,height:300},mobile:{show:!1},react:{opacity:.7}})</script></body></html>