<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>LiuKairui&#39;s Blog</title>
  
  <subtitle>整点薯条</subtitle>
  <link href="https://blog.liukairui.me/atom.xml" rel="self"/>
  
  <link href="https://blog.liukairui.me/"/>
  <updated>2024-06-20T17:00:00.000Z</updated>
  <id>https://blog.liukairui.me/</id>
  
  <author>
    <name>Liu Kairui</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>COMPSCI 711 - 并行与分布式计算笔记</title>
    <link href="https://blog.liukairui.me/article/COMPSCI711-%E5%B9%B6%E8%A1%8C%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97%E7%AC%94%E8%AE%B0/"/>
    <id>https://blog.liukairui.me/article/COMPSCI711-%E5%B9%B6%E8%A1%8C%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97%E7%AC%94%E8%AE%B0/</id>
    <published>2024-06-20T17:00:00.000Z</published>
    <updated>2024-06-20T17:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="课程结构">课程结构</h2><p>课程分为分布式算法与并行计算两个部分.</p><p><strong>分布式算法</strong></p><p>与中心化算法相比,分布式算法的难点在于在分布式环境下通信可能被无限延迟,节点可能随时崩溃且无法及时同步状态.在分布式算法可以分为以下几个独立的部分</p><ol type="1"><li>逻辑时钟: 我们发现传统的时间戳无法胜任事务的逻辑顺序排序问题.于是我们提出了最简单的逻辑时间 (logical time).但是逻辑时间无法解决系统间的逻辑顺序排序,于是我们提出了基于因果逻辑关系实现的全序逻辑时钟 (total ordered logicalclock). 部分逻辑时钟无法解决系统间无因果关系事务排序问题,于是我们又提出了部分有序逻辑时钟 (partially ordered logical clock).</li><li>多播问题: 我们希望向系统中部分节点发送信息,但是分布式并不能像中心化广播一样可靠. 根据希望保证消息到达的顺序,我们将多播消息到达顺序分为了 FIFO 有序, 因果有序 (causal ordering),总体有序 (total ordering) 并设计了对应的算法.最后我们还考虑了如何设计可靠的多播以实现让所有预期节点都能最终收到消息</li><li>分布式互斥算法: 我们希望在分布式节点中实现对资源的独占访问.考虑到分布式系统数据传输特性, 实现可靠的互斥访问比中心化的 mutex实现困难一些, 我们提出了基于仲裁集 (Quorum-based) 与基于令牌(token-base) 的互斥实现算法.</li><li>死锁检测: 在分布式系统中, 由于节点状态不可知,死锁检测需要对系统做建图操作然后判断是否处于死锁.我们使用类回声算法的方式实现</li><li>垃圾回收: 在分布式系统中, 我们不能采用基于引用的简单垃圾回收机制.我们提出了加权计数的模式以解决分布式垃圾回收的节点崩溃与通信延迟问题</li><li>快照: 我们希望让所有的节点同时完成系统快照以规避快照状态不一致问题.可是不同节点无法实现同时拍照. 我们使用 Chandy-Lamport实现了所有节点在统一逻辑时间完成快照以实现所有节点在相同状态时拍照.</li><li>共识: 我们希望所有节点对同一变量的值达成一致, 但是不要求的具体值.为了让节点最终可以达成一致且不陷入无限修正的状态, 我们使用了 Paxos算法</li><li>一致性: 介绍了一种衡量系统性能的 CAP 理论.</li><li>P2P系统: 介绍了在 P2P 系统中,我们如何完成文件在系统中的管理与寻址.</li></ol><p><strong>并行计算</strong></p><p>这部分从 CPU 实现的层次, 介绍了 CPU 的不同核心在并行计算时如何工作.可以将课程分为如下部分</p><ol type="1"><li>缓存与一致性问题: CPU 会从内存中缓存部分数据, 我们希望 CPU可以尽可能缓存会反复利用的数据, 同一数据在不同 CPU 核心之间可以保持一致.对于 CPU 缓存, 我们提出了直接映射缓存 (Directed-Mapped Caches),全相连缓存 (Fully Associative Cache), 集合关联缓存 (Set-AssociativeCache) 三种实现方式. 对于缓存一致性问题,我们提出了写更新协议与写失效协议. 我们重点介绍了写失效协议中 MSI, MESI,MOSI, MOESI 四种实现按方式.</li><li>流水线: 我们希望同一 CPU 核心中的不同部件 (寄存器, LRU)同时可以被高效利用起来. 因此我们提出了流水线式的指令执行方式.但是流水线式的指令执行会出现竞态, 造成流水线的风险 (Hazard).针对不同的风险, 我们提出了不同的解决方案.</li><li>Superscalar 处理器: Superscalar 是一种简单的多核处理器.在这里我们介绍了一种叫 MISP R10K 的 Superscalar 处理器,但是这种处理器的多核并不完全独立 (仅有两核可以同时浮点计算,另外两核可以整数运算).我们将尝试手动模拟将汇编指令在四个核心上执行并尝试达到最大资源利用率</li><li>多处理器调度: 指令在理想的多核处理器上调度是一个 NP 问题.我们尝试了部分贪心算法, 可惜并不能达到理论最优调度.我们又提出了指令优先级的方案, 以期实现较优调度. 最后,我们还模拟了循环展开以提升资源利用率</li><li>进程与线程: 介绍了进程与线程的区别. 针对竞态问题, 我们提出了互斥锁,条件变量和信号量来解决问题.</li></ol><h2 id="w1l1-逻辑时间-logical-time">W1L1 逻辑时间 (logical time)</h2><ul><li><p>分布式系统: 系统由多台机器组成</p></li><li><p>内容</p><ul><li>多机器并行管理算法</li><li>多核心并行处理方法</li></ul></li><li><p><strong>分布式系统时间问题</strong></p><ul><li>为什么传统时间服务不可靠: 分布式系统需要时间服务,但是机器之间很难实现时间戳的同步, 机器时间存在时区问题</li><li>时间不统一带来的问题: 时序操作出错</li><li>分布式系统的时间服务需求: 机器之间时间不一定完美同步,服务之间的相对时序应该正确</li></ul></li><li><p>逻辑时间: 用于标识分布式系统中事件之间逻辑顺序的时间戳(计数器)</p></li><li><p>发生在之前:</p><ul><li>在一个进程中如果事件 A 发生在 B 之前, 就记<code>A -&gt; B</code>,</li><li>在分布式系统中 <code>A -&gt; B</code> 也可以根据逻辑推出 (发送请求-&gt; 接受请求)</li><li><code>-&gt;</code> 具有传递性</li><li>在理想情况下, 如果 <code>A -&gt;</code> B, 那么 A 的时间戳小于 B的时间戳</li></ul></li><li><p>逻辑时钟实现方法</p><p>对于本机事件, 计数器++. 对于外部事件, 重置计数器到本机与外部的最大值,计数器++</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">loopforever  <span class="token keyword">if</span> an event occurs <span class="token operator">in</span> the process    <span class="token keyword">then</span> assign the <span class="token keyword">value</span> <span class="token keyword">of</span> clock <span class="token keyword">to</span> the event<span class="token punctuation">;</span>    clock :<span class="token operator">=</span> clock <span class="token operator">+</span> <span class="token number">1</span>  endif  <span class="token keyword">if</span> a message m <span class="token operator">is</span> received    <span class="token keyword">then</span> clock : <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">,</span> clock<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 注意</span>    assign the <span class="token keyword">value</span> <span class="token keyword">of</span> clock <span class="token keyword">to</span> the receiving message event    clock :<span class="token operator">=</span> clock <span class="token operator">+</span> <span class="token number">1</span>  endifendloop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意在接受消息的时候的 clock 确定, 例如</p><ul><li>P1 发送 M(2), P2 在接受前执行 B(0), 接收事件为 C(max(2,0+1)+1) =C(2)</li><li>P1 发送 M(2), P2 在接受前执行 B(2), 接收事件为C(max(2,<strong>2+1)+1</strong>) = C(4)</li></ul></li><li><p>全序逻辑值 (Total Order Logic Value): 如果两个进程存在通信,我们可以在通信的时候借助因果关系修正逻辑时间</p><ul><li>进程 P1 执行事务 A(0)</li><li>进程 P2 执行事务 B(0)</li><li>进程 P1 发送事务 C(1)</li><li>进程 P2 接受事务 D(2) [完成时间戳修正]</li></ul><p>但是如果两个进程的<strong>逻辑时间值相同且没有因果关系</strong>,我们就无法得出先后关系. 例如</p><ul><li>进程 P1 执行事务 A(0)</li><li>进程 P2 执行事务 B(0)</li><li>进程 P1 执行事务 C(1)</li><li>进程 P2 执行事务 D(1)</li></ul><p>此时我们将无法确定 A, B 的先后顺序</p><p>为了解决这一问题引入全序逻辑值 <code>(逻辑时间戳, 进程号码)</code>,一般约定: 进程时间戳不同时以逻辑时间戳大小确定关系,逻辑时间戳相同时候以进程号确定关系</p><ul><li>进程 P1 执行事务 A(0, 1)</li><li>进程 P2 执行事务 B(0, 2)</li><li>进程 P1 执行事务 C(1, 1)</li><li>进程 P2 执行事务 D(1, 2)</li></ul><p>得出先后关系, A B C D</p><p>这虽然不能精确反应不相关进程的先后顺序,但是仍然解决了排序问题</p></li></ul><h2 id="w1l2-部分有序逻辑时钟partially-ordered-logical-clock">W1L2部分有序逻辑时钟(Partially ordered logical clock)</h2><ul><li><p>全序时间戳并不能完美反应时序关系</p><p><img src="./img/01.png" /></p><p>对于进程 P1, P2: P1 在 (1, P1) 时与 P2 通信, 进行了时间戳纠正,我们可以得到 A, B, E, F, G, H, J, K 的逻辑关系, 但是我们得不到 C, K事件的逻辑关系, 但是因为 C, K 之间本身就没有通信, 我们也不会去研究 C, K的因果关系.</p></li><li><p>部分有序逻辑时钟:</p><p>我们发现获取一个精确的逻辑时间戳是困难的,且逻辑时间戳并不能完美表示时序,因此我们只希望对有因果逻辑关系的事件赋时间戳, 因此引入了部分有序时间戳.部分有序时间戳是一个集合, 集合中的元素是 (进程, 逻辑时间) 的组合,表示该事件在此事件或此事件后发生 <code>&#123;(p,1), (q,2), (r,3)&#125;</code>就表示事件在这三个进程的对应时间时发生时候或者这三个进程的对应时间后发生</p><p><img src="./img/02.png" /></p><ul><li>最开始只有进程 p, 时间戳为 {}</li><li>执行事务 a, 加入时间戳 <code>&#123;(p,1)&#125;</code></li><li>创建子进程 r, q</li><li>进程 p 执行事务 e, 加入时间戳 <code>(p,2)</code>, 继承时间戳<code>(p,1)</code>, 因为<code>(p,2)</code> 已经足够表示在<code>(p,1)</code> 后, 因此不需要 <code>(p,1)</code> 得到<code>&#123;(p,2)&#125;</code></li><li>进程 r 执行事务 h, 加入时间戳 <code>(r,1)</code>, 继承时间戳<code>(p,1)</code>, 得到 <code>&#123;(p,1), (r,1)&#125;</code></li><li>r 创建子进程 s, t</li><li>进程 t 执行事务 k, 加入时间戳 <code>(t,1)</code>, 继承时间戳<code>&#123;(p,1), (r,1)&#125;</code>, 得到<code>&#123;(p,1), (r,1), (t,1)&#125;</code></li><li>进程 s 执行事务 i, 加入时间戳 <code>(s,1)</code>, 继承时间戳<code>&#123;(p,1), (r,1)&#125;</code>, 得到<code>&#123;(p,1), (r,1), (s,1)&#125;</code></li><li>进程 p 执行事务 f, 加入时间戳 <code>(p,3)</code>, 继承时间戳<code>(p,2)</code>, 因为<code>(p,3)</code> 已经足够表示在<code>(p,2)</code> 后, 因此不需要 <code>(p,2)</code> 得到<code>&#123;(p,3)&#125;</code></li><li>事务 f, i 进程双向通信, 双向添加时间戳 <code>&#123;(p,3)&#125;</code>,<code>&#123;(p,1), (r,1), (s,1)&#125;</code>, <code>(p,3)</code> 可以表示在<code>(p,1)</code> 后, 所以 f, i 合并为<code>&#123;(p,3), (r,1), (s,1)&#125;</code></li><li>进程 s, t 结束, r 执行事务 i, 加入时间戳 <code>(t,2)</code>,继承时间戳 <code>&#123;(p,3), (r,1), (s,1)&#125;</code>,<code>&#123;(p,1), (r,1), (t,1)&#125;</code>, 得到<code>&#123;(p,3), (r,1), (t,1), (s,1)&#125;</code></li><li>进程 q 执行事务 b, 加入时间戳 <code>(q,1)</code>, 继承时间戳<code>&#123;(p,1)&#125;</code>, 得到 <code>&#123;(p,1), (q,1)&#125;</code></li><li>进程 q 执行事务 c, 加入时间戳 <code>(q,2)</code>, 继承时间戳<code>&#123;(p,1), (q,1)&#125;</code>, 得到 <code>&#123;(p,1), (q,2)&#125;</code></li><li>进程 p 执行事务 g, 加入时间戳 <code>(p,4)</code>, 继承时间戳<code>&#123;(p,3), (r,1), (s,1)&#125;</code>, 得到<code>&#123;(p,4), (r,1), (s,1)&#125;</code></li><li>事务 g 向 c 发送消息, c 继承 g 的时间戳<code>&#123;(p,4), (r,1), (s,1)&#125;</code> 得到<code>&#123;(p,4), (q,2), (r,1), (s,1)&#125;</code></li><li>进程 q 执行事务 d, 加入时间戳 <code>(q,3)</code>, 继承时间戳<code>&#123;(p,4), (q,2), (r,1), (s,1)&#125;</code>, 得到<code>&#123;(p,4), (q,3), (r,1), (s,1)&#125;</code></li><li>q, r 进程结束, 进程 p 执行事务 m, 加入 <code>(p,5)</code> 继承<code>&#123;(p,4), (q,3), (r,1), (s,1)&#125;</code>,<code>&#123;(p,3), (r,1), (t,1), (s,1)&#125;</code>,<code>&#123;(p,4), (r,1), (s,1)&#125;</code>, 得到<code>&#123;(p,5), (q,3), (r,2), (s,1), (t,1)&#125;</code></li></ul></li><li><p>如何根据 g <code>&#123;(p,4), (r,1), (s, 1)&#125;</code>, c<code>&#123;(p,4), (q,2), (r,1), (s,1)&#125;</code> 判断 g, c 的因果关系(虽然从图中我们可以看到 g -&gt; c)?</p><p>无法判断</p></li><li><p>部分有序逻辑时钟更加强大, 可以告诉我们事情发生的因果关系,但是部分有序时钟的存储相当昂贵, 他需要维护一个集合,集合的的元素数目上限是系统创建过的进程数目.在实际开发的时候按需使用这三种时钟</p></li></ul><h2 id="w1l3-w2l1-多播multicast">W1L3 &amp; W2L1 多播(Multicast)</h2><ul><li><p>多播: 向一组进程发送消息</p></li><li><p>多播消息排序属性: 确保应用可以按照一定顺序收到多播消息,例如在共享文档中, 用户 A 将 120 行尾部加入了 111, 几毫秒后用户 B 删除了120 行, 我们一定要保证协作用户 C 先收到 A 的操作, 后收到 B的操作</p></li><li><p>多播实现方法:</p><p><img src="./img/03.png" /></p><p>引入中间件, 应用发起请求到中间件,中间件确保多播请求符合排序属性后发送数据到目标机器. 目标机器收到消息,确保排序属性符合后再将消息发给应用程序</p></li><li><p>消息排序属性</p><ul><li>FIFO有序: 对于<strong>同一个发送者</strong>,接受者一定会按照发送者发送的顺序接受多播.</li><li>因果有序 (causal ordering): 消息在接受的时候应该具有因果性. (A 向 B,C 发起组队邀请, B 向 A, C 发送同意回复, 对于 C 来说, B同意回复的消息必须在 A 的组队邀请到达之前收到. 即使 B 的同意消息先到达C, 该消息也应该缓存到 C 的中间件中)</li><li>总体有序 (Total Ordering) : 对于任意两条消息,所有接收这些消息的进程都以相同的顺序接收它们也就是说如果一个进程先接收M1, 然后接收 M2, 那么系统中的所有其他进程也都必须先接收 M1, 再接收 M2(假设用户 A 将变量设置为 1, B 设置为 2, 我们不管最后设置为几,但是要保证所有机器上收到的设置顺序是一样的)</li></ul></li><li><p>消息属性排序的实现</p><ul><li><p>FIFO: 使用 TCP 协议实现,对比设备<strong>逻辑时间戳</strong>与消息的差是否为 1 决定是否处理消息.以 A 向 B, C 多播 M1, M2 为例</p><ul><li>A, B, C 设备同步时间戳 0</li><li>A 发送消息 M1, 携带时间戳 1</li><li>M1 到达 B, M1 的时间戳比 B 时间戳大 1, B 中间件接收并发送消息到应用,更新时间戳为 1</li><li>M2 到达 B, M2 的时间戳比 B 时间戳大 1, B 中间件接收并发送消息到应用,更新时间戳为 2</li><li>M2 到达 C, M2 的时间戳比 C 时间戳大 2, C中间件接收消息并将消息缓存到缓存区, 不更新时间戳</li><li>M1 到达 C, M1 的时间戳比 C 时间戳大 1, C 中间件接收并发送消息到应用,更新时间戳为 1</li><li>C 的缓存区中有 M2, M2 的时间戳比 C 时间戳大 1, C中间件接收并发送消息到应用, 更新时间戳为 2</li><li>因为 FIFO 保证每一个发送端 FIFO, 因此逻辑时间戳就够用了</li></ul></li><li><p>总体有序: 发送者发送消息, 接受者分配全序时钟并返回时钟.发送者收集所有时钟, 取最大值广播回接受者, 接受者更新时钟. 对于发射者S1,S2 同时发送消息 M1, M2, 接受者 H1, H2 分别维护双队列 holding queue 与delevery queue</p><ul><li>S1, S2 发送消息 M1, M2,</li><li>H1以 <code>M1(1, S1), M2(2, S2)</code> 收到消息, 存入 holding 队列,标记 M1, M2 为未确认状态</li><li>H2以 <code>M2(1, S2), M1(2, S1)</code> 收到消息, 存入 holding 队列,标记 M1, M2 为未确认状态</li><li>H1 返回 M1(1, S1), H2 返回 M1(2, S1) 到 S1</li><li>S1 收到并广播更新时间戳 M1(2, S1)</li><li>H1, H2 收到广播, 确定 M1(2, S1)</li><li>H1 更新队列为<code>M1(</code><strong><code>2</code></strong><code>, S1)</code><strong><code>\*</code></strong><code>, M2(2, S2)</code>,确认 M1 时间戳, 加上 *. 根据优先级对队列进行重新排序, 队列保持不变</li><li>H2 更新队列为<code>M2(1, S2), M1(2, S1)</code><strong><code>\*</code></strong>, 确认M1 时间戳, 加入 *. 根据优先级对队列进行重新排序, 队列保持不变</li><li>H1 队列队头元素 M1 已经被确认, 同时队列中没有优先级更小的元素(M2虽然没有确认, 但是确认不可能让时间戳变小), 将 M1 加入交付队列, 队列变为<code>M2(2, S2)</code></li><li>S2 收到并广播更新时间戳 M2(2, S2)</li><li>H1, H2 收到广播, 确定 M2(2, S2)</li><li>H1 更新队列为 <code>M2(2, S2)*</code>, 确认 M2 时间戳, 加上 *.根据优先级对队列进行重新排序, 队列保持不变</li><li>H2 更新队列为<code>M2(2, S2)*, M1(2, S1)</code><strong><code>\*</code></strong>, 确认M2 时间戳, 加入 *. (1, S1) &lt; (1, S2), 队列更新为<code>M1(2, S1)*, M2(2, S2)*</code></li><li>H1 队列队头元素 M2 已经被确认, 同时队列中没有优先级更小的元素, 将 M2加入交付队列</li><li>H2 队列队头元素 M1 已经被确认, 同时队列中没有优先级更小的元素, 将 M1加入交付队列</li><li>H2 队列队头元素 M2 已经被确认, 同时队列中没有优先级更小的元素, 将 M2加入交付队列</li></ul><p>这里有两个注意点</p><ul><li>Holding queue 是优先队列, 根据总体时间戳, 先排时间, 再排进程</li><li>在更新后我们只判断队头是否可以放入交付队列,如果对头未确认就不放</li><li>比较队头的时候我们要确认队伍中已经确认的时间戳没有比他优先级更高的,未经确认的时间戳不可能比他更高就可以(因为未经确认的时间戳在确认的时候优先级只会降低不会增加)</li></ul></li><li><p>因果有序: 每个节点维护一个时间戳向量</p><ul><li>A 向 BC 发起组队申请, B 回复 AC 同意, 要确保C 先收到组队,后收到同意</li><li>ABC初始化向量 (0,0,0), 表示 (A,B,C) 发出消息计数</li><li>A 发送组队消息 M1(1,0,0) 给 BC</li><li>B 收到消息, 回复消息 M2(1,1,0) 给 AC</li><li>C 收到消息 M2(1,1,0), 比自己维护的 (0,0,0) 大2说明有消息没有收到</li><li>C 收到消息 M1(1,0,0), 比自己维护的 (0,0,0) 大1, 处理消息, 更新时间戳(1,0,0)</li><li>C 处理消息 M1 (1,1,0)</li></ul><p>如果 A, C 分别几乎同时发出消息 (1,0,0) (0,0,1) 呢? 直接处理就可以了,因为他们之间没有因果性, B 可以直接更新时间戳为 (1,0,1) 回复广播M(1,1,1), AC需要分别收到对方发送的消息, 将时间戳更新为 (1,0,1) 才能接受B 的消息</p><p>在接收消息时应该满足条件</p><p>节点 j 在接收 i 发出的消息时只需要保证: 第 i位对应的时间戳应该是消息向量上 i 位时间戳上的计数 +1, 接收节点上非 i位向量时间戳只要大于等于消息上的对应时间戳就好了(比如节点1发送(<strong>3</strong>,1,1), 接收者维护的时间戳可以是(2,3,4), 但不可以可以是(2,0,0), 我们关心的是第一位是2,其他位大于1就可以)</p></li></ul></li></ul><h2 id="w3l1-可信多播">W3L1 可信多播</h2><ul><li><p>可信多播: 所有的接受者都可以收到所有的消息</p></li><li><p>可靠性与顺序性是正交的 (Orthigonal)你可以分别实现两者而不相互影响</p></li><li><p>难点: 进程是不稳定的, 可能会崩溃. 我们希望所有的进程都是无故障的(nonfaulty)</p></li><li><p>简易实现: 发送者发送后,每个接受者接受到消息后都会将消息发送给除了发送者之外的所有人 (消息量<span class="math inline">\((n-1)\times(n-2)\)</span>)</p></li><li><p>虚拟同步 (virtual synchrony): 一种管理群组的模型,用来实现在进程加入或离开多播组的情况下通信一致可靠</p><ul><li>多播组视图: 维护一个时间点中多播组全部元素的集合</li><li>视图变化: 当有用户加入或者推出的时候视图发生变化</li><li>一致视图(same group view): 确保全部成员维护的视图是相同的</li><li>变化消息广播: 当视图变化时, 向所有成员广播</li></ul><p>虚拟同步在做视图变化时会直接对视图做全量更新,因此必须要在消息有序</p></li><li><p>实现虚拟同步:</p><ul><li><p>假设:</p><ul><li>消息采用 TCP 完成传输, 确保了 FIFO 有序,保证两点之间连接后消息可以可靠传播, 不保证两点一定可以建立连接</li><li>发送者可能在传输消息期间或之前崩溃</li><li>在视图变更期间，不会发生进程崩溃</li><li>存在一个领导者来处理视图变更</li></ul></li><li><p>实现:</p><ul><li><p>定义</p><ul><li>保留消息: 接收者对于每一个消息 M 都做 keep,直到被告知所有进程都受到了消息</li><li>稳定 (stable) 消息: 如果消息 M 被所有进程接受 (ACK), 那么 M变为稳定消息</li><li>删除消息: 只有稳定消息可以被删除</li></ul></li><li><p>流程</p><ol type="1"><li><p>触发视图变更: 由于新进程加入, 现有进程退出或故障等原因,系统需要进行视图变更</p></li><li><p>广播视图变更消息:系统中的领导者或协调者通知所有进程即将发生视图变更 (以willchangeview群组成员为准)</p></li><li><p>处理不稳定消息: 每个进程收到消息后检查并处理它的所有不稳定消息,发送未确认的消息副本给当前视图中的所有进程, 并等待它们的确认回执(以willchange view群组成员为准, 不包含老视图中退出的成员)</p></li><li><p>发送清除消息: 一旦一个进程确认它的所有不稳定消息都已变为稳定 (即,它接收到了所有其他进程的确认回执), 它会广播发送清除消息,表明它已准备好迎接新视图</p></li><li><p>安装新视图: 当一个进程从所有其他进程接收到清除消息时,它确认所有进程都已准备好过渡到新视图, 并开始在新视图下的操作</p></li></ol></li></ul></li></ul></li></ul><h2 id="w3l2-互斥-mutual-exclusion">W3L2 互斥 (Mutual Exclusion)</h2><ul><li><p>互斥确保对共享资源的访问是序列化 (serialised). 即:每个时刻只有一个任务可以访问资源</p></li><li><p>资源一般是"哑设备", 他们只能接受指令, 执行指令, 不能实现发送指令(例如显示器, 老式打印机)</p></li><li><p>互斥算法要求</p><ul><li>Safety: 任何时间只有一台设备访问</li><li>Liveness: 任务不能无休止的等待资源 (如死锁),任务最终一定会授予资源</li><li>Fairness: 任务有公平机会获取资源</li></ul></li><li><p>基于时间戳的互斥算法 (Ricart): 对请求的逻辑时间戳进行排序,然后按照顺序访问资源</p><ul><li>进程在需要获取资源时会向全局广播获取资源请求</li><li>进程在收到资源请求后判断,<ul><li>如果进程不需要该资源, 进程会响应 ok</li><li>如果进程需要该资源 (这个进程之前也全局过时间戳),这个进程会比较收到了时间戳与自己时间戳的关系,<ul><li>如果收到的小, 就返回 ok, 表示对方优先占有资源</li><li>如果自己的小, 就先不返回, 直到自己访问完资源以后再返回 ok</li></ul></li></ul></li><li>需要占用的进程在收到所有的 OK 后会开始占用资源</li></ul><p>问题: 单点故障会导致全局等死. 无法确保传输</p></li><li><p><strong>基于仲裁集 (Quorum-based) 的互斥算法</strong></p><ul><li><p>仲裁集</p><ul><li>将系统中的节点划分成不同的仲裁集</li><li>一个节点可以属于多个仲裁集</li><li>Overlap: 保证任意两个仲裁集的交集非空</li></ul></li><li><p>Maekawa's 算法</p><ul><li><p>将系统划分为投票集 (Voting set) 也就是仲裁集</p></li><li><p>一个节点需要独占时只需要向他所在的<strong>任何一个</strong>投票集中所有元素同意即可访问资源.(因为任何两个投票集都有overlap)</p><p>例如: 对于集合 {A B C}, {C D E}. A需要独占资源只需 B C 同意. 如果此时E 需要独占资源, C 会投反对票</p></li><li><p>每个成员一次只能回复其投票集中的一个成员:如果一个进程已经同意了另一个进程的请求, 它将不会对另一个请求作出回复,直到它接收到一个释放 (release) 或放弃 (relinquish) 消息</p></li><li><p>如果收到一个时间戳更早的请求, 成员可能会尝试改变其投票:这是通过向它最后投票的进程发送询问(inquire)消息来实现的。如果该进程可以释放其投票(即它已经完成了对临界区的访问)，它将发送一个放弃消息给最初投给它的进程,然后才能响应时间戳更早的请求</p></li></ul></li><li><p>Maekawa's 算法解决死锁</p><p><img src="./img/04.png" /></p><p>2, 3 需要资源, 0 投票给了 2 (因为 (0,2)&lt;(0,3)), 1 投票给了 3(因为没有收到 (0,2)). 此时出现了死锁.</p><p>等 1 收到 (0,2) 的时候, 1 会意识到自己投错了. 1 会给 3 发送Request,要求<strong>如果 3 还没开始占有</strong>, 就将选票归还. 如果 3已经占有了就忽略这个请求. 1 收到投票后会重新投票</p><p><img src="./img/05.png" /></p></li></ul></li><li><p><strong>基于令牌 (token-base) 的互斥 (Raymond 算法)</strong></p><p>持有令牌的人可以访问数据</p><p>我们假设通信路径并不是完全图, 我们希望令牌可以在节点之间传递,因此我们使用最小生成树将图转换为了一颗旋转树</p><ul><li><p>初始化生成树</p><p><img src="./img/06.png" /></p></li><li><p>初始化</p><ul><li>将令牌随便分给一个节点 (G).</li><li>G 持有节点后会开始一轮 bfs,</li><li>G 会将 init 消息发给 C, C 记录 holder_C = G 意思是需要令牌就找G</li><li>BD 记录 holder_B = holder_D = C <strong>(注意不是 G)</strong></li><li>AF 记录 记录 holder_A = holder_F = B</li><li>E 记录 记录 holder_E = A</li></ul><p><img src="./img/07.png" /></p></li><li><p>假设 A 需要令牌</p><ul><li>A 将请求队列加入 A req_A = [A]</li><li>A 请求 B, B 在请求队列中加入 A req_B = [A]</li><li>B 请求 C, C 在请求队列中加入 B req_C = [B]</li></ul></li><li><p>此时 D 也需要令牌</p><ul><li>D 请求 C, C 在请求队列中加入 D req_C = [B, D]</li><li>C 请求 G, G 不需要资源, 将令牌给 C, holder_G = C</li><li>C 处理队头元素 B, 将令牌交给 B, req_C = [D], 同时告诉 B 自己需要令牌req_B = [A, C], holder_C = B</li><li>B 处理队头元素 A, 将令牌交给 A, req_B = [C], 同时告诉 B 自己需要令牌req_A = [A, B], holder_B = A</li><li>A 处理队头元素就是他自己, 占用资源</li><li>A 释放后从处理队头, 将令牌交给 B, holder_A = B</li><li>B 释放后从处理队头, 将令牌交给 C, holder_B = C</li><li>C 释放后从处理队头, 将令牌交给 D, holder_C = D</li></ul></li></ul></li></ul><h2 id="w3l3-回声算法-echo-algorithm">W3L3 回声算法 (EchoAlgorithm)</h2><p>回声算法是一种在分布式计算和拓扑网络中广泛使用的算法。它主要用于网络中信息的传播，特别是在确定网络结构，如节点的数量或网络的拓扑结构时非常有效。这种算法特别适用于没有中央控制的分布式系统，可以帮助在网络中传播信息并收集状态信息。</p><p>回声算法的工作原理基于简单的消息传递机制。当一个节点需要执行一个全局操作（例如，网络搜索、拓扑发现或全局状态收集）时，它会启动算法，通过向其邻居发送特定类型的消息来触发一系列的信息交换过程。</p><ol type="1"><li><p><strong>初始化</strong>：某个节点（称为发起节点）触发算法，向所有直接连接的邻居节点发送一条消息。</p></li><li><p><strong>消息传播</strong>：当一个节点收到来自其邻居的消息时，它会检查是否是第一次收到这类消息：</p><ol type="1"><li>如果是第一次，它会记住发送该消息的邻居（称为父节点），然后将消息转发给除父节点外的其他所有邻居。</li><li>如果不是第一次收到该消息（即已经转发过），它会忽略该消息。</li></ol></li><li><p><strong>回声返回</strong>：当一个节点向其所有邻居转发了消息，并从所有这些邻居中收到了回应（或者它没有其他邻居要转发消息），它就完成了它的部分工作。这时，它会向它的父节点发送一个回声消息，表明它和它的子树已经处理完毕。</p></li><li><p><strong>收集信息并终止</strong>：回声消息可以携带从子树收集的信息（例如，子树的大小或其他任何有关的状态信息）。当发起节点从所有直接连接的邻居收到回声消息时，算法结束。这时，发起节点可以根据收到的回声消息计算全局属性（例如，网络的大小或特定的拓扑特征）。</p><p><img src="./img/08.png" /></p></li></ol><ul><li>1 发起, 请求 2 3</li><li>2 发起, 请求 4 5</li><li>3 发起, 请求 5 6</li><li>4 回应没有孩子, 只有 2-4</li><li>5 发起, 请求3, 3 不回应, 5 返回 2 - 5 - 3</li><li>5 不处理 3 的请求</li><li>6 回应没有孩子, 只有 3 -6</li><li>2 回应 1-2-4, 1-2-5-3</li><li>3 回应 1-3-5, 1-3-6</li><li>1 构建<ul><li>1-2-4 1-2-5 1-3-5 1-3-6</li></ul></li></ul><h2 id="w4l1-死锁检测-deadlock-detection">W4L1 死锁检测 (Deadlockdetection)</h2><ul><li><p>Wait-for 图: 一种有向图, 节点是进程, 有向边 <code>(u, v)</code>表示 <code>u</code> 因为等待 <code>v</code> 而阻塞.</p></li><li><p>死锁模型</p><ul><li><p>AND model (资源模型):进程继续执行需要获取<strong>全部多个资源</strong>造成的死锁.当图中有循环, 环就是死锁</p></li><li><p>OR model (通信模型):进程继续执行需要获取多个资源中的<strong>任意一个,</strong> 造成的死锁(例如: 进程因为等待其他进程的消息到达而阻塞造成的死锁), 当图中有循环,不一定是死锁, 只要有消息可以过来解锁</p><p><img src="./img/09.png" /></p><p>例如 Z 可以解锁 Y</p></li></ul></li><li><p>检测死锁</p><ul><li><p>OR 模型</p><p>如果在 OR 中存在一系列节点, 节点都有出边, 出边都指向这一系列节点&lt;=&gt; 存在死锁</p><p>将 节点都有出边, 出边都指向这一系列节点 的图称为 knot</p><p><strong>注意, 存在有向环且有向环上节点不指向外部不是必要条件,只要有出边, 不外指就可以了. 可以参考左图</strong></p><p><img src="./img/10.png" /></p><p>左边存在两个 knot: ABC, BC. <strong>但是注意,左边图没有有向环</strong></p><p>右边不存在因为 C -&gt; D, D 没有出边</p></li><li><p>AND 模型: 有向环 &lt;=&gt; 死锁</p></li></ul></li><li><p>死锁检测解决算法实现</p><ul><li><p>探针模型: (探针发起者, 当前一次传递的发送者,当前一次传递的接受者)</p></li><li><p>AND 模型:</p><p>检测方法: 当探针回到探针发起者时死锁成立</p><p>假设存在 P1 -&gt; P2 -&gt; P3 -&gt; P1</p><p>P1 无法获取资源时会发出探针 (1,1,2)</p><p>P2 收到探针, 发现自己无法满足条件, 发出探针 (1,2,3)</p><p>P3 收到探针, 发现自己没法满足 P2 的条件, 发出探针 (1,3,1)</p><p>P1 收到自己发出的探针, 死锁成立</p></li><li><p>OR 模型</p><p>采用类似回声的算法, 当节点被阻塞时响应回声, 否则不相应,如果图建全了(echo成功), 说明所有人都在阻塞, 处于死锁模式</p></li></ul></li></ul><h2 id="w4l2-垃圾回收机制-garbage-collection">W4L2 垃圾回收机制 (GarbageCollection)</h2><ul><li><p>中心化系统的垃圾回收常采用引用计数: 对象被复制, 引用+1, 对象删除,引用-1. 引用为 0, 自动删除</p></li><li><p>我们无法在分布式系统中采用, 因为分布式系统的加减不定序, 例如 先+1, 后 -1, 变成先 -1 成 0 直接回收</p></li><li><p>加权计数</p><ul><li><p>对象拥有权重, 指针分配权重.</p></li><li><p>对象的权重是指针的权重和, 新增指针的时候权重会被均匀分配,删除指针的时候权重会被减去, 为 0 时删除</p><p><img src="./img/11.png" /></p><p>在图中, 右侧指针被复制, 因此将 5 分给新指针一半</p></li><li><p>分布式可行性: 假设有 M1(10) -&gt; M(10), 我准备复制 M1 给 M2,此时 M1(5), M2(5), M(10), 然后我们准备删除 M1.因为 clone -&gt; delete,我们在 clone 的时候将权重折半相当于携带了有新指针这一信息, 因此即使 M2没有发送加引用给 M 就删除 M1, M3 也只会减少 5, 不会完全删除</p></li><li><p>权重无法分割处理: 权重只会减少(删除时)不会增加(新增时不增加),因此当权重不够分的时候我们可以引入一个中间对象</p><p><img src="./img/12.png" /></p></li><li><p>循环引用处理:</p><ul><li><p>Predecessor &amp; successor: A 指向 B, A 是 B 的前生(Predecessor), B 是 A 的后继 (successor)</p></li><li><p>定义 O 是一组对象, P 是 O 的 Predecessor 集合, 如果 O存在循环结构, P 是 O 的子集</p><p>注意: 这种情况 O 不构成循环结构, 因为 O 整体还被 D 引用, 除非 D被删除了, 否则 O 不能删</p><p><img src="./img/13.png" /></p></li><li><p>根对象 (root object): 操作系统对象. 图中的 root</p></li><li><p>思想: 如果 O 中不包含根对象, 但是 P属于O, O 就是垃圾</p><p><img src="./img/14.png" /></p></li><li><p>基本实现: 当发现很多对象很久没有使用, 我们就可以发送探针,从这些对象的任一元素开始, 如果当前元素没有后继,它就会将探针返回给发起者,发起者可以根据探针上记录的路径获取整个前驱后继关系,从而实现垃圾回收</p></li><li><p>确保探针可以被完全回收: 当 C 将探针给 A 时, A需要知道当前探针是否完全回收了, 否则 A 将直接删除 ABC,可以采用加权引用的方法实现探针的分裂.</p><p>p.s. 如果一个节点已经发送过探针, 之后来的探针会被直接返回</p><p><img src="./img/15.png" /></p><p>B -&gt; C 将探针发给 C, C 已经分出去了, 此时D&gt;-C的探针会直接还给A</p></li><li><p>如何判断当前建立的前驱后继关系是完整的?</p><p><img src="./img/14.png" /></p><p>在这张图中, 探针完全可以指向 E, 此时 A 只知道 D-&gt;E关系, 并不知道root -&gt; E 的关系, 也就不会将 root 放入 P, 此时 A 只知道 O = {ABCDE} P= {ABCD}, 从而回收 ABCDE. 即 A 发出的探针无法确保 O 中元素的前驱全部在 P中. 因为 A 无法到达一个节点的全部前驱.</p><p>解决方法: 在统计节点 E 的前缀时, 前缀引用权重相加, 如果小于 E 的权重,说明没有统计完全, E 不能加入 O 集合</p></li></ul></li></ul></li></ul><h2 id="w4l3-全局状态与快照-global-state-and-snapshot">W4L3全局状态与快照 (Global state and snapshot)</h2><ul><li><p>每个进程都有进程的本地状态 (local state) 和信道 (communicationchannel) 状态</p><ul><li>本地状态: 进程自己开辟的本地空间</li><li>信道状态: 进程间异步通信发出还没有收到的信息</li></ul></li><li><p>全局状态就是全部进程的本地和信道状态</p></li><li><p>快照实现的难点: 没有全局的时钟系统,无法包装所有机器上拍摄时间一样</p></li><li><p>全局状态的一致性(consistent)</p><p>需要满足条件</p><ul><li><strong>C1（发送接收一致性）</strong>：进程P标记状态已经发送,要么信道记录消息在信道中,要么接受者记录已经收到了。这保证了消息传递的一致性，即系统不会出现接收者(进程或者信道)记录了一条消息，而发送者却没有记录发送该消息的情况。</li><li><strong>C2（未发送消息不应被记录为接收）</strong>：还未被发送者记录为发送的消息，不应该在接收者那里被记录为已接收。这避免了在分布式系统中可能出现的时间错乱问题，即防止了接收者似乎“预知”了一条还没发送的消息。</li></ul></li><li><p>何时拍摄快照: 当进程 B 在处理进程 A 发来的消息 M 前, 若发现 A的快照领先于自己, 且 M 是在 A 拍照后发送的, 就需要先拍照, 再处理消息 M.简而言之就是 B 需要在与 A 同步快照后再处理 A快照后产生的消息complement</p></li><li><p>FIFO 信道实现快照的 Chandy-Lamport 方法</p><ul><li>Pi 会在快照后向所有信道发送 Mark 标记, 表示自己完成了一次快照.用来分割快照前后的消息</li><li>Pj 在收到 Mark 消息后得知 Pi 完成了快照拍摄, 同时收到 Mark 意味着 Pj已经处理完了所有 Pi 在快照之前产生的消息 (因为 FIFO 原则).</li><li>此时 Pj<ul><li>如果 Pj 是第一次受到 Mark 会为每条进入信道创建缓冲区</li><li>将Mark之后的消息都压入缓冲区缓存起来(构成信道状态)</li><li>对自己拍照</li><li>将自己拍照的消息发送出去, 然后处理 Mark 之后信道状态中的消息</li></ul></li></ul></li></ul><h2 id="w5l1-共识问题-consensus-problem">W5L1 共识问题 (consensusproblem)</h2><ul><li><p>问题描述</p><ul><li>系统中有 N 个节点, 每个节点可以被初始化为 0 / 1</li><li>网络之间采用<strong>可靠异步通信</strong>,但是不保证传输信息需要的时间</li><li>节点处理信息的速度不同, 可能会处理失败并停止发送消息,停机可以重启</li><li>保证最多一个节点失败</li><li>目标: 所有节点的值达成一致</li></ul></li><li><p>共识容忍问题 (Fault-tolerant onsensus protocol):允许部分节点出错.</p><p>处理简易流程: 从所有节点处收集投票, 当大多数节点投票后结束投票,节点做出决定 (是否接受这个结果)</p></li><li><p>FLP 不可能性定理 (FLP Impossibility of Consensus):在一个异步模型中, 即使可能只有一个节点崩溃,也找不到一个可以达成共识的容错分布式算法</p><p>证明:</p><ul><li>系统希望对某个命令达成共识</li><li>某个节点的信息传输可能存在网络延迟. 继而被其他节点视为崩溃</li><li>因此系统是容错的 (Fault-tolerant), 其他节点需要重新达成共识</li><li>在新共识达成之前, "崩溃"节点的消息到达</li><li>系统状态回到 a 步骤.</li></ul></li><li><p>算法完全正确需要满足 (totally correct)</p><ul><li>安全性 (safe): 非故障节点最终会达成一个一致的值</li><li>终止性 (terminates): 算法一定会在有限的时间内停止</li></ul></li><li><p>FLP 不可能性定理证明了在完全异步的状况中我们无法实现完全正确性,但是我们可以通过调整假设, 增强容错机制 (加入超时控制)实现可用的共识容忍算法</p></li><li><p>Paxos 算法</p><ul><li>角色:<ul><li>提案者 (proposer): 启动算法, 希望就某个值达成一致</li><li>接受者 (acceptor): 选择性接受提案者发出的请求</li><li>学习者 (learner): 等待算法的结果, 最终接受结果</li></ul></li><li>实现<ul><li>Phase 1: 准备请求 (prepare request)<ul><li>提案者选择一个新的提案版本号 <code>n</code>, 发送准备请求 (preparerequest)<code>("prepare", n)</code> 给所有接受者, 询问:<ul><li>是否可以发起一个版本号为 <code>n</code> 的提案</li><li>如果可以, 接受者觉得提案值为多少合理呢</li></ul></li><li>接受者收到请求 <code>n</code> 后, 会对比当前的 n与之前已经响应的请求的编号.<ul><li>如果当前请求 <code>n</code> 比已经响应的所有请求都大: 响应<code>(ack, n, n', v')</code> 分别代表响应 <code>n</code> 请求,之前响应的请求的最大编号 <code>n'</code>, <code>n'</code>请求对应的提案值 <code>v'</code> (注意 <code>v'</code> 是提案值,不是请求值, 请求只有 n, 没有 v). 如果之前没有接受就返回<code>(ack, n, -, -)</code>. 同时保证以后不会响应比 <code>n</code>小的请求</li><li>如果当前请求 <code>n</code> 不是已经响应的请求中最大的:什么都不做</li></ul></li><li>当提案者收到过半响应后. 进入第二阶段</li></ul></li><li>Phase 2: 提案<ul><li>提案者收集所有响应, 找到其中最大的 <code>n'</code> 对应的<code>v'</code> 作为本次提案的 <code>v</code>. 如果的接受者都没有返回<code>v'</code> 就随便选一个值. 最后发送<code>("accept", n, v)</code></li><li>接受者接受 <code>("accept", n, v)</code>, 如果 <code>n</code>是接受者响应过的最大值, 接受者将接受这个提案</li><li>接受者接受提案后会返回一个 ACK 给提案者告诉对方自己接受了提案.</li><li>如果大多数人接受了提案, 共识达成进入第三阶段</li></ul></li><li>Phase 3: 结束<ul><li>提案者广播决定值给全部学习者</li></ul></li></ul></li><li>QA<ul><li>为什么要放弃编号更小的 <code>('prepare', n)</code>: 避免提案冲突,保持最新</li><li>为什么大多数接受者记录 v, 我们就要将 v 选为共识: 大多数接受者接受,我们就认为这个值是稳定的, 即使有网络问题也不会轻易推翻</li></ul></li></ul></li><li><p>安全性: 某个值一旦被决定, 之后所有的 proposals 都不会与之冲突.因为当一个 n v 成为 decision, 说明这个 v 获得了大多数人记录.下次发起提案的时候, 大多数节点就会返回 <code>(ACK, n_1, n, v)</code>此时提议者就会选出 <code>v</code> 作为提议值</p></li><li><p>活跃性: 根据 FLP, Paxos 不能保证活跃性 / 终止性. 情况如下: 节点P1 完成第一阶段 n1, 节点 P2 完成第一阶段 n2, P1 的交互将不会被响应. 此时P1 发起 n3, 此时 P2 的交互不会被响应, 最后循环发起无法终止</p></li></ul><h2 id="w5l2-一致性-consistency-与-cap-理论">W5L2 一致性 (Consistency)与 CAP 理论</h2><ul><li><p>数据复制</p><ul><li>好处<ul><li>提高可靠性(reliability): 如果一个副本损坏, 可以使用副本.</li><li>提高系统性能(performance): 通过部署广泛的 Web 代理提升系统访问</li></ul></li><li>难点: 保持数据一致性(consistency)</li></ul></li><li><p>一致性模型: 定义了读操作时数据的可能返回值集合 A consistencymodel defines the semantics of read operation of a data store</p></li><li><p>两种模型</p><ul><li>强一致性模型 (Strong Consistency): 客户端无论从哪里接入服务器,永远可以看到最新值</li><li>最终一致性模型 (Eventual Consistency):客户端读操作返回的可能是过去某个时间点的值,但是不同数据库中的对象会最终趋于一致</li></ul></li><li><p>实现强一致性的 Quorum 算法.</p><p>为每个复制品设置一个令牌, 获取令牌代表获取该复制品(数据库)的读写权限.每个复制品令牌的权重为 1.</p><p>定义两个权重阈值: ww, rw 表示允许写入数据与读取数据的最小权重(例如用户必须获取 ww 个权重的令牌才能完成写操作) . 权重 ns是所有复制品的权重和.</p><ul><li>要求 <code>ww &gt; ns / 2</code>: 只有一个用户可以同时写入数据</li><li>要求 <code>(rw + ww) &gt; ns</code> :读操作与写操作只能同时执行一个</li></ul><p>通过占有令牌的方式实现了读写互斥 (exclusive), 写写互斥,允许并发读</p></li><li><p>实现最终一致性</p><p>依赖两个属性</p><ul><li>全面传播 (total propagation): 更新可以传播到所有的站点。</li><li>一致的顺序 (consistent ordering):更新按照一致的顺序由所有站点处理。</li></ul></li><li><p>强一致性保证数据一致, 但是会降低读写速度, 最终一致性会让用户疑惑,出现无法读取最新值的问题</p></li><li><p><strong>CAP 定理:</strong></p><ul><li>一致性 (Consistency): 为了实现一致性必须保证通信顺畅.</li><li>可用性 (Availability): 即使部分网络节点失效, 系统仍然可用.为了我保证可用性必须做数据复制</li><li>分区容忍性 (Partition Tolerance):即使网络中的部分节点发生分区造成节点通信无法进行,系统仍然可以提供服务并在分区结束后同步数据. 在分区期间,为了实现分区我们需要允许对这两个数据中心进行读/写操作,则可以表明两个数据中心中的数据将不再一致. 如果我们认为一致性很重要,并在网络中断期间禁用写操作, 我们将失去“可用性”,因为无法进行更新操作</li></ul><p>CAP 定理在网络系统中, 三个指标最多同时成立两个</p></li></ul><h2 id="w5l3-base-原则-互不一致-mutual-inconsistency">W5L3 BASE 原则,互不一致 (mutual inconsistency)</h2><ul><li><p>BASE原则</p><p>CAP 定理说明三个条件无法同时满足, 因此有了 BASE (Basically Available,Soft State, Eventually Consistent) 设计原则, 希望实现</p><ul><li>基本可用 (Basically Available): 当部分服务出现故障时仍然给予响应,但是无法执行故障部分的操作</li><li>软状态 (Soft State): 对于部分操作, 允许系统消耗一些时间来稳定,在这期间系统返回的数据可能是不准确的 (例如 A 发起转账, 扣款, 但是 B需要一段时间才可以收到)</li><li>最终一致性 (Eventually Consistent):系统在停止输入后最终会变为一致</li></ul><p>BASE 可能导致并发更新冲突的问题,可以采用部分有序的时间戳和事件日志解决</p></li><li><p>互不一致性 (mutual inconsistency): 当网络分区发生后,不同区的数据各自操作, 当连接恢复后, 节点之间需要相互通信同步最新信息.此时可能出对象不一致的情况</p></li><li><p>检测互不一致性 (基于向量时钟): 对于每一个对象, 维护向量,向量中的每一位代表在不同节点中的修改个数, 例如 user 对象存储到 ABC三个数据库中, 那么 user 对象初始向量为 &lt;0,0,0&gt;, 分别代表在 ABC三个数据库中的更新次数为 0.</p><p>当节点 A 发生更新时, A 上 user 对象的向量变为 &lt;1,0,0&gt;, 此时将 A上的对象同步给 B, C 使其全部变成 &lt;1,0,0&gt; 状态</p><p>当 AB 与 C 产生网络分区后, AB 相互沟通可以维护两个相同的向量, C维护向量. 当连接恢复后AB会与C做向量对比并合并, 如何 AB上维护的向量上每一项都大于等于或者小于等于 C 维护向量, 否则则认为 AB 与C 在网络分区时发生了并发修改, 出现了互不一致性</p><p><strong>限制:</strong> 当数据写操作与其他数据读操作有关时,会失效</p></li></ul><p><img src="./img/17.png" /></p><h2 id="w6l1-缓存服务器-动态缓存-cache">W6L1 缓存服务器, 动态缓存(Cache)</h2><ul><li><p>网络中的(缓存)服务器</p><ul><li>缓存服务器: 用户在发起请求时直接请求缓存服务器,如果缓存服务器有就直接返回, 没有就请求原服务器获取资源,然后交给缓存服务器缓存. 因为缓存服务器距离用户近, 延迟小, 服务压力小,有助于提升用户体验</li><li>代理服务器: 分为正向代理 (forward proxy) 与反向代理 (reverse proxy). 正向代理一般驻留在客户端, 代理用户访问文件. 反向代理一般驻留在服务器,使用反向代理代理服务器完成用户请求从而减少服务器负载</li><li>协作缓存服务器: ISP 会为不同区域节点部署不同的前向代理缓存服务器,如果本区域缓存服务器没有数据会向其他区域请求,都没有才向源服务器请求</li></ul></li><li><p>CDN 网络架构</p><figure><img src="./img/18.png" alt="img" /><figcaption aria-hidden="true">img</figcaption></figure></li><li><p>缓存存在的问题</p><ul><li>内容可能过时(stale), 一致性不强</li><li>对于被命中的资源可以提高访问速度,对于没有命中的资源会降低访问速度</li><li>缓存受到原数据变化率的限制,</li><li>部分包含敏感信息的数据 / 实时数据不应该被缓存</li></ul></li><li><p>动态数据页面: 页面必须由用户请求即时生成, 不能预先生成 (例如google 请求的结果). 一般具有高波动性 (数据变换频繁) 与高变异性(数据需要根据用户定制化)</p></li><li><p>动态数据页面缓存技术</p><ul><li>页面级缓存 (page level caching): 缓存整个页面的输出.并不是很有效.</li><li>片段级缓存 (Feagment-level caching): 将页面中的不同部分分别缓存,使得不频繁变化的部分可以命中缓存.同时我们还可以为不同片段设置不同的缓存时间, 该技术基于 Edge SideIncludes (ESI) 实现</li><li>数据中心缓存 (data-center caching): 基于数据本身的缓存策略.用户请求数据时先检查有没有缓存对应数据, 如果没有就从 db 中获取(redis)</li><li>基于值的 Web 缓存 (Value-based web caching): 很多响应其实是冗余的,不同响应传输内容中只有少部分不同.因此可以在源服务器回传数据时只回传变化的部分,由缓存服务器组装文件并返回</li></ul></li></ul><h2 id="w6l2-基于值的-web-缓存-value-based-web-caching">W6L2 基于值的Web 缓存 (Value-based web caching)</h2><ul><li><p>基于值的 Web 缓存目标: 减少 ISP 到用户之间的数据传输量(因为用户到 ISP 连接的带宽受限)</p></li><li><p>消息摘要 (Message Digest): 用少量信息表述某一条信息.一般采用散列函数或者摘要函数实现</p><ul><li>MD5: 生成 128 位长度的摘要值</li><li>基于值的缓存将一个页面分块, 计算每个块的散列值 (指纹)用来识别块</li></ul></li><li><p>工作模式: 在用户请求时, 源服务器会下发全部块给 ISP 的缓存服务器,缓存服务器查找是否存在之前传输的块, 如果有则不传输这些块给用户,仅传输这些块的指纹.驻留在客户端的缓存服务器会将这些指纹替换为已经接收到的块</p><p><img src="./img/19.png" /></p></li><li><p>分块策略:</p><ul><li><p>不能以固定大小分块,否则在块中增删数据会导致后续全部块失效</p></li><li><p>Rabin 分块策略: 一种随机化的分块策略, 散列函数 f 将不长数据映射到[0,2047], 构建一个窗口, 如果窗口中的散列值为 0, 则将这窗口作为分块点.如果不为0 则向后移动这个窗口.</p><p><img src="./img/20.png" /></p><p>在这个例子中我们的窗口长度长3, 将 53 和 40 作为两个分块点.虽然这个方法十分随机化, 但是我们可以将每个块分成大概 2K</p><p>当数据发生变化后, 我们会重新执行函数, 以分拆或合并块让所有块保持在 2K左右</p><p><img src="./img/21.png" /></p></li></ul></li><li><p>差异编码 (Delta encoding): 服务器会创建很多基文件,这些文件是目标文件的多个常用版本,用户在请求的时候会找到用户请求过的最接近的一个基文件,然后返回目标文件与用户请求过的这个基文件的 diff</p></li></ul><h2 id="w6l3-p2p-系统">W6L3 P2P 系统</h2><ul><li><p>P2P 文件存储架构</p><ul><li><p>中心化目录模型 (Centralized directory model)</p><p>构建一个中心节点用来存储所有节点持有的资源,当节点需要资源时需要向中心节点请求拥有资源的节点,然后向目标节点下载资源</p><p>优势: 高效, 带宽占用小, 节点存储需求低 (只需要存储文件)</p><p>劣势: 可扩展性有限, 存在中心节点故障问题</p></li><li><p>泛洪请求模型 (Flooded requests model)</p><p>向节点的邻居发送信息询问是否有资源,如果没有就继续向邻居节点的邻居询问直到找到文件然后传输</p><p>优势: 没有单点故障问题, 只与邻居节点查询数据, 网络结构相对简单</p><p>劣势: 效率低, 会产生大量流量, 可扩展性有限</p></li><li><p>文档路由模型 (Document Routing model)</p><p>每个节点维护一个标识符, 维护一个包含邻居节点表示符的路由表.节点在请求资源时,如果自身没有就将请求转发到路由表中最接近请求的节点以提升查询效率</p><p><img src="./img/22.png" /></p><p>1 号节点需要文件 8, 在 1500和1200 的邻居中选择了最接近的 1200,然后选择 200, 然后选择 10...</p><p>优势: 效率高, 节点存储要求低 (无需维护过多信息), 允许节点故障</p><p>劣势: 复杂</p></li></ul></li><li><p>P2P 架构需要解决的问题</p><ul><li>如何命名节点与对象</li><li>如何高效查找节点</li><li>如何在节点之间拆分数据</li><li>如何防范单点故障与数据丢失</li></ul></li><li><p>内容可寻址网络 (Content-Addressable Network, CAN)</p><ul><li>区域划分: 使用散列函数将节点和资源映射为 d 维笛卡尔坐标系中的点.将空间分配给不同节点, 每个节点负责自己对应区域的资源节点. (注意:空间中有两种点, 节点对应的点一般是自己所属区域的几何中心,管理本区域的资源点)</li><li>邻居关系: 如果节点在 d-1 维度重叠, 那么两个节点就是邻居关系</li><li>文件查询: 当用户要查找文件时, 首先获取文件的坐标,然后根据邻居关系转发请求给距离最近的邻居最后找到文件对应的节点</li></ul><p><img src="./img/23.png" /></p><ul><li><p>节点下线: 通知邻居节点接管资源, 将区域与资源交给邻居节点</p></li><li><p>节点崩溃: 节点定期向邻居节点发送坐标信息, 区域坐标, 节点邻居表.当邻居发现节点断开后将连续崩溃节点的邻居重新划分管理区域</p><p>确保文件在节点崩溃后仍可寻:使用完全不同的散列函数再次构造一个笛卡尔坐标系,要求节点同时存储两个坐标系下的文件, 当 f 空间下的节点崩溃后, 根据 f'空间中的信息, 找回丢失的文件并接管</p><p><img src="./img/24.png" /></p></li></ul></li></ul><h2 id="w7l1-并行计算">W7L1 并行计算</h2><ul><li>管道系统: 将处理过程划分为不同阶段, 每个阶段处理一部分工作.数据完成本阶段工作后会送入下一阶段, 新数据就可以进入当前阶段.虽然单个阶段只能一次处理一份数据, 但是不同数据在同时间是并行处理的</li><li>并行系统: 在一个时间点可以同时同理一个阶段的多份数据</li></ul><h2 id="w7l2-直接映射缓存-directed-mapped-caches">W7L2 直接映射缓存(Directed-Mapped Caches)</h2><ul><li><p>全相连缓存 (Fully Associative Cache): 最朴素的缓存, 内容按顺序放,但是查询需要 O(n)</p></li><li><p>直接映射缓存 (Direct-Mapped Caches)</p><p>为了减少缓存检索缓存的时间, 将 id 为 n 的元素缓存到 n % p 的 slot 中,p 是 slot 数量. 查询只需要 O(1)</p><p>继续提升效率: 使用 2 的整数幂作为 slot 长度以规避 MOD 运算. 在取 MOD时只需要对需要的位数做 AND 111111 即可</p></li></ul><h2 id="w7l3-三种缓存模式">W7L3 三种缓存模式</h2><ul><li>直接映射缓存劣势: 即使有少量元素, 仍然可能会造成抖动 (thrashing),某些元素会占用统一空间造成频繁进出</li><li>集合关联缓存 (Set-Associative Cache): 为了缓解抖动问题. 将缓存分成了2^n 个集合 (Set), 每个集合包含多个缓存行.数据根据其地址的某些位映射到特定的集合, 但一旦映射到某个集合,该数据可以存放在该集合的任何一个缓存行中</li><li>全相连缓存的内容轮替问题<ul><li>LRU (Least-recently-used): 全局计数器记录每个 Slot 的使用次数,每次丢弃使用次数最少的元素</li></ul></li><li>在缓存的时候我们不仅缓存目标, 还会根据空间临近性缓存目标附近的节点,因此尽可能按照内存中的顺序去访问元素, 可以提高运行效率 (例如: 对于arr[i][j] 以 i, j 顺序遍历会比 j, i 顺序遍历更优秀)</li></ul><h2id="w8l1-多处理器缓存-multiprocessor-caches-与缓存一致性-cache-coherency">W8L1多处理器缓存 (Multiprocessor Caches) 与缓存一致性 (Cache Coherency)</h2><ul><li><p>缓存一致性问题: 要保证缓存中的信息与主存中的信息一致. 如果 CPU只做读操作则可以确保一致. 如果 CPU 做写操作, 有两种处理模式</p><ul><li>write through: 在数据写入缓存的时候同步写入主存</li><li>write back: 数据只写入缓存, 当工作完成后再写入主存</li></ul><p>对于频繁修改的数据一般采用 write back</p></li><li><p>缓存未命中 (cache misses) 类型</p><ul><li>强制未命中 (compulsory miss): 对缓存行首次引用</li><li>容量未命中 (Capacity miss): 活跃缓存行太大, 无法缓存</li><li>冲突未命中 (Conflict miss): 目标已被缓存,但是缓存行被其他内容替换</li><li>一致性未命中 (coherency missing):缓存中的目标数据被标记为失效或者过时<ul><li>真共享未命中 (True-sharing miss): 我需要的数据在其他处理器中被修改,我的数据被标记为失效从而未命中</li><li>假共享未命中 (False-sharing miss):我需要的数据的所在的缓存行中的其他数据被其他处理器修改导致整个一行数据被标记为失效从而未命中(空间临近性导致缓存一般会缓存整块数据)</li></ul></li></ul></li><li><p>缓存一致性 (Cache coherency) 问题: 在多处理器结构的计算机中,同一内存地址中的数据可能会在缓存中保存多个副本.缓存一致性问题需要保证当数据被修改后在所有 cache 中均保持一致,以便程序员将多个 CPU 缓存中的多个副本视为一个相同的整体操作</p><p>解决方案</p><ul><li>采用 write through 策略</li><li>为所有 copy 同时执行写操作</li><li>在写操作一个 copy 时宣布其他 copy 失效</li></ul></li><li><p>缓存一致性协议根据实现分类:</p><ul><li>写时更新 (Write-update protocols)</li><li>写时失效 (Write-invalidate protocols)</li></ul></li><li><p>缓存一致性协议根据全局状态可用性分类</p><ul><li>Snoopy 协议:缓存被写入后通过总线向全局广播变更动作以便以便其他缓存失效 / 更新.(更新及时, 但是依赖广播, 占用大量带宽, 需要总线)</li><li>目录基协议 (Directory-based proticols): 维护一个中央目录,中央目录监听处理器写入操作, 并决定通过网络通知哪些节点失效 / 更新缓存(处理效率高, 占用资源少, 适用与大型多处理器结构)</li></ul></li></ul><h2 id="w8l2-写失效协议-write-invalidate-protocols">W8L2 写失效协议(Write-invalidate protocols)</h2><ul><li><p>模型</p><ul><li>基础的写失效模型也叫 MSI 模型, 即(M: 修改, S: 共享, I: 失效)</li><li>MOSI 模型在 MSI 模型的基础上加入了 O: Own</li><li>MESI 模型在 MSI 模型的基础上加入了 E: Exclusive</li><li>MOESI 模型是 MOSI 和 MESI 的组合</li></ul></li><li><p>MSI 模型</p><ul><li><p>S: 缓存从主存读取目标数据, 并标记自己为 Share 状态.其他缓存也希望读取目标数据, 此时其他缓存会直接从拥有数据的缓存中获取(因为更快) 并标记为 S</p></li><li><p>I: 某一个缓存修改了数据, 将除自己之外的缓存行标记为 I,将自己标记为 M. 修改结束后将数据写回主存, 将自己标记为 S,等待其他缓存调用数据. (这也意味着如果缓存处于 M 标记,他是全局唯一的)</p></li><li><p>M: 如果其他处理器要读写一个处于 M 状态的缓存, M 缓存需要先写回.如果请求读取则变更为 S 状态, 请求写则变更为 I</p></li><li><p>Read Hit: 如果处理器要读的缓存处于 M / S 就直接读缓存</p></li><li><p>Read Miss: 如果处理器要读的缓存处于 I,就需要从主存或者其他缓存读取, 然后将缓存设为 S</p></li><li><p>Write Hit: 如果缓存处于 M, 直接写入, 如果处于 S 需要先发 I再写入</p></li><li><p>Write Miss: 如果缓存处于 I, 需要先获取 S / M 的数据, 然后发 I,再写入</p></li><li><p>合法状态</p><p><img src="./img/25.png" /></p></li></ul></li><li><p>MOSI 模型:</p><ul><li><p>增加 O 状态: 表示当前缓存是该数据项的拥有者</p><p>O 标记的缓存可以被修改且暂时不写入主存,所有对数据的读均从该缓存读取</p><p>当缓存被轮替时数据需要写回主存</p><p>O 状态类似于一个拥有 Lazy 的 M 标记, 对所有请求完成代理.因此可以减少内存的读写次数</p></li><li><p>S 状态表示数据被 Shared, 但是因为有 O 的存在, S的数据可能比主存的新</p></li><li><p>M 状态表示脏数据, 同时全局独占. 与 O 相比没有 Lazy 属性,但是加入了独占的特性</p></li><li><p>合法状态</p><p><img src="./img/26.png" /></p></li></ul></li><li><p>MESI 模型: 增加 E 状态, 表示该数据在所有缓存中仅有这一份缓存,此时修改数据无需广播 I</p><p><img src="./img/27.png" /></p></li><li><p>MOSI 与 MESI</p><ul><li><p>MOSI</p><ul><li><p>在频繁共享修改的场景中更为高效</p><p>这是因为 O 状态减少了频繁回写内存的需要 在此状态下,拥有数据的缓存负责在数据块被替换时回写到内存,从而减少了内存访问次数</p></li><li><p>拥有状态的职责：</p><p>在MOSI协议中, O 负责在缓存块被替换时将其写回到内存.这样做可以延迟写回操作, 直到实际需要释放缓存空间时才进行,从而优化了性能</p></li></ul></li><li><p>MESI</p><ul><li><p>高效</p><p>在缓存行不经常在多个缓存之间共享的场景中更为高效, 通过减少不必要的 I操作来优化性能, 在MESI中, 如果一个缓存为 E, 那么它可以直接 M而无需通知其他缓存。</p></li><li><p>数据清洁要求：</p><p>MESI协议要求共享的数据必须是干净的, 即与内存中的数据一致.这确保了数据的正确性和一致性, 但在某些情况下可能会导致性能开销,因为每次数据从 S -&gt; M 时, 都需要先清理数据</p></li></ul></li><li><p>MESI协议通过其 E 状态减少了无效化的需要,这对于非共享数据的性能优化尤为重要.MOSI协议则侧重于减少对内存的写回操作,特别是在多个缓存频繁读写同一数据块的环境中, 通过 O状态延迟数据的写回</p></li></ul></li><li><p>MOESI: MOSI 和 MESI 的结合</p><p><img src="./img/28.png" /></p></li><li><p>MSI 优化: 减少 Fasle Sharing, 减少数组的写入操作</p><p><img src="./img/29.png" /></p><p>进程 i 计算 a_n_i 的和记录到 t_i. 如何采用<code>t[i] += a[n][i]</code> 的模式会导致 t 在进程中被修改 8 * n 次,每次相加, 都需要全局广播失效, 其他进程缓存的 t 就会失效造成 falsesharing, 即使该进程要处理的 t[i] 并没有变更. 我们可以先计算结构,然后赋值给 t 从而减少无效的广播</p></li></ul><h2 id="w9l1-写更新协议-write-update-protocols">W9L1 写更新协议(Write-update protocols) ??</h2><p>总线中包含一个 Msh 信号, 如果另一个缓存包含了请求的位置则断言(asserted) 这个信号. 缓存包含两个状态位: Shared, Dirty. 对共享位置写用write-through, 对非共享位置采用 write-back. 状态转换如图</p><p><img src="./img/30.png" /></p><ul><li>Pread / Pwrite: 缓存所属处理器读取 / 写入</li><li>Mread / Pwrite: 缓存不所属处理器读取 / 写入</li><li>有 (Msh) 表示操作是共享的 (比如 PWrite(Msh) 表示写入全部的缓存,PWrite(~Msh) 表示只修改当前缓存)</li><li>默认是 ~Share ~dirty, 本处理器读不转换, 本处理器写转为脏,他处理器读写转为共享非脏</li><li>~Share, Dirty 在本处理器读写保持不变. 他处理器读转为 SharedDirty</li><li>Shared ~Dirty 在任何处理器读, 外部处理器写入, 本处理器共享写入,外部处理器写入状态都不变. 本处理器独占写入转回 <sub>S</sub>D.</li><li>SD 模式在所有读取中转台都不变. 在外部写入或独占写入都会变回 S~D</li></ul><p>写更新协议的数据都是预填充的, 因此永远不会失效</p><h2 id="w9l2-w9l3-misp-处理器设计">W9L2 &amp; W9L3 MISP 处理器设计</h2><ul><li><p>寄存器很像一个 D 触发器, writeenable 开启后允许保持数据</p><p><img src="./img/31.png" /></p></li><li><p>寄存器文件 (Register File)</p><p><img src="./img/32.png" /></p><p>在处理器中一个多寄存器的集合, 包含32 位及存取, 需要 5 位指定地址,因为大多数操作是双操作数, 因此使用 busA/B RA/RB 实现双输入输出</p></li></ul><h2 id="w10l1-w10l2-流水线">W10L1 &amp; W10L2 流水线</h2><ul><li><p>优势: 流水线工作无法减少单个任务处理时间 (latency)但是可以提高系统整体吞吐量 (throughput)</p></li><li><p>劣势</p><ul><li>速率受限于最慢的阶段: 流水线的执行速度被最慢的阶段限制,这意味着整个流水线的速率不能快于其最慢的单个阶段</li><li>阶段长度不平衡降低效率: 如果流水线中的各个阶段处理速度不均匀,那么较快的阶段将需要等待较慢的阶段, 这会降低流水线的总体效率</li><li>管道填充和排出:启动流水线（填充）和完成所有任务后清空流水线（排出）需要额外的时间</li></ul></li><li><p>加载指令 (Load Instruction)</p><ul><li>指令提取Ifetch周期: 从指令内存中获取指令。</li><li>寄存器获取和指令解码Reg/Dec周期: 指令被解码,同时从寄存器文件中提取必要的寄存器值以供后续操作使用</li><li>执行/地址计算Exec周期:使用算术逻辑单元ALU计算需要访问的内存地址</li><li>内存访问Mem周期: 根据ALU计算出的地址从数据内存中读取所需的数据</li><li>写回WrLoad周期: 将从数据内存中读取的数据写回到寄存器文件中,以供程序后续使用</li></ul></li><li><p>不同处理器指令设计方式</p><ul><li>单周期实现 (Single Cycle Implementation):每个<strong>指令</strong>的所有阶段都必须在一个周期内完成,为了保证在一周期内可完成, 周期长度被设计为了最长任务的耗时</li><li>多周期实现 (Multiple Cycle Implementation):一个指令的不同阶段允许在多个周期中完成, 但是阶段一般是串行执行的,一般不在指令的子阶段中插入其他指令的任务</li><li>流水线实现 (Pipeline Implementation):允许同时执行多个指令的不同阶段</li></ul></li><li><p>不同处理器指令设计效率差异</p><ul><li>假设: 每条指令需要执行周期为CPI=3.8, 单周期实现每周期15ns,多周期实现每周期10ns, 分别计算执行100条指令耗时</li><li>单周期: <span class="math inline">\(100\times45\)</span></li><li>多周期: <spanclass="math inline">\(100\times3.8\times10\)</span></li><li>流水线: <span class="math inline">\((100+4)\times10\)</span> (这里<span class="math inline">\(+4\)</span>是因为我们默认一般指令需要5周期完成)</li></ul></li><li><p>流水线的风险 (Hazard)</p><ul><li><p>结构化危害 (Structural hazard):两条指令需要占用同一硬件资源</p></li><li><p>数据危害 (Data hazard):在流水线中两个指令在同一周期需要访问数据时. 具体分为</p><ul><li><p>读后写 (RAW): 后一条指令需要读前一条指令写后的结果,但是后一条指令的读出现在了前一条执行写之前 (例如指令1在第5cycle才写,但是指令而在第一cycle就读, 在time=cycle2时,指令2在指令1写之前就读了)</p><p><img src="./img/33.png" /></p></li><li><p>写后读 (WAR): 前一条指令需要在后一条指令读取先写入 (就是 RAW在对方处理器中的视角)</p></li><li><p>写后写 (WAW): 两个指令同时需要写入, 需要保证写入顺序</p></li></ul><p>数据危害可以在非竞态 (结构化危害) 时发生</p></li><li><p>控制危害 (Control hazard): 当处理器遇到一个分支指令时,通常需要一些时间来确定分支的条件是否成立(即是否需要跳转).在这个决定做出之前,处理器可能已经错误地预取了一些不应该执行的指令</p></li></ul></li><li><p>解决流水线风险</p><ul><li><p>结构化危害解决方法:</p><ul><li><p>流水线停顿(stall the pipeline): 引入气球 (Bubble)让指令晚若干拍执行</p><p><img src="./img/34.png" /></p><p>在这里指令4原本会在Cycle4时与指令1冲突,我们引入一层气球要求指令4慢一个周期执行就可以规避指令 1, 4 冲突,但是此时指令2, 4又冲突了.我们一共需要4层气球才可以避免指令4的冲突</p></li><li><p>使用多端口(multi-port)内存: 允许同时读写的内存</p></li><li><p>分离数据内存和指令内存: 从而实现可以同时读取数据和指令,减少冲突</p></li></ul></li><li><p>数据危害解决方法</p><ul><li><p>数据转发 (Data Forwarding): 允许 ALU将计算结果直接转发到需要数据的pipline, 从而减少数据危害</p><p><img src="./img/35.png" /></p><p>在这里黄色先表示出现数据危害, 绿色线表示没有出现危害.实际上数据在指令1的ALU部分就计算完成, 需要的数据已经产生,但是因为数据还没有写入寄存器. 导致我们其他pipline无法使用,我们可以直接在 ALU 计算出结果后直接将数据发送给需要数据会产生数据危害的pipline</p><p><img src="./img/36.png" /></p></li><li><p>流水线停顿(Pipeline Stalling):将转发与气泡方法结合起来以解决读操作在ALU计算之前的情况</p><p><img src="./img/37.png" /></p><p><img src="./img/38.png" /></p></li><li><p>指令重排(Instruction Scheduling): 可以将顺序无关,无数据冲突的指令插入到气泡中以提高效率</p><p><img src="./img/39.png" /></p></li></ul></li><li><p>控制危害解决方法:</p><ul><li><p>流水线停顿(Pipeline Stalling):遇到分支指令时，暂停流水线的执行，直到能够明确分支的走向（是否跳转及跳转地址）。这种方法可以确保执行流的正确性，但会导致流水线效率下降，因为在决策过程中流水线不能执行其他指令。</p></li><li><p>分支预测</p><p>R10K处理器采用分支预测以解决控制危害：</p><ul><li><p>将零测试移至ID/RF阶段 (Move Zero test to ID/RF stage)</p><p>在指令译码(ID)/寄存器获取(RF)阶段进行零测试,即尽早检查分支条件是否满足(如比较结果是否为零).这样可以更早地确定分支的走向, 减少需要等待的时间</p></li><li><p>在ID/RF阶段添加加法器计算新的程序计数器(PC) (Adder to calculatenew PC in ID/RF stage)</p><p>在指令译码/寄存器获取阶段加入一个加法器来计算新的程序计数器地址.这意味着如果预测分支将要执行, 处理器可以立即计算出跳转后的地址,进一步减少分支解析的延迟</p></li></ul></li></ul></li></ul></li></ul><h2 id="w10l3-superscalar-处理器">W10L3 Superscalar 处理器</h2><ul><li><p>Superscalar 处理器是一种微处理器的体系结构,它可以在一个时钟周期内并行执行 (issue)多个指令(即开启多个pipeline).</p></li><li><p>指令分组: 为实现并发计算, Superscalar 需要将指令分组,分组需要考虑降低 pipeline hazard. 有两种分组方式</p><ul><li>静态多执行 (Static multiple issue): 在编译阶段将指令分成多个指令包(issue packet). 指令包可以被视为一个非常长的指令 (VLIW: Very LongInstruction word. EPIC: explicitly parallel instruction computer)</li><li>动态多执行 (Dynamic mutiple issue): 硬件在运行时做出分组决策</li></ul></li><li><p>延迟 (Latency): 执行指令需要的时钟周期数. 在流水线中,由于处理器是流水线化的, 所以在前一条指令正在执行的同时,下一条指令可以在下一个周期开始执行</p></li><li><p>重复率 (Repeat rate):执行相同类型的另一条指令之前需要等待的周期数.</p></li><li><p>MIPS R10K 处理器: 该处理器是一种简单的 Superscalar 处理器,有四个不完全独立的核心. 在每个时钟周期</p><ul><li>最多有两个核心执行浮点数计算</li><li>最多有两个核心执行整数计算</li><li>最多执行一条内存存取操作 (load / store)</li><li>最多可以将一个整数核心用作分支判断</li></ul></li><li><p><strong>DAXPY 的 MISP R10K 处理器调度模拟</strong></p><p>DAXPY 问题其实就是计算 <span class="math inline">\(ax+y\)</span>向量的结果, 实现代码为</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">for (i &#x3D; 0; i &lt; N; i++) &#123; y[i] &#x3D; a * x[i] + y[i];&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>在做 CPU 调度前, 我们需要将其编译为汇编形式</p><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">addiu $s4, $s2, 1000; 令 $s4 &#x3D; $s2 + 1000 (这里 $s2 是 x 的指针. $s4 是遍历终止地址)addiu $s6, $s3, 1000; 令 $s6 &#x3D; $s3 + 1000 (这里 $s3 是 y 的指针. $s6 是遍历终止地址)Loop:    lf $f2, 0($s2); 将临时变量 $f2 设为 $s2 的值, 也就是 $f2 &#x3D; x_i    lf $f3, 0($s3); 将临时变量 $f3 设为 $s3 的值, 也就是 $f3 &#x3D; y_i    madd $f3, $s1, $f2; 执行乘加操作: $f3 &#x3D; $f3 + $s1 * $f2. 这里 $s1 是我们假设的 a. 即 y_i &#x3D; a * x_i + y_i    sf $f3, 0($s3); 将 $f3 存入 $s3 的位置, 即将临时的 y_i 存入 y 数组    addiu $s2, $s2, 4; $s2 指针后移 4, 移动到 x_i+1    addiu $s3, $s3, 4; $s3 指针后移 4, 移动到 y_i+1    bne $s2, $s4, Loop; 如果 $s2 &#x3D; $s4, 即到达最终条件, 退出循环<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>MISP R10K 的指令表如下</p><table><thead><tr class="header"><th>Instruction</th><th>Latency</th><th>Repeat rate</th></tr></thead><tbody><tr class="odd"><td>Integer add/sub/logical/branch</td><td>1</td><td>1</td></tr><tr class="even"><td>Integer load/store</td><td>2</td><td>1</td></tr><tr class="odd"><td>Floating-point load/store</td><td>3</td><td>1</td></tr><tr class="even"><td>Floating-point add/sub/multiply</td><td>2</td><td>1</td></tr><tr class="odd"><td>Floating-point multiply-add</td><td>3</td><td>1</td></tr><tr class="even"><td>Floating-point division</td><td>19</td><td>21</td></tr></tbody></table><p>尝试完成一个循环内部的指令分配. 一共四个 Function Unit, 两个 FloatProcesser, 两个 Int Processer</p><ul><li>时钟周期 1: 在一个浮点核心上执行 lf (load float) 获取<code>x_i</code> 到 <code>$f2</code></li><li>因为一个时钟周期只能执行一次内存读写,因此该周期没有其他指令要执行</li><li>时钟周期 2: 在一个浮点核心上执行 lf (load float) 获取<code>y_i</code> 到 <code>$f3</code></li><li>load float 有 3 个时钟周期的延迟. 因为下一条指令依赖<code>$f2</code>, <code>$f3</code>, 所以 3, 4 周期没有操作</li><li>时钟周期 5: 一个浮点核心执行乘加操作, 延迟为 3</li><li>时钟周期 5: 另一个整数核心执行 x 指针移动操作, 延迟为 1</li><li>因为 y 在存储之前不能移动指针, 所以 y 指针移动不能在 store float之前, 而 store float 需要在 <code>$f3</code> 计算出来之后, 因此 storefloat 和 addiu 必须等 madd 结束. 因此时钟周期 6, 7 无操作, 需要等待 madd的延迟</li><li>时钟周期 8: 一个浮点核心完成 <code>$f3</code> 的存储,一个整数核心完成 y 指针的移动, 一个整数核心完成循环结束条件判断</li></ul><p>最后分配表如下:</p><table><thead><tr class="header"><th>Cycle</th><th>FU #1 (FP)</th><th>FU #2 (INT)</th><th>FU #3 (INT)</th><th>FU #1 (FP)</th></tr></thead><tbody><tr class="odd"><td>1</td><td>lf x1</td><td></td><td></td><td></td></tr><tr class="even"><td>2</td><td>lf y1</td><td></td><td></td><td></td></tr><tr class="odd"><td>3</td><td></td><td></td><td></td><td></td></tr><tr class="even"><td>4</td><td></td><td></td><td></td><td></td></tr><tr class="odd"><td>5</td><td></td><td>addiu(x1)</td><td></td><td>madd x1, y1</td></tr><tr class="even"><td>6</td><td></td><td></td><td></td><td></td></tr><tr class="odd"><td>7</td><td></td><td></td><td></td><td></td></tr><tr class="even"><td>8</td><td>sf y1</td><td>addiu(y1)</td><td>bne</td><td></td></tr></tbody></table></li><li><p>尝试循环展开. 展开循环并再次分配指令, 我们可以发现 CPU利用率会提高</p></li></ul><h2 id="w11l1-w11l2-多处理器调度">W11L1 &amp; W11L2 多处理器调度</h2><ul><li><p>提升流水线效率的方法: Loop Unrolling</p></li><li><p>生成周期 (makespan): 处理完成多任务需要的时间</p></li><li><p>最小化生成周期是一个 NP Hard 问题,我们可以通过贪婪算法得到生成周期最小值的近似值</p></li><li><p>贪心调度 (Greedy Scheduler)</p><ul><li>思想: 只要有任务可执行就不要让CPU空闲 (将所有任务存储到列表中,一旦有CPU空闲就取走列表中第一个)</li><li>调度时可以采用最短, 最长任务优先的方式, 但是都无法保证最小 makespan(考试也没法考吧)</li><li>我们算不出最小值, 只能知道最小值的下限是 运行时间和/处理器数</li><li>调度时还可能遇到任务之间的以来关系, 这让最小化 makespan 更难.</li></ul></li><li><p>减少 makespan 的方法</p><ul><li>增加核心个数: 可能都帮助, 但是如果遇到严格依赖关系的任务,增加核心可能完全没有帮助, <strong>甚至由于命中贪心调度的缺陷导致提高makespan</strong></li><li>减少每个任务的运行时间 😂</li><li>简化依赖关系 (去除一些依赖)</li></ul></li><li><p>优先级调度</p><ul><li><p>长任务优先</p></li><li><p>被依赖越多的节点越优先</p></li><li><p>涉及到大量CPU通信时可以将任务复制到目标处理器上. 例如:有处理器1-3, 任务 1, 2. 任务1为读取数据 , 任务2为处理数据. 我们希望 CPU1执行任务1, CPU2,3 执行任务2. 但是将数据从 CPU1 发送到 CPU2需要花费大量时间. 我们可以将任务1 复制到CPU2,3上. 让 CPU 2,3直接读取数据, 处理数据</p><p><img src="./img/40.png" /></p><p>在这张图中, 将信息传输到另一个CPU需要1时钟周期. 如果在 P0 上运行T0,T1. 在 P1 上运行 T2. T1因为和T0共用CPU, 不需要时间传输数据.但是我们需要一个时钟周期将数据从P0发送到P1, 一共需要3时钟周期才能执行完.但是如果让P0, P1 同时运行 T0, 一共只需要2周期即可完成</p></li></ul></li><li><p>使用循环展开 (unlooping) 以提升运行速度:</p><p>假设一个指令需要一个时钟周期, 我们使用 4 homogenous Superscalar处理器</p><p><img src="./img/41.png" /></p><p>在上面这个例子中, Tb 指令依赖 Ta, 因此即使有四同构处理器, Ta, Tb依然需要串行执行. 最后共需要 2N * 2 = 4N 个时钟周期完成</p><p><img src="./img/42.png" /></p><p>在这个图中, 两个次循环被合并到了一起. 需要N个循环, 在每个循环中,Ta1Tb0依赖于Ta0, Tb1依赖于Ta1, 因此, 一个循环需要3个独立指令, 其中 Tb0,Ta1 两个指令可以在第二个时钟周期由两个核心同时完成. 通过这种循环展开,我们只需要 N * 3 = 3N 个时钟周期即可完成循环</p><p>在这个例子中, 假设loop unrolling u次, 每次需要执行 2u+2 个任务, 需要u+2 个 时钟周期, 所以速度是串行执行的 (2u+2)/(u+2). 可以看到此时 CPU利用率始终无法超过 1/2 (假设是4同构)</p></li></ul><h2 id="w11l3-进程-线程">W11L3 进程, 线程</h2><ul><li><p>内存分为四种: 指令内存 (code), 静态数据内存 (编译阶段分配的空间),动态数据内存 (运行时分配的空间), 堆栈 (存储函数调用信息)</p></li><li><p>进程与线程</p><p>进程 (process) 独享一内存与寄存器, 线程共享静态动态数据内存,指令内存, 独享寄存器与堆栈</p><p><img src="./img/43.png" /></p><p>线程是程序中的一部分, 可以独立执行一部分代码. 线程可以并发执行.线程之间共享数据内存与指令内存, 因此线程之间可以共享数据.需要使用同步机制解决线程之间的数据冲突与不一致问题</p></li><li><p>使用线程的好处:</p><ul><li>性能提升: 多处理器系统允许线程在多个核心上运行,单处理器中可以让计算密集与IO密集任务同时执行</li><li>在使用支持并行计算的程序时候可以更快的同时处理多个事务</li></ul></li><li><p>多线程应用中线程允许共享的资源</p><ul><li>地址空间与存储信息 (Address space, shared storage)</li><li>进程, 父进程, 进程组ID (The process ID, parent process ID, processgroup ID)</li><li>用户, 用户组, 附加组ID (User ids, Group ids, Supplementary groupids)</li><li>当前工作目录, 文件权限, 文件描述符 (允许同时写入文件) (Currentworking directory, root directory, File-mode creation mask, Filedescriptor table)</li><li>信号处理器, 计时器 (Signal handlers, Timers)</li></ul></li><li><p>多线程应用线程私有的资源</p><ul><li>线程ID (thread ids)</li><li>控制流的支持资源 (如堆栈) (Resources required to support a flow ofcontrol (such as a stack))</li><li>错误号 (C/Unix errno)</li><li>与线程ID绑定的资源 (废话) (Thread-specific key/value bindings)</li><li>每线程取消处理器 (Per-thread cancellation handlers)</li><li>每线程信号掩码 (Per-thread signal masks)</li></ul></li><li><p>在windows系统的计算机上编写了一个平台无关的软件, 并编译为了exe.当我将计算机重装为linux, 为什么无法运行这个exe. (即使 CPU, 指令集,内存等硬件地址都是完全一样的):</p><ul><li>软件有可能调用了系统库, 系统库是不兼容的</li><li>可执行文件的协议是不同的 (描述格式不同, 例如软件入口的描述方法不同,PC 放置的地址就不同)</li></ul></li><li><p>线程在共享资源时应该避免竞态.避免的方式是采用访问授权制度</p></li><li><p>mutex</p><ul><li>互斥锁有两个状态: 锁定 (locked) 和解锁 (unlocked).当前有一个线程持有锁, 其他线程不能访问被锁定的资源</li><li>如果当前线程尝试获取互斥锁, 但是互斥锁已经被其他线程锁定,系统会将线程<strong>休眠</strong>(保存进程上下文), 放入睡眠队列.直到锁被释放, 系统会从睡眠队列中唤醒一个线程</li></ul></li><li><p>Condition Variables</p><ul><li>条件变量允许线程在不满足条件时等待</li><li>条件变量与互斥锁一起使用，以便在访问共享资源时能够安全地等待某个条件被满足</li></ul><p>简单的说条件变量可以让线程在不满足条件时被阻塞直到条件满足再恢复执行.例如, 在生产者消费者模型中, 我们可以简单的写</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">&#x2F;&#x2F; thread customer A  Mutex m;Product ps;  m.lock();while(ps is empty); &#x2F;&#x2F; 等待, 直到有东西被产出, 同时占用互斥锁不放process(ps[0]); &#x2F;&#x2F; 处理产出m.unlock(); &#x2F;&#x2F; 解除占用 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>当我们尝试加锁时如果锁正在使用, 线程会被阻塞, 没有 CPU资源被浪费. 同时生产者无法获取锁</p></li><li><p>但是在 while 循环中, 如果没有产出, <strong>while会一直执行造成大量 CPU 浪费</strong>, 同时保持互斥锁. 此时如果将<code>ps is empty</code> 替换为条件锁, 在不满足条件时,<strong>互斥锁会被暂时释放, 进程会被阻塞, 但是不占用 CPU</strong>.直到等待条件被满足, 条件变量会再次尝试获取互斥锁,并执行处理步骤.</p></li><li><p>一般条件变量在锁内执行, 一个条件变量一般还需要一个谓词(判断是否成立), mutex 才能工作.</p></li><li><p>也就是说流程是: 加锁, 判断谓词, 条件变量, 解锁.以下是一个简单的的生产者消费者例子</p></li></ul><p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">mutex m &#x3D; new mutex(); &#x2F;&#x2F; 获取锁condition_variable cv &#x3D; new condition_variable(); &#x2F;&#x2F; 构造条件变量bool desiredStateReached &#x3D; false; &#x2F;&#x2F; 默认不满足&#x2F;&#x2F; 消费者进程m.lock(); &#x2F;&#x2F; 1. 上锁, 占用通道while (!desiredStateReached) &#x2F;&#x2F; 2. 如果没有产物 9. 检查发现有产物了  cv.wait(m); &#x2F;&#x2F; 3. 释放锁, 直到等到 signal 7. 条件变量尝试获取锁process(); &#x2F;&#x2F; 10. 处理产物m.unlock(); &#x2F;&#x2F; 11. 解锁&#x2F;&#x2F; 生产者进程m.lock(); &#x2F;&#x2F; 4. 上锁, 占用通道desiredStateReached &#x3D; true; &#x2F;&#x2F; 5. 生产一些东西cv.signal(); &#x2F;&#x2F; 6. 通知条件变量条件可能改变了m.unlock(); &#x2F;&#x2F; 8. 解锁<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ul><h2 id="w12l1-锁的应用与信号量">W12L1 锁的应用与信号量</h2><ul><li><p>自旋锁 (Spinlock)</p><p>一种简单的 mutex 实现, 在发现锁被占用时不会进入休眠,而是进入<strong>循环忙等</strong> (类似于自旋)</p><p>自旋锁会消耗CPU资源用于检查锁的状态. 但是可以避免上下文切换 (例如 CPU保存上下文) 的开销</p><p>在等待时间比较短的情况下自旋锁的效率会比 mutex 高</p></li><li><p>读者写者问题</p><p>在处理共享数据时, 尤其是在读操作频繁而写操作相对较少的情况下,使用一个简单的 mutex 保护共享数据会限制并发读取的效率.为了允许多个线程并发地读取数据, 同时防止数据在写入时被并发访问,可以设计一个读写锁 (ReadWriteLock) 以实现如下目标:</p><ul><li><p>允许多个读者同时访问共享数据。</p></li><li><p>不允许写者与其他写者或读者同时访问共享数据。</p></li><li><p>确保写操作的独占性。</p></li></ul><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">class ReadWriteLock &#123;    int activeReaders &#x3D; 0    int waitingWriters &#x3D; 0    bool activeWriter &#x3D; false    Mutex readLockMutex    Mutex writeLockMutex    ConditionVariable condition      method readLock() &#123;        readLockMutex.lock()        while (activeWriter || waitingWriters &gt; 0) &#123;            condition.wait(readLockMutex)        &#125;        activeReaders++        readLockMutex.unlock()    &#125;      method readUnlock() &#123;        readLockMutex.lock()        activeReaders--        if (activeReaders &#x3D;&#x3D; 0 &amp;&amp; waitingWriters &gt; 0) &#123;            condition.signal()  &#x2F;&#x2F; Wake up one waiting writer        &#125;        readLockMutex.unlock()    &#125;    method writeLock() &#123;        writeLockMutex.lock()        waitingWriters++        while (activeWriter || activeReaders &gt; 0) &#123;            condition.wait(writeLockMutex)        &#125;        activeWriter &#x3D; true        waitingWriters--        writeLockMutex.unlock()    &#125;    method writeUnlock() &#123;        writeLockMutex.lock()        activeWriter &#x3D; false        condition.broadcast()  &#x2F;&#x2F; Wake up all waiting readers and one writer        writeSo that’sLockMutex.unlock()    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>生产者消费者问题</p><p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">class Buffer &#123;private:    Queue&lt;int&gt; items;    int capacity;    Mutex mutex;    ConditionVariable notFull;    ConditionNumber notEmpty;public:    Buffer(int size) : capacity(size) &#123;&#125;    void produce(int item) &#123;        mutex.lock();        while (items.size() &#x3D;&#x3D; capacity) &#123;            notFull.wait(mutex);        &#125;        items.enqueue(item);        notEmpty.signal();        mutex.unlock();    &#125;    int consume() &#123;        mutex.lock();        while (items.isEmpty()) &#123;            notEmpty.wait(mutex);        &#125;        int item &#x3D; items.dequeue();        notFull.signal();        mutex.unlock();        return item;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>哲学家就餐问题</p><p>多个哲学家围坐一桌, 交替地进行思考和就餐, 每两个哲学家之间有一支叉子,哲学家就餐时需要同时使用两支叉子,互斥锁用于保证每个哲学家在就餐时独占两支叉子, 防止发生死锁</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">class DiningPhilosophers &#123;private:    Mutex forks[5];  &#x2F;&#x2F; 五个叉子，每个哲学家两个public:    void startEating(int philosopherId) &#123;        int left &#x3D; philosopherId;        int right &#x3D; (philosopherId + 1) % 5;        forks[min(left, right)].lock();  &#x2F;&#x2F; 总是先拿编号小的叉子        forks[max(left, right)].lock();        eat();        forks[left].unlock();        forks[right].unlock();    &#125;    void eat() &#123;        &#x2F;&#x2F; 哲学家吃饭的代码    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>睡眠理发师问题</p><p>一个理发师和理发店, 理发师只有在有顾客时才工作,没有顾客时就在等待椻上睡觉. 当一个顾客到来时, 如果所有椅子都被占据,则顾客会离开; 如果理发师正在睡眠, 则顾客会唤醒他.使用互斥锁和信号量来控制理发师和顾客之间的同步</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">class BarberShop &#123;private:    int waitingCustomers &#x3D; 0;    Mutex mutex;    ConditionVariable barberReady;    ConditionVariable customerReady;public:    void customerArrives() &#123;        mutex.lock();        if (waitingCustomers &lt; MAX_CUSTOMERS) &#123;            waitingCustomers++;            customerReady.signal();  &#x2F;&#x2F; 告诉理发师有顾客            barberReady.wait(mutex);  &#x2F;&#x2F; 等待理发师准备好            getHaircut();            waitingCustomers--;        &#125;        mutex.unlock();    &#125;    void barberWorks() &#123;        while (true) &#123;            mutex.lock();            while (waitingCustomers &#x3D;&#x3D; 0) &#123;                customerReady.wait(mutex);  &#x2F;&#x2F; 等待顾客            &#125;            barberReady.signal();  &#x2F;&#x2F; 告诉顾客理发师准备好了            cutHair();            mutex.unlock();        &#125;    &#125;    void cutHair() &#123;        &#x2F;&#x2F; 理发师剪发的代码    &#125;    void getHaircut() &#123;        &#x2F;&#x2F; 顾客理发的代码    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>吃水果问题</p><p>桌上有一空盘, 最多允许存放一只水果.爸爸可向盘中放一个苹果或放一个桔子, 儿子专等吃盘中的桔子,女儿专等吃苹果.</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">class FruitBowl &#123;    enum Fruit &#123; NONE, APPLE, ORANGE &#125; fruit &#x3D; NONE;    Mutex mutex;    ConditionVariable hasApple;    ConditionVariable hasOrange;    &#x2F;&#x2F; 爸爸放一个苹果    void putApple() &#123;        mutex.lock();        while (fruit !&#x3D; NONE) &#123;  &#x2F;&#x2F; 如果盘中已有水果，等待            hasApple.wait(mutex);  &#x2F;&#x2F; 等待女儿吃掉苹果        &#125;        fruit &#x3D; APPLE;  &#x2F;&#x2F; 放苹果        hasApple.signal();  &#x2F;&#x2F; 通知女儿可以吃苹果        mutex.unlock();    &#125;    &#x2F;&#x2F; 爸爸放一个桔子    void putOrange() &#123;        mutex.lock();        while (fruit !&#x3D; NONE) &#123;  &#x2F;&#x2F; 如果盘中已有水果，等待            hasOrange.wait(mutex);  &#x2F;&#x2F; 等待儿子吃掉桔子        &#125;        fruit &#x3D; ORANGE;  &#x2F;&#x2F; 放桔子        hasOrange.signal();  &#x2F;&#x2F; 通知儿子可以吃桔子        mutex.unlock();    &#125;    &#x2F;&#x2F; 女儿吃苹果    void eatApple() &#123;        mutex.lock();        while (fruit !&#x3D; APPLE) &#123;  &#x2F;&#x2F; 如果盘中不是苹果，等待            hasApple.wait(mutex);        &#125;        fruit &#x3D; NONE;  &#x2F;&#x2F; 吃掉苹果，盘子变空        hasOrange.signal();  &#x2F;&#x2F; 通知爸爸可以放桔子        mutex.unlock();    &#125;    &#x2F;&#x2F; 儿子吃桔子    void eatOrange() &#123;        mutex.lock();        while (fruit !&#x3D; ORANGE) &#123;  &#x2F;&#x2F; 如果盘中不是桔子，等待            hasOrange.wait(mutex);        &#125;        fruit &#x3D; NONE;  &#x2F;&#x2F; 吃掉桔子，盘子变空        hasApple.signal();  &#x2F;&#x2F; 通知爸爸可以放苹果        mutex.unlock();    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="w12l2-信号量">W12L2 信号量</h2><ul><li><p>信号量 (Semaphore)</p><p>用于控制对有限数量资源的访问.它通过一个计数器来管理资源单位的使用情况,该计数器表示当前可用资源的数量. 信号量主要用于实现资源的互斥访问和同步,尤其适用于需要多个相同资源的场景。</p></li><li><p>信号量主要有两个操作：<code>wait()</code> 和<code>signal()</code>。</p><ul><li><code>wait()</code> (也称 <code>P</code> 操作或 <code>down</code>操作): 当一个线程想要获取资源时, 它调用<code>wait()</code>.如果信号量的计数器大于零, 这意味着有资源可用, 计数器将减一,表示一个资源单位已被占用. 如果计数器为零,调用<code>wait()</code>的线程将阻塞, 直到有资源变为可用</li><li><code>signal()</code>: (有时也称为 <code>V</code> 操作或<code>up</code> 操作): 当线程释放一个资源时, 它调用<code>signal()</code>. 这会使信号量的计数器增加一, 表示有更多资源可用,如果有其他线程因为 <code>wait()</code> 而阻塞, <code>signal()</code>还将唤醒这些线程中的一个</li></ul></li><li><p>使用 mutex 实现信号量</p><p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">class Semaphore &#123;private:    int count;  &#x2F;&#x2F; 可用资源的计数    mutex m;  &#x2F;&#x2F; 互斥锁，保护对count的访问    condition_variable cv;  &#x2F;&#x2F; 条件变量，用于阻塞和唤醒线程public:    &#x2F;&#x2F; 构造函数：初始化资源计数和同步原语    Semaphore(int max) &#123;        count &#x3D; max;  &#x2F;&#x2F; 设置最大可用资源数    &#125;    &#x2F;&#x2F; 等待资源    void wait() &#123;        m.lock();        while (count &lt;&#x3D; 0) &#123;  &#x2F;&#x2F; 如果没有可用资源，等待            cv.wait(m);        &#125;        --count;  &#x2F;&#x2F; 获取资源，计数减一        m.unlock();    &#125;    &#x2F;&#x2F; 释放资源    void signal() &#123;        m.lock();        ++count;  &#x2F;&#x2F; 释放资源，计数加一        cv.signal();  &#x2F;&#x2F; 唤醒一个等待资源的线程        m.unlock();    &#125;&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>试衣间问题:</p><p>假设一个商店有三个试衣间，客户需要独占访问任何一个试衣间。我们可以使用信号量来控制对这些试衣间的访问：</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">Semaphore fittingRooms(3);  &#x2F;&#x2F; 创建一个初始计数为3的信号量，对应三个试衣间&#x2F;&#x2F; 客户试图进入试衣间fittingRooms.wait();  &#x2F;&#x2F; 等待访问一个试衣间tryClothes();  &#x2F;&#x2F; 客户正在试衣间里试衣服fittingRooms.signal();  &#x2F;&#x2F; 完成后释放试衣间<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>实现一个当 mutex 不再被使用时候自动解锁的锁(利用垃圾回收机制)</p><p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">class AutoUnlockLock &#123;    Mutex mutex    &#x2F;&#x2F; 构造函数：获取锁    constructor() &#123;        mutex.lock()    &#125;    &#x2F;&#x2F; 析构函数：释放锁    destructor() &#123;        mutex.unlock()    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>Monitor 类的实现 (这个应该不考)</p><p>将常见的 mutex 操作与条件变量操作封装在一起. 方便使用</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">abstract class Monitor &#123;private:    mutex m;    condition_variable cv;public:    void Lock() &#123;        m.lock();    &#125;    void Unlock() &#123;        m.unlock();    &#125;    void Wait() &#123;        std::unique_lock&lt;std::mutex&gt; lk(m);        cv.wait(lk);    &#125;    void SignalOne() &#123; &#x2F;&#x2F; 通知一个睡眠线程        cv.notify_one();    &#125;    void SignalAll() &#123; &#x2F;&#x2F; 通知所有随眠线程        cv.notify_all();    &#125;&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
    
    
    <summary type="html">课程分为分布式计算与并行计算两个部分. 前半部分介绍了在分布式计算系统中, 如何实现去中心化的消息通信与系统状态检测. 后半部分介绍了在 CPU 中, 核心之间如何配合以完成多核间的可靠并行计算.</summary>
    
    
    
    <category term="计算机理论" scheme="https://blog.liukairui.me/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%90%86%E8%AE%BA/"/>
    
    <category term="并行与分布式计算" scheme="https://blog.liukairui.me/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%90%86%E8%AE%BA/%E5%B9%B6%E8%A1%8C%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97/"/>
    
    
    <category term="笔记" scheme="https://blog.liukairui.me/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="计算机理论" scheme="https://blog.liukairui.me/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%90%86%E8%AE%BA/"/>
    
    <category term="并行计算" scheme="https://blog.liukairui.me/tags/%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97/"/>
    
    <category term="分布式计算" scheme="https://blog.liukairui.me/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97/"/>
    
  </entry>
  
  <entry>
    <title>基于 Peer.js 的 WebRTC 视频会议实现难点</title>
    <link href="https://blog.liukairui.me/article/%E5%9F%BA%E4%BA%8EPeer.js%E7%9A%84WebRTC%E8%A7%86%E9%A2%91%E4%BC%9A%E8%AE%AE%E5%AE%9E%E7%8E%B0%E9%9A%BE%E7%82%B9/"/>
    <id>https://blog.liukairui.me/article/%E5%9F%BA%E4%BA%8EPeer.js%E7%9A%84WebRTC%E8%A7%86%E9%A2%91%E4%BC%9A%E8%AE%AE%E5%AE%9E%E7%8E%B0%E9%9A%BE%E7%82%B9/</id>
    <published>2024-04-22T16:00:01.000Z</published>
    <updated>2024-04-22T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="webrtc-协议带来的限制">WebRTC 协议带来的限制</h2><ul><li><p><strong>媒体流属性的随机化处理</strong></p><ul><li><p>RTC 协议要求接收方在接收到媒体流后复写 media track 上的 id,label, contentHint 等属性以保证流属性不会泄漏发送者的媒体设备信息,并使流在 P2P 网络中唯一.</p><p>这导致接收者无法区分流中的同类型 track. 例如发送者将相机,屏幕共享两条视频轨道合在同一条流中发给接受者,发送者不知道这两条流到接受者处时 Id 分别是什么,接受者也无法区分哪个是屏幕共享, 哪个是视频流</p></li><li><p>解决方法: 在传输多个 track 需要分离的时建立多条 P2P 连接(虽然看起来很蠢)</p></li></ul></li><li><p><strong>FireFox 禁止两个相同节点之间无法建立多条连接</strong></p><ul><li><p>FirFox 禁止两个相同节点做多次媒体协, 也就是说 A 节点最多 call B节点一次.</p></li><li><p>解决方案: 如果需要建立两条流 (例如相机和屏幕共享流) 就让 A, B互相 call 一次</p></li></ul></li><li><p><strong>一旦连接建立, 不能添加或者删除 Track</strong></p><ul><li><p>建立 RTC 连接的时候虽然我们传入的是一个流,但是协议会获取流中的所有 Track, 然后传输这些 Track,这就意味着协议并不会引用流对象, 我们为流加入或者删除 Track 无法对 RTC产生影响.</p><p>例如用户目前正在使用前置摄像头, 当用户切换到后置摄像头时,如果我们删除流中的前置媒体流, 添加后置媒体流, RTC 连接并不会切换轨道,反而会认为无法获取轨道信息</p></li><li><p>解决方案: 在建立连接时创建最大可能使用数量的占位流,在增减设备时使用 RTC API 中的 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1JUQ1J0cFNlbmRlci9yZXBsYWNlVHJhY2s=">replaceTrack<i class="fa fa-external-link-alt"></i></span>方法替换占位流. 例如: 在传输摄像头和麦克风数据时,我们可能需要采集麦克风, 摄像头, 背景虚化遮罩的 Track,那么我们就需要使用一个占位 AudioTrack, 两个占位 VideoTrack.当启动摄像头时候, 将占位 Video Track 切换为实际 Track,在禁用摄像头时再切换回去</p></li></ul></li><li><p><strong>RTC 连接状态统计</strong></p><p>RTC 并不支持直接汇总全部 RTC 连接状态,只支持统计某一个连接的连接状态. 开发者可以通过 <ahref="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/getStats"><code>RTCPeerConnection.getStats</code></a>获取对于一个连接的不同主题的报告. 常见的有:</p><ul><li><p>统计比特率:</p><ol type="1"><li>获取当前连接发出或者接收到的总字节数</li><li>求和所有连接的收发的总字节数</li><li>比特率 = <code>8 * 两次检测时的字节数差 / 两次检测间隔</code></li></ol><p>获取收发字节数</p><ul><li>获取下行字节数: <code>report.type === 'inbound-rtp'</code> 的报告的<code>report.bytesReceived</code></li><li>获取上行字节数: <code>report.type === 'outbound-rtp'</code> 的报告的<code>report.bytesReceived</code></li></ul><p>区分媒体类型</p><ul><li>视频: <code>report.mediaType === 'video'</code></li><li>音频: <code>report.mediaType === 'audio'</code></li></ul></li><li><p>统计下行丢包率:</p><p>一个连接的累计丢包: <code>report.type === 'inbound-rtp'</code> 报告的<code>report.packetsLost</code></p><p>一个连接的从收包: <code>report.type === 'inbound-rtp'</code> 报告的<code>report.packageReceived</code></p><p>总下行丢包率:<code>所有连接的丢包量求和 / (所有连接的丢包量求和 + 所有连接的收包量和)</code></p></li><li><p>网络延迟:</p><p>一个连接的延迟: <code>report.currentRoundTripTime</code> (单位:s)</p><p>总延迟: <code>所有延迟求和 / 连接数量</code></p></li><li><p>视频帧率:</p><p>上行连接帧率: <code>report.type === 'outbound-rtp'</code> 报告的<code>report.framesPerSecond</code></p><p>下行连接帧率: <code>report.type === 'inbound-rtp'</code> 报告的<code>report.framesPerSecond</code></p><p>总帧率: <code>连接帧率求和 / 连接数</code></p></li><li><p>视频分辨率:</p><p>上行连接分辨率: <code>report.type === 'outbound-rtp'</code> 报告的<code>report.frameWidth</code>, <code>report.frameHeight</code></p><p>下行连接分辨率: <code>report.type === 'inbound-rtp'</code> 报告的<code>report.frameWidth</code>, <code>report.frameHeight</code></p></li></ul><p>实现可以参考 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0thaXJ1aUxpdS9jb25mbHV4LWNsaWVudC9ibG9iL21hc3Rlci9zcmMvdXRpbHMvcmVwb3J0LnRz">https://github.com/KairuiLiu/conflux-client/blob/master/src/utils/report.ts<i class="fa fa-external-link-alt"></i></span></p></li><li><p><strong>用来调试的 RTC 连接状态报告</strong>: <span class="exturl" data-url="Y2hyb21lOi8vd2VicnRjLWludGVybmFscy8=">chrome://webrtc-internals/<i class="fa fa-external-link-alt"></i></span></p></li></ul><h2 id="peer.js-库的限制">Peer.js 库的限制</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BlZXJzL3BlZXJqcw==">peer.js<i class="fa fa-external-link-alt"></i></span>项目目前并不是特别活跃, 挤压了很多 issue. 可以考虑切换到 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9zaW1wbGUtcGVlcg==">simple-peer<i class="fa fa-external-link-alt"></i></span></p><ul><li><p><strong>建立必须使用 avtive 流完成 <code>call()</code> 与<code>answer()</code></strong> <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BlZXJzL3BlZXJqcy9pc3N1ZXMvMzIz">#323<i class="fa fa-external-link-alt"></i></span></p><ul><li><p>通过 <code>call()</code> 建立连接时必须提供一条状态为<code>avtive</code> 的流, 否则默认失效.</p><p>通过 <code>answer()</code> 响应连接时必须提供一条状态为<code>active</code> 的流, 否则发起方无法进入 <code>on(stream)</code>事件</p></li><li><p>合理性: WebRTC 协议限制不可为流增删 track,因此如果你传入一个空流, 那么这个连接将永远为空</p></li><li><p>不合理性: 如果 caller 确实没有媒体信息就无法发起连接,即使他只是想单向获取对方的媒体流</p></li><li><p>解决方法: 构建一条空的 active 流用来占位,</p><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> createEmptyAudioTrack <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> MediaStreamTrack <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> oscillator <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createOscillator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> destination <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createMediaStreamDestination</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  oscillator<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>  oscillator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> track <span class="token operator">=</span> destination<span class="token punctuation">.</span>stream<span class="token punctuation">.</span><span class="token function">getAudioTracks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>track<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> enabled<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> MediaStreamTrack<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">const</span> createEmptyVideoTrack <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> MediaStreamTrack <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> canvas <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    width<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    height<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> stream <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">captureStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> track <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">getVideoTracks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>track<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> enabled<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> MediaStreamTrack<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>fakeVidioTrack <span class="token operator">=</span> <span class="token function">createEmptyVideoTrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>fakeAudioTrack <span class="token operator">=</span> <span class="token function">createEmptyAudioTrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mediaStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediaStream</span><span class="token punctuation">(</span><span class="token punctuation">[</span>audioTrack<span class="token punctuation">,</span> videoTrack<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong>只有 <code>call()</code> 方法可以传输 metadata,<code>answer()</code> 方法不可以</strong></p><ul><li>在 <code>call()</code> 的时候可以在第二参数中加入<code>&#123;meatadata: any&#125;</code> 向接受者发一些上下文, 但是接受者无法通过<code>answer()</code> 返回上下文</li><li>解决方法: 建立专门的数据流传输数据.同时注意数据流连接与媒体流连接支持的方法不同,数据流连接在发送数据前不仅要检查流 open, 还要检查流 connected(因为数据流是先建立, 然后多次互换数据, 而媒体流是在发送数据 call的时候建立连接)</li></ul></li></ul><h2 id="媒体流的处理与兼容性问题">媒体流的处理与兼容性问题</h2><ul><li><p><strong>媒体权限的获取与浏览器兼容性问题</strong></p><p>在首次 <code>navigator.mediaDevices.getUserMedia()</code>浏览器会提示用户授权. 但是这会导致设备列表只有在获取用户设备时才刷新.不方便 UI 展示. 建议采用如下方式:</p><ul><li><p><strong>判断是否授权</strong>:</p><ul><li><p>现代化的方法: 使用 <code>navigator.permissions</code></p><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> permissionName <span class="token operator">=</span> name <span class="token operator">===</span> <span class="token string">'microphone'</span> <span class="token comment">// 或者 'camera';</span>navigator<span class="token punctuation">.</span>permissions      <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> permissionName <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> PermissionName <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>permissionStatus<span class="token punctuation">)</span> <span class="token operator">=></span> permissionStatus<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">'granted'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>但是该 API 存在兼容性问题, 只有 Chrome 与 Safari 支持<code>microphone</code> 与 <code>camera</code> 这两个<code>permissionName</code>, FireFox 会报错</p></li><li><p>兜底方法: 检查<code>navigator.mediaDevices.enumerateDevices()</code> 中某类 type是否没有或者 Label 为空. 如果是则证明要么用户没有这类设备, 要么没有授权.该函数不会让浏览器弹出授权</p></li><li><p>总结: <pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">checkPermission</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token string">'audio'</span> <span class="token operator">|</span> <span class="token string">'video'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> permissionName <span class="token operator">=</span> name <span class="token operator">===</span> <span class="token string">'audio'</span> <span class="token operator">?</span> <span class="token string">'microphone'</span> <span class="token operator">:</span> <span class="token string">'camera'</span><span class="token punctuation">;</span>  <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> navigator<span class="token punctuation">.</span>permissions      <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> permissionName <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> PermissionName <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>permissionStatus<span class="token punctuation">)</span> <span class="token operator">=></span> permissionStatus<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">'granted'</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> navigator<span class="token punctuation">.</span>mediaDevices          <span class="token punctuation">.</span><span class="token function">enumerateDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>devices<span class="token punctuation">)</span> <span class="token operator">=></span>            devices<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>              <span class="token punctuation">(</span>device<span class="token punctuation">)</span> <span class="token operator">=></span> device<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">input</span><span class="token template-punctuation string">`</span></span> <span class="token operator">&amp;&amp;</span> device<span class="token punctuation">.</span>label <span class="token operator">!==</span> <span class="token string">''</span>            <span class="token punctuation">)</span>          <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> navigator<span class="token punctuation">.</span>mediaDevices      <span class="token punctuation">.</span><span class="token function">enumerateDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>devices<span class="token punctuation">)</span> <span class="token operator">=></span>        devices<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>          <span class="token punctuation">(</span>device<span class="token punctuation">)</span> <span class="token operator">=></span> device<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">input</span><span class="token template-punctuation string">`</span></span> <span class="token operator">&amp;&amp;</span> device<span class="token punctuation">.</span>label <span class="token operator">!==</span> <span class="token string">''</span>        <span class="token punctuation">)</span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ul></li><li><p><strong>申请授权</strong>:</p><p><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">requestPermission</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token string">'audio'</span> <span class="token operator">|</span> <span class="token string">'video'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> navigator<span class="token punctuation">.</span>mediaDevices    <span class="token punctuation">.</span><span class="token function">getUserMedia</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> video<span class="token operator">:</span> name <span class="token operator">===</span> <span class="token string">'video'</span><span class="token punctuation">,</span> audio<span class="token operator">:</span> name <span class="token operator">===</span> <span class="token string">'audio'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      stream<span class="token punctuation">.</span><span class="token function">getTracks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>track<span class="token punctuation">)</span> <span class="token operator">=></span> track<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p><strong>监控授权状态变化</strong></p><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>  navigator<span class="token punctuation">.</span>permissions    <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'camera'</span> <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> PermissionName <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>permissionStatus<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      permissionStatus<span class="token punctuation">.</span><span class="token function-variable function">onchange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token function">refreshMediaDevice</span><span class="token punctuation">(</span><span class="token string">'video'</span><span class="token punctuation">,</span> setState<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  navigator<span class="token punctuation">.</span>permissions    <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'microphone'</span> <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> PermissionName <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>permissionStatus<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      permissionStatus<span class="token punctuation">.</span><span class="token function-variable function">onchange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token function">refreshMediaDevice</span><span class="token punctuation">(</span><span class="token string">'audio'</span><span class="token punctuation">,</span> setState<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'[ERROR] on getting permission '</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>监控设备变化</strong></p><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">navigator<span class="token punctuation">.</span>mediaDevices<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'devicechange'</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><p><strong>指定音频输出设备</strong></p><p>注意: 仅桌面 Chrome 与 FireFox 浏览器支持支持, TS 也没有这个方法</p><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// @ts-ignore</span>audioElement<span class="token operator">?.</span>setSinkId<span class="token operator">?.</span><span class="token punctuation">(</span>speaker<span class="token punctuation">.</span>deviceId<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>指定音视频采集设备</strong></p><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> constraints<span class="token operator">:</span> MediaStreamConstraints <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> deviceId<span class="token operator">:</span> <span class="token punctuation">&#123;</span> exact<span class="token operator">:</span> deviceId <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>mediaDevices<span class="token punctuation">.</span><span class="token function">getUserMedia</span><span class="token punctuation">(</span>constraints<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>音频轨道音量统计</strong></p><p>注意: 音量取值是 <span class="math inline">\([0,1]\)</span>,当麦克风离得比较远时采集的音量一直很小, 进度条展示出来一直处于低点.可以采用 softmax 对结果做变化, 让用户可以明显看到音量变化</p><p>注意: <code>AudioContext</code> 并不能指定音频播放设备,因此不能用它来顺便播放音频.</p><p>原理:</p><ul><li>创建 <code>AnalyserNode</code>用于实时获取音频信号的时间域和频率域数据 (默认使用 FFT 采样)</li><li>使用 <code>getByteTimeDomainData</code> 获取最近的时域数据,值代表振幅值 (取值 0-256, 128 为静音)</li><li>每个样本值减去 128, 使得波形数据中心化到 0 (静音为 0)</li><li>将每个去中心化后的值求平方, 得到每个样本的能量,计算所有样本能量的平均值</li><li>计算平均能量的平方根, 得到均方根值, (当音量最大时, 均方根为255)</li></ul><p>实现:</p><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> useEffect<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useState <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> ProgressBar <span class="token keyword">from</span> <span class="token string">'../progress'</span><span class="token punctuation">;</span><span class="token keyword">const</span> SpeakerVolume<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span>  element<span class="token operator">?</span><span class="token operator">:</span> HTMLAudioElement<span class="token punctuation">;</span>  relitive<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> element<span class="token punctuation">,</span> relitive <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>volume<span class="token punctuation">,</span> setVolume<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// fucking react re-render on dev mode</span>  <span class="token keyword">const</span> animationFrameRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> audioContextRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>AudioContext<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> mediaStreamAudioSourceNodeRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>MediaElementAudioSourceNode<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> analyserNodeRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>AnalyserNode<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> linked <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> maxVolumeRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>element <span class="token operator">||</span> linked<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    maxVolumeRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    linked<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    audioContextRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mediaStreamAudioSourceNodeRef<span class="token punctuation">.</span>current <span class="token operator">=</span>      audioContextRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">createMediaElementSource</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>    analyserNodeRef<span class="token punctuation">.</span>current <span class="token operator">=</span> audioContextRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">createAnalyser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mediaStreamAudioSourceNodeRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>analyserNodeRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> dataArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>analyserNodeRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>frequencyBinCount<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token function-variable function">onFrame</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>analyserNodeRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        analyserNodeRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">getByteTimeDomainData</span><span class="token punctuation">(</span>dataArray<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dataArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          sum <span class="token operator">+=</span> <span class="token punctuation">(</span>dataArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">128</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>dataArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">const</span> realVolume <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>sum <span class="token operator">/</span> dataArray<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">255</span><span class="token punctuation">;</span>        maxVolumeRef<span class="token punctuation">.</span>current <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxVolumeRef<span class="token punctuation">.</span>current<span class="token punctuation">,</span> realVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>relitive<span class="token punctuation">)</span> <span class="token function">setVolume</span><span class="token punctuation">(</span>realVolume <span class="token operator">/</span> maxVolumeRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token function">setVolume</span><span class="token punctuation">(</span>realVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      animationFrameRef<span class="token punctuation">.</span>current <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>onFrame<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>onFrame<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      mediaStreamAudioSourceNodeRef<span class="token punctuation">.</span>current<span class="token operator">?.</span>disconnect<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      analyserNodeRef<span class="token punctuation">.</span>current<span class="token operator">?.</span>disconnect<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>animationFrameRef<span class="token punctuation">.</span>current<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      linked<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token function">setVolume</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>element<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProgressBar</span></span> <span class="token attr-name">progress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>volume<span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> SpeakerVolume<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
    
    
    <summary type="html">视频会议系统开发中遇到的 Peer.js 封装问题, WebRTC 协议限制, 媒体流处理及兼容性问题</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="WebRTC" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/WebRTC/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="WebRTC" scheme="https://blog.liukairui.me/tags/WebRTC/"/>
    
    <category term="WebSocket" scheme="https://blog.liukairui.me/tags/WebSocket/"/>
    
    <category term="Peer.js" scheme="https://blog.liukairui.me/tags/Peer-js/"/>
    
  </entry>
  
  <entry>
    <title>React渲染与更新的基本原理与实现</title>
    <link href="https://blog.liukairui.me/article/React%E6%B8%B2%E6%9F%93%E4%B8%8E%E6%9B%B4%E6%96%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
    <id>https://blog.liukairui.me/article/React%E6%B8%B2%E6%9F%93%E4%B8%8E%E6%9B%B4%E6%96%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0/</id>
    <published>2024-03-10T16:00:01.000Z</published>
    <updated>2024-03-10T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>完整代码: <span class="exturl" data-url="aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vS2FpcnVpTGl1L2RjOGFhYWIxNzc3NDI1ZWNlM2E3NDZlMzVmM2RlNDJj">GitHubGist<i class="fa fa-external-link-alt"></i></span></p><h2 id="总览与环境搭建">总览与环境搭建</h2><p>模板: React 以 <code>[JT]sx</code> 作为模板,无需自己实现编译模块.</p><p>响应式: React 对外暴露 <code>useState</code>, 用户调用<code>setState</code> 后 React 对组件做重新构建, 对比 vDOM的变化并完成节点的替换</p><p>核心: React 的基本数据结构 Fiber 串起整个渲染流, 挂载,更新等机制都通过 Fiber 链这一数据结构完成.</p><p><strong>实验环境搭建</strong></p><ul><li><p>初始化项目</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">pnpm</span> init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>安装 Vite 用于 jsx 的编译与项目打包</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> vite<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>创建入口文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">.</span>├── components│   └── Welcome.jsx├── core│   ├── ReactDOM.js│   └── React.js├── index.html├── main.jsx├── package.json└── pnpm-lock.yaml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="实现简易挂载-同步渲染-同步挂载">实现简易挂载 (同步渲染,同步挂载)</h2><p><strong>实现 <code>index.html</code></strong></p><p>我们需要一个组件的挂载容器, 引入 JS 的入口文件<code>main.jsx</code></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!--...--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/main.jsx<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>实现 <code>main.jsx</code></strong></p><p>只需要实现获取挂载节点并挂载组件的操作</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'./core/ReactDOM'</span><span class="token punctuation">;</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'./core/React'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Welcome <span class="token keyword">from</span> <span class="token string">'./components/Welcome'</span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>Welcome<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这里 <code>import React from './core/React';</code>可能会报错引入但没有使用. 我们应该保留这段代码,因为所有的<code>JSX</code> Element 在编译后都会默认变成<code>React.createElement(nodeName, props, ...children)</code>如果不引入 <code>React</code> 编译后的代码就会报错找不到<code>createElement</code></p><p><strong>暂时实现 <code>Welcome.jsx</code></strong></p><p>我们暂时没有实现函数式组件, 因此直接导出一个对象</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'../core/React'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">      Hello World </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>emoji<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">🤗</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">This is a mini react</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">    Looks Cool !  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这里我们测试了:</p><ul><li>嵌套 Element 的构建</li><li>props 的构建</li><li>TextNode 与 Element 混杂构建</li></ul><p><strong>实现 <code>ReactDOM.js</code></strong></p><p>需要实现 <code>ReactDOM.createRoot</code> 用于接受挂载根, 并暴露<code>render</code> 方法用来接受根节点的组件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'./React.js'</span><span class="token punctuation">;</span><span class="token keyword">const</span> ReactDOM <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">createRoot</span><span class="token punctuation">(</span><span class="token parameter">container</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        React<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> ReactDOM<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>render</code> 的实现交给 <code>React.js</code> 完成</p><p><strong>实现 <code>React.js</code></strong></p><p>首先看一下 Component 的编译后代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"/core/React.js"</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token comment">/* @__PURE__ */</span><span class="token comment">// 创建最外层的 div, props 为空, 子元素有 h1, p, Looks Cool !</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">/* @__PURE__ */</span><span class="token comment">// h1 元素, 有 id="title" 子元素 Hello World, emoji</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">"title"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"Hello World "</span><span class="token punctuation">,</span> <span class="token comment">/* @__PURE__ */</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">"emoji"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"🤗"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">/* @__PURE__ */</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"This is a mini react"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Looks Cool !"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我们需要实现 <code>createElement(nodeName, props, ...children)</code>创建 vDOM. vDOM 的数据结构为</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>  <span class="token literal-property property">nodeName</span><span class="token operator">:</span> string<span class="token operator">|</span><span class="token keyword">function</span><span class="token punctuation">,</span><span class="token comment">// 对于组件来说是 function, 对于 HTML Element 是标签名</span>  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">attributeKey</span><span class="token operator">:</span> value    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意到函数有如下重载:</p><ul><li><code>props</code>: 可以为 <code>null</code> 或者<code>&#123;k: v&#125;</code></li><li><code>children</code>: 可以为 <code>String</code>,<code>React.createElement()</code></li></ul><p>我们先将重载问题处理掉</p><ul><li>如果 <code>props</code> 是 null, 将 props 赋为 <code>&#123;&#125;</code></li><li>如果 <code>children</code> String, 我们就将他包一层 vDOM</li></ul><p>实现如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">nodeName<span class="token punctuation">,</span> props <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token operator">...</span>children</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>    nodeName<span class="token punctuation">,</span>    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token operator">...</span>props<span class="token punctuation">,</span>      <span class="token literal-property property">children</span><span class="token operator">:</span> children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>formatNode<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>再实现一个格式化节点功能处理 <code>children</code> 值为<code>String</code> 的问题</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">isTextNode</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> node <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 组件不是 TextNode</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> node <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 考虑了 false 等非 string</span>  <span class="token keyword">const</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 考虑了 Array 等情况</span>  <span class="token keyword">return</span> proto <span class="token operator">!==</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token operator">&amp;&amp;</span> proto <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">formatNode</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTextNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">nodeName</span><span class="token operator">:</span> <span class="token string">'TEXT_ELEMENT'</span><span class="token punctuation">,</span>      <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  node<span class="token punctuation">.</span>props <span class="token operator">??=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  node<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children <span class="token operator">??=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  node<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">)</span>    <span class="token operator">?</span> node<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children    <span class="token operator">:</span> <span class="token punctuation">[</span>node<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">]</span><span class="token punctuation">;</span>  node<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>formatNode<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> node<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后实现 <code>render(component, container)</code> 函数交付给ReactDOM 挂载. 渲染节点可以分为: DOM 创建, 绑定属性, 子节点处理,挂载</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">component<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> componentFormatted <span class="token operator">=</span> <span class="token function">formatNode</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 格式化 String</span>  <span class="token keyword">const</span> node <span class="token operator">=</span> <span class="token function">createNode</span><span class="token punctuation">(</span>componentFormatted<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建 Node</span>  <span class="token function">patchProps</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> componentFormatted<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绑定属性</span>  <span class="token function">fillNode</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> componentFormatted<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 填充子节点</span>  container<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 挂载</span><span class="token punctuation">&#125;</span><span class="token comment">// 创建节点: 将 TextNode 与 Element 分开</span><span class="token keyword">function</span> <span class="token function">createNode</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> nodeName<span class="token punctuation">,</span> props <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>nodeName <span class="token operator">===</span> <span class="token string">'TEXT_ELEMENT'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>children<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 绑定属性: 将非 children 的属性绑定在 Element 上</span><span class="token keyword">function</span> <span class="token function">isEvent</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^on[A-Z][a-zA-Z]*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">getEventName</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> k<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^on([A-Z])([a-zA-Z]*)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> prefix<span class="token punctuation">,</span> suffix</span><span class="token punctuation">)</span> <span class="token operator">=></span> prefix<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> suffix  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">bindProps</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEvent</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token function">getEventName</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">else</span> node<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">patchProps</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">===</span> <span class="token string">'children'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token function">bindProps</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 填充子节点: 如果当前节点是 TextNode: 将孩子合并为 String, 否则 render 子节点</span><span class="token keyword">function</span> <span class="token function">fillNode</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> nodeName<span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> children <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>nodeName <span class="token operator">===</span> <span class="token string">'TEXT_ELEMENT'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>data <span class="token operator">=</span> children<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=></span> pre <span class="token operator">+</span> cur<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">childNode</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">render</span><span class="token punctuation">(</span>childNode<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="引入-fiber-的挂载-异步渲染-异步挂载">引入 <code>Fiber</code>的挂载 (异步渲染, 异步挂载)</h2><ul><li>Fiber是什么: Fiber 是 React 的工作单元, 对应 React 中的一个组件,Fiber 上不仅包含组件 vDOM, 还包含了渲染与更新的上下文</li><li>为什么引入 Fiber: 目前的 React 挂载是同步实现的,渲染非常重的页面会造成同步代码阻塞. 为了减少同步代码阻塞, React 16引入了基于 Fiber 的组件<strong>异步渲染与挂载</strong>并基于 Fiber实现了任务优先级调度.</li><li>如何实现基于 Fiber 的挂载: Fiber 以链表的形式构造, 在<code>render</code> 的时候构造 Root Fiber, 渲染 Root Fiber 后 React将指针切换到下一个 Fiber 渲染下一个 Fiber 中的组件</li><li>如何实现异步渲染与挂载:<ul><li>异步渲染: React 使用 <code>requestIdleCallback</code>向全局注册一个闲时回调, 只有在当前没有任务需要执行的时候浏览器才会调用React 执行 Fiber 的渲染. 一旦有代码需要执行, React 会停止渲染,保存当前的 Fiber 指针, 知道下一次全局空闲时执行</li><li>异步挂载: Fiber 在渲染后并不会直接挂载到全局, 只有当前全局 Fiber全部执行完才会<strong>统一提交挂载</strong>. 这样一来减少了 DOM重绘次数, 二来防止页面渲染了一半就展示给用户</li></ul></li></ul><p><strong>Fiber 的数据结构与 Fiber 链表</strong></p><p>vDOM 是一棵树, Fiber 链是一个链表, 使用 DFS 序将树转为链表. 一个Fiber 的数据结构为</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>  <span class="token comment">// 记录渲染信息</span>  dom<span class="token punctuation">,</span> <span class="token comment">// 这个 vDOM 对应的 DOM</span>  component<span class="token punctuation">,</span> <span class="token comment">// Fiber 对应的 vDOM</span>  <span class="token comment">// 记录树上信息</span>  parentFiber<span class="token punctuation">,</span> <span class="token comment">// 父 Fiber</span>  firstChildFiber<span class="token punctuation">,</span> <span class="token comment">// 第一个孩子对应 Fiber</span>  siblingFiber<span class="token punctuation">,</span> <span class="token comment">// 右兄弟组件对应 Fiber</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>为了减少递归, 我们不会在 <code>render</code> 的时候计算整个链表,而是在处理 fiber 的时候动态计算链表</p><p><strong>Fiber Loop 的实现</strong></p><p>在全局定义一个 <code>nextFiber</code> 存储接下来要处理的 Fiber. 每次React 在空闲渲染的时候就从这个 <code>nextFiber</code> 开始渲染</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> nextFiber <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 接下来要处理的 Fiber</span><span class="token comment">// 用户提交 render 请求的时设置接下来要处理的 Fiber</span><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">component<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 这个 Fiber 比较特殊, 我们手动指定了 dom 为 container, 即 component 的父节点.</span>  <span class="token comment">// 这是因为根节点是一个组件, 组件只能 return 一个 child 作为根. 我们可以跳过组件的渲染, 直接渲染他唯一的子组件</span>  <span class="token comment">// 将本来的: container -> 根组件 -> 根组件唯一的 child</span>  <span class="token comment">// 变成: container -> 根组件唯一的 child</span>  nextFiber <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">dom</span><span class="token operator">:</span> container<span class="token punctuation">,</span>    component<span class="token punctuation">,</span>    <span class="token literal-property property">parentFiber</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>    <span class="token literal-property property">firstChildFiber</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>    <span class="token literal-property property">siblingFiber</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">performFiberLoop</span><span class="token punctuation">(</span><span class="token parameter">idleDeadline</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 如果预计空闲时间 >1 有需要处理的 Fiber</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>idleDeadline<span class="token punctuation">.</span><span class="token function">timeRemaining</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> nextFiber<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 处理 Fiber</span>    <span class="token function">performFiber</span><span class="token punctuation">(</span>nextFiber<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">requestIdleCallback</span><span class="token punctuation">(</span>performFiberLoop<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 在空闲时候调用 performFiberLoop 完成 Fiber Loop</span><span class="token function">requestIdleCallback</span><span class="token punctuation">(</span>performFiberLoop<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>处理单个 Fiber (异步渲染, 同步挂载)</strong></p><p>实现单个 Fiber 的处理过程与实现无 Fiber 时的 <code>render</code>类似. 在 <code>render</code> 外我们在处理当前 Fiber 时还构造了孩子的Fiber 并确定了孩子 Fiber 之间的关系</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 5. 处理当前 Fiber 的孩子</span><span class="token keyword">function</span> <span class="token function">processChildFiber</span><span class="token punctuation">(</span><span class="token parameter">fiber<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// Text Node 是最小单元了, 不处理 Text Node 的孩子</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>component<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">'TEXT_ELEMENT'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// 没有孩子直接返回</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>children<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// 遍历所有孩子, cur = 当前孩子, prev = 当前孩子的左兄弟</span>  children<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 为当前孩子创建 Fiber</span>    <span class="token keyword">const</span> curFiber <span class="token operator">=</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">dom</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// DOM 还没创建</span>      <span class="token literal-property property">component</span><span class="token operator">:</span> cur<span class="token punctuation">,</span>      <span class="token literal-property property">parentFiber</span><span class="token operator">:</span> fiber<span class="token punctuation">,</span>      <span class="token literal-property property">firstChildFiber</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>      <span class="token literal-property property">siblingFiber</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// 如果是第一个孩子, 刷新父亲的第一个孩子信息</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>prev<span class="token punctuation">)</span> fiber<span class="token punctuation">.</span>firstChildFiber <span class="token operator">=</span> curFiber<span class="token punctuation">;</span>    <span class="token comment">// 否则左兄弟的右兄弟就是当前 Fiber</span>    <span class="token keyword">else</span> prev<span class="token punctuation">.</span>siblingFiber <span class="token operator">=</span> curFiber<span class="token punctuation">;</span>    <span class="token keyword">return</span> curFiber<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 4. 获取下一个孩子</span><span class="token keyword">function</span> <span class="token function">getNextFiber</span><span class="token punctuation">(</span><span class="token parameter">fiber</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 4.1. DFS 优先找孩子</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>firstChildFiber<span class="token punctuation">)</span> <span class="token keyword">return</span> fiber<span class="token punctuation">.</span>firstChildFiber<span class="token punctuation">;</span>  <span class="token comment">// 4.2. 没有孩子找右兄弟</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>siblingFiber<span class="token punctuation">)</span> <span class="token keyword">return</span> fiber<span class="token punctuation">.</span>siblingFiber<span class="token punctuation">;</span>  <span class="token comment">// 4.3. 没有兄弟则回溯到父亲节点, 找父亲的右兄弟, 如果没有兄弟就继续回溯</span>  <span class="token keyword">let</span> grandFiber <span class="token operator">=</span> fiber<span class="token punctuation">.</span>parentFiber<span class="token punctuation">;</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>grandFiber<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>grandFiber<span class="token punctuation">.</span>siblingFiber<span class="token punctuation">)</span> <span class="token keyword">return</span> grandFiber<span class="token punctuation">.</span>siblingFiber<span class="token punctuation">;</span>    grandFiber <span class="token operator">=</span> grandFiber<span class="token punctuation">.</span>parentFiber<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// 4.4. 都没有就说明 Fiber 链执行完毕</span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 3. 对于 FC, 他本身不需要渲染, 只需要将他的孩子加入他的父容器就可以</span><span class="token keyword">function</span> <span class="token function">processFunctionComponentFiber</span><span class="token punctuation">(</span><span class="token parameter">fiber</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 执行函数, 获取组件</span>  <span class="token keyword">const</span> component <span class="token operator">=</span> fiber<span class="token punctuation">.</span>component<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>component<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 生成子 Fiber, 绑定链表关系</span>  <span class="token function">processChildFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">,</span> <span class="token punctuation">[</span>component<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2. 对于非 FC</span><span class="token keyword">function</span> <span class="token function">processHostFiber</span><span class="token punctuation">(</span><span class="token parameter">fiber</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 针对 render 的 根组件特殊 Fiber 的处理</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fiber<span class="token punctuation">.</span>dom<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    fiber<span class="token punctuation">.</span>dom <span class="token operator">=</span> <span class="token function">createNode</span><span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">patchProps</span><span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>dom<span class="token punctuation">,</span> fiber<span class="token punctuation">.</span>component<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 完成同步挂载</span>    <span class="token comment">// TODO: 未来要修改为异步挂载</span>    fiber<span class="token punctuation">.</span>parentFiber<span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// 生成子 Fiber, 绑定链表关系</span>  <span class="token function">processChildFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">,</span> fiber<span class="token punctuation">.</span>component<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 判断是不是 FC</span><span class="token keyword">function</span> <span class="token function">isFunctionComponent</span><span class="token punctuation">(</span><span class="token parameter">component</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> component<span class="token punctuation">.</span>nodeName <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 1. 处理单个 Fiber</span><span class="token keyword">function</span> <span class="token function">performFiber</span><span class="token punctuation">(</span><span class="token parameter">fiber</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 针对 FC 与 非 FC 分开处理</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunctionComponent</span><span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>component<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token function">processFunctionComponentFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">else</span> <span class="token function">processHostFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 获取 DFS 序链表中下一元素, 移动指针</span>  nextFiber <span class="token operator">=</span> <span class="token function">getNextFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>实现异步挂载 (统一提交)</strong></p><p>我们希望在 Fiber 全部执行完成后再实现节点的挂载,也就是说在计算全部完成后重新遍历 Fiber 链完成 DOM 操作</p><p>首先删除同步挂载功能</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function processHostFiber(fiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (!fiber.dom) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     fiber.dom = createNode(fiber.component);</span><span class="token prefix unchanged"> </span><span class="token line">     patchProps(fiber.dom, fiber.component.props);</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     fiber.parentFiber.dom.append(fiber.dom);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &#125;</span><span class="token prefix unchanged"> </span><span class="token line">   processChildFiber(fiber, fiber.component.props.children);</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> function fillNode(node, &#123; nodeName, props: &#123; children &#125; &#125;) &#123;</span><span class="token prefix deleted">-</span><span class="token line">   if (nodeName === 'TEXT_ELEMENT')</span><span class="token prefix deleted">-</span><span class="token line">     return (node.data = children.reduce((pre, cur) => pre + cur, ''));</span><span class="token prefix deleted">-</span><span class="token line"></span><span class="token prefix deleted">-</span><span class="token line">   children.forEach((childNode) => render(childNode, node));</span><span class="token prefix deleted">-</span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>持久化一个全局的 rootFiber, 用来记录这次 render 的时候的头 Fiber,用于下次遍历</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> let rootFiber = null;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function render(component, container) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   nextFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     dom: container,</span><span class="token prefix unchanged"> </span><span class="token line">     component,</span><span class="token prefix unchanged"> </span><span class="token line">     parentFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     firstChildFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     siblingFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   // 保存这次 render 的头 Fiber 方便提交的时候再次遍历链表</span><span class="token prefix inserted">+</span><span class="token line">   rootFiber = nextFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在全部 Fiber 执行完成后调用提交函数执行全部 DOM</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function performFiberLoop(idleDeadline) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   while (idleDeadline.timeRemaining() > 1 &amp;&amp; nextFiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     performFiber(nextFiber);</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   // 已经没有要处理的 Fiber 了 (Fiber 执行完成 / 当前 Callback 没有任务) &amp;&amp;</span><span class="token prefix inserted">+</span><span class="token line">   // 当前 render 还没有结束, 不是没有任务的 callback => 提交并重置 rootFiber</span><span class="token prefix inserted">+</span><span class="token line">   if (!nextFiber &amp;&amp; rootFiber) &#123;</span><span class="token prefix inserted">+</span><span class="token line">     applySubmit(getNextFiber(rootFiber));</span><span class="token prefix inserted">+</span><span class="token line">     rootFiber = null;</span><span class="token prefix inserted">+</span><span class="token line">   &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   requestIdleCallback(performFiberLoop);</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>提交的过程是对 Fiber 的第二次遍历, 我们每次提交以 Fiber</p><ul><li>如果当前 Fiber 是 FC: FC 组件本身不渲染节点, 我们直接处理他的子Fiber. 例如 <pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">TextFC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span>text<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span><span class="token operator">&lt;</span>TestFC <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token comment">// 对应的函数是</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>  <span class="token comment">// &lt;- 这个 vDOM 并不会渲染为 DOM</span>  TextFC<span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">)</span> <span class="token comment">// &lt;- 我们需要将这个 vDOM 渲染到 container 上</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>如果当前 Fiber 不是 FC: 我们应该将他的子节点挂载到他的 DOM 上,如果他本身没有 DOM, 就挂载在他父亲身上(如果父亲也没有, 就继续回溯)</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 将当前 fiber 中的 DOM 加入最近的有 DOM 的祖先中</span><span class="token keyword">function</span> <span class="token function">appendDOM</span><span class="token punctuation">(</span><span class="token parameter">fiber</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> containerFiber <span class="token operator">=</span> fiber<span class="token punctuation">.</span>parentFiber<span class="token punctuation">;</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>containerFiber<span class="token punctuation">.</span>dom<span class="token punctuation">)</span> containerFiber <span class="token operator">=</span> containerFiber<span class="token punctuation">.</span>parentFiber<span class="token punctuation">;</span>  containerFiber<span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 切换到下一个 Fiber 并更新指针</span><span class="token keyword">function</span> <span class="token function">switchFiber</span><span class="token punctuation">(</span><span class="token parameter">fiber</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> nextFiber <span class="token operator">=</span> <span class="token function">getNextFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> nextFiber <span class="token operator">&amp;&amp;</span> <span class="token function">applySubmit</span><span class="token punctuation">(</span>nextFiber<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 提交挂载</span><span class="token keyword">function</span> <span class="token function">applySubmit</span><span class="token punctuation">(</span><span class="token parameter">fiber</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 如果是 FC 直接切换处理子节点</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunctionComponent</span><span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>component<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">switchFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 如果不是 FC 就将当前 Fiber 挂载起来</span>  <span class="token function">appendDOM</span><span class="token punctuation">(</span>fiber<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 切换 Fiber</span>  <span class="token function">switchFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="实现更新-新增节点">实现更新 (新增节点)</h2><p>更新的基本逻辑是重新渲染一份新的 Fiber 链, 在每一个新创建的 Fiber上记录这个 Fiber 对应的老 Fiber (alternate Fiber), 对比新老 Fiber确定更新的具体操作</p><p>例如, 当页面中新增了一个节点时</p><pre class="mermaid">graph LR    subgraph Fiber        Fiber1 --> Fiber2 ----> Fiber3    end    subgraph newFiber        newFiber1 --> newFiber2 --> newFiber4 --> newFiber3    end    newFiber1 -.alternate.-> Fiber1    newFiber2 -.alternate.-> Fiber2    newFiber3 -.alternate.-> Fiber3</pre><p>我们会发现 Fiber 链表中多了一个 <code>newFiber4</code> 并且这个<code>newFiber4</code> 没有 alternate Fiber, 这就意味着<code>newFiber4</code> 是一个新增的节点, 我们将其加入即可</p><p><strong>新增变量记录老队列队头</strong></p><p>用户手动调用 <code>React.update()</code> 发起更新,在更新时我们需要分别记录新链表和老链表的头,因此我们要创建全局变量记录老链表.</p><p>我们已经实现过</p><ul><li><code>nextFiber</code>: 为实现异步任务调度,在全局注册的指向<strong>当前要处理的 Fiber</strong></li><li><code>rootFiber</code>: 为实现统一提交,在全局注册的记录的<strong>正在处理的链表的根 Fiber</strong></li></ul><p>我们定义一个新的 Fiber</p><ul><li><code>currentRootFiber</code>: 表示在这次更新之前的根节点(即将要被取代的链表的链表头)</li></ul><p>将 <code>rootFiber</code> 改名为 <code>wipRootFiber</code>.这样我们就有了三个全局变量</p><ul><li><code>nextFiber</code>: 指向当前要挂载/更新的 Fiber</li><li><code>wipRootFiber</code>: 挂载轮次中要挂载的 Fiber 链表的根 Fiber /更新轮次中新 Fiber 链表的根 Fiber</li><li><code>currentRootFiber</code>: 当前更新轮次中老的链表的根 Fiber</li></ul><p><strong>扩充 Fiber 属性</strong></p><ul><li>新增属性 <code>alternateFiber</code> 记录新 Fiber 对应的老 Fiber.如果 <code>alternateFiber</code> 存在, 说明是在更新链上的</li><li>新增属性 <code>effectTag</code> 标记统一提交时应该如何处理 Fiber(如果是 <code>placement</code> 表示要新挂载, <code>update</code> 表示DOM 已经存在, 只需要更新)</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>  dom<span class="token punctuation">,</span>  component<span class="token punctuation">,</span>  parentFiber<span class="token punctuation">,</span>  firstChildFiber<span class="token punctuation">,</span>  siblingFiber<span class="token punctuation">,</span>  <span class="token comment">// 新增属性</span>  alternateFiber<span class="token punctuation">,</span> <span class="token comment">// 新 Fiber 对应的老 Fiber</span>  <span class="token literal-property property">effectTag</span><span class="token operator">:</span> <span class="token string">'update'</span> <span class="token operator">|</span> <span class="token string">'placement'</span> <span class="token comment">// 统一提交时应该如何处理</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>重命名<code>wipRootFiber</code></strong></p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> let rootFiber = null;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> let wipRootFiber = null;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function render(component, container) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   nextFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     dom: container,</span><span class="token prefix unchanged"> </span><span class="token line">     component,</span><span class="token prefix unchanged"> </span><span class="token line">     parentFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     firstChildFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     siblingFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;;</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   rootFiber = nextFiber;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   wipRootFiber = nextFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function performFiberLoop(idleDeadline) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   while (idleDeadline.timeRemaining() > 1 &amp;&amp; nextFiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     performFiber(nextFiber);</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   if (!nextFiber &amp;&amp; rootFiber) &#123;</span><span class="token prefix deleted">-</span><span class="token line">     applySubmit(getNextFiber(rootFiber));</span><span class="token prefix deleted">-</span><span class="token line">     rootFiber = null;</span><span class="token prefix deleted">-</span><span class="token line">   &#125;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   if (!nextFiber &amp;&amp; wipRootFiber) &#123;</span><span class="token prefix inserted">+</span><span class="token line">     applySubmit(getNextFiber(wipRootFiber));</span><span class="token prefix inserted">+</span><span class="token line">     currentRootFiber = wipRootFiber; // 提交完成后刷新上一轮的 Root Fiber</span><span class="token prefix inserted">+</span><span class="token line">     wipRootFiber = null;</span><span class="token prefix inserted">+</span><span class="token line">   &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   requestIdleCallback(performFiberLoop);</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>构造新的 Fiber</strong></p><p>调用函数, 构造一个新的 Fiber 链的头, 将这个头设为下一个需要执行的Fiber</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 存储上一轮 Fiber 头</span><span class="token keyword">let</span> currentRootFiber <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 如果还没有挂载, 就直接返回</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>currentRootFiber<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// 新建 Fiber 头, 新 Fiber 头继承上一轮的 Fiber 头属性, 同时加入 alternateFiber 表示这个新 Fiber 对应的老 Fiber</span>  wipRootFiber <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token operator">...</span>currentRootFiber<span class="token punctuation">,</span>    <span class="token literal-property property">alternateFiber</span><span class="token operator">:</span> currentRootFiber<span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment">// 刷新下一个需要执行的 Fiber 等待 FiberLoop 的调用</span>  nextFiber <span class="token operator">=</span> wipRootFiber<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对于仅有新节点增加的情况, 统一提交的时候页面会新增 Fiber链表中新加入的节点</p><h2 id="实现更新-同类型节点更新">实现更新 (同类型节点更新)</h2><p>当一个新 Fiber 存在老 Fiber 的时候我们需要对其 DOM 更新. 我们无法修改DOM 的 Node Name, 所以我们只对同类型节点做更新.</p><p>更新的时候考虑三个属性:</p><ul><li><code>nodeName</code>: 保证相同, 无需更新</li><li><code>props</code>: 需要更新</li><li><code>children</code>: 无需在本轮次更新, 因为下一个 Fiber 就是当前Fiber 的孩子, 孩子们会在之后的 Fiber 处理中完成更新. 这与 Vue的处理逻辑不同, Vue 在更新元素的时候要递归处理子元素, 但是因为 React是链式处理, 已经将 DFS 转换为一条链. 因此我们只需要聚焦节点,关心当前节点的变换</li></ul><p>因此在更新时, 我们只需要考虑 <code>props</code> 的更新 (或者说 React对 Fiber 的更新是 shadow 的)</p><p><strong>实现同类节点判定</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">isSameType</span><span class="token punctuation">(</span><span class="token parameter">component<span class="token punctuation">,</span> alternateComponent</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> component<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> alternateComponent<span class="token operator">?.</span>nodeName<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>实现节点更新任务标注</strong></p><p>创建新根组件 Fiber 后, 我们还需要修改子组件 Fiber 的实现 (将<code>processChildFiber</code> 改名为 <code>reconcileChildren</code>扩充功能).</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> function processChildFiber(fiber, children) &#123;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> function reconcileChildren(fiber, children) &#123;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   if (fiber.component.nodeName === 'TEXT_ELEMENT') return;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   // alternateFiber 是父 fiber 的第一个孩子, 将来将作为 cur 对应的 Fiber 同步步进</span><span class="token prefix inserted">+</span><span class="token line">   let alternateFiber = fiber?.alternateFiber?.firstChildFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   children.reduce((prev, cur) => &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     const curFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       dom: null,</span><span class="token prefix unchanged"> </span><span class="token line">       component: cur,</span><span class="token prefix unchanged"> </span><span class="token line">       parentFiber: fiber,</span><span class="token prefix unchanged"> </span><span class="token line">       firstChildFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       siblingFiber: null,</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       effectTag: null,</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &#125;;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     // 老 Fiber 存在, 说明是更新, 这里我们处理同类型更新</span><span class="token prefix inserted">+</span><span class="token line">     if (alternateFiber &amp;&amp; isSameType(cur, alternateFiber.component)) &#123;</span><span class="token prefix inserted">+</span><span class="token line">       curFiber.dom = alternateFiber.dom;</span><span class="token prefix inserted">+</span><span class="token line">       curFiber.effectTag = 'update';</span><span class="token prefix inserted">+</span><span class="token line">       curFiber.alternateFiber = alternateFiber;</span><span class="token prefix inserted">+</span><span class="token line">     // 老 Fiber 不存在, 要么是不同类型, 要么是在挂载阶段, 要么是更新出了全新节点</span><span class="token prefix inserted">+</span><span class="token line">     &#125; else &#123;</span><span class="token prefix inserted">+</span><span class="token line">       curFiber.effectTag = 'placement';</span><span class="token prefix inserted">+</span><span class="token line">     &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     if (!prev) fiber.firstChildFiber = curFiber;</span><span class="token prefix unchanged"> </span><span class="token line">     else prev.siblingFiber = curFiber;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     // 如果 alternate Fiber 存在, 那么切换 alternate Fiber 使其与 cur 的切换一致</span><span class="token prefix inserted">+</span><span class="token line">     if (alternateFiber) alternateFiber = alternateFiber?.siblingFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     return curFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;, null);</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改函数调用</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function processFunctionComponentFiber(fiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   const component = fiber.component.nodeName(fiber.component.props);</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   processChildFiber(fiber, [component]);</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   reconcileChildren(fiber, [component]);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function processHostFiber(fiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (!fiber.dom) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     fiber.dom = createNode(fiber.component);</span><span class="token prefix unchanged"> </span><span class="token line">     patchProps(fiber.dom, fiber.component.props);</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   processChildFiber(fiber, fiber.component.props.children);</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   reconcileChildren(fiber, fiber.component.props.children);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>实现属性更新</strong></p><p>在统一提交时我们只需要更新节点上的 props, 所以重写 patchProps</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">removeProps</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEvent</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> node<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token function">getEventName</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">else</span> node<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">patchProps</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> props<span class="token punctuation">,</span> oldProps <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 以默认参数提交老的 props</span>  <span class="token keyword">const</span> oldKey <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>oldProps<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> newKey <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 对于全新的 key 直接绑定</span>  newKey    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=></span> k <span class="token operator">!==</span> <span class="token string">'children'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>oldKey<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">bindProps</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> k<span class="token punctuation">,</span> props<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 部队不存在的 key 直接删除</span>  oldKey    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=></span> k <span class="token operator">!==</span> <span class="token string">'children'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>newKey<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">removeProps</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> k<span class="token punctuation">,</span> oldProps<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 对于有变更的 key 移除再新增</span>  newKey    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>      <span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=></span> k <span class="token operator">!==</span> <span class="token string">'children'</span> <span class="token operator">&amp;&amp;</span> oldKey<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> oldProps<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">!==</span> props<span class="token punctuation">[</span>k<span class="token punctuation">]</span>    <span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token function">removeProps</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> k<span class="token punctuation">,</span> oldProps<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">bindProps</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> k<span class="token punctuation">,</span> props<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在统一提交时候根据 <code>effectTag</code> 判断是要挂载还是只更新</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function applySubmit(fiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (isFunctionComponent(fiber.component)) return switchFiber(fiber);</span><span class="token prefix unchanged"> </span><span class="token line">   appendDOM(fiber);</span><span class="token prefix unchanged"> </span><span class="token line">   switchFiber(fiber);</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function applySubmit(fiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (isFunctionComponent(fiber.component)) return switchFiber(fiber);</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   appendDOM(fiber);</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   // 如果是挂载阶段或者是更新全新节点, DOM</span><span class="token prefix inserted">+</span><span class="token line">   if (fiber.effectTag === 'placement') &#123;</span><span class="token prefix inserted">+</span><span class="token line">     appendDOM(fiber);</span><span class="token prefix inserted">+</span><span class="token line">   // 否则只更新节点上的属性</span><span class="token prefix inserted">+</span><span class="token line">   &#125; else if (fiber.effectTag === 'update') &#123;</span><span class="token prefix inserted">+</span><span class="token line">     patchProps(</span><span class="token prefix inserted">+</span><span class="token line">       fiber.dom,</span><span class="token prefix inserted">+</span><span class="token line">       fiber.component.props,</span><span class="token prefix inserted">+</span><span class="token line">       fiber?.alternateFiber?.component?.props</span><span class="token prefix inserted">+</span><span class="token line">     );</span><span class="token prefix inserted">+</span><span class="token line">   &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   switchFiber(fiber);</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="实现更新-节点移除">实现更新 (节点移除)</h2><p>如果老 Fiber 链中没有被任何 newFiber 的 <code>alternateFiber</code>指向, 那么这个元素就应该被删除了 (例如图中的 <code>Fiber2</code>)</p><p>当一个元素应该被删除时, 我们会将元素压入 <code>deletions</code> 数组,在统一提交时统一删除. (创建 <code>deletions</code>数组而不是在统一提交是查找是因为在新链表上已经找不到待删除的 oldFiber了)</p><pre class="mermaid">graph LR    subgraph Fiber        Fiber1 --> Fiber2 --> Fiber3    end    subgraph newFiber        newFiber1 ----> newFiber3    end    newFiber1 -.alternate.-> Fiber1    newFiber3 -.alternate.-> Fiber3</pre><p><strong>创建 <code>deletion</code> 并在统一提交时删除</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> deletions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 等待删除元素</span><span class="token comment">// 删除元素</span><span class="token keyword">function</span> <span class="token function">applyDeletions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>deletions<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> fiber <span class="token operator">=</span> deletions<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFunctionComponent</span><span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>component<span class="token punctuation">)</span><span class="token punctuation">)</span> fiber<span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> fiber<span class="token punctuation">.</span>childrenFiber<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token operator">=></span> deletions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在统一提交时删除</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff">function performFiberLoop(idleDeadline) &#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> while (idleDeadline.timeRemaining() > 1 &amp;&amp; nextFiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   performFiber(nextFiber);</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> if (!nextFiber &amp;&amp; wipRootFiber) &#123;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   applyDeletions();</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   applySubmit(getNextFiber(wipRootFiber));</span><span class="token prefix unchanged"> </span><span class="token line">   currentRootFiber = wipRootFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   wipRootFiber = null;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> requestIdleCallback(performFiberLoop);</span></span>&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>建立老 Fiber 到新 Fiber 的映射</strong></p><p>扩充 Fiber 属性</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>  dom<span class="token punctuation">,</span>  component<span class="token punctuation">,</span>  parentFiber<span class="token punctuation">,</span>  firstChildFiber<span class="token punctuation">,</span>  siblingFiber<span class="token punctuation">,</span>  alternateFiber<span class="token punctuation">,</span>  <span class="token literal-property property">effectTag</span><span class="token operator">:</span> <span class="token string">'update'</span> <span class="token operator">|</span> <span class="token string">'placement'</span>  <span class="token comment">// 新的 Fiber 属性</span>  <span class="token literal-property property">childrenFiber</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 记录当前 Fiber 的孩子 Fiber (方便检索当前 Fiber 上那些子 Fiber 没有对应元素)</span>  newFiber<span class="token punctuation">,</span> <span class="token comment">// 指向当前 Fiber 对应的新 Fiber (如果存在)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>完成这两个属性的构建</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function update() &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (!currentRootFiber) return;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   wipRootFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     ...currentRootFiber,</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     childrenFiber: [],</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     alternateFiber: currentRootFiber,</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   currentRootFiber.newFiber = wipRootFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   nextFiber = wipRootFiber;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在 <code>reconcileChildren</code> 的时候实现删除元素收集</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function reconcileChildren(fiber, children) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (fiber.component.nodeName === 'TEXT_ELEMENT') return;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   let alternateFiber = fiber?.alternateFiber?.firstChildFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   children.reduce((prev, cur) => &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     const curFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       dom: null,</span><span class="token prefix unchanged"> </span><span class="token line">       component: cur,</span><span class="token prefix unchanged"> </span><span class="token line">       parentFiber: fiber,</span><span class="token prefix unchanged"> </span><span class="token line">       firstChildFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       siblingFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       effectTag: null,</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       childrenFiber: [],</span><span class="token prefix inserted">+</span><span class="token line">       newFiber: null,</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &#125;;</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     if (alternateFiber &amp;&amp; isSameType(cur, alternateFiber.component)) &#123;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     if (alternateFiber) &#123;</span><span class="token prefix inserted">+</span><span class="token line">       // 相同类型依然执行更新</span><span class="token prefix inserted">+</span><span class="token line">       if (isSameType(cur, alternateFiber.component)) &#123;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         curFiber.dom = alternateFiber.dom;</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.effectTag = 'update';</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.alternateFiber = alternateFiber;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         // 新增对 newFiber 的映射</span><span class="token prefix inserted">+</span><span class="token line">         alternateFiber.newFiber = curFiber;</span><span class="token prefix inserted">+</span><span class="token line">       &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &#125; else &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       curFiber.effectTag = 'placement';</span><span class="token prefix unchanged"> </span><span class="token line">     &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     if (!prev) fiber.firstChildFiber = curFiber;</span><span class="token prefix unchanged"> </span><span class="token line">     else prev.siblingFiber = curFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     if (alternateFiber) alternateFiber = alternateFiber?.siblingFiber;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     // 收集子元素</span><span class="token prefix inserted">+</span><span class="token line">     fiber.childrenFiber.push(curFiber);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     return curFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;, null);</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   // 如果处于更新模式, 遍历子元素, 找到老 Fiber 的子 Fiber 中没有对应新 Fibber 的加入删除列表</span><span class="token prefix inserted">+</span><span class="token line">   if (fiber.alternateFiber) &#123;</span><span class="token prefix inserted">+</span><span class="token line">     fiber.alternateFiber.childrenFiber.forEach(</span><span class="token prefix inserted">+</span><span class="token line">       (d) => !d.newFiber &amp;&amp; deletions.push(d)</span><span class="token prefix inserted">+</span><span class="token line">     );</span><span class="token prefix inserted">+</span><span class="token line">   &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="实现更新-不同类型节点">实现更新 (不同类型节点)</h2><p>不同节点之间无法更新, 实际上是做了删除然后新增的操作</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function reconcileChildren(fiber, children) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (fiber.component.nodeName === 'TEXT_ELEMENT') return;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   let alternateFiber = fiber?.alternateFiber?.firstChildFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   children.reduce((prev, cur) => &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     const curFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       dom: null,</span><span class="token prefix unchanged"> </span><span class="token line">       component: cur,</span><span class="token prefix unchanged"> </span><span class="token line">       parentFiber: fiber,</span><span class="token prefix unchanged"> </span><span class="token line">       firstChildFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       siblingFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       effectTag: null,</span><span class="token prefix unchanged"> </span><span class="token line">       childrenFiber: [],</span><span class="token prefix unchanged"> </span><span class="token line">       newFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     &#125;;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     if (alternateFiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       if (isSameType(cur, alternateFiber.component)) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.dom = alternateFiber.dom;</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.effectTag = 'update';</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.alternateFiber = alternateFiber;</span><span class="token prefix unchanged"> </span><span class="token line">         alternateFiber.newFiber = curFiber;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       // 不同类型的更新元素: 删除, 然后将当前 Fiber 标记为新增</span><span class="token prefix inserted">+</span><span class="token line">       &#125; else &#123;</span><span class="token prefix inserted">+</span><span class="token line">         deletions.push(alternateFiber);</span><span class="token prefix inserted">+</span><span class="token line">         curFiber.effectTag = 'placement';</span><span class="token prefix inserted">+</span><span class="token line">       &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &#125; else &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       curFiber.effectTag = 'placement';</span><span class="token prefix unchanged"> </span><span class="token line">     &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     if (!prev) fiber.firstChildFiber = curFiber;</span><span class="token prefix unchanged"> </span><span class="token line">     else prev.siblingFiber = curFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     if (alternateFiber) alternateFiber = alternateFiber?.siblingFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     fiber.childrenFiber.push(curFiber);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     return curFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;, null);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   if (fiber.alternateFiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     fiber.alternateFiber.childrenFiber.forEach(</span><span class="token prefix unchanged"> </span><span class="token line">       (d) => !d.newFiber &amp;&amp; deletions.push(d)</span><span class="token prefix unchanged"> </span><span class="token line">     );</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="将更新粒度缩小为组件">将更新粒度缩小为组件</h2><p>之前 update 的使用方法为</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function">demoFC</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    num <span class="token operator">+=</span> <span class="token number">1</span>    React<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>此时我们执行 update 会将整个页面刷新一遍. 我们希望实现调用<code>update</code> 时仅对当前组件做刷新</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function">demoFC</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> update <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    num <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>实现思路:</p><ul><li>向函数暴露一个 <code>update</code> 工厂函数,通过闭包存储当前正在调用的组件对应的 Fiber. 从而实现在调用<code>update</code> 时找到调用者</li><li>在调用 update 的时候将 <code>currentRootFiber</code> 设置为调用<code>update()</code> 的组件, 将 <code>wipRootFiber</code>也同步为这个组件</li><li>由于 <code>currentRootFiber</code> 不再是根组件, 当 currentRootFiber的后代 Fiber 全部遍历结束后, 我们应该立即停止, 而不是遍历<code>currentRootFiber</code> 的右兄弟</li></ul><p><strong>实现 <code>update()</code></strong></p><p>我们知道组件函数 (包括 <code>update = React.update()</code>)会在构造的时候被调用, 构造的时候 <code>nextFiber</code> 恰好是当前组件的Fiber, 因此直接用闭包保存 <code>nextFiber</code></p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function update() &#123;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   const currentFiber = nextFiber;</span><span class="token prefix inserted">+</span><span class="token line">   return () => &#123;</span><span class="token prefix inserted">+</span><span class="token line">     // 新 Fiber 链表的头不再是上次处理的头 Fiber</span><span class="token prefix inserted">+</span><span class="token line">     currentRootFiber = currentFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     wipRootFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       ...currentRootFiber,</span><span class="token prefix unchanged"> </span><span class="token line">       alternateFiber: currentRootFiber,</span><span class="token prefix unchanged"> </span><span class="token line">       childrenFiber: [],</span><span class="token prefix unchanged"> </span><span class="token line">     &#125;;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     nextFiber = wipRootFiber;</span><span class="token prefix inserted">+</span><span class="token line">   &#125;;</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   currentRootFiber.newFiber = wipRootFiber;</span><span class="token prefix deleted">-</span><span class="token line">   nextFiber = wipRootFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>仅允许 Fiber 在 <code>currentRootFiber</code>内部切换</strong></p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function getNextFiber(fiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (fiber.firstChildFiber) return fiber.firstChildFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   if (fiber.siblingFiber) return fiber.siblingFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   let grandFiber = fiber.parentFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   while (grandFiber) &#123;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     if (grandFiber === wipRootFiber) return null;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     if (grandFiber.siblingFiber) return grandFiber.siblingFiber;</span><span class="token prefix unchanged"> </span><span class="token line">     grandFiber = grandFiber.parentFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return null;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="实现简易-usestate-hook-同步更新">实现简易 <code>useState</code>Hook (同步更新)</h2><p>在实现 <code>useState</code> 之前我们需要通过如下方式手动更新</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function">demoFC</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> update <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    num <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我们希望实现为</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function">demoFC</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> setNum<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">setNum</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这意味着我们需要实现一个 <code>React.useState</code></p><ul><li>在构造阶段返回初始值与更新回调</li><li>在更新阶段返回持久化的值与回调</li><li>调用回调后更新状态, 调用 <code>update()</code>,在下一次构造时返回更新后值</li><li><code>React.useState</code> 应该可以在组件中被多次调用,并且在下次构造的时候根据调用顺序返回值</li></ul><p>简而言之:</p><ul><li>持久化状态是跟随组件存储的</li><li>组件实例之间状态不能共享的 (同时如果页面中有两个相同的组件,两个组件各自维护状态)</li><li>状态在更新时可以被传递</li><li>一个组件可以有多个状态, 根据调用函数顺序返回不同的值</li></ul><p>这么看组件对应的 Fiber 是一个很好的存储仓库.</p><ul><li>持久化状态是跟随组件存储的 =&gt; 状态对应一个组件对应一个Fiber</li><li>组件实例之间状态不能共享的 =&gt; 同一组件不同实例是不同 Fiber</li><li>状态在更新时可以被传递 =&gt; 在创建新 Fiber 时赋值</li><li>一个组件可以有多个状态, 根据调用函数顺序返回不同的值 =&gt; 在 Fiber中维护数组, 与构造时 <code>React.useState</code> 计数,每次调用返回数组中下一个元素</li></ul><p><strong>扩展 Fiber 数据结构</strong></p><p>新 Fiber 结构如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>  dom<span class="token punctuation">,</span>  component<span class="token punctuation">,</span>  parentFiber<span class="token punctuation">,</span>  firstChildFiber<span class="token punctuation">,</span>  siblingFiber<span class="token punctuation">,</span>  childrenFiber<span class="token punctuation">,</span>  newFiber<span class="token punctuation">,</span>  <span class="token comment">// 新增属性</span>  <span class="token literal-property property">useStateCount</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 每次构造新 Fiber 的时候清空</span>  <span class="token literal-property property">useStateStorage</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 在构造新 Fiber 的时候从老 Fiber 继承</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>应用修改</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function render(component, container) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   wipRootFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     dom: container,</span><span class="token prefix unchanged"> </span><span class="token line">     component,</span><span class="token prefix unchanged"> </span><span class="token line">     parentFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     firstChildFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     siblingFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     childrenFiber: [],</span><span class="token prefix unchanged"> </span><span class="token line">     newFiber: null,</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     useStateCount: 0,</span><span class="token prefix inserted">+</span><span class="token line">     useStateStorage: [],</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &#125;;</span><span class="token prefix unchanged"> </span><span class="token line">   nextFiber = wipRootFiber;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff">function update() &#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const currentFiber = nextFiber;</span><span class="token prefix unchanged"> </span><span class="token line"> return () => &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   currentRootFiber = currentFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   wipRootFiber = &#123;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     // 解构时继承数据</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     ...currentRootFiber,</span><span class="token prefix unchanged"> </span><span class="token line">     alternateFiber: currentRootFiber,</span><span class="token prefix unchanged"> </span><span class="token line">     childrenFiber: [],</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     useStateCount: 0, // 重置计数</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &#125;;</span><span class="token prefix unchanged"> </span><span class="token line">   nextFiber = wipRootFiber;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;;</span></span>&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function reconcileChildren(fiber, children) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (fiber.component.nodeName === 'TEXT_ELEMENT') return;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   let alternateFiber = fiber?.alternateFiber?.firstChildFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   children.reduce((prev, cur) => &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     const curFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       dom: null,</span><span class="token prefix unchanged"> </span><span class="token line">       component: cur,</span><span class="token prefix unchanged"> </span><span class="token line">       parentFiber: fiber,</span><span class="token prefix unchanged"> </span><span class="token line">       firstChildFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       siblingFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       effectTag: null,</span><span class="token prefix unchanged"> </span><span class="token line">       childrenFiber: [],</span><span class="token prefix unchanged"> </span><span class="token line">       newFiber: null,</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       useStateCount: 0,</span><span class="token prefix inserted">+</span><span class="token line">       useStateStorage: [],</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &#125;;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     if (alternateFiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       if (isSameType(cur, alternateFiber.component)) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.dom = alternateFiber.dom;</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.effectTag = 'update';</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.alternateFiber = alternateFiber;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         // 状态传递</span><span class="token prefix inserted">+</span><span class="token line">         curFiber.useStateStorage = alternateFiber.useStateStorage;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         alternateFiber.newFiber = curFiber;</span><span class="token prefix unchanged"> </span><span class="token line">       &#125; else &#123;</span><span class="token prefix unchanged"> </span><span class="token line">         deletions.push(alternateFiber);</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.effectTag = 'placement';</span><span class="token prefix unchanged"> </span><span class="token line">       &#125;</span><span class="token prefix unchanged"> </span><span class="token line">     &#125; else &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       curFiber.effectTag = 'placement';</span><span class="token prefix unchanged"> </span><span class="token line">     &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     // ...</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;, null);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // ...</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>实现 <code>React.useState</code></strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 获取针对当前组件的 update</span>  <span class="token keyword">const</span> updateComponent <span class="token operator">=</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 缓存当前 Fiber</span>  <span class="token keyword">const</span> currentFiber <span class="token operator">=</span> nextFiber<span class="token punctuation">;</span>  <span class="token comment">// 记录是第几次调用 useState</span>  <span class="token keyword">const</span> index <span class="token operator">=</span> currentFiber<span class="token punctuation">.</span>useStateCount<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">// 如果没有这个 index 说明是初次调用, 直接将传入的初始值记录下来</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFiber<span class="token punctuation">.</span>useStateStorage<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> index<span class="token punctuation">)</span>    currentFiber<span class="token punctuation">.</span>useStateStorage<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 返回持久化的值, 更新函数</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span>    currentFiber<span class="token punctuation">.</span>useStateStorage<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token comment">// 对 setState 的参数做类型合并</span>      <span class="token keyword">const</span> newValue <span class="token operator">=</span> f <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">f</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">:</span> f<span class="token punctuation">;</span>      <span class="token comment">// 前后结果相同跳过</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">===</span> value<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>      <span class="token comment">// 更新持久化的值</span>      currentFiber<span class="token punctuation">.</span>useStateStorage<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> newValue<span class="token punctuation">;</span>      <span class="token comment">// 重新渲染</span>      <span class="token function">updateComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="实现-usestate-hook-异步更新">实现 <code>useState</code> Hook(异步更新)</h2><p>如果代码中连续调用多次 <code>useState</code> 我们就会进行多次计算,此时可以做如下优化:</p><p>将 state 作为对象 <code>&#123;value, queue: []&#125;</code> 存储, 所有的<code>setState</code> 会被压入 queue, 请求更新, 再更新时再计算新数据</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function useState(value) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   const updateComponent = update();</span><span class="token prefix unchanged"> </span><span class="token line">   const currentFiber = nextFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   const index = currentFiber.useStateCount++;</span><span class="token prefix unchanged"> </span><span class="token line">   if (currentFiber.useStateStorage.length &lt;= index) &#123;</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     currentFiber.useStateStorage.push(value);</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     currentFiber.useStateStorage.push(&#123;</span><span class="token prefix inserted">+</span><span class="token line">       value,</span><span class="token prefix inserted">+</span><span class="token line">       queue: [],</span><span class="token prefix inserted">+</span><span class="token line">     &#125;);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &#125;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   const hook = currentFiber.useStateStorage[index]; // 获取需要这次的 state</span><span class="token prefix inserted">+</span><span class="token line">   hook.queue.forEach((f) => (hook.value = f(hook.value))); // 执行压入的变更</span><span class="token prefix inserted">+</span><span class="token line">   hook.queue = []; // 清空待变更队列</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   const hook = currentFiber.useStateStorage[index];</span><span class="token prefix unchanged"> </span><span class="token line">   hook.queue.forEach((f) => (hook.value = f(hook.value)));</span><span class="token prefix unchanged"> </span><span class="token line">   hook.queue = [];</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   return [</span><span class="token prefix deleted">-</span><span class="token line">     currentFiber.useStateStorage[index],</span><span class="token prefix deleted">-</span><span class="token line">     (f) => &#123;</span><span class="token prefix deleted">-</span><span class="token line">       const newValue = f instanceof Function ? f(value) : f;</span><span class="token prefix deleted">-</span><span class="token line">       if (newValue === value) return;</span><span class="token prefix deleted">-</span><span class="token line">       currentFiber.useStateStorage[index] = newValue;</span><span class="token prefix deleted">-</span><span class="token line">       updateComponent();</span><span class="token prefix deleted">-</span><span class="token line">     &#125;,</span><span class="token prefix deleted">-</span><span class="token line">   ];</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   const setState = (f) => &#123;</span><span class="token prefix inserted">+</span><span class="token line">     const action = f instanceof Function ? f : () => f;</span><span class="token prefix inserted">+</span><span class="token line">     // 如果值没有变化就跳过</span><span class="token prefix inserted">+</span><span class="token line">     const eagerValue = action(hook.value);</span><span class="token prefix inserted">+</span><span class="token line">     if (hook.value === eagerValue) return;</span><span class="token prefix inserted">+</span><span class="token line">     hook.queue.push(action);</span><span class="token prefix inserted">+</span><span class="token line">     updateComponent();</span><span class="token prefix inserted">+</span><span class="token line">   &#125;;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   return [currentFiber.useStateStorage[index].value, setState];</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="实现简易-useeffect-hook-同步回调">实现简易<code>useEffect</code> Hook (同步回调)</h2><p>需要实现 <code>useEffect(cb, deps)</code></p><ul><li>在初始化阶段无论 <code>deps</code> 是什么都调用 <code>cb</code></li><li>在更新阶段只有 <code>deps</code> 变化才调用 <code>cb</code></li></ul><p>效仿 useState 的思路实现:</p><p><strong>扩充 Fiber</strong></p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function update() &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   const currentFiber = nextFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   return () => &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     currentRootFiber = currentFiber;</span><span class="token prefix unchanged"> </span><span class="token line">     wipRootFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       ...currentRootFiber,</span><span class="token prefix unchanged"> </span><span class="token line">       alternateFiber: currentRootFiber,</span><span class="token prefix unchanged"> </span><span class="token line">       childrenFiber: [],</span><span class="token prefix unchanged"> </span><span class="token line">       useStateCount: 0,</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       useEffectCount: 0,</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &#125;;</span><span class="token prefix unchanged"> </span><span class="token line">     nextFiber = wipRootFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function render(component, container) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   wipRootFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     dom: container,</span><span class="token prefix unchanged"> </span><span class="token line">     component,</span><span class="token prefix unchanged"> </span><span class="token line">     parentFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     firstChildFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     siblingFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     childrenFiber: [],</span><span class="token prefix unchanged"> </span><span class="token line">     newFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">     useStateCount: 0,</span><span class="token prefix unchanged"> </span><span class="token line">     useStateStorage: [],</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     useEffectCount: 0,</span><span class="token prefix inserted">+</span><span class="token line">     useEffectStorage: [],</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &#125;;</span><span class="token prefix unchanged"> </span><span class="token line">   nextFiber = wipRootFiber;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function reconcileChildren(fiber, children) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   if (fiber.component.nodeName === 'TEXT_ELEMENT') return;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   let alternateFiber = fiber?.alternateFiber?.firstChildFiber;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   children.reduce((prev, cur) => &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     const curFiber = &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       dom: null,</span><span class="token prefix unchanged"> </span><span class="token line">       component: cur,</span><span class="token prefix unchanged"> </span><span class="token line">       parentFiber: fiber,</span><span class="token prefix unchanged"> </span><span class="token line">       firstChildFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       siblingFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       effectTag: null,</span><span class="token prefix unchanged"> </span><span class="token line">       childrenFiber: [],</span><span class="token prefix unchanged"> </span><span class="token line">       newFiber: null,</span><span class="token prefix unchanged"> </span><span class="token line">       useStateCount: 0,</span><span class="token prefix unchanged"> </span><span class="token line">       useStateStorage: [],</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       useEffectCount: 0,</span><span class="token prefix inserted">+</span><span class="token line">       useEffectStorage: [],</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &#125;;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     if (alternateFiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       if (isSameType(cur, alternateFiber.component)) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.dom = alternateFiber.dom;</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.effectTag = 'update';</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.alternateFiber = alternateFiber;</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.useStateStorage = alternateFiber.useStateStorage;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         curFiber.useEffectStorage = alternateFiber.useEffectStorage;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         alternateFiber.newFiber = curFiber;</span><span class="token prefix unchanged"> </span><span class="token line">       &#125; else &#123;</span><span class="token prefix unchanged"> </span><span class="token line">         deletions.push(alternateFiber);</span><span class="token prefix unchanged"> </span><span class="token line">         curFiber.effectTag = 'placement';</span><span class="token prefix unchanged"> </span><span class="token line">       &#125;</span><span class="token prefix unchanged"> </span><span class="token line">     &#125; else &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       curFiber.effectTag = 'placement';</span><span class="token prefix unchanged"> </span><span class="token line">     &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     // ...</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;, null);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // ...</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>实现 <code>useEffect()</code></strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token parameter">cb<span class="token punctuation">,</span> dep</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> currentFiber <span class="token operator">=</span> nextFiber<span class="token punctuation">;</span>  <span class="token keyword">const</span> effectIndex <span class="token operator">=</span> currentFiber<span class="token punctuation">.</span>useEffectCount<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">// 初始化阶段, 无论是否传入 dep 列表, 都执行</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFiber<span class="token punctuation">.</span>useEffectStorage<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> effectIndex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    currentFiber<span class="token punctuation">.</span>useEffectStorage<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> cb<span class="token punctuation">,</span> dep <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// 非初始化阶段, 只有 deps 变化才执行, 同时更新 deps</span>  <span class="token keyword">const</span> hook <span class="token operator">=</span> currentFiber<span class="token punctuation">.</span>useEffectStorage<span class="token punctuation">[</span>effectIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>    dep<span class="token punctuation">.</span>length <span class="token operator">!==</span> hook<span class="token punctuation">.</span>dep<span class="token punctuation">.</span>length <span class="token operator">||</span>    dep<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> item <span class="token operator">!==</span> hook<span class="token punctuation">.</span>dep<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    hook<span class="token punctuation">.</span>dep <span class="token operator">=</span> dep<span class="token punctuation">;</span>    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="实现-useeffect-hook-异步回调">实现 <code>useEffect</code> Hook(异步回调)</h2><p>实际的 <code>useEffect</code> 还具有如下特性</p><ul><li>回调并不是在 <code>React.useEffect()</code> 时执行,而是在统一提交后执行 (否则拿不到 DOM)</li><li>我们需要收集 useEffect 中回调的返回函数 (<code>cleanup</code> 函数),并在下次执行回调的时候先执行上次返回的 <code>cleanup</code> 函数</li></ul><p>实现第一点只需要维护一个全局队列记录需要执行的回调. 实现第二点需要在hook 中维护一个 <code>cleanup</code> 参数</p><p><strong>维护全局回调 Hook 数组</strong></p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> // 需要执行的 Hook 数组</span><span class="token prefix inserted">+</span><span class="token line"> let useEffectQueue = [];</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function useEffect(cb, dep = []) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   const currentFiber = nextFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   const effectIndex = currentFiber.useEffectCount++;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   if (currentFiber.useEffectStorage.length &lt;= effectIndex) &#123;</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     currentFiber.useEffectStorage.push(&#123; cb, dep &#125;);</span><span class="token prefix deleted">-</span><span class="token line">     cb();</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     // 首次执行无需执行 cleanup, 设为空</span><span class="token prefix inserted">+</span><span class="token line">     const hook = &#123; cb, dep, cleanUp: undefined &#125;;</span><span class="token prefix inserted">+</span><span class="token line">     currentFiber.useEffectStorage.push(hook);</span><span class="token prefix inserted">+</span><span class="token line">     useEffectQueue.push(hook);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     return;</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   const hook = currentFiber.useEffectStorage[effectIndex];</span><span class="token prefix unchanged"> </span><span class="token line">   if (</span><span class="token prefix unchanged"> </span><span class="token line">     dep.length !== hook.dep.length ||</span><span class="token prefix unchanged"> </span><span class="token line">     dep.some((item, index) => item !== hook.dep[index])</span><span class="token prefix unchanged"> </span><span class="token line">   ) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">     hook.dep = dep;</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     cb();</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     // 更新时执行</span><span class="token prefix inserted">+</span><span class="token line">     useEffectQueue.push(hook);</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &#125;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>在统一提交时调用回调</strong></p><p>执行全部的 Hooks</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">applyEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  useEffectQueue<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">hook</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>hook<span class="token punctuation">.</span>cleanUp<span class="token punctuation">)</span> hook<span class="token punctuation">.</span><span class="token function">cleanUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    hook<span class="token punctuation">.</span>cleanUp <span class="token operator">=</span> hook<span class="token punctuation">.</span><span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  useEffectQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff">function performFiberLoop(idleDeadline) &#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...</span><span class="token prefix unchanged"> </span><span class="token line"> if (!nextFiber &amp;&amp; wipRootFiber) &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   applyDeletions();</span><span class="token prefix unchanged"> </span><span class="token line">   applySubmit(getNextFiber(wipRootFiber));</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   applyEffect();</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   currentRootFiber = wipRootFiber;</span><span class="token prefix unchanged"> </span><span class="token line">   wipRootFiber = null;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span><span class="token prefix unchanged"> </span><span class="token line"> // ...</span></span>&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
    <summary type="html">理解并尝试实现 React 的 Fiber 与 DOM 构建过程, 通过 Fiber 对比实现更新调度与简单 Hook (useState, useEffect)</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="前端框架" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="笔记" scheme="https://blog.liukairui.me/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="前端框架" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    <category term="React" scheme="https://blog.liukairui.me/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>2023-08前端新活汇总</title>
    <link href="https://blog.liukairui.me/article/ff_monthly/2023-08%E5%89%8D%E7%AB%AF%E6%96%B0%E6%B4%BB%E6%B1%87%E6%80%BB/"/>
    <id>https://blog.liukairui.me/article/ff_monthly/2023-08%E5%89%8D%E7%AB%AF%E6%96%B0%E6%B4%BB%E6%B1%87%E6%80%BB/</id>
    <published>2023-07-31T16:00:01.000Z</published>
    <updated>2023-07-31T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>信源:</p><ul><li>https://web.dev/</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5">前端食堂<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvYmxvZy8=">MDNBlog<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9pby5nb29nbGUvMjAyMy9wcm9ncmFtL2ludGwvemgvP3E9d2Vi">GoogleI/O<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9lbi9ibG9nLw==">GoogleDevelopers<i class="fa fa-external-link-alt"></i></span></li></ul></blockquote><h2 id="部分可用的内容">部分可用的内容</h2><h3 id="虚拟键盘-api">虚拟键盘 API</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5">前端食堂<i class="fa fa-external-link-alt"></i></span></p><p>FireFox NA, Chrome 94, Edge 94, Safari NA</p></blockquote><p>介绍了移动端中弹出键盘造成页面上移部分元素无法显示的问题. 通过</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body:has(input:focus)</span> <span class="token punctuation">&#123;</span>  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>    <span class="token function">var</span><span class="token punctuation">(</span>--cta-height<span class="token punctuation">)</span> + <span class="token function">env</span><span class="token punctuation">(</span>keyboard-inset-height<span class="token punctuation">,</span> 0<span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>的方法实现当用户聚焦 <code>input</code>时将元素移动位置从而规避遮盖的问题.</p><p>这里使用 <code>env()</code> 实现环境检测, 即: 若存在<code>keyboard-inset-height</code> 则使用, 否则使用 <code>0px</code></p><h3 id="浏览器八月特性">浏览器八月特性</h3><ul><li><p>Audio Output Devices API</p><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0F1ZGlvX091dHB1dF9EZXZpY2VzX0FQSQ==">MDN<i class="fa fa-external-link-alt"></i></span>FireFox 116, Chrome NA, Edge NA, Safari NA</p></blockquote><p>允许用户在浏览器中选择音频播放设备 (扬声器, 蓝牙耳机...),就像在操作系统中选择播放设备一样</p><p><img src="./2023-08前端新活汇总/1.png" /></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 选择播放设备的代码必须由用户操作触发, 因此放入一个 Listener</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#myButton"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 显示媒体选择框</span>  <span class="token keyword">const</span> audioDevice <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>mediaDevices<span class="token punctuation">.</span><span class="token function">selectAudioOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 播放音频</span>  <span class="token keyword">const</span> audio <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"audio"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  audio<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"https://example.com/audio.mp3"</span><span class="token punctuation">;</span>  audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 指定播放设备</span>  audio<span class="token punctuation">.</span><span class="token function">setSinkId</span><span class="token punctuation">(</span>audioDevice<span class="token punctuation">.</span>deviceId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>路径运动动画支持更多函数</p><blockquote><p>来源: <span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L2Jsb2cvd2ViLXBsYXRmb3JtLTA4LTIwMjM/aGw9ZW4=">web.dev<i class="fa fa-external-link-alt"></i></span>FireFox 116, Chrome NA, Edge NA, Safari NA</p></blockquote><p><code>circle()</code>, <code>ellipse()</code>, <code>rect()</code>,<code>inset()</code>, <code>xywh()</code>, <code>polygon()</code>,<code>ray()</code>, `url()</p></li><li><p>支持 HTML Element 的画中画</p><blockquote><p>来源: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9kb2NzL3dlYi1wbGF0Zm9ybS9kb2N1bWVudC1waWN0dXJlLWluLXBpY3R1cmUv">web.dev<i class="fa fa-external-link-alt"></i></span>FireFox NA, Chrome 116, Edge 116, Safari NA</p></blockquote><p>画中画曾经只支持装载 Video, 但是现在可以装载 HTML 元素</p></li><li><p>CSS 嵌套语法完成基线支持</p><blockquote><p>来源: <span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L2Jsb2cvd2ViLXBsYXRmb3JtLTA4LTIwMjM/aGw9ZW4=">web.dev<i class="fa fa-external-link-alt"></i></span>FireFox 117, Chrome 112, Edge 112, Safari 16.5</p></blockquote></li></ul><h2 id="工具">工具</h2><h3 id="node-模块分类汇总网站">Node 模块分类汇总网站</h3><p>允许分类检索不同领域的 Node 包: https://nodejstoolbox.com/</p><h3 id="dnt"><code>dnt</code></h3><p>将 deno 代码转换为 node:https://deno.com/blog/publish-esm-cjs-module-dnt</p><h3 id="size-limit">Size Limit</h3><p>一款可用于 GitHub Action, Circle CI... 的大小限制工具, 当用户提交的JS 打包后大小超限即出发错误: https://github.com/ai/size-limit</p><h2 id="实验性内容">实验性内容</h2><h3 id="object.groupby-map.groupby"><code>Object.groupBy</code>,<code>Map.groupBy()</code></h3><blockquote><p>来源: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2dyb3VwQnk=">MDN<i class="fa fa-external-link-alt"></i></span>,<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTWFwL2dyb3VwQnk=">MDN<i class="fa fa-external-link-alt"></i></span>Chrome 117, Edge 117, FireFox 119, Safari NA</p></blockquote><p>可以实现一个类似分类汇总的功能</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> inventory <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"asparagus"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"vegetables"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"bananas"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"fruit"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"goat"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"meat"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"cherries"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"fruit"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"fish"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"meat"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">const</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span>inventory<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> type <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> type<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/* Result is:&#123;  vegetables: [    &#123; name: 'asparagus', type: 'vegetables', quantity: 5 &#125;,  ],  fruit: [    &#123; name: "bananas", type: "fruit", quantity: 0 &#125;,    &#123; name: "cherries", type: "fruit", quantity: 5 &#125;  ],  meat: [    &#123; name: "goat", type: "meat", quantity: 23 &#125;,    &#123; name: "fish", type: "meat", quantity: 22 &#125;  ]&#125;*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> inventory <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"asparagus"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"vegetables"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">9</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"bananas"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"fruit"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"goat"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"meat"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"cherries"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"fruit"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"fish"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"meat"</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">const</span> restock <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">restock</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> sufficient <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">restock</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> result <span class="token operator">=</span> Map<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span>inventory<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> quantity <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>  quantity <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token operator">?</span> restock <span class="token operator">:</span> sufficient<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>restock<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// [&#123; name: "bananas", type: "fruit", quantity: 5 &#125;]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="动画将支持更多属性">动画将支持更多属性</h3><blockquote><p>来源: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9ibG9nL2VudHJ5LWV4aXQtYW5pbWF0aW9ucy8=">web.dev<i class="fa fa-external-link-alt"></i></span></p></blockquote><h2 id="文章">文章</h2><ul><li><span class="exturl" data-url="aHR0cHM6Ly92ZXJjZWwuY29tL2Jsb2cvdW5kZXJzdGFuZGluZy1yZWFjdC1zZXJ2ZXItY29tcG9uZW50cw==">UnderstandingReact Server Components<i class="fa fa-external-link-alt"></i></span>: RSC 光速入门</li></ul>]]></content>
    
    
    <summary type="html">都是些二手信息罢了~</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="新活" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E6%96%B0%E6%B4%BB/"/>
    
    
    <category term="前端新活" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF%E6%96%B0%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>2023-07前端新活汇总</title>
    <link href="https://blog.liukairui.me/article/ff_monthly/2023-07%E5%89%8D%E7%AB%AF%E6%96%B0%E6%B4%BB%E6%B1%87%E6%80%BB/"/>
    <id>https://blog.liukairui.me/article/ff_monthly/2023-07%E5%89%8D%E7%AB%AF%E6%96%B0%E6%B4%BB%E6%B1%87%E6%80%BB/</id>
    <published>2023-06-30T16:00:01.000Z</published>
    <updated>2023-06-30T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>信源:</p><ul><li>https://web.dev/</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5">前端食堂<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvYmxvZy8=">MDNBlog<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9pby5nb29nbGUvMjAyMy9wcm9ncmFtL2ludGwvemgvP3E9d2Vi">GoogleI/O<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9lbi9ibG9nLw==">GoogleDevelopers<i class="fa fa-external-link-alt"></i></span></li></ul></blockquote><h2 id="部分可用的内容">部分可用的内容</h2><h3 id="滚动驱动动画">滚动驱动动画</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvYmxvZy9zY3JvbGwtcHJvZ3Jlc3MtYW5pbWF0aW9ucy1pbi1jc3Mv">MDN<i class="fa fa-external-link-alt"></i></span></p><p>Chrome: 115, Firefox: NA, Safari: NA</p></blockquote><p>允许用户将动画进度与某个可滚动元素的滚动进度关联起来, 使用纯 CSS实现基于滚动的动画. 可以参考 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9lbi9ibG9nL3Njcm9sbC1hbmltYXRpb24tcGVyZm9ybWFuY2UtY2FzZS1zdHVkeS8=">GoogleDevelopers 的文章<i class="fa fa-external-link-alt"></i></span></p><h3 id="es-module-外部引用完成基线支持">ES module外部引用完成基线支持</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L2ltcG9ydC1tYXBzLWluLWFsbC1tb2Rlcm4tYnJvd3NlcnMv">WebDev<i class="fa fa-external-link-alt"></i></span></p><p>Chrome: 89, Firefox: 108, Safari: 16.4</p></blockquote><p>允许开发者通过 <code>&lt;script type="importmap"&gt;</code> 定义一个ES 模块的外部引用地址, 例如:</p><p>开发者希望使用 <code>browser-fs-access</code> 这个 ES 模块,但是又不希望让这个模块通过自己的服务器 / CDN 分发, 可以这么写</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>importmap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token comment">// 在这里定义 ES 模块名的引用地址</span>  <span class="token punctuation">&#123;</span>    <span class="token string-property property">"imports"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token string-property property">"browser-fs-access"</span><span class="token operator">:</span> <span class="token string">"https://unpkg.com/browser-fs-access@0.33.0/dist/index.modern.js"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token comment">// 直接用就可以了</span>  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span>fileOpen<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'browser-fs-access'</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fileOpen</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>      <span class="token literal-property property">mimeTypes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'text/plain'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> file<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="prettier-3.0-发布">Prettier 3.0 发布</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9wcmV0dGllci5pby9ibG9nLzIwMjMvMDcvMDUvMy4wLjAuaHRtbA==">prettier<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li>迁移所有源码到 ESM, 支持 ESM 配置文件</li><li><code>trailingComma</code> 默认值从 <code>es5</code> 改为<code>all</code>. 意味着以后对象尾部会默认带一个 <code>,</code></li><li>从解析器中删除 <code>follow</code> 语法支持</li><li><code>--parser=css</code> 将只可以解析 CSS 语法</li></ul><h3 id="vite-4-发布">Vite 4 发布</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5L2lzc3Vlcy85Nw==">前端食堂<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li>实验性的加入 Lightning CSS 解析器</li><li>更新 ESBuild 0.18</li><li>支持 Solid 和 Qwik 模板</li></ul><h3 id="remotion-4-发布">Remotion 4 发布</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5L2lzc3Vlcy85Nw==">前端食堂<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li>Remotion Studio: 一个新的图形界面, 可以让你在预览视频的同时,编辑组件的属性, 配置和跟踪渲染, 管理文件和音乐等</li><li>可视化编辑属性: 可以用 Zod schema 定义组件的属性, 然后在 RemotionStudio 中用图形界面直接编辑它们</li><li>Rust-powered architecture: Remotion 4.0 内置了一个 Rust二进制文件和一个定制的 FFmpeg 6.0 版本, 这样可以提高性能, 减少安装时间,支持更多的格式和功能</li><li>数据驱动的视频:你可以利用新的数据获取和动态计算视频时长和尺寸的系统,来创建更灵活和个性化的视频</li></ul><h3 id="firefox-115-chrome-115-发布">FireFox 115 &amp; Chrome 115发布</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9lbi9ibG9nL25ldy1pbi1jaHJvbWUtMTE1Lw==">ChromeDevelopers<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li>滚动驱动动画: 支持 ScrollTimeline 与 ViewTimeline</li><li>Topic API: 允许浏览器与三方共享用户兴趣信息并保护用户隐私.(在此之前这一功能由三方 Cookie 实现)</li><li>默认启用 fenced frame (参考 <ahref="https://blog.liukairui.me/article/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E6%80%BB%E7%BB%93/">前端安全策略总结</a>)</li><li>主线程上 <code>WebAssembly.Module</code> 的最大大小增加到 8MB</li><li><code>display</code> 属性支持 multi-keyword 语法 (参考 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2Rpc3BsYXkvbXVsdGkta2V5d29yZF9zeW50YXhfb2ZfZGlzcGxheQ==">MDN<i class="fa fa-external-link-alt"></i></span>)</li><li>Compute Pressure 特性实验: Compute Pressure是一种可以让网页应用根据系统的压力状态来调整自己的工作负载的 API</li><li>支持在 Mac 上调试 Chrome IOS 上的网站</li><li>更多数组方法</li><li>动画 <code>animation-composition</code> 属性</li></ul><h3 id="介绍-devtool-的-record-面板">介绍 DevTool 的 Record 面板</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9lbi9ibG9nL2RldnRvb2xzLXRpcHMtNC8=">ChromeDevelopers<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li>支持操作记录</li><li>支持操作记录修改</li><li>支持导出操作记录</li><li>支持重放操作并测量性能</li></ul><p><em>如果这里导出的内容可以与 E2E 测试框架兼容就很棒了</em></p><h3 id="动画-animation-composition-属性">动画<code>animation-composition</code> 属性</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9hcnRpY2xlcy9jc3MtYW5pbWF0aW9uLWNvbXBvc2l0aW9uLw==">ChromeDevelopers<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>当动画样式出现冲突时的处理行为</p><ul><li><code>replace</code>: 效果值取代基础值</li><li><code>add</code>: 效果值添加到基础值中</li><li><code>accumulate</code>: 效果值与基础值相结合</li></ul><iframe height="300" style="width: 100%;" scrolling="no" title="CSS `animation-composition`" src="https://codepen.io/web-dot-dev/embed/VwGRBVX?default-tab=css%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">See the Pen <a href="https://codepen.io/web-dot-dev/pen/VwGRBVX"> CSS<code>animation-composition</code></a> by web.dev(<a href="https://codepen.io/web-dot-dev"><span class="citation"data-cites="web-dot-dev">@web-dot-dev</span></a>) on<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlv">CodePen<i class="fa fa-external-link-alt"></i></span>.</iframe><h3 id="更多数组方法">更多数组方法</h3><blockquote><p>来自: <span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L3dlYi1wbGF0Zm9ybS0wNy0yMDIzLw==">web.dev<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li><p><code>Array.toReversed()</code> / <code>Array.toSorted()</code> /<code>Array.toSpliced()</code> / <code>TypedArrays.toReversed()</code> /<code>TypedArrays.toSorted()</code>: <code>[Typed]Array.toXXXed</code>是 <code>[Typed]Array.XXX</code> 的浅拷贝版本,即该函数不会修改原数组的内容, 会将结果作为返回值返回, 例如</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>arr_r <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>arr <span class="token comment">// [3, 2, 1]</span>arr_r <span class="token comment">// [3, 2, 1]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>arr_r <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">toReversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>arr <span class="token comment">// [1, 2, 3]</span>arr_r <span class="token comment">// [3, 2, 1]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>Array.with()</code> / <code>TypedArrays.with()</code>:<code>[Typed]Array.with()</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 6, 4, 5]</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="backforward-cache">Back/forward cache</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L2JmY2FjaGUvP3V0bV9zb3VyY2U9ZGV2dG9vbHM=">web.dev<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>将整个页面缓存到内存,当浏览器导航回到该页面时直接展示页面而无需重新加载</p><p>在缓存时浏览器所有任务队列中的任务 (定时器与 Promise)都会被挂起等待从 cache 中恢复. 该方案存在部分异步风险,</p><p>Back/forward Cache 是浏览器自身的优化机制, 无需显式声明开启, 但是部分JS API 会导致 Back/forward Cache 无法开启, 在开发中可以打开<code>DevTools - Application - Back/forward cache</code>检查是否可以开启 Back/forward cache</p><h2 id="工具">工具</h2><h3 id="crux-仪表盘">CrUX 仪表盘</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9kb2NzL2NydXgvZGFzaGJvYXJkLw==">ChromeDevelopers<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>CrUX 仪表盘通过收集 Chrome用户在访问网站时性能指标汇总了每个网站的平均性能报告,只需要输入网址即可查询网站性能信息. 使用方法参考 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9kb2NzL2NydXgvZGFzaGJvYXJkLw==">ChromeDevelopers<i class="fa fa-external-link-alt"></i></span></p><h3 id="treo.sh">treo.sh</h3><p>一款付费的网站性能分析工具,支持测试基于不同设备的性能并提供性能监测服务</p><h3 id="gitstars">gitstars</h3><p>一款 github stars 管理工具, 参考 <span class="exturl" data-url="aHR0cHM6Ly9naXRzdGFycy5jZm91ci50b3Av">gitstars<i class="fa fa-external-link-alt"></i></span></p><h3 id="低代码的页面自动化工具">低代码的页面自动化工具</h3><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0F1dG9tYUFwcC9hdXRvbWE=">atoma<i class="fa fa-external-link-alt"></i></span>允许用户通过拖拽的方式实现页面自动化操作</p><h3 id="iframe-大小调整工具">iframe 大小调整工具</h3><p><span class="exturl" data-url="aHR0cDovL2RhdmlkamJyYWRzaGF3LmdpdGh1Yi5pby9pZnJhbWUtcmVzaXplci8=">iframe-resizer<i class="fa fa-external-link-alt"></i></span>允许用户将 frame 调整为任何或者适合的大小</p><h3 id="检测-npm-包在浏览器中的真实大小">检测 npm包在浏览器中的真实大小</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5L2lzc3Vlcy85OA==">前端食堂<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>借助 WebContainers, <span class="exturl" data-url="aHR0cHM6Ly9wa2ctc2l6ZS5kZXYv">pkg-size<i class="fa fa-external-link-alt"></i></span>可以在浏览器检测出 npm 包的真实大小</p><h3 id="typechat">TypeChat</h3><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlQ2hhdA==">TyoeChat<i class="fa fa-external-link-alt"></i></span>是一个可以阅读你的 ts 代码并给出 / 验证结构性例子的 GPT. 微软出品</p><h2 id="实验性内容">实验性内容</h2><h3 id="未来可能支持的-js-语法">未来可能支持的 JS 语法</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5L2lzc3Vlcy85Nw==">前端食堂<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtdHlwZS1hbm5vdGF0aW9ucw==">支持类型系统<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtaW50bC1tZXNzYWdlZm9ybWF0">Intl.MessageFormat<i class="fa fa-external-link-alt"></i></span>:类似带参数的 i18n 格式化</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2phdmFzY3JpcHQtY29tcGlsZXItaGludHMvY29tcGlsZXItbm90YXRpb25zLXNwZWM=">编译器符号规范<i class="fa fa-external-link-alt"></i></span>:目前希望支持 <code>#__PURE__</code>,<code>#__NO_SIDE_EFFECTS__</code></li></ul><h2 id="文章">文章</h2><ul><li><span class="exturl" data-url="aHR0cHM6Ly90dXJyaWF0ZS5jb20vYXJ0aWNsZXMvbW9kZXJuLWphdmFzY3JpcHQtZXZlcnl0aGluZy15b3UtbWlzc2VkLW92ZXItMTAteWVhcnM=">现在JavaScript 的十年<i class="fa fa-external-link-alt"></i></span>: ES6+ 特性总结</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21lbmdqaWFuLWdpdGh1Yi9jb3BpbG90LWFuYWx5c2lz">逆向分析GitHub Copilot<i class="fa fa-external-link-alt"></i></span>: 可以学到一些 JS 逆向的知识</li><li><span class="exturl" data-url="aHR0cHM6Ly9jc3N3aXphcmRyeS5jb20vMjAyMy8wNy9pbi1kZWZlbmNlLW9mLWRvbWNvbnRlbnRsb2FkZWQv">捍卫DOMContentLoaded<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L3RhLXR5cGVzLw==">测试自动化的类型<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvYmxvZy9zZWN1cmluZy1jZG4tdXNpbmctc3JpLXdoeS1ob3cv">使用SRI 提高 CDN 资源安全性<i class="fa fa-external-link-alt"></i></span>: 加个 Hash 罢了</li><li><ahref="https://vladimirzdrazil.com/posts/object-keys-keyof-t/">为什么<code>Object.key</code> 的类型不是 <code>(kayof T)[]</code></a>: 因为 JS中的对象是结构化类型</li><li><span class="exturl" data-url="aHR0cHM6Ly92ZXJjZWwuY29tL2Jsb2cvaG93LXJlYWN0LTE4LWltcHJvdmVzLWFwcGxpY2F0aW9uLXBlcmZvcm1hbmNl">React18 如何提高应用程序性能<i class="fa fa-external-link-alt"></i></span>: WIP</li><li><span class="exturl" data-url="aHR0cHM6Ly92OC5kZXYvYmxvZy9zcGVlZGluZy11cC12OC1oZWFwLXNuYXBzaG90cw==">加速 V8堆快照的调试记录<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9jc3N3aXphcmRyeS5jb20vMjAyMy8wNy9jb3JlLXdlYi12aXRhbHMtZm9yLXNlYXJjaC1lbmdpbmUtb3B0aW1pc2F0aW9uLw==">谷歌搜索的核心生命体征网络<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L3RhLXN0cmF0ZWdpZXMv">金字塔还是螃蟹？找到适合的测试策略<i class="fa fa-external-link-alt"></i></span>:聊了如何分配单元测试, 集成测试, E2E</li><li><span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L2FkYXB0aW5nLXR5cG9ncmFwaHktdG8tdXNlci1wcmVmZXJlbmNlcy13aXRoLWNzcy8=">CSS使用CSS使排版适应用户偏好<i class="fa fa-external-link-alt"></i></span>: 如何在不同阅读偏好模式下微调字体,包括</li><li>暗模式的灰度略有降低</li><li>高对比度得到更大胆的字体</li><li>低对比度得到更薄的字体</li></ul>]]></content>
    
    
    <summary type="html">都是些二手信息罢了~</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="新活" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E6%96%B0%E6%B4%BB/"/>
    
    
    <category term="前端新活" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF%E6%96%B0%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>🏗️掘金前端初阶训练营笔记</title>
    <link href="https://blog.liukairui.me/article/%E6%8E%98%E9%87%91%E5%89%8D%E7%AB%AF%E5%88%9D%E9%98%B6%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%94%E8%AE%B0/"/>
    <id>https://blog.liukairui.me/article/%E6%8E%98%E9%87%91%E5%89%8D%E7%AB%AF%E5%88%9D%E9%98%B6%E8%AE%AD%E7%BB%83%E8%90%A5%E7%AC%94%E8%AE%B0/</id>
    <published>2023-06-21T16:00:01.000Z</published>
    <updated>2023-06-21T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="html">HTML</h2><ul><li><p>组成分类:</p><ul><li><p>元素 (Element):</p></li><li><p>文本: Text &amp; <code>&lt;![CDATA[text]]&gt;</code></p></li><li><p>注释</p></li><li><p>DTD (Document Type Defination):<code>&lt;!Doctype html&gt;</code></p></li><li><p>处理信息: <code>&lt;?a 1?&gt;</code></p></li></ul></li><li><p>值得看的 HTML 功能</p><ul><li><p><code>&lt;head&gt;</code> 中的 <code>&lt;base&gt;</code> 定义 URL前缀, 目前不建议使用了</p></li><li><p>ARIA: 用于设计语义化系统</p></li><li><p>AMP: 谷歌的一套标准, 用于提升页面曝光度</p></li><li><p>Audio Context: 新的音频 API 接口, 使用增幅,频率等相对科学的定义音频</p></li><li><p>二进制处理: 包括 Blob, File, ArrayBuffer, Buffer 等对象</p></li></ul></li></ul><h2 id="css">CSS</h2><h3 id="层叠优先级判断">层叠优先级判断</h3><p>先判断样式表来源, 无法判定则判定选择器优先级,最后判断样式表在源码中的位置</p><ul><li><p>通过样式表来源判断, 优先顺序从低到高是</p><ol type="1"><li>用户代理样式: 浏览器 (也就是用户代理) 定义的默认样式</li><li>用户样式表: 由使用浏览器的用户定义的,例如视障用户可能需要高对比度样式</li><li>作者样式表: 开发者写的</li><li>作者样式表中的 <code>!important</code></li><li>用户样式表中的 <code>!important</code></li><li>用户代理样式表中的 <code>!important</code></li></ol><p>加 <code>!important</code> 之后优先级会反过来, 例如: 如果浏览器给<code>&lt;a&gt;</code> 设置了 <code>color: red !important</code>,那么谁都无法修改 <code>color</code></p></li><li><p>通过选择器优先级判断, 优先级从高到低是</p><p>内联 &gt; Id选择器 &gt; 类选择器 = 属性选择器 = 伪类选择器 &gt;类型选择器 = 伪元素选择器</p><p>优先级一共有四个等级, 可以用四元组标出选择器出现的次数 (例如非内联的<code>#btn:hover</code> 就是 <code>(0,1,1,0)</code>),在比较时从高优先级对比, 同一优先级相同比较下一优先级.</p><p>逻辑选择器 <code>:is()</code>, <code>:not()</code>,<code>:has()</code> 本身没有优先级, 以参数中优先级最高者为准,<code>:where()</code> 优先级为 0</p></li><li><p>通过在源码中的顺序判断</p><p>最后声明的生效, 通过 <code>link</code> 与 <code>style</code>引入的根据标签相对位置决定, 通过 <code>@important</code> 引入相当于在<code>@important</code> 处做了文本替换</p></li></ul><h3 id="样式的继承">样式的继承</h3><p>默认可以继承的属性:</p><ul><li>文本相关的属性: <code>color</code>, <code>font</code>,<code>font-family</code>, <code>font-size</code>,<code>font-weight</code>, <code>font-variant</code>,<code>font-style</code>, <code>line-height</code>,<code>letter-spacing</code>, <code>text-align</code>,<code>text-indent</code>, <code>text-transform</code>,<code>white-space</code>, <code>word-spacing</code></li><li>少部分列表, 表格相关属性</li></ul><p>也可以通过显式指定 <code>inherit</code> 关键字指定</p><h3 id="值与单位">值与单位</h3><ul><li><p>单位:</p><ul><li>长度单位:<ul><li>绝对长度: <code>px</code>, <code>pt</code>, <code>cm</code>,<code>in</code>...</li><li>相对长度: <code>em</code>, <code>rem</code>, <code>ex</code> (字符'x' 的高度), <code>ch</code> (数字 0 的宽度), <code>lh</code>(行高),<code>rlh</code>(根元素行高), <code>vw</code>, <code>vh</code>...</li></ul></li><li>角度: <code>deg</code>, <code>grad</code>, <code>turn</code>,<code>rad</code></li><li>时间: <code>s</code>, <code>ms</code></li><li>分辨率: <code>dpi</code>, <code>dpcm</code>, <code>dppx</code>(一般用于媒体查询 <code>min-resolution</code> 等)</li></ul><p>参考: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9MZWFybi9DU1MvQnVpbGRpbmdfYmxvY2tzL1ZhbHVlc19hbmRfdW5pdHM=">MDN<i class="fa fa-external-link-alt"></i></span></p></li><li><p>值</p><ul><li>文字类: 关键字, 颜色,位置</li><li>数字类</li><li>函数生成: calc, min, max ...</li></ul></li></ul><h3 id="布局">布局</h3><ul><li><p>常见布局有: 常规流 (Normal Flow), 浮动流 (Float), 定位流(Position) Flex 布局, Grid 布局, Multicol 布局</p></li><li><p>BFC &amp; IFC</p><ul><li><p>块格式化上下文 (BFC)</p><p>BFC 是 Web 页面的可视 CSS 渲染的一部分,它是块级盒子布局中与其他元素的交互的界限. BFC既定义了元素内部的排序规则, 又定义了元素间的表现</p><p>以下情况的元素会生成 BFC</p><ul><li><p>根元素</p></li><li><p>浮动元素 (元素的 <code>float</code> 不是<code>none</code>)</p></li><li><p>绝对定位元素 (元素的 <code>position</code> 为<code>absolute</code> 或 <code>fixed</code>)</p></li><li><p><code>display</code> 值为 <code>inline-block</code>,<code>table-cells</code>, <code>table-caption</code> 的元素</p></li><li><p><code>overflow</code> 值不是 <code>visible</code> 的元素</p></li><li><p>flex 或 grid 元素（<code>display: flex</code> 或<code>display: grid</code>）</p></li></ul><p>在 BFC 中:</p><ul><li>BFC 内部的盒子会在垂直方向上一个接一个地排列</li><li>BFC 的垂直方向的距离由 <code>margin</code> 决定. 属于同一个 BFC的两个相邻盒子的 <code>margin</code> 会发生重叠</li><li>BFC 的区域不会与 <code>float</code> 元素的盒子重叠</li><li>BFC 是一个独立的容器, 外面的元素不会影响 BFC 内的元素, BFC内的元素也不会影响外部的元素</li><li>BFC 的宽度为包含块的宽度, 除非该 BFC 是一个浮动元素,其宽度将为内容区的宽度</li></ul></li><li><p>内联格式化上下文 (IFC)</p><p>IFC 是 CSS 渲染的一部分, 它的区域包含了生成环境的内联元素,也就是说，IFC 中的元素会水平排列, 直到容器宽度不够, 然后会移到新的一行.在 IFC 中，盒子的左右都有可能接触到其它盒子, 除非当然,他们之间存在着空白或者垂直的分隔条.盒子垂直方向的起点是当前行盒子的顶端,垂直方向的终点是当前行盒子的底部.</p><p>在 IFC 中:</p><ul><li><p>IFC 的行框高度由其内部最高的元素决定, 但是并不受到顶部和底部<code>padding</code>, <code>border</code> 的影响</p></li><li><p>IFC 中的每个元素的 <code>margin</code>, <code>border</code>,<code>padding</code> 在水平方向上是互相影响的,但在垂直方向上不影响其他元素</p></li><li><p>IFC 中的元素不会有垂直方向的 <code>margin</code>重叠问题</p></li><li><p><strong>线条框模型:</strong></p><blockquote><p>“在内联格式区域中，盒子会从包含块的顶部开始，按序水平排列。只有水平外边距、边框和内边距会被保留。这些盒子可以以不同的方式在垂直方向上对齐：可以底部对齐或顶部对其，或者按文字底部进行对齐。我们把包含一串盒子的矩形区域称为一个<strong>线条框</strong>。”- 9.4.2</p></blockquote><p>==这里应该有张图==</p><p>在线条框 (line-box) 中, line-box 高度所在 box 最高最低元素的编剧,其值是 <code>line-height</code>, <code>line-height</code> -内容区域的高度是 leading, leading默认会均匀的分布在内容区域的上下两部分.</p></li><li><p><strong>基线与垂直对齐</strong></p><p>基线是一种看不见的线, 它是用来决定行内元素如何垂直对齐.</p><ul><li>对于文本, 基线通常是指字符的底部线条. 比如, 在拉丁字母中,基线是大部分字母 (例如 a, b, c, d 等) 的底部, 有些字母 (如 p, q)等会部分延伸到基线以下, 这部分被称为下行部分 (descender)</li><li>对于一个行内元素或一个行内块元素,它的基线默认是其内部最后一行文本的基线.如果行内元素或行内块元素没有文本或者由于其他原因没有基线,则其底边界就被认为是其基线.</li><li>对于一个块级元素, 基线的计算则更复杂一些.块级元素的基线是其最后一行盒子的基线, 除非它有 overflow 且不是 visible,那么这个块级元素的基线就不存在。</li></ul><p><code>vertical-align</code> 决定了 IFC 中元素的位置, 默认是base-line,</p><ul><li><code>baseline</code> (默认值): 元素的基线与父元素的基线对齐.</li><li><code>top</code>: 元素的顶部与行中最高元素的顶部对齐.</li><li><code>middle</code>: 元素的中心线与父元素基线上方约<code>0.5ex</code> 的位置对齐. <strong>注意:文字的中心线是基线向上半个小写 <code>x</code> 的位置</strong></li><li><code>bottom</code>: 元素的底部与行中最低元素的底部对齐.</li></ul><p>应用:</p><ul><li>单行文本垂直对齐 (设置<code>line-height</code>)</li><li>文字与 icon 对齐. (设置图标文本的对齐均为 <code>middle</code>,此时图片的垂直几何中心与文本的中心线(基线向上半个x)与父元素中心(基线向上半个x)对齐,图文仍不对齐, 再设置父元素 <code>font-size: 0</code> 即可让半个<code>x</code> 消失, 完成彻底对齐)</li></ul></li></ul></li></ul></li><li><p>常规流布局</p><ul><li><p>盒子的 <code>display</code> 属性可以分为外部显示的<code>display-outside</code> 与内部显示的 <code>display-inside</code>.外部显示类型约定了盒子如何与其他相同格式的上下文一起显示,内部显示类型约定了盒子内部的布局方式. 例如:<code>display: inline-flex</code> 的外部为 <code>inline</code> 参与 IFC,内部参与 flex 布局</p></li><li><p>常规流中的盒子的外部显示类型可以是 block 参与 BFC, 也可以是inline 参与 IFC.</p></li><li><p>常规流的 BFC 会通过如下方法处理其一级子 IFC 混排问题: 当 IFC的父元素是 BFC, 且父元素中有非 IFC. 浏览器会自动为连续的 IFC外部生成一个 BFC 包裹, BFC 内部要么都是 BFC 要么都是 IFC 的目的</p><p>==这里应该有一张图==</p></li></ul></li><li><p>弹性盒子布局</p><ul><li>作用于父元素的属性: <code>display</code>,<code>flex-direction</code>, <code>flex-wrap</code>,<code>justify-content</code>, <code>align-items</code>,<code>align-content</code>, <code>gap</code>.这些属性作用于所有内部元素</li><li>作用于子元素的属性: <code>flex-basis</code>, <code>flex-grow</code>,<code>flex-shrink</code>, <code>order</code>, <code>align-self</code>,这些属性用于控制单个元素</li></ul></li><li><p>网格布局</p><ul><li>作用于父元素的属性: <code>display</code>,<code>grid-template-colums/rows</code>, <code>grid-auto-flow</code>,<code>grid-tempate-areas</code></li><li>作用于子元素的属性: <code>grid-colum/row</code>,<code>grid-area</code></li><li>flex 与 grid 如何选择?: 整体布局建议 grid, 小面积, 小组件用 flex灵活一点</li></ul></li></ul><h3 id="层叠上下文">层叠上下文</h3><p>这里的层叠与 CSS 层叠样式表中的层叠不同, 这是指当元素具有层叠属性时,它们在三维空间中的层叠顺序. 一个层叠上下文对应了浏览器渲染的一个 renderlayer (渲染层).</p><p>32:41</p><h3 id="变形与动画">变形与动画</h3><h3 id="响应式设计">响应式设计</h3><h3 id="css-生态">CSS 生态</h3><h2 id="javascript">JavaScript</h2>]]></content>
    
    
    <summary type="html">语言部分</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>2023-06前端新活汇总</title>
    <link href="https://blog.liukairui.me/article/ff_monthly/2023-06%E5%89%8D%E7%AB%AF%E6%96%B0%E6%B4%BB%E6%B1%87%E6%80%BB/"/>
    <id>https://blog.liukairui.me/article/ff_monthly/2023-06%E5%89%8D%E7%AB%AF%E6%96%B0%E6%B4%BB%E6%B1%87%E6%80%BB/</id>
    <published>2023-05-31T16:00:01.000Z</published>
    <updated>2023-05-31T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>信源:</p><ul><li>https://web.dev/</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5">前端食堂<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvYmxvZy8=">MDNBlog<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9pby5nb29nbGUvMjAyMy9wcm9ncmFtL2ludGwvemgvP3E9d2Vi">GoogleI/O<i class="fa fa-external-link-alt"></i></span></li></ul></blockquote><h2 id="部分可用的内容">部分可用的内容</h2><h3 id="官方支持模态框">官方支持模态框</h3><blockquote><p>来自 Google I/O 2023</p><p>Chrome:37, Firefox: 98, Edge: 79, Safari: 15.4</p></blockquote><ul><li><p>原生支持的对话框元素</p></li><li><p>优势</p><ul><li>与传统组件库实现相比: 内置支持了焦点管理, 选项卡最终, 多对话框堆叠,快捷键关闭, 支持更多行为管理(背景是否可以滚动, 是否可以被聚焦)</li><li>与 Alert 相比: 可以自定义内部内容 (相当于一个 slot), 样式,支持响应式</li></ul></li><li><p>简易使用</p><p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">newDialog</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> dialogElem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'dialog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> textElem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> backDialogElem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> nextDialogElem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  textElem<span class="token punctuation">.</span>innerText <span class="token operator">=</span> text<span class="token punctuation">;</span>  backDialogElem<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'Back'</span><span class="token punctuation">;</span>  backDialogElem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> dialogElem<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  nextDialogElem<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'Addition'</span><span class="token punctuation">;</span>  nextDialogElem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">newDialog</span><span class="token punctuation">(</span>text <span class="token operator">+</span> <span class="token string">' + '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">[</span>textElem<span class="token punctuation">,</span> backDialogElem<span class="token punctuation">,</span> nextDialogElem<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token operator">=></span> dialogElem<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dialogElem<span class="token punctuation">)</span><span class="token punctuation">;</span>  dialogElem<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">newDialog</span><span class="token punctuation">(</span><span class="token string">'Hello World'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>show me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>更多: <span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L2J1aWxkaW5nLWEtZGlhbG9nLWNvbXBvbmVudC8=">https://web.dev/building-a-dialog-component/<i class="fa fa-external-link-alt"></i></span></p></li></ul><h3 id="更好用的-vh-vw">更好用的 <code>vh</code> &amp;<code>vw</code></h3><blockquote><p>来自 Google I/O 2023</p><p>Chrome: 108, Firefox: 101, Edge: 108, Safari:15.4</p></blockquote><ul><li><p><code>vh</code> 与 <code>vw</code>两个单位在移动端适配中存在问题, 移动端中的 <code>100 vh</code>一般指工具栏收起后的视口高度, 当动态工具栏展开时, <code>100 vh</code>会超出视口</p><p><img src="./2023-06前端新活汇总/1.png" /></p><p>当工具栏收起时才可以正常表现</p><p><img src="./2023-06前端新活汇总/2.png" /></p><p>此次新增了三组单位分别表示小视口 (工具栏展开时) , 大视口 (工具栏收起), 动态视口 (动态适配) 大小, 单位分别为 <code>sv*</code>,<code>lv*</code>, <code>dv*</code>. 在桌面端中四个单位都等于<code>v*</code></p><p><img src="./2023-06前端新活汇总/3.png" /></p><p>也就是说目前 CSS 有 20 个相对视口的长度单位 ( <code>vw</code>,<code>vh</code>, <code>vmin</code>, <code>vmax</code>, <code>vi</code>,<code>vb</code> 及其对应的 <code>dv*</code>, <code>lv*</code>,<code>sv*</code>) p.s. <code>vi</code> 表示内联方向的视口长度的<code>1%</code>, 例如在中英文网站中, 我们是横向书写, 因此<code>vi = vw</code>, 在古中文中, 书写方向竖向, 因此<code>vi = vh</code>. <code>vb</code> 表示视口在块方向上的长度的<code>1%</code>, 也就是与 <code>vi</code> 恰好相反</p></li><li><p>更多: https://web.dev/viewport-units/</p></li></ul><h3 id="transform-允许拆分"><code>transform</code> 允许拆分</h3><blockquote><p>来自 Google I/O 2023</p></blockquote><ul><li><p>允许以如下方向写 <code>transform</code></p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.target</span> <span class="token punctuation">&#123;</span>  <span class="token property">translate</span><span class="token punctuation">:</span> 50% 0<span class="token punctuation">;</span>  <span class="token property">rotate</span><span class="token punctuation">:</span> 30deg<span class="token punctuation">;</span>  <span class="token property">scale</span><span class="token punctuation">:</span> 1.2<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>而不是</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.target</span> <span class="token punctuation">&#123;</span>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>30deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>这可以解决大量动画手动计算问题, 例如我们需要完成以下动画</p><p><img src="./2023-06前端新活汇总/4.svg" /></p><p>可以看到 scale, rotate, translate 在不同的时间点发生变化,我们需要在<strong>某一个动画</strong>发生变化的时候定义<strong>所有动画</strong>的状态.例如scale 在 5% 的时候运动发生了变化, rotate 在 10% 的时候发生了变化,我们就要分别定义 5%, 10% 的时候所有动画的状态, 线性变化还好, 如果 rotate是做了一个非线性动画, 那么我们在 5% 变更 scale 的时候就要手动计算 5%rotate 的状态, 代码为</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> anim</span> <span class="token punctuation">&#123;</span>  <span class="token selector">0%</span> <span class="token punctuation">&#123;</span> <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0%<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">5%</span> <span class="token punctuation">&#123;</span> <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>5%<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>90deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">10%</span> <span class="token punctuation">&#123;</span> <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>10%<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">90%</span> <span class="token punctuation">&#123;</span> <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>90%<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">95%</span> <span class="token punctuation">&#123;</span> <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>95%<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>270deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">100%</span> <span class="token punctuation">&#123;</span> <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>有了分开写的 feature, 我们就可以这样定义动画</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> anim</span> <span class="token punctuation">&#123;</span>  <span class="token selector">0%</span> <span class="token punctuation">&#123;</span> <span class="token property">translate</span><span class="token punctuation">:</span> 0% 0<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">100%</span> <span class="token punctuation">&#123;</span> <span class="token property">translate</span><span class="token punctuation">:</span> 100% 0<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">0%, 100%</span> <span class="token punctuation">&#123;</span> <span class="token property">scale</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">5%, 95%</span> <span class="token punctuation">&#123;</span> <span class="token property">scale</span><span class="token punctuation">:</span> 1.2<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">0%</span> <span class="token punctuation">&#123;</span> <span class="token property">rotate</span><span class="token punctuation">:</span> 0deg<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">10%, 90%</span> <span class="token punctuation">&#123;</span> <span class="token property">rotate</span><span class="token punctuation">:</span> 180deg<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">100%</span> <span class="token punctuation">&#123;</span> <span class="token property">rotate</span><span class="token punctuation">:</span> 360deg<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>甚至更加清晰的写成这样</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> move</span> <span class="token punctuation">&#123;</span>  <span class="token selector">0%</span> <span class="token punctuation">&#123;</span> <span class="token property">translate</span><span class="token punctuation">:</span> 0% 0<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">100%</span> <span class="token punctuation">&#123;</span> <span class="token property">translate</span><span class="token punctuation">:</span> 100% 0<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> scale</span> <span class="token punctuation">&#123;</span>  <span class="token selector">0%, 100%</span> <span class="token punctuation">&#123;</span> <span class="token property">scale</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">5%, 95%</span> <span class="token punctuation">&#123;</span> <span class="token property">scale</span><span class="token punctuation">:</span> 1.2<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> rotate</span> <span class="token punctuation">&#123;</span>  <span class="token selector">0%</span> <span class="token punctuation">&#123;</span> <span class="token property">rotate</span><span class="token punctuation">:</span> 0deg<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">10%, 90%</span> <span class="token punctuation">&#123;</span> <span class="token property">rotate</span><span class="token punctuation">:</span> 180deg<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token selector">100%</span> <span class="token punctuation">&#123;</span> <span class="token property">rotate</span><span class="token punctuation">:</span> 360deg<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector">.target</span> <span class="token punctuation">&#123;</span>  <span class="token property">animation</span><span class="token punctuation">:</span> move 2s<span class="token punctuation">,</span> scale 2s<span class="token punctuation">,</span> rotate 2s<span class="token punctuation">;</span>  <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>更多: <span class="exturl" data-url="aHR0cHM6Ly93ZWIuZGV2L2Nzcy1pbmRpdmlkdWFsLXRyYW5zZm9ybS1wcm9wZXJ0aWVzLw==">https://web.dev/css-individual-transform-properties/<i class="fa fa-external-link-alt"></i></span></p></li></ul><h3 id="简易的深克隆">简易的深克隆</h3><blockquote><p>来自 Google I/O 2023</p><p>Chrome: 98, Firefox: 94, Edge: 98, Safari: 15.4</p></blockquote><ul><li><p>支持对象, 循环引用, getter 的深拷贝, 不支持函数,<code>setter</code>, <code>Symbol</code></p><p>可以把他当作 <code>JSON.parse(JSON.stringify())</code>的替代品</p></li><li><p>简易测试</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>  <span class="token literal-property property">obj</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">inner</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token literal-property property">_self</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>  <span class="token keyword">get</span> <span class="token function">getter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token string">'ok'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token keyword">set</span> <span class="token function">setter</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">set for </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.setter as </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>val<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">bigInt</span><span class="token operator">:</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>  <span class="token comment">// 以下为不可被复制的属性, 复制会报错</span>  <span class="token comment">// symbol: Symbol.for('test'),</span>  <span class="token comment">// func()&#123;console.log('test')&#125;,</span><span class="token punctuation">&#125;</span>test<span class="token punctuation">.</span>_self <span class="token operator">=</span> test<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">structuredClone</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span>res<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'res'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>_self <span class="token operator">===</span> res<span class="token punctuation">)</span> <span class="token comment">// true</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>obj <span class="token operator">===</span> test<span class="token punctuation">.</span>obj<span class="token punctuation">)</span> <span class="token comment">// false</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>arr <span class="token operator">===</span> test<span class="token punctuation">.</span>arr<span class="token punctuation">)</span> <span class="token comment">// false</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>bigInt<span class="token punctuation">)</span> <span class="token comment">// 123n</span><span class="token comment">// Symbol 属性不复制但不报错</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// test</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span><span class="token comment">// setter 不复制不报错, 但是 getter 可以...</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>getter<span class="token punctuation">)</span> <span class="token comment">// 输出 ok</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span>setter <span class="token operator">=</span> <span class="token string">'ok'</span><span class="token punctuation">)</span> <span class="token comment">// 输出 set for test.setter as ok</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>setter <span class="token operator">=</span> <span class="token string">'ok'</span><span class="token punctuation">)</span> <span class="token comment">// 没有输出</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>更多: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL3N0cnVjdHVyZWRDbG9uZQ==">https://developer.mozilla.org/zh-CN/docs/Web/API/structuredClone<i class="fa fa-external-link-alt"></i></span></p></li></ul><h3 id="focus-visible-属性"><code>:focus-visible</code> 属性</h3><blockquote><p>来自 Google I/O 2023</p><p>Chrome: 86, Firefox: 85, Edge: 86, Safari: 15.4</p></blockquote><ul><li><p>与 <code>:focus</code> 类似的伪类, 两者区别是</p><ul><li><p><code>:focus</code>：当元素获得焦点时，无论是通过键盘还是鼠标，都会应用<code>:focus</code>伪类的样式。这对于视觉反馈和可访问性都是有用的。然而，对于鼠标和触摸屏用户来说，<code>:focus</code>的样式可能会干扰视觉体验，因为它们通常不需要通过显示的焦点来导航。</p></li><li><p><code>:focus-visible</code>：只有当元素通过键盘获得焦点时，才会应用<code>:focus-visible</code>伪类的样式。这使得开发者可以为键盘导航创建专门的样式，而不干扰鼠标或触摸屏用户的体验。这是一种改善可访问性的方式，因为它允许开发者为那些依赖键盘导航的用户（例如视障用户或只使用键盘的用户）提供更清晰的视觉反馈。</p></li></ul></li></ul><h3 id="流式-fetch">流式 Fetch</h3><blockquote><p>来自 Google I/O 2023</p><p>Chrome: 105, Firefox: 110, Edge: 105, Safari: NA</p></blockquote><ul><li><p>支持流式通信后, 我们可以在一次请求中边接收数据边处理数据,而不需要先完成数据下载再处理数据.例如当媒体网站在请求一个视频的时候其可以直接请求整个视频文件,边下载边为用户展示, 而不是分段请求视频, 存放在 blob 中处理再展示.</p><p>以下是一个慢慢请求的例子</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token parameter">milliseconds</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> milliseconds<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReadableStream</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token keyword">async</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token parameter">controller</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">await</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    controller<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'This '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">await</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    controller<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'is '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">await</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    controller<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'a '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">await</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    controller<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'slow '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">await</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    controller<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'request.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    controller<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipeThrough</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextEncoderStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text/plain'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">body</span><span class="token operator">:</span> stream<span class="token punctuation">,</span>  <span class="token literal-property property">duplex</span><span class="token operator">:</span> <span class="token string">'half'</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>更多: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9hcnRpY2xlcy9mZXRjaC1zdHJlYW1pbmctcmVxdWVzdHMv">https://developer.chrome.com/articles/fetch-streaming-requests/<i class="fa fa-external-link-alt"></i></span></p></li></ul><h3 id="新的-css-颜色表示法">新的 CSS 颜色表示法</h3><blockquote><p>来自 <a href="web.dev">web.dev</a></p><p>Chrome: 111, Firefox: 113, Edge: 111, Safari: 16.2</p></blockquote><ul><li><p>传统的写法: <code>rgb</code>, <code>hsl</code>, <code>hwb</code>,<code>lch</code>, <code>lab</code>, <code>oklch</code>,<code>oklab</code>例如</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>31 120 50<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/*注意一下这个最新的写法捏*/</span><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255 122 127 / 80%<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><code>color</code> 函数: 可以直接使用 <code>color</code>函数指定色彩空间与四个色值, 例如</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.valid-css-color-function-colors</span> <span class="token punctuation">&#123;</span>  <span class="token property">--srgb</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>srgb 1 1 1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--srgb-linear</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>srgb-linear 100% 100% 100% / 50%<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--display-p3</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>display-p3 1 1 1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rec2020</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>rec2020 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--a98-rgb</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>a98-rgb 1 1 1 / 25%<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--prophoto</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>prophoto-rgb 0% 0% 0%<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--xyz</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>xyz 1 1 1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>更多: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2NvbG9yX3ZhbHVlL2NvbG9y">https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color<i class="fa fa-external-link-alt"></i></span></p></li><li><p><code>color-mix</code> 函数: 可以实现混色, 语法<code>color-mix(in colorspace, color[ p1], color[ p2])</code>. 其中<code>in</code> 是语法标记, 必须写上, <code>colorspace</code>为颜色空间, 接着是两个被混合的颜色, <code>p1</code>, <code>p2</code>,是该颜色所占比例, 都省略则按 <code>50%, 50%</code> 计,省略一个则根据另一个推导, 均没有省略但两值和不为 <code>100%</code>则加权平均</p><p>例如: 以下表示 25% 的 <code>#34c9eb</code> 与 75% 的<code>#fff</code> 混合</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">li:nth-child(2)</span> <span class="token punctuation">&#123;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">color-mix</span><span class="token punctuation">(</span>in srgb<span class="token punctuation">,</span> #34c9eb 25%<span class="token punctuation">,</span> white<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>更多: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2NvbG9yX3ZhbHVlL2NvbG9yLW1peA==">https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix<i class="fa fa-external-link-alt"></i></span></p></li></ul><h3 id="webgpu">WebGPU</h3><blockquote><p>来自 <a href="web.dev">web.dev</a></p><p>Chrome: 113, Firefox: NA, Edge: 113, Safari: NA</p></blockquote><p>内容很多, 请参考: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9ibG9nL3dlYmdwdS1yZWxlYXNlLw==">https://developer.chrome.com/blog/webgpu-release/<i class="fa fa-external-link-alt"></i></span></p><h3 id="cookie-first-party-sets">Cookie First-Party Sets</h3><blockquote><p>来自 <a href="web.dev">web.dev</a></p><p>Chrome: 80, Firefox: 86, Edge: 86, Safari: 15</p></blockquote><p>从 Chrome 115 起默认情况下, 没有 <code>SameSite</code> 的 Cookie被视为 <code>Lax</code>, 没有 <code>Secure</code> 的<code>SameSite=none</code> 的 cookie 会被拒绝</p><p>参考<ahref="https://blog.liukairui.me/article/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E6%80%BB%E7%BB%93/">之前的<前端安全策略总结></a></p><h3 id="text-wrap-balance-属性"><code>text-wrap: balance</code>属性</h3><blockquote><p>来自 <a href="web.dev">web.dev</a></p><p>Chrome: 114, Firefox: NA, Edge: 114, Safari: NA</p></blockquote><p>使用该属性可以让浏览器根据育种优化文本换行, 使其更加平衡美观</p><p><img src="./2023-06前端新活汇总/5.png" /></p><p>这个属性可能会增加文本行数, 仅建议在标题中开启, 同时该属性与<code>white-space</code> 冲突. 建议写成</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">h1, h2, h3, h4, h5, h6, blockquote</span> <span class="token punctuation">&#123;</span>  <span class="token property">white-space</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>  <span class="token property">text-wrap</span><span class="token punctuation">:</span> balance<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>更多: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9ibG9nL2Nzcy10ZXh0LXdyYXAtYmFsYW5jZS8=">https://developer.chrome.com/blog/css-text-wrap-balance/<i class="fa fa-external-link-alt"></i></span></p><h3 id="官方支持的弹窗-popover-api">官方支持的弹窗 popover API</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9ibG9nL2ludHJvZHVjaW5nLXBvcG92ZXItYXBp">web.dev<i class="fa fa-external-link-alt"></i></span></p><p>Chrome: 114, Firefox: NA, Edge: 114, Safari: NA</p></blockquote><ul><li><p>popover API 支持在页面中展示一个弹窗 DOM, 支持配置以下特性</p><ul><li>在顶层显示, 而不需要配置 <code>z-index</code></li><li>背景变黑, 禁用与非弹窗区域交互, 禁用焦点</li><li>默认焦点管理</li><li>绑定关闭快捷键</li><li>自定义样式</li><li>[未来支持] 弹出消失动画</li><li>[未来支持] 锚定弹出位置</li></ul></li><li><p>与组件库相比支持了焦点管理, 锚点弹出, 快捷键绑定</p></li><li><p>简易使用</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">popovertarget</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-popover<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> Open Popover <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-popover<span class="token punctuation">"</span></span> <span class="token attr-name">popover</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>I am a popover with more information.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>更多: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9ibG9nL2ludHJvZHVjaW5nLXBvcG92ZXItYXBp">https://developer.chrome.com/blog/introducing-popover-api<i class="fa fa-external-link-alt"></i></span></p></li></ul><p><em>感觉未来 HTML 会越来越强, 直到取代组件库,未来的组件库会不会直接变成一个可配置的 CSS 文件?</em></p><h3 id="image-content-多样化"><code>&lt;image&gt;</code> content多样化</h3><blockquote><p>来自: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvYmxvZy9tZG4tZG9jcy1qdW5lLTIwMjMv">MDN<i class="fa fa-external-link-alt"></i></span></p></blockquote><p><code>content</code> 是 CSS 中为(伪)元素写入内容的 Key, 除了写入文字,他<strong>还支持写入图片, 渐变色, CSS 计数器函数, 引用</strong>,(更多使用参考 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2NvbnRlbnQ=">MDN<i class="fa fa-external-link-alt"></i></span>)</p><p>在 Chrome 113 中与 FireFox 113 中, 我们可以为 content写入渐变色与使用 <code>img-set</code> 的图片, 例如</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>replaced<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Mozilla<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">#replaced</span> <span class="token punctuation">&#123;</span>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>purple<span class="token punctuation">,</span> yellow<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>此处的 Mozilla 会被一个渐变色色块取代</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>replaced<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Mozilla<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">#replaced</span> <span class="token punctuation">&#123;</span>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">image-set</span><span class="token punctuation">(</span>    <span class="token string">"1x.png"</span> 1x<span class="token punctuation">,</span>    <span class="token string">"2x.png"</span> 2x  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>此处我们可以为替换物指定 1x 与 2x 图</p><h3 id="更好的全屏按键绑定">更好的全屏按键绑定</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9ibG9nL2JldHRlci1mdWxsLXNjcmVlbi1tb2RlLw==">ChromeDevelopers<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>传统的<strong>按下</strong> ESC 退出全屏可能会与其他快捷键冲突,在新特性中, 我们可以将<strong>按下</strong> ESC 锁住,让他完成其他快捷任务, 此时用户需要<strong>长按</strong> ESC才能推出全屏</p><h3 id="新的-web-animation">新的 Web Animation</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1vRGNiM2Z2dEVUcyZsaXN0PVJEQ01VQ25VWVpMdW95MXJxMWFWTXd4NGFUencmc3RhcnRfcmFkaW89MSZydj1vRGNiM2Z2dEVUcyZ0PTcmYWJfY2hhbm5lbD1Hb29nbGVDaHJvbWVEZXZlbG9wZXJz">GoogleI/O<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9kb2NzL3dlYi1wbGF0Zm9ybS92aWV3LXRyYW5zaXRpb25zLw==">ViewTransitions API<i class="fa fa-external-link-alt"></i></span>: 原生支持使用纯 CSS 实现页面(路由)切换时的过渡动画,使路由切换更像是一个页面中的行为, 而不是页面刷新</li><li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9hcnRpY2xlcy9zY3JvbGwtZHJpdmVuLWFuaW1hdGlvbnMv">Scroll-drivenAnimations<i class="fa fa-external-link-alt"></i></span>: 通过定义时间轴的方法实现了讲容器滚动与 CSS 属性在纯 CSS层面绑定. <span class="exturl" data-url="aHR0cHM6Ly9zY3JvbGwtZHJpdmVuLWFuaW1hdGlvbnMuc3R5bGUv">使用案例参考<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9saW5lYXItZWFzaW5nLWdlbmVyYXRvci5uZXRsaWZ5LmFwcC8=">linear()<i class="fa fa-external-link-alt"></i></span>:更简洁的 CSS 线性缓动函数定义方法</li></ul><h3 id="新的-chrome-扩展">新的 Chrome 扩展</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1RWWQyWGlVWU5sRSZ0PTEycyZhYl9jaGFubmVsPUdvb2dsZUNocm9tZURldmVsb3BlcnM=">GoogleI/O<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li><p>优化了空闲终止检测算法</p></li><li><p>新增 background 的 offscreen API</p></li><li><p>增强 Web Request APIs 的安全性</p></li><li><p>新的扩展管理菜单提供了更细粒度的扩展工作范围控制(23年年底上线)</p></li><li><p>新增 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9kb2NzL2V4dGVuc2lvbnMvcmVmZXJlbmNlL3NpZGVQYW5lbC8=">sidepanel API<i class="fa fa-external-link-alt"></i></span>. 允许扩展常驻侧边栏</p><p><img src="./2023-06前端新活汇总/6.png" /></p></li></ul><h3 id="使用-chrome-devtools-调试表单与自动填充">使用 Chrome DevTools调试表单与自动填充</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9ibG9nL2RldnRvb2xzLWF1dG9maWxsLw==">GoogleI/O<i class="fa fa-external-link-alt"></i></span></p></blockquote><p><strong>Google 自动填充的原理</strong></p><ul><li>如果 Chrome 识别到了要填写内容的语义 (姓名, 邮箱, 银行卡信息,位置信息), Chrome 会直接调用用户存储的个人信息 (如 Google Pay绑定的银行卡, Google 中存储的位置) 填充表单. 语义识别参考: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSFRNTC9BdHRyaWJ1dGVzL2F1dG9jb21wbGV0ZQ==">MDN<i class="fa fa-external-link-alt"></i></span></li><li>如果识别失败, 则会以表单的 <code>name</code> 属性为 key记住用户填写的信息, 之后根据 <code>name</code>属性为用户提供书写建议.</li></ul><p><strong>给开发者的建议</strong></p><ul><li>用上自动填充 &gt; 不用自动填充 &gt; 写错填充字段</li><li>针对敏感信息采用 <code>iframe</code> 包裹</li><li>自动填充仅用于填充客观信息, 不要用于填充个性化信息 (如产品订阅时间,验证码), 对于个性化信息, 可以采用随机的 <code>name</code> 防止被 Chrome记住 (如: <code>verify233</code>)</li></ul><p><strong>未来的变化</strong></p><ul><li>针对触屏交互优化</li><li>console 中自动警告不规范的表单写法与无法自动填充的原因</li><li>开辟一个详细解释自动填充工作流程的 DevTool 选项卡</li></ul><h3 id="firefox-114-发布">FireFox 114 发布</h3><ul><li><p>首次支持 <code>:lang()</code> 伪类选择器</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* Matches nl and de */</span><span class="token selector">:lang("nl", "de")</span> <span class="token punctuation">&#123;</span>  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>SVG 支持 <code>crossorigin</code> 属性</p></li><li><p>支持 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYlRyYW5zcG9ydF9BUEk=">WebTransportAPI<i class="fa fa-external-link-alt"></i></span>, 这是一个升级版的 ws, 其基于 HTTP/3, 通过 UDP传输数据因此具有更高的性能, 更低的延迟,更好的网络切换和更灵活的数据传输模式</p><p>优点：</p><ul><li>避免了队头阻塞的问题</li><li>减少了安全握手所需的往返次数</li><li>支持多个流, 单向流和乱序交付, 提高了传输效率</li><li>支持不可靠的数据报传输, 适用于对实时性要求高的场景,如游戏或音视频通信</li><li>支持在不同网络之间保持连接 ID 不变, 实现无缝切换</li></ul></li></ul><h2 id="工具">工具</h2><h3 id="检测支持本浏览器-css-支持新的网站">检测支持本浏览器 CSS支持新的网站</h3><blockquote><p>来自<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5">前端食堂<i class="fa fa-external-link-alt"></i></span></p></blockquote><p><span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0c2Nzcy5kZXYv">SupportsCSS.dev<i class="fa fa-external-link-alt"></i></span></p><p>虽然我不知道这东西有啥用</p><h3id="谷歌发布了一款扩展程序安装模拟器">谷歌发布了一款扩展程序安装模拟器</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZUxhYnMvZXh0ZW5zaW9uLXVwZGF0ZS10ZXN0aW5nLXRvb2w=">GoogleChromeLabs<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>这款工具可以用来模拟扩展程序通过不同途径安装与更新时与用户交互的流程(包括权限授予)</p><h2 id="实验性内容">实验性内容</h2><h3 id="typescript-5.2-前瞻内容">TypeScript 5.2 前瞻内容</h3><blockquote><p>来自<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlZWtoeXQvd2Vla2x5">前端食堂<i class="fa fa-external-link-alt"></i></span></p></blockquote><ul><li><p><code>using</code> 关键字</p><p><code>using</code> 关键字可以在一个带有 <code>Symbol.dispose</code>函数的对象被回收时执行函数. 以下是使用与不使用 <code>using</code>完成文件句柄的例子</p><ul><li><p>不使用 <code>using</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> open <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"node:fs/promises"</span><span class="token punctuation">;</span><span class="token keyword">let</span> filehandle<span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>  filehandle <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"thefile.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">await</span> filehandle<span class="token operator">?.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>使用 <code>using</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> open <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"node:fs/promises"</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">getFileHandle</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">path</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> filehandle <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>    filehandle<span class="token punctuation">,</span>    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>asyncDispose<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">await</span> filehandle<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#123;</span>  <span class="token keyword">await</span> using file <span class="token operator">=</span> <span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">"thefile.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Do stuff with file.filehandle</span><span class="token punctuation">&#125;</span> <span class="token comment">// Automatically disposed!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p>引入类型占位符, 并运行 TS 动态推断类型而不是使用默认值(相当于解决了类型缩窄问题)</p><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// The underscores tell TypeScript to infer those type arguments!</span><span class="token generic-function"><span class="token function">func</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> _<span class="token punctuation">,</span> _<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h3 id="of-selector-选择器"><code>of &lt;selector&gt;</code> 选择器</h3><blockquote><p>来自: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvYmxvZy9tZG4tZG9jcy1qdW5lLTIwMjMv">MDN<i class="fa fa-external-link-alt"></i></span></p></blockquote><p><code>of &lt;selector&gt;</code>选择器以选择匹配给定选择器的所有元素的子孙元素. 它类似于后代组合器(空格)，但是它可以使用伪类和伪元素来过滤匹配的元素</p><ul><li><p>与后代选择器的相似之处</p><p><code>li of :is(ul, ol)</code>: 匹配所有位于 <code>&lt;ul&gt;</code>或 <code>&lt;ol&gt;</code> 元素内的 <code>&lt;li&gt;</code> 元素. 与<code>ul li, ol li</code> 作用相同</p></li><li><p>与后代选择器的不同之处</p><p><code>div of p::first-child</code> 匹配所有位于<code>&lt;p&gt;</code> 元素内的第一个子元素的 <code>&lt;div&gt;</code>元素. 后代选择器无法实现</p></li></ul><h3 id="实验性的-prefers-reduced-transparency-媒体查询">实验性的<code>prefers-reduced-transparency</code> 媒体查询</h3><blockquote><p>来自: <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL0BtZWRpYS9wcmVmZXJzLXJlZHVjZWQtdHJhbnNwYXJlbmN5">MDN<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>FireFox 113 引入了一个实验性的媒体查询,该查询可以检测用户是否设置了减少透明图层的偏好设置,开启该设置有助于提升页面对比度与可读性, 此后,开发者也可以根据该媒体查询的结果决定是否手动增强对比度, 例如:</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.translucent</span> <span class="token punctuation">&#123;</span>  <span class="token property">opacity</span><span class="token punctuation">:</span> 0.4<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 如果用户希望提高对比度, 那么我开发者就再帮他一把 */</span><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span>prefers-reduced-transparency<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>  <span class="token selector">.translucent</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.8<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="css-ray-的新属性">CSS <code>ray()</code> 的新属性</h3><blockquote><p>来自 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3JheQ==">MDN<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>该函数在 CSS 中可以定义一个射线. 可以用于定义一些运动路径, 如<code>offset-path: ray(120deg sides contain);</code></p><h2 id="文章">文章</h2><p>https://mp.weixin.qq.com/s/TFxQSwOLQJWBC-ErWaHS9Q</p><p>https://www.builder.io/blog/hydration-tree-resumability-map</p><p>https://chriscoyier.net/2023/06/06/modern-css-in-real-life/</p><p>https://mp.weixin.qq.com/s/sfbQUFzhJzYWGdfLh0yIzA</p><p>https://mp.weixin.qq.com/s/b5RJ4ZArlbzOmM3Zz1VDhg</p>]]></content>
    
    
    <summary type="html">都是些二手信息罢了~</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="新活" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E6%96%B0%E6%B4%BB/"/>
    
    
    <category term="前端新活" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF%E6%96%B0%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>了解客户端容器</title>
    <link href="https://blog.liukairui.me/article/%E4%BA%86%E8%A7%A3%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%B9%E5%99%A8/"/>
    <id>https://blog.liukairui.me/article/%E4%BA%86%E8%A7%A3%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%B9%E5%99%A8/</id>
    <published>2023-05-30T16:00:01.000Z</published>
    <updated>2023-05-30T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="浏览器架构">浏览器架构</h2><ul><li><p>浏览器架构演进</p><ol type="1"><li>单进程架构: 所有模块都跑在一个进程里</li><li>多进程架构: 分为主进程, 网络进程, 渲染进程, GPU 进程,插件进程等</li><li>面向服务的(多进程)架构: 为解决多进程架构中部分进程臃肿的问题, 分为UI, 数据库, 文件, 设备, 网络等多个独立服务</li></ol><p><img src="./掘金前端初阶训练营笔记/1-1.png" /></p><table><colgroup><col style="width: 5%" /><col style="width: 25%" /><col style="width: 19%" /><col style="width: 25%" /><col style="width: 24%" /></colgroup><thead><tr class="header"><th>架构类型</th><th>扩展性</th><th>安全性</th><th>稳定性</th><th>流畅度</th></tr></thead><tbody><tr class="odd"><td>单进程架构</td><td><strong>低</strong>, 所有模块运行在同一进程里, 访问同一块内存区域,数据没有隔离, 新增模块可能会影响原有功能</td><td><strong>低</strong>, 三方插件可直接访问操作系统里任意资源</td><td><strong>低</strong>, 三方插件漏洞或者某个 tab 页面 JavaScript脚本问题可能导致浏览器崩溃</td><td><strong>卡顿</strong>, 所有页面运行在同一进程中,开启多个页面时明显卡顿</td></tr><tr class="even"><td>多进程架构</td><td><strong>中</strong>, 各进程分配独立的内存区域, 有些进程功能较大,耦合度高</td><td><strong>高</strong>, 运行在独立沙箱中, 不能访问系统敏感资源</td><td><strong>高</strong>, 进程相互隔离, 当一个页面或者插件崩溃时,不会影响其他进程</td><td><strong>流畅</strong>,每个页面运行在独立的渲染进程中,充分利用系统资源</td></tr><tr class="odd"><td>面向服务架构</td><td><strong>高</strong>,服务模块划分更细, 更内聚, 耦合性低,易于扩展</td><td><strong>高</strong>,运行在独立沙箱中, 不能访 问系统敏感资源</td><td><strong>高</strong>,进程相互隔离, 当一个页面或者插件崩溃时,不会影响其他进程</td><td><strong>流畅</strong>, 每个页面运行在独立的渲染进程中,充分利用系统资源</td></tr></tbody></table></li><li><p>三种架构的应用</p><ul><li>单进程架构: 在古早年代有应用, 节约资源</li><li>多进程架构:现代浏览器会在机器性能不充足的时候退化到该模式以节约资源</li><li>面向服务架构: 占用资源多, 现代浏览器会在机器资源充足的时候使用</li></ul></li><li><p>典型多进程架构</p><ul><li>浏览器主进程: 逻辑展示, 用户交互, 进程管理</li><li>GPU 进程: 负责整个浏览器的 UI 绘制</li><li>网络进程</li><li>渲染进程(标签页): 负责 Tab 页面中的所有内容, 包括 HTML, CSS, JS的解析与执行</li><li>插件进程</li><li>其他实用程序进程: Storage, Network, Audio...</li></ul></li></ul><h2 id="渲染进程">渲染进程</h2><ul><li><p>渲染进程中又包含多个线程</p><ul><li>JS 引擎线程: 负责解析, 执行 JS 脚本. <strong>与 GUI渲染线程互斥</strong>, JS 线程执行时间过长会导致页面卡顿</li><li>GUI 渲染线程: 负责渲染浏览器界面, 解析 HTML, CSS, 构建 DOM 树,render 树, 布局, 绘制页面</li><li>定时器触发线程: 负责当 <code>setTimeout</code>,<code>setInteval</code> 计时完毕后将回调放入事件队列</li><li>网络线程</li><li>事件触发线程: 宿主环境提供的事件循环处理线程</li></ul></li><li><p>JS 引擎与 GUI 渲染引擎</p><ul><li><p>JS 引擎的执行流程</p><pre class="mermaid">    graph LRJS源码 --解析器--> AST --翻译--> 字节码 --解析执行--> OS字节码 --JIT--> 机器码 --直接执行--> OS</pre><ul><li>字节码: 是一种更高效的源码表示形式, 比源码更接近机器码,但<strong>不依赖于平台</strong>, 还不是机器码</li><li>JIT (Just-in-Time): 是一种编译策略, 当 JavaScript引擎在运行时发现代码被反复执行时,会将反复执行的字节码编译为<strong>依赖于平台的机器码</strong>以提高执行效率</li></ul></li><li><p>GUI 渲染引擎</p><pre class="mermaid">    graph LRHTML源码 --XML解析器--> DOM树 --合成--> render树CSS源码 --CSS解析器--> CSSOM树 --合成--> render树 --渲染--> 显存</pre><ul><li>CSSOM 树: 将 CSS 规则解析为规则树用于描述 CSS 样式规则. 这是 CSS解析的必经之路, 很多 CSS in JS 方案 (例如 StyledComponents)就采用了这个技术实现空 Style 标签写入 CSS. 但是不建议开发直接撰写 CSSOM,虽然理论上这可以节约 CSS 解析时间, 但是动态修改 CSSOM 的危害十分巨大,同时 CSSOM API 并不直观, 即使是 CSS 库也不会直接操作 CSSOM 树</li></ul></li><li><p>两个引擎通过 JS Bridge 通信并实现互斥</p></li></ul></li></ul><h2 id="浏览器地址输入-url-后发生了什么">浏览器地址输入 URL 后发生了什么:(</h2><ol type="1"><li><p>输入 URL</p><ul><li>UI线程获取输入内容, 判断是否是 URL</li><li>UI 线程统治网络线程发起网络请求, 获取站点内容. 将 Tab 页设置为Loading</li></ul></li><li><p>浏览器查找 DNS 记录</p></li><li><p>解析 DNS</p></li><li><p>建立 TCP 连接</p></li><li><p>发起 HTTP 连接</p></li><li><p>服务端处理请求</p></li><li><p>客户端接收响应内容</p><p>网络线程在收到 HTTP 响应后检查媒体类型 (MIME Type).</p><ul><li><p>如果是 HTML 则通知主进程寻找渲染进程加载页面, 主线程通过 IPC消息告知渲染进程处理导航</p></li><li><p>如果是其他文件类型则交给下载管理器处理</p></li></ul></li><li><p>渲染页面</p><ul><li>渲染进程接收数据, 统治主进程开始处理, 导航结束,进入文档加载阶段</li><li>渲染进程加载页面所需的子资源(CSS, JS). 执行脚本</li><li>构建 DOM, CSSOM 树, 构建 render 树</li><li>计算布局: 计算每个节点的位置与大小, 绘制元素边框,将元素写入文档流</li><li>构建与绘制图层: 为特定节点生成专用图层,对于每个图层生成多个绘制指令, 交给合成线程,合成线程生成图块交给栅格线程完成光栅化</li><li>光栅化</li></ul></li><li><p>执行 JavaScript</p></li><li><p>断开连接</p></li></ol><h2 id="跨端容器">跨端容器</h2><ul><li><p>跨端方案</p><ul><li><p>webview:</p><ul><li><p>网页视图, 可以嵌套在移动端 APP 中加载网页</p></li><li><p>优点:</p><ul><li>一次开发, 多次使用, 学习成本低</li><li>即时更新, 无需下载安装包</li><li>通过 JSBridge 与系统交互, 可以实现复杂功能</li></ul></li><li><p>JavaScript 调用 Native</p><ul><li>API 注入: Navive 获取 JavaScript 环境上下文,对其挂载的对象或方法进行拦截</li><li>使用 Webview URL Scheme 跳转拦截</li><li>在 IOS 中使用 <code>window.webkit.messageHandler</code> 通信</li></ul></li><li><p>Native 调用 JavaScript</p><ul><li>直接通过 webview 暴露 API 执行</li><li>IOS 的<code>webview.stringByEvaluatingJavaScriptFromString</code></li><li>安卓的 <code>webview.evaluateJavascript</code></li></ul></li></ul></li><li><p>小程序:</p><ul><li>双线程方案: 将逻辑与渲染线程分开, 两者通过 Native 完成通信转发.</li><li>渲染层采用多 webview 方案</li></ul></li><li><p>React Native / WeeX</p><ul><li>采用原生 Android / IOS 组件渲染</li><li>上层采用前端框架生成 Virtual DOM, Virtual DOM 通过 JSBridge 操作Native API 最后渲染成原生组件</li></ul></li><li><p>Flutter</p><ul><li>谷歌的跨端框架</li><li>新语法, 采用 dart VM</li><li>采用 skia 完成渲染, 保证跨端一致性</li></ul></li></ul></li><li><p>实现原理</p><ul><li>一套 UI 组件规范</li><li>一个渲染引擎 (webview, Native, 其他如 skia)</li><li>逻辑层: JS 引擎</li><li>通信工具: JSBridge, JSBinding</li><li>底层 API 抹平: Native API</li></ul></li><li><p>总结: 推荐 webview, React Native, Flutter</p></li><li><p>八股:</p><ul><li>为什么小程序比 webview 流畅:<ul><li>小程序做了很多离线缓存 (比如开屏那个加载很慢的进度条)</li><li>小程序屏蔽了一部分危险 / 重 API</li></ul></li><li>未来的跨端方案: 更可能是 webview. 因为配置简单, 学习成本低</li></ul></li></ul>]]></content>
    
    
    <summary type="html">来自掘金前端初阶训练营</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="跨端" scheme="https://blog.liukairui.me/tags/%E8%B7%A8%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>一些前端认证技术</title>
    <link href="https://blog.liukairui.me/article/%E4%B8%80%E4%BA%9B%E5%89%8D%E7%AB%AF%E8%AE%A4%E8%AF%81%E6%8A%80%E6%9C%AF/"/>
    <id>https://blog.liukairui.me/article/%E4%B8%80%E4%BA%9B%E5%89%8D%E7%AB%AF%E8%AE%A4%E8%AF%81%E6%8A%80%E6%9C%AF/</id>
    <published>2023-05-22T16:00:03.000Z</published>
    <updated>2023-07-21T16:00:03.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="比较新的认证方案">比较新的认证方案</h2><h3 id="web-authentication">Web Authentication</h3><blockquote><p>Web Authentication 仅在安全上下文 (HTTPS) 中可用</p><hr /><p>Web Authentication 一般用于辅助验证 (两步验证)单独使用的话用户数据会直接和认证设备绑定...设备丢了数据就寄了</p><p>update: 2023.7.22 最近这个概念似乎有点热, GitHub以及支持这种认证方案, Apple 也全面支持该方案了</p></blockquote><p>Web Authentication API 是一种新的验证模式, 其允许网站调用计算机的PIN, 生物特征 (如指纹或面部识别) 识别器或硬件令牌 (如USB密钥)来验证用户身份，而无需依赖传统的用户名和密码组合. 例如在用户可以通过Windows Hello 扫脸直接登陆网站</p><p>Web Authentication API 的主要目标是替代传统的用户名和密码登录方式,以解决密码泄露, 弱密码和重复密码使用等安全隐患.通过采用公钥加密和生物特征识别技术,Web身份验证API提供了更高的安全性和用户友好性. 可以在<span class="exturl" data-url="aHR0cHM6Ly90cnktd2ViYXV0aG4uYXBwc3BvdC5jb20v">这个网站<i class="fa fa-external-link-alt"></i></span>尝试使用 WebAuthentication API</p><p>基本流程</p><ul><li><p>注册</p><p><img src="./一些前端认证技术/WebAuthen.png" /></p><ol start="0" type="1"><li><p>客户端请求服务器用户希望注册凭据, 一般包括用户名 (非 WebAuthentication 标准)</p></li><li><p>服务器返回构建密钥所需信息, 包含</p><ol type="1"><li>一个 "挑战" (Challenge): 一般是一个大随机数</li><li>一个 <code>pubKeyCredParams</code>: 包含服务端希望的加密算法优先级(例如: <code>[EdDSA, SHA-256]</code> 就是希望使用 <code>EdDSA</code>如果不行就用 <code>SHA-256</code>)</li><li><code>authenticatorSelection</code>: 允许使用的认证器类型</li><li><code>attestation</code>: 是否需要来自认证器的证明</li></ol><p>这步仍然不是 Web Authentication 标准规定的</p></li><li><p>客户端基于传回的 <code>authenticatorSelection</code> 选择认证器.向认证器调用 <code>authenticatorMakeCredential</code>并传入服务器回传的信息</p></li><li><p>认证器先要求用户完成一次某种形式的认证 (PIN, 指纹, 面容)以确认用户正在操作并同意注册</p></li><li><p>认证器向浏览器推送一个公钥凭据对象,该公钥对象上包含了用于证明公钥与认证器私钥匹配的签名</p></li><li><p>客户端获取数据并构造 <code>PublicKeyCredential</code>, 其包含</p><ol type="1"><li><code>identifier</code>: 标识符</li><li><code>response</code>: 认证器客户端请求的回应<ul><li><code>clientData</code>: 凭据上下文, 包括挑战与发起请求的来源</li><li><code>attestationObject</code>: 证明信息(如果第一步服务端有要求)</li></ul></li></ol></li><li><p>Web 服务器做验证</p><ol type="1"><li>检查返回的 challange 与发出的 challange 是否匹配</li><li>检查发回数据与最初请求 challange 的源地址是否相同</li><li>检查服务器发回的证明是否足够</li></ol><p>并关联凭据到用户</p></li></ol></li><li><p>登录验证</p><p><img src="./一些前端认证技术/WebAuthen-log.png" /></p><ol start="0" type="1"><li>客户端发起登录请求, 并携带一些可能的识别字段(用户名啥的)</li><li>服务端确定公钥, 生成一个挑战并构造可选的<code>PublicKeyCredentialRequestOptions</code>, 其包括<ul><li><code>allowCredentials</code>: 若客户端传入了用户名,该字段返回该用户的凭据</li><li><code>userVerification</code>是否应该执行用户验证</li></ul></li><li>浏览器调用 <code>navigator.credentials.get()</code> 方法,将服务器挑战和其他数据 (如允许的凭据列表) 转换为一个<code>PublicKeyCredential</code> 请求参数对象</li><li>用户在其身份验证设备上验证自己的身份</li><li>设备响应, 浏览器接收到一个公钥凭据对象. 此对象包含一个签名,证明设备具有与凭据公钥配对的私钥, 并且用户已经验证了自己的身份</li><li>客户端获取认证器创建的数据并构造 <code>PublicKeyCredential</code>,包括:<ul><li><code>identifier</code>: 标识符</li><li><code>response</code>: 认证器客户端请求的回应<ul><li><code>clientData</code>: 凭据上下文, 包括挑战与发起请求的来源</li><li><code>authenticatorData</code>: 凭证, 签名, 签名计数器</li><li><code>signature</code>: 包含 <code>clientDataJSON</code> 与<code>authenticatorData</code> 对象</li></ul></li></ul></li><li>服务器验证该凭据对象</li></ol></li></ul><p>代码实现:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> rawId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// store cert id (get it from server actually)</span><span class="token comment">// registor</span><span class="token keyword">let</span> challenge <span class="token operator">=</span> window<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span><span class="token function">getRandomValues</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">id</span><span class="token operator">:</span> Uint8Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">atob</span><span class="token punctuation">(</span><span class="token string">"UZSL85T9AFC"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token parameter">c</span><span class="token operator">=></span>c<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// sample user id in Base64</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"kairuiliu@msn.com"</span><span class="token punctuation">,</span>    <span class="token literal-property property">displayName</span><span class="token operator">:</span> <span class="token string">"Kairui Liu"</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">let</span> relyingParty <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Example Domain"</span><span class="token punctuation">,</span>    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">"example.com"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">let</span> credentialCreationOptions <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">challenge</span><span class="token operator">:</span> challenge<span class="token punctuation">,</span>    <span class="token literal-property property">rp</span><span class="token operator">:</span> relyingParty<span class="token punctuation">,</span>    <span class="token literal-property property">user</span><span class="token operator">:</span> user<span class="token punctuation">,</span>    <span class="token comment">// most device support -7 (ES256), but windows hello can only worked on -257 (RS256), you can aslo add -8 (EdDSA), but in most of cases -7 (and -257, if you want to use windows hello) is enough (https://github.com/w3c/webauthn/issues/1757)</span>    <span class="token literal-property property">pubKeyCredParams</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token literal-property property">alg</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"public-key"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">alg</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">257</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"public-key"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span>    <span class="token literal-property property">attestation</span><span class="token operator">:</span> <span class="token string">"direct"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>navigator<span class="token punctuation">.</span>credentials<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">publicKey</span><span class="token operator">:</span> credentialCreationOptions<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">newCredentialInfo</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>newCredentialInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>    rawId <span class="token operator">=</span> newCredentialInfo<span class="token punctuation">.</span>rawId<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// verify</span><span class="token keyword">let</span> challenge <span class="token operator">=</span> window<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span><span class="token function">getRandomValues</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> allowCredentials <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"public-key"</span><span class="token punctuation">,</span>    <span class="token literal-property property">id</span><span class="token operator">:</span> rawId<span class="token punctuation">,</span>    <span class="token comment">// transports: ["usb", "nfc", "ble"] // do not write this config if you want to use build-in verifier. actually, it should be provided by server</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">let</span> credentialRequestOptions <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">challenge</span><span class="token operator">:</span> challenge<span class="token punctuation">,</span>    <span class="token literal-property property">allowCredentials</span><span class="token operator">:</span> allowCredentials<span class="token punctuation">,</span>    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>navigator<span class="token punctuation">.</span>credentials<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">publicKey</span><span class="token operator">:</span> credentialRequestOptions<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">assertion</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>assertion<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>还可以参考 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS93ZWJhdXRobmRlbW8=">google/webauthndemo<i class="fa fa-external-link-alt"></i></span></p><h3 id="oauth">OAuth</h3><p>OAuth (开放授权)允许用户通过授权的方式授予第三方服务商使用其账户的部分权限与数据.其设计的目的是通过一种更安全, 可扩展的方式完成授权而无需输入用户名密码.例如: Reddit 允许用户从 Google Driver 上传图片,微信从各种健康软件中拉取运动步数, 就使用了该特性</p><p>OAuth 的先进之处在于: 无需输入用户名密码 &amp; 允许更细粒度的授权(可以授权特定的权限或数据) &amp; SSO</p><p>OAuth 分为 1.0 与 2.0 两个版本, 相比之下 2.0 流程更加简单, 更加安全,扩展性更强</p><p>OAuth 授权流程可以分为 8 步</p><pre class="mermaid">sequenceDiagram    participant Resource Owner    participant Client    participant Authorization Server    participant Resource Server    Client->>Authorization Server: 1. 发起授权请求    Authorization Server-->>Resource Owner: 2. 请求用户进行身份验证    Resource Owner-->>Authorization Server: 3. 提供凭据进行身份验证    Authorization Server->>Client: 4. 生成授权码    Client->>Authorization Server: 5. 使用授权码请求令牌    Authorization Server-->>Client: 6. 返回访问令牌    Client->>Resource Server: 7. 使用访问令牌请求资源    Resource Server-->>Client: 8. 返回受保护的资源</pre><p>在此, 我们需要明确四个术语, 以 reddit 希望访问 google driver 为例</p><ul><li>资源所有者 (Resource Owner): 用户自己</li><li>客户端 (Client): Reddit 应用程序, 并不是浏览器</li><li>授权服务器 (Authorization Server): 指的是客户端的授权服务器, 也就是reddit 的服务器</li><li>资源服务器 (Resource Server): 被访问资源的服务器, 即 Google Driver服务器</li></ul><p>具体流程为</p><ol type="1"><li>客户端 (Client) 向授权服务器 (Authorization Server)发起授权请求</li><li>授权服务器向资源拥有者 (Resource Owner)发送请求，要求其进行身份验证</li><li>资源拥有者提供凭据进行身份验证</li><li>授权服务器生成授权码并将其发送给客户端</li><li>客户端使用授权码向授权服务器请求访问令牌</li><li>授权服务器返回访问令牌给客户端</li><li>客户端使用访问令牌向资源服务器 (Resource Server)请求受保护的资源</li><li>资源服务器返回受保护的资源给客户端</li></ol><h3 id="oauth2-pkce-proof-key-for-code-exchange">OAuth2 PKCE (Proof Keyfor Code Exchange)</h3><p>OAuth2 PKCE 是 OAuth2 的一个小加强, 主要为了解决 OAuth 2.0 第 4, 5步授权码安全性问题. 其增强方法为:</p><ul><li>在第 1 步发起授权请求时, 客户端生成随机的 CodeVerifier，通过加密算法 (通常是 SHA-256) 计算 Code Challenge, 并携带 CodeChallenge</li><li>在第 5 步客户端请求令牌时带上 Code Verifier</li><li>在第 6 步前, 服务端会校验 Code Verifier 与 Code Challenge的匹配性</li></ul><h3 id="openid-connect">OpenID Connect</h3><p>OpenID Connect 是一个标准的身份层, 其基于 OAuth 2.0 协议构建,允许客户端验证用户身份, 以及获取用户基本的身份信息.它允许用户使用一个帐户在多个网站进行身份认证,而无需为每个网站创建新的帐户. 例如常见的 "使用 Google 账户登录"就使用了这个技术</p><p>不过要区分 OpenID Connect 与 OAuth 2.0 的区别, OpenID是借用其他账户登录某个账户, 而 OAuth 2.0是<strong>授权</strong>访问三方账户. 可以通过以下例子理解</p><ul><li>OAuth 2.0: 通过 Reddit 访问 Google Driver 的数据.在外卖小程序中调用微信中的收货地址</li><li>OpenID: 使用 Google 账户登录 Reddit. 使用微信登录外卖 App</li></ul><p>相比于传统的用户名密码认证方式, OpenID</p><ol type="1"><li>增强安全性: 用户的密码只在身份提供商 (IdP) 上进行验证,不再需要在每个应用中存储和验证, 减少了被攻击的可能性。</li><li>提升用户体验: 用户只需要记住一个帐户和密码,就可以在多个网站进行身份认证, 不再需要为每个网站创建新的帐户.</li><li>简化开发: 开发者可以专注于应用本身的开发,而将身份验证交给专门的身份提供商处理, 减轻了开发的负担。</li></ol><p>流程</p><pre class="mermaid">sequenceDiagram  participant User  participant Client  participant IdP  User->>Client: 发起登录请求  Client->>User: 重定向到 IdP  User->>IdP: 输入凭据进行身份认证  IdP->>User: 返回身份验证成功和授权码  User->>Client: 使用授权码返回  Client->>IdP: 使用授权码获取访问令牌和 ID 令牌  IdP->>Client: 返回访问令牌和 ID 令牌  Client->>IdP: 可使用访问令牌获取用户信息</pre><h3 id="saml-security-assertion-markup-language">SAML (SecurityAssertion Markup Language)</h3><p>SAML 是一种基于 XML 的开放数据验证格式,允许安全域之间交换身份验证和授权数据. 它允许用户在一个地方进行身份验证,并在另一个地方获取对资源的访问权限, 而无需再次进行身份验证. 可以将 SAML理解另一种 OpenID 实现. 但是也有不同</p><ul><li>协议层面<ul><li>数据格式: SAML 基于 XML, OpenID 基于更加简洁的 JWT.</li><li>认证流程: 在 SAML 中 IdP 会响应带上包含用户信息的断言,用户将断言发给 SP, SP 直接验证断言获取用户信息. 在 OpenID 中, SP需要使用授权码向 IdP 询问用户信息</li><li>复杂性: SAML 更加复杂强大, 提供了更多的属性, 也相对安全</li></ul></li><li>应用层面<ul><li>SAML 更多用于 B2B 场景, IdB 一般是用户所属的组织或企业,所属组织维护用户信息, 并允许用户在自己组织完成认证访问第三方企业应用. SP一般是 toB 应用 (例如 Zoom 的 SSO 登录)</li><li>OpenID 更多用于 B2C 场景, IdB 一般是大型身份验证服务商 (谷歌, FB),SP 一般是 toC 应用 (例如 reddit 的使用谷歌账户登录)</li></ul></li></ul><p>认证流程</p><pre class="mermaid">sequenceDiagram    User->>Service Provider: 请求资源    Service Provider->>User: 重定向到 IdP 进行身份验证    User->>Identity Provider: 提交身份验证信息    Identity Provider->>User: 验证成功，生成 SAML 断言    User->>Service Provider: 带有 SAML 断言的请求    Service Provider->>Service Provider: 验证 SAML 断言    Service Provider->>User: 提供资源</pre><h2 id="比较常见的方案">比较常见的方案</h2><p>基本逻辑都是客户端发送用户名密码, 服务端生成用户编码 (Session /Token), 客户端在后续请求时带上编码, 只不过编码方式, 请求方式不同罢了</p><h3 id="session-based-authentication">Session-based Authentication</h3><ul><li>sessionID 生成方式: 纯随机, 不包含用户信息</li><li>服务端验证: 服务端维护 sessionID 与用户信息的关系</li><li>存储 / 传输方式: Cookie</li></ul><p>最传统的认证方式, 用户登录成功, 浏览器下发 token 到 Cookie,每次请求的时候带上. 其与 JWT 的区别在于 JWT 的用户信息存储在 Token 中,而 Session-based Authentication 是存储在服务器中</p><h3 id="jwt">JWT</h3><ul><li>Token 生成方式: 编码方式, 用户信息的 Hash</li><li>服务端验证: 在认证时将 Token 验证解码获取用户信息</li><li>存储 / 传输方式: 前后端协商</li></ul><p>JWT (JSON Web Token) 用于安全的传输一个 JSON 对象. 由三部分组成</p><ul><li><p>头部 (Header): 一般包括令牌类型与所使用的摘要算法, 例如</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"alg"</span><span class="token operator">:</span> <span class="token string">"HS256"</span><span class="token punctuation">,</span>  <span class="token property">"typ"</span><span class="token operator">:</span> <span class="token string">"JWT"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>载荷 (Payload): 包含了对用户的声明信息, 一般包括令牌发行者,过期时间, 主题. 允许发行者自定义</p></li><li><p>签名 (Signature): 对前两部分信息的加密</p></li></ul><p>JWT 是可读不可伪造的, 其头部与载荷一般是 Base64 加密的, 因此任何获取JWT 的人都可以解码, 但是由于签名部分对载荷做了摘要,而摘要算法只存储在服务端, 因此无法伪造.</p><p>在认证中, 服务端一般将用户名与过期时间放入载荷加密,之后客户端只需要携带加密后 JWT 即可.</p><h3 id="bearer-认证">Bearer 认证</h3><ul><li>sessionID 生成方式: 可以随机也可以使用 JWT 等方案</li><li>服务端验证: 生成方式不同, 服务端可能维护 sessionID与用户信息的关系</li><li>存储 / 传输方式: 前后端协商</li></ul><p>可以将 JWT 看作 Bearer 认证的一种形式, Bearer 认证从服务端获取 Token,在请求时携带, 没有更多要求...</p><h2 id="远古方案">远古方案</h2><h3 id="http-基本认证-basic-authentication">HTTP 基本认证 (BasicAuthentication)</h3><p>这是一种非常原始的认证模式,用户通过直接与浏览器对话框交互完成认证</p><figure><img src="./一些前端认证技术/base.png" alt="长这么个样子" /><figcaption aria-hidden="true">长这么个样子</figcaption></figure><p>当用户访问需要认证的资源时, 服务端会返回一个<code>401 Unauthorized</code> 的响应, 并在响应头中附带<code>WWW-Authenticate</code> 字段, 通知客户端需要进行认证. 当客户端收到401 响应后, 会出现一个对话框, 提示用户输入用户名和密码. 用户输入后,浏览器将用户名和密码拼串 (<code>user:passwd</code>) 使用 base64进行编码, 然后将这个编码后的字符串放在 Authorization 请求头中,然后重新发送请求.</p><pre class="mermaid">sequenceDiagram    Browser->>Server: 访问敏感数据    Server-->>Browser: 返回401，需要认证    Browser->>User: 弹出认证对话框    User->>Browser: 输入用户名和密码    Browser->>Server: 发送带有用户名和密码的请求    Server-->>Browser: 认证成功，返回资源    Browser->>User: 显示请求的资源</pre><p>可以看到, HTTP 基本认证</p><ul><li>并不安全: 用户名和密码不加密就发送出去了</li><li>无法保持登录: 需要用户在请求敏感资源时手动带上用户名和密码拼串(<code>user:passwd</code>) 的 base64 编码 (实际上现在浏览器会自动保存Authorization 头并在同域请求时自动带上这个头)</li><li>无法自定义登录表单, 使用浏览器原生表单</li></ul><h3 id="http-摘要认证-digest-authentication">HTTP 摘要认证 (DigestAuthentication)</h3><p>安全性加强的 HTTP 基本认证</p><ul><li>在返回 401 的时候加入一个用于加密的信息 (例如一个随机的数(nonce),一个域名(realm))</li><li>用户发送信息时. 在 Base64 编码用户名密码后,再使用服务端给的加密信息加密一次</li><li>服务端收到信息后将存储在后台的用户名密码做一次一样的加密,对于加密值</li></ul><h2 id="非技术方案">非技术方案</h2><h3 id="multi-factor-authentication-mfa">Multi-Factor Authentication(MFA)</h3><p>多步认证~, 没啥好说的</p><h2 id="总结">总结</h2><table style="width:100%;"><colgroup><col style="width: 32%" /><col style="width: 8%" /><col style="width: 8%" /><col style="width: 8%" /><col style="width: 11%" /><col style="width: 11%" /><col style="width: 8%" /><col style="width: 11%" /></colgroup><thead><tr class="header"><th>技术</th><th>安全性</th><th>易用性</th><th>跨平台</th><th>用户体验</th><th>实现难度</th><th>扩展性</th><th>数据隐私</th></tr></thead><tbody><tr class="odd"><td>OpenID Connect</td><td>高</td><td>一般</td><td>良好</td><td>良好</td><td>高</td><td>良好</td><td>高</td></tr><tr class="even"><td>OAuth2 PKCE</td><td>高</td><td>一般</td><td>良好</td><td>良好</td><td>高</td><td>良好</td><td>高</td></tr><tr class="odd"><td>WebAuthn</td><td>高</td><td>一般</td><td>一般</td><td>良好</td><td>高</td><td>良好</td><td>高</td></tr><tr class="even"><td>SAML</td><td>高</td><td>一般</td><td>良好</td><td>一般</td><td>高</td><td>良好</td><td>高</td></tr><tr class="odd"><td>Multi-Factor Auth (MFA)</td><td>高</td><td>一般</td><td>良好</td><td>一般</td><td>一般</td><td>良好</td><td>高</td></tr><tr class="even"><td>OAuth</td><td>一般</td><td>良好</td><td>良好</td><td>良好</td><td>一般</td><td>良好</td><td>一般</td></tr><tr class="odd"><td>Bearer Tokens</td><td>一般</td><td>良好</td><td>良好</td><td>良好</td><td>一般</td><td>良好</td><td>一般</td></tr><tr class="even"><td>JWT</td><td>一般</td><td>良好</td><td>良好</td><td>良好</td><td>一般</td><td>良好</td><td>低</td></tr><tr class="odd"><td>Digest Authentication</td><td>一般</td><td>一般</td><td>良好</td><td>一般</td><td>高</td><td>一般</td><td>一般</td></tr><tr class="even"><td>Session-based Auth</td><td>一般</td><td>良好</td><td>良好</td><td>良好</td><td>低</td><td>一般</td><td>一般</td></tr><tr class="odd"><td>HTTP Basic Auth</td><td>低</td><td>良好</td><td>良好</td><td>一般</td><td>低</td><td>一般</td><td>低</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">最近被网站唤醒 Windows Hello 震惊到了, 简单了解一下这块的技术</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="安全" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="安全" scheme="https://blog.liukairui.me/tags/%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>前端安全策略总结</title>
    <link href="https://blog.liukairui.me/article/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E6%80%BB%E7%BB%93/"/>
    <id>https://blog.liukairui.me/article/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E6%80%BB%E7%BB%93/</id>
    <published>2023-04-05T16:00:03.000Z</published>
    <updated>2023-04-05T16:00:03.000Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="c77527f16d0cef26b975021417675d416e5f41d6154514e40275542a3b79f058">34e85ffb0b6d2d12b6c2e177fdc7251ef828b24d094c5f9b0c6691c535f2e78b2073ac93317b8381299614d0913df98d6f64589fed558a8ad9dcb91884da8185dd6a1400c14cca78848bd546b9ce13accae4c98d1f7f45c171c2cf0709f86f02b3143a7373b584a7608f19f759df28369e9ea6d2e8c73527beed525d5c726ee2205f5f4f04f75c5559f1412fba8c6d186900b6f69403cf63eca1f91c585e5f0be72d9cd079a950f543cbd9a64450f9fb9e7ecb57c2f9d4a5f9e089327d046b25940b424f0d43a97e19192a1c3231c5f764cd5f2e0c5d16f1169dbeacfe23cac2253794ff4dba0257ed4a6041491cc36340e8af36cef4021a2ea2bf9819deec2092548d445f1880bbebd7a098feafb5b6e4c6decbac50d2e9162fe53e9f2e63ea7df676016dbbef283ad0d955050c6e75264b82b90316259c389aa9a9552abf21e2a8e66cb5c29fe3487214746ef1033e8918cbd25ba2e220a82df6044605c73940070dfffb666e0e6482778b39473adbe353d5bff6eec7537eab7818ef0e70bcca6d389b8a83169409031bae99772580d57277944aad141bfa93eec81484443fe797a5196711b14e24dadf4a20aff400f4a4972dd1c4c647223ab15065464c5df6ad48cae865760746575cf04fdff4467379ca68a35cc71e9a8b0bfefc579a133d2595f45c04a50d63fc6586d107aa1dc38629703d37fca90ce81a0ac6cc642791b5a386f1c5ff63032cee9c373935e944c60fb2ab7fbf778447d5beba5c8e6891a9db9d7ac68b02de554d3cecacb70a8a9f8b3c46a7bb522cc29fe10e52d358c255aee745fddd24a6cfa558fa42bd9d3aea0ffd4e29c636850ffb3483f143a8feef5f9c75be1fe60d4bcb17bd2cd2a223ce01362aa6a4bcde497fa440e48077a6f829f8466375ab5c735852f1f9b6b90bbac60aa3dde1f0f943802fb6f45deecefd3a5649c0b6efb3008df660a971b4c9cca0a3636341c366cadeda52ab1712aac80a375c8aa9be78775d4b0bd7203ac7086af610d6404ef47632771824d3fab11d6b5a8b5c63caac26a66c20b057985e216457b6d8e3ad5f05ce3b51a6176250f3db0f8a20717693e5fb373fe64858e40efcd9c112d4d029cfe4a1833ba5c1d62b0ff99000478ab91c027ddd4e5163ea92d254343746443daba25951b3732f05818621d70144808b390c40820c0886eeb55cdce2633fdc70d1991cdcb0e2730f9f129370a64e02b056b5e05b415d7186d98767e4a77187b2f937e0fa1a68352fc3cacd3f3e07dbdb634e0554ff186c679f04dc1441cbc194d760ff0986964c475ef5acd60464e7be4a0b08ba2041cf9d980841f2710a2ffbecc6f5441eb798fa63d8137a1e2c24acb46f47e01d3b7024dd2e5c7f627678710c88ac4089749730acba78b57fb689a871585fc0b0cc3d887ae23a75e01bdb63b081bb44ed5faf6b2a3665bdde7be1c3c6904699ec6e5bfc86d9e067ae16c62b71daef4e9bef24f38065732212ef3557db8219d6b11b18dbfaeab0730dbee0fedd9408963038c57f03c10afa4778237285da1865ee432e6aaeef9dbc46790da1b62ff907f2f4a9fcc05654632b288ec06b8d812838822f6a5616341d118d93ec1d9be5e2123931da7932794cc85a30666c4d31ee08ffdf713bef65ab83827109eeabf8a9e35c1ede78bed224b20b38e9deb4d9012aa23f11fa45d53df8ba1dc80b1088e0cace7f5e700380a6cc3a361cb73fb83f47d3eac6302643eab908d203f1600c91fcbdc4e0a3dc1ddf0adf0a0bf78678bb216d724c062f7f515f5bdafcf0d22fce5cc6dbac1f256c14da4958d4a334c4bbb3404307197fb617d886c59c0a6fa903c3a535c3d3cf78a58b1cf9f0c42178bf35548c3ffd92b972698a817f420d7829a88f4ae336fc61bea56453c9cc8c4affabcac99349800db1fb3ecc79e503dc7c0ae98775a39c37c7f2f0737761dc63bde05b938720930c9479f43d03acad7daff46bc6178037557a006680e68e3f529c30ccfddad209989d062478f1297e8a33971fbbaee570da261784b07cc6d40d30172e7560f167febac431bdb48768ce3a3160146eeaa2fbe85d69524632c5f7281627d19cc2401c8f26e0dd187cd1fb837b468140e7bc6f313f1cfed53f71b121869c92d5eff9d8bf7c3b7b85a437e4210fe6a3ada9e6c7f5f97fd1d6774a3d5b5a413a151e4ec45167c94062a36ca10c1c707585c4b74656b32affedf44ddc643747d2634cac9b2aa7a8225b0f191aa7049a4e96c1011d2535652a9fd510c27f6f66325950681885a585544c81c9ec18e1a632ccf166c03c9196fac1e288c2d0bc7ad88dd3672888e52c701ccafe630d506643f7054bc995af913c5abe8fedb0d8b8c447fed00907eb35b97faaa508ac55f291a3882b4c8cb4333d51a9967c1367ab734d8646c53a1b2c7162281bdccb557af5ba662cc90f127474ea36b763ba7bef91bbff412501cfbea5b78911f8cd67feca0eee2395fdbb3b1737ea5dbfa88d0f1351a349df0bdab8debd09abb7c9da17d8614a001a195c74903c5187af65bf00ee4c55eb6a20d792a7fe1ce44175efccf3c3649b62434b03ef3b54b4409409adc7184eb3cce7b95fd8af23b98fab888204b38503eb1f2516f9556d88bcf52c9a2dcfba266c2af9f2af847f1e24b691c2d1d3cd0cea81685d9e11ac145c2fcffe7060ba4f83280ea7db15930dde569559034b0ba5aae61d6d22765ccd2f5bf641e085af5ec274a70e81bc1e8aea35712b03de3ee9370c46cda75583616aad8fd9d5bdc3f2fbd59c1aedf049fcdc6a4b3befdea078ac1014af0ada4c9eecd0312ca0a42803ce2e3db9b42f090a33dbaa3501f030b6243e1caa422403d0ca4410697d092f72436f1796d3e5716a7dc2e15b3ac4841c5f96701d5e92838724c7cecbfa1f91676e4e66075808b56cd88a317fbe0c05cad47503bf714ce4d0ea6b9f19b0eac0d69dc451e02ca1f2e5fd566fb6309c6a418da75137211e8cb5b7d051b18bb73afc6af2d72f86cf94c322ca48dbc880b8d2cb3367274a65f66c4c38bcdd852adb019148fb8a356a64eb1922c90e21f1b76e3bb4df432c67d6f1b542f6e5b2c2f434d841c7e5fc27f95b09eca6c74ec8550c83371d9967973959de21b4ca950ea84bce2a4f8f35706bd94694fb226d4df254c43f5d9f6f4098e44dbe8252cc906aacb5b6a7933e560a916ec35c8e2411d4e79d2a8696421cfe2454318674fd903835ea5706eec27c208bd9699f2a6764f7eb95296b9f871bbce52d349a363f3605b40abdd4464c5cebac05c981f51604a21f14a9ebf39cca3a6bb5510569753d901671da66720839cef2d6abd7b9555454a7f99b7bd2976a9454214f085d82ccc7a05ea6105fdf111462a1dd7391a6708ca006bcb273fd52623d55683c1bdab01897d7833548d5f0f21c5379ac1a1199482b9c1058385d6950a264ff14be37a093fa2593ded06b4c6609cf6ceb1520406256bf752e28eba10e92c4fa7882ce95ff9bd0f5d33692bc58b343c64da251ee3660f1bbf9183703cd9af2bd971cc668c39092d5c4a22812519a8352be513070b62c87df4a4df8b49cb127d1e904633e7062d277a68ead90f6ed6bd83d2f6626bd76ed11a3277599b242745df888b9053433694efb78609e074d33156827147adeac73474067c83ffccd9d28043eba31fc1558a6fdc1d697d981eda782b2cad8d6749144540a686b8306b555c0c8a8b31c8648c7a329abf1ec9fb276deed1840d3c22676e03eef364a94be9bff792ce136a0a2203ce718c7d09089acd200582d0a1855daa30e353376e8900236f683f534c565188819f4caabd32dfd06e0cd2e975ce7827cb730d546f5c0e4a4dfde5d017c4ace52c394dcbca6500da9367aac59ea9fca6c08c5d2630896dff420c79159c063a1bca9c0516a8a99e3cf6b0a820877bdcbbb8689f2cf9c226a583be61a66e63d0f71c324125a1d5243a576403f819f4916b4fec7ff5caf5140e6e12d3dd502e498e7d199aac79d0a5445fc9f0fcd387532404517a5980a3780b4bf89094c4b0b47f6a1a0e16061706f659b701d9fa1ec425d5ecfd6cf28875ddda32be6c69552527a5d78048cb1edd3f53e5efb6dc5658410d07ee4b5b9abf2133707c64e40f3016f370f23231be6761e9fe698957e0715211a38e38fc2d5ffcdf639bbf3a119f39e2c0a1dfc5873724bab856e1b9536c9cd42cfb2ba0960ada2bad951b44759d6953c82053e2a1e95e76838c138e2fe9e0465421126bd9778b8cbe38a85514e8a4e2c93471ca02276e96adb642146fe645b7d2422ee173e1178ae8fd7d8d6f7e340dfef5fab139fdf7859c6d5b605e4652e0b1947dbd679e7851f01deaf7dcca85fd8d1a19a6226bcb732886db3587e6368fb340112b1a89839b20df372638c357b86091910c5849e2a3e2832c35520f234de7564d402f68afa2bae86975a527fd63cb0777c31a6837b31a6d1eacf879736da50ba5e27e04b6fbdc2cf237667d34f8036de6bf174a8a1cf49a970dedccece2ef78066b15352a3e30d0acabc70ca40ab5c1ecdaa163b48a847b9bd24ac0226d228abff14900dc3970cdfc1f680f7c472b832f2d457989d5476a7cdf939b9ae575629c838f5c0e31d5f6e9a4f9fad8e413ac789fa9316d7af7b9b4dbd1b9f49e49317771586e81c7c150bb82848a207613dafd9f4d31a095f2c12e0e9e01945e379adc8167031f1c31d87cbe3c985213f981c1d02f2dca81fa2ea66bc1c5b27b3d5da77d7e0bc8ada059cf56ccad816506a5336e4c8ed2c38e94e9c688eb6215f0c74b643223a056412f4382f833ad56853cf984eeda7a2def6bc8626192e8b358bd88998b20eeb09867107abf3c65353c7dc87f241ddbbd22d0d87e411a6c6222e96bd54fe15bfaeaf435270c4dacf2b4f25e16beff3de5f5489bbf5a5f0b4e541be16afa2798ab7db9037fbef3a8ad98c328792967f9b628f8ee9b2759c9b1603eb5cca26b2ddddc64c78a8a8e2dc68dca3e3b76b19c46d2762b38c1b94b3e6485ae09327e8cdc46bb7af3f2f24576d4b35db35db901c4bc4ede1b53d30db20e15454e53bb0466893c315f0d1a69d8686ff7259546fd61fbd3b86541b72511a47656fb237147d18c7327f0b6bd86bedd2cec2ea46abe8a13565096c6001c8bd94a58693ac7a8927412c9af8f07c6f585f400015a9426a9575d9f44241c77ae754e7a0175723c60d8bcae62a7d49c359f04d5573839a8ce11e5f2809c1c8712cceafc2c0f159255dd51ad0148a77e28069834d94b357fc941f4da8ed80b3527f3b27a05f16fb75614fb5632c8eb56edcb317b7482aae6b79e614b23427579885c6360a013c683771f64565d952dc588ed7f9bdcf00cf7962cdc7abb94a86b0d1f9fb7c3a974a282d65c3548c220e5b9553f75b53a554982535dfffcd0ca3d8c3d3a602bb4af822deb929331a4243c6391ec6fa672a80f15def4ba69c51b5de77731cff1d3aa0ee6a66cbf5b4a916358158b5e8acd8cd321407d2b1d6a93eb528e65fc6247746ed3516f3cd7f2aaaa8a287bf87539d5a60ca38e440a04d0e3fc14eec5dd297658e13528c1b5eb83de9401d579b89604e8f0f834d55297057ea12c3ba91c031a578a9d6b7f5e1d2c3ee3519c9953fb54e2d27807ae6856c85ff659e0daba770e29f3cf5c8df80eb9957c7d2d7ae858bb562271d32608e3e749e9867b231e693d3cb8f0ccc0064d131785a0b41b8512a8bf10ed3421d129db5e461be045e6c306bcaf4c4333230d2544ac85b245f6354d4d75f1fb4e73a7b0cd6521a934bcfe23a1839a3a06ebe0232e23495a72c16248a719c572b184ac53b4b87090a6f09ec715cd90afc98a76f38824311c9e1d13f5a8a01031dbfc2f21153859e198d4605994b5105c860aa993210fcd8582aeead2ffbe5c4f3576ea964765339a8d7a9171f6ec0fbf9cb0f69b029b7643aa24c62db6c243c96aca09b74c3b5392e5cc6dd3400aaf3377abc298afadaf03f86d823be5e6e280306e085ab687b4b99ebfc1ef770f005cb75b1c0d290bb8088709709557f44f1ca4d4812722bc2afbbc3b59d4bc1181e60e9de40e4161bf0778dba162951ac28f9720808cb65cd3dd8a027cf2ab74f2703f53bda4bb5ad0c296ddce54056a6c155f40422d9eae7389ba4cd4352bc283937d1e9f5266eecb94530c49fe190d36bc2b392290ec6321b28bc632e36661dc4740d5b70dae11a6e5fa78628d4e1d4718c7764fa25265fea09077fa3b59e31a295a473b6feee3c2f0922a575474f728092c01a9e661d80c255ff74d78264a942b7b73c46299f42af900304f8f5fcd81794984cbf2daa30b7f3de1984afd1c289da3ec6af4f6eb89e225af1d72e589e339283984184c864bc02e30595b4e6f9dac4ac5980df0c67e72379285b67d68c0254c826525c415e6eb086046756b458af6f26a96571c5344b2019f9169067f9ce0b7f9a6c00fe9bad6c1267ee3f1d3be22da0559507c05fa34d22a693eb4b16d6eea6629db20ffcd7afbb160b6d421fd51af148dcead162fbfd8d81256890f7b5e470c42670fde8da17ec2b23176021ca53ae6de20aafe2af7c1ecd11f06a75d8b1da425de020cb495f166680596ba110fca857b94e6466aa46f3bfd83b6cde92c298b8246c296cf628a1031c974bc15b2da0e92d01dd631761999fa9b385f3b684837127d61fed089c5e9a98758d900d113f8fcae972a23634e0844102a540daed29f80fc0cc37aba72a994546e0266e61ba72b2f708ab199cbd0ce2c894fa973482c851acc81a994ecbb1ad1d1f063ba49d0dd96c37adf9286de5a169d9f8c427f6f0a706d1f3380304c8f082ec9f44e3bccbf2d0bcd9827cc0cf9b7ae979fc033d08725e514f117d7d9084b52824b4e4a6433dea626ef11a05f32c5d0e01c4d26ef9b3288a72942706db782cb6ed66dc6ed7a9920eb06e7a3602064fbf2b740cb704f0547f75d2450c751e0ead60bb6efa4dd54b55a756fc8a3675516f3b7f89bd28b93ad172b28046c0d39c859fd7a6ceb3a7d0372d1b38105fa5cb25b01245241356b70738e1b52102b5963f32e4fc62d4d547998583a6265b3f392565425454b598218f0d7b2f8703070f8cc55f4d7f84db40cb37334db1f1c370f16768bd5d94504232b90f894b0906810d3233444403f1e794edcf1d4420b1af6259ae7f4dcf1d81d92cd99290720750d33c010259648624284e82ae47267a1558e0661209d232781b14da6afac97d95813b4cdd83ea4073c6cc4193c59f39c06870bef4d5c20eaf21409818df86d1013193b2ffe545a1f98b2c604e18a46ec7ec0b4d11c5e5a726e2c98600b6deb0830b96785e6a922dec52b08aac8344b219677fcfaf183f8e732dcdeb088ebe40817112292358aab94609d3bef95c07c5596003f06108e440fb2beaeaf90ec204e95de01666c7465deb88e50d679806f2aa48af1271000f777ae553e1ed491729ba0ac1a2ae1524350fe0c75db0fca39bcea0359d2c893a892a1be27397e4b5fdd0702a7886635e2a566bd7baf71571a74d5123b3a48bdf86cefb392dfe8e8db548fc2d0accc5ae3053d6874d8f50b8fd8281cdacfa2e3bdf9891ceda3f621b74b8f221d032f1341c4a5e83dea79e0cbb4b14d5f3b7f905f668164244acfe6115ab6f7ea3e2c645392ae3ece5b0e02aac104f1a1690eaa7663cbd439efb10e508471868a61b7d661e6417f6220e3cdd63d9b3265d0c2371a0df88663d2672602ca7b495b3bb6b1a8700deaab8de36b890e292214758e4972e314eab6f7b24089de21e36b054dd3c5c0bcd2a2991d7bef74cf2e8584066553ebc4f4c51e24fedc0aa9d8bb32533e89cbe61e7aeba37e1a55241d8eb8adcbf522f8168ba8fd90934f9c387de8e873f8f2a1178afe74a326b98cd5c8d39bdccceeab48f0522ec7c5c11626fee96428cee0b5ae6ce09fd2070aea8652e633b4f307ef6afdf0880dfaaa712ed97deeee1739078485839f69b938a43f4682b627176361f5b052d6aefb793fb7602c1aa024ea5242539e8a44ad89d2f85c79db3f6d1a18a964f7159b449f7318c580205a8d487050807581e882f69afacaab2bc3fd02222c74e662f407a7e93794f1c7259c1bec53562c8bf5973a043d34d81ef66f4ac58b8630f7bb3782d73b67d8ad4ec9bc3da43127383399ab39a1f14a5325396d212a3f3d2beeef0fec904ec48be4a4da89dff623d29e513bf3436b0928b4f6e0c55dc60ee3b21de6d85a3282be73b26810c934c8098cb6b1abb1059f015f76728927278dc65cbbb5c66b30482e4840894c3a376c76702232f6a13f470ee5e8270c8ea335c1ac56514f55afbb3f7b810933cf82e0e4789d491c67c404b2b7ca785cfe2a3ed6e82b3b038493810e7f331461fa1331c179595ede9bf06271ff3179087fecf9d53f87c2c0340d56f37b06452f1202aac40bd4ad8fc4cab46501403a93e6d22ca19c0ab2fe61a8cbb0574be7ebf548614c5c81332bf432290778f9b103d96fd707f8c199f76ac8365b3a4e1e78180c6806f13b397c78627d7c0b7b5a9dbaa4bdb253a4b3deb5737b4e19121f9e06f25a5d3a3bdf00e9721d9394e9054529f105224ec086a073973aba5c222fc0d3a487f2a8b08d26c255d95490b268a1f3efdfec5a5af65704b2acf9ddbae3a59a823fd4d190b8cb9b5a0169d7376d333e39514b524d2c36e6c1852590e1a9ce73ac5051f1dc1d7380601eff681af08e91d71315533e26a54c83ecd9b2980d8dc6aa3b4748d60c01e08aae5b9913322ec1d78124ab4b7a034fed0676c04dd12c505c7b839ec93d81c7abe05f8cf1da78709349d9aca18685aef4d1a6a2424bea9f42fd71a9b5af7378ec32d4a0e441839eb991b8b22b5a3c21252e39911ad041a94c971ac6162febad8837fad1fb4d23192fa697fd7ce08cc2bc44ca7bc31cf9013f4b7de7ff4ad956b2cbef692a21a56796a8f2d0f438a35acd19f32493adb7b424509835dbe12f37e3643d77eda79c16d7dfd1fa2b22f39cdf77f07b2f5cdcb21d42aa57fb3ee50c0ca25d9e157655775c5fd1fba50d7423bb83fa647d3b2f31de6d4d09f6470cbe1a1d09775de7eeb7f67915748a547164ec65fb8e1405eaccd8a02f3ce41ad5fd78d24be277160ccb672c9700b933886953c8975a57142d6f8eaa6c7e72f50ced9f82117fcc8ee4ca46f0a89c88275ba09712116a06fa5af10a573201c8ae3db7a7a68662d70e3cdeb708e3450134c654e5b678b7663ccff918c1777e51367059f4435d4787b63aaead9e15c8ccd8bce56cf8c7d3e45973ae465b98c95c0550918aad912b12ade55865a4b0dd8a9cef325d690a55e4e0130167685937f0525df37a1d41af1c5d59bc7ecfcbb1ddce9a8d4380ffe18eeb3d816b1c2c47a4086baafddcecda2ca0673bf6a170d0934d859e1f69012a2feded442cfe96a0277a76793410cc9bdf4f835d1cd4ce40e26ca55dc2813ca6c87e605afb99a811afa82a9c33584da296e1e632b8d43998ae94086f9ce981b6d880930a569bb2f468fd59963a63abaa72f91d2a7f7d13d2eff92d74edd84c414bf745115b3c3224f731c8349ac85058d498972198617e4ae61d7367f14792daeaccd0a2e94fbca081791c9f3af74a4cc5ec6b2ad063b6a7990511786e81f81c469a15dca7e3a2cac17847e19dfe68bd18b71e52e51229ca97cfec2c8d5ae6fcaeb3e663bb5aa877bd266284406f27b07817d7b3a377f820435969f9da25966472e99676a2d39a516a48e534ed2b7d3c8b54c04cb0a1fc040feaa20856c58bc70da57bcc827b1ae0b68ca4639256c748e9c1e4e1ab66522d6adaf467c6239b7ec9c418131de45c3ddea19429e1c4622516d76ff7223b4f1073adc31fb3f9fb776c8c53e14adb315449b8bccd3953aed7eae4a4ac8526ea05ce706f816f67e4c5ed385b38166d743afee7ed8acc8456bc6bdce39ae0f40b0c1fc7d74eabec3d0b770cc603dddfe6348e87b0bdbd93c55e52275ffb55956779bbc75be6514958f75b7c726d69b3ae8ca211c6f084d7daf5d7bc0bb8173d2a48e1ca429f277a0a3c598c76889fd21f958416e21150c932124b0e67b9297cc233901fc30b97443e1f252ad192697cca63ca48f5135263bbe00d34e5d296c821411a85ca95496591614668e6b61a7723c07615686f921219e9f3d4f877c8658417a979b01abf05d8e93d59e10dfe903db7e544b26449088c7febe085ca1f959d41553ba7e8c66c0c693eac0d8c4b123b403d37f30b5bd803d0c4dfeeb333682832d4b871bfc757c2c2211540250409f389ee2fe97b5760fdd40f7ae62aa93c25e6a2e062d4147da165bc5b762e195c5b4bdba3a609db1d6c2a6333c742004f109d12592bff69d7b3cb263a4998f1699768e92c51904786654b6333746690b826eba49e6813f1ab45d8922232998368ecc1b8e614ad8ec2ed4cd55b09f247ecc12c38c9919c464e8f347562c188e5b5d45f4388de0a1ee3e2448794c2962dce65e48d6b0f25d46926a1b8f13daff470ce7742f830a476764e4b255acfd7b12ded0962bff94b4e87116ac54394ea631d76385fe97171f5c0a00bad8c34dfec95766191bcd71a11da88511277879c93f92f17a99a963a0dc588ae1b2f4d804d4fad7239044f9da52b8136d31eaae338a4915a87d2988ddb229194ae38897797084ac8a7f563c13b4735c577ba437964945f09929bfa19f76afd7711f11e838f3d0b9b4e462f5ee3085063beca2c9818920025f36552a61f20076fe2b38741ed92a026cf9c53347645776c604d9f9c6857f0afd41371517f72034de5c9ff82fc3fcb49d4385ae6ff4e4a2930c6caa817f5b404f14afff537b944c4af1997e9b9f4997e1af26ae3843e771e27ec66eb4e3d833737148436a4228bc0353b8c242c4d11ce5ab17792e36e4350750c01563121c5ad27f1108c3b7b11bd2662e010c68a250bc581be8049f358a4046877dcc91a572c0a0a21f6b04590870beb1b028f7feac37adaa110df86f8324b293b95e8bc19570b95d6bf8feceb223add47e41af6135d329ee690d6b3268839730a13b9d853b7ea39e9e33942e8fc550587280045f5c6dbc5b24706c04ae12a1c8709977c909c965f7dc19b9fc610b6bbb17afe94772a6a0d2c916d292e2045587e12058d4fcc39bf7bdd1aa8e475eff5d697825932c3e3798d7d03b8c2bd1bd03f63a3cd52c857dc178c216aae84a17dbf276cad8f807b4f668d7713a4ea9a27966c3e1d18555a61a8df2c364caffa7c867db315ab216a6a401c7edbfff31be988b5cd071126b0f1f31b99a2f4f2efeb01643a2a53db81a382947358ca15f5bd31015d53c37c22b1c21451460c4193c27dc769b03f429392f2bfd0b757c5b74899c841c32b2a6584827c1927fa2dae52c84cf1715f6678ceab06548c462f5425590a44664f9e972b971b604ef8b00aa38172b3dd2a8911af8b7b1323f7e7dbffefd1d43d418cdac0016ac0c71d1e3ef5614464f53109d777afe5a66c2fa27ea031814f9776266e17724e92e114e3ad69700ff1f92fab61897da1cfd83c4542c7c0e6576346c3b2efc1aad5137a52e66f54e5684eb89137869fdd036ea3f651b018f7d8161d7ed8d47d134d3cc0b7831c71f93c71c1f237b2a6a133eedd2bec3767f1839042cb9e4c06ea8fb48c60b83a404beb83258b96da66ba43434974a47104043428cf0386aa3b8a8b73f06331e915f4f24aa80ce177f0d6a43e21d4a6ebf3ca494523d4958f839b808e9d1d7cef67dbcb941f60d79b08b2500b44354009c5e08cf9eed64d9462b4b7b2523303f38bf509977d8a51116d36175929a9fcfcecd16f969317d38ba52e01b6ce465e41ac16c1ed1897d60eef5b73abf22bf907ca9adec2b139d5848a119bb0b0948ce14c19482f0ada3b19bc5483080838a37806e187bf80278108f2652f19baee20e3bc52a8af51edea7e5014ca7461064fc7491a20107319ee0a1bd2f1fbc2712800866599b4299a463710af8146f351d2f82f0f72a804bb6eced8e2cf51e3f3b433b852da8398376200bfe9559944596d33272de6a9449ffc8299510291dc683cb83d7650ad22ead4c0af063c158a911c31cf55d7a1cd5499591929a4ebcfc224c36fff77e0de10985f84da1d3c4de046609974cb2d95786280c8499437e1d29182bca3d26dad38a9a771fcd0ec295d62ddf35c944af3f3e941e9b7818feae512378c99bb3b6fb2b87b41e5a6bcbde61f6b285fc3df6b4f0a064a31b60a43ded423678eb16fba0e74c85f815074e3d27b37f1d953ad86023ac838c11e8402bf9328dfcfedb3af7a7f6d90092b942ca0a9783a44ac20dcbb88c42bd78ccdbac3c4bae02203f24c4128215e846ef6866f869e668c015294c4374908d06ce723372a083a4e36019287c8b25d0ad591f6c6c1b63405af5680c7f99fc9105dfd308de142bbfbdae9fd2805f8be4858531aa025b1c12a3b2e5a0e20e8046111f9705d4c4c98b52b14d49673c81da5bf8d3eb05b4ea175a14a859de3787840ff5cd4bdc9e115be5911bb3944ddc0184b8aae0fa2fa0e9832967ce721a8f74c35883f4158555b77e839b8f3a350af59e1b2f900be7d2dd44235b775fb7cda97ba70122e7a3737653fc9bacf5f857b4f398b38aae361d92804a6427f9f8abff15d1ad5c3bb739f9188b7610e6ccf7a59cd966f84d589dc8184d4e8c42ca4e45b283bb676d5e7aaf010a7b82af787881b2f1c5ce7ada9fad3c808694cb16c3c08775e8c2e7e23d7f7ac037c97bec0eefe88b4028cd15ff32ab9714cb441b75a77c77ccf5dafb00d4e94e8dcac3e425a6c11437a7ed424e0d6ca168ebcd0a32536ff3174e412dfd369f62848dd3acd248f565fdd0b950454ea312640d7e7d0613aae23024ebe39ff868d4ccc1d6f18901550acb2bf65a11109d44b89d02b9df480aa3fd18a6ec91cb3ff68183f2ec2c8a3d7a7c4d958c34c0b3226d110203ca84d88013822022cfb7c775873fac5ae4b38f8c97fee73c539b84c99b735b6c2ff3e14184085efb36b7ac66e62cba69d6861d6f7a475fa54639355f788b4fd6629a4360145da598d1a51f9c5fe912433329c17b0b24a737491090eee920f90a98cf87a0fb8f91eca925a074fd3aacc9aa24f3fe124bdec985929ce7705fc9cd2177b71f993ffcc895e1eabf611eeb244b74811e209ed9e808f78bfdc8eec7757c53ecdbbb1c5b248e57a9e236f91450be74932b8df7f1bf115ac23615f693259c99168205aac296cd15752ce7622b133a9c8a359d301621fcba0bc17cf4918e2d1d0ad456efaa592686521f4b44cae8baf0dbc6c39131a3be1b9aaa016fd4750c58416b3de464f23ba70b1cab1a827fec140189b23a824a4f64f4c20e6b2475fffbc7507bb65c8459e1986b48bea5cd8dc3a5d41c825e6772634e9fcfe68aa3f23150b4b1e5a3f1b839f1f861da043d3ed38f58efe32e13e6c29034bd0d4db2e450893d122b7e6638f952b888dc3ece339d27e8d57ad43561651bd342c3d022c5aa246ecc602bece9072250a38847d307a69808337a09304a668d245523a069d91d4ff8070dbcffcd7c3b5d8d4db2d7895b8560e940fd054f0b1081e35cce287de0326f4c9aef626edefa3e31a71828908e636d9c98d0bef0cfae9bb4b232ebcad65c7eddc0259ab211c7783ea58c13d63305159f85347e7187105121fbeb1eca4bfd31620e809d19e5870509b8410b60406746f7eb5c0958070d4a16716a9c5603984c9ed322f642df15f8455b2a4734716e21ce2b1fd334a66991ae7c1b6466d03cf8dcae077984a65a7fc7e1eccb425c4d0c79e91c6e832228f993f8ef0dd2db6c1458c41fd806143594a7f56b7f549c2178443f20bb57db761f96b67a3a07c143338ec1f91fa6d612b1436471193757226302e9bcfeef4752d6fd017ff3c76fd4f9e04b4649b06fdba9e19f60482b5b9dc985c83ae09ac7e28171251046e5bef4ce2d4525faf0b79adbe19f8fd696b880ef287612aa9c6f48db5a1c4d4e20181ed369a1f87f4924a3d1893beac2b63ee9ad5eb4623757c484fadf5fe2123be967c7b1c0fd7b981e1c9151d423fdc4cc71c38a1601fcb69353a059b7f7b4f14f1dc035b673a400aced383432590b2423348538462b6f8647c991386278fda3073886496c65afcde943d4cb523fc055a0635063f48a2408804b0535c9eeafc15ae49e9b03fcc0a9b94c73bba60977c217a98c9488d19db1f99c54ce5577b97264400ff07d21588c378359698e73f0c48e49b342c9729bdaa2596980835a52cff79640931f225217380cedd2e2fea6660c9c07e736356449b289eba61f6a4e565f9254fe41d9470f5bbdb8b128b5323630e0ba8b9f6a187333ddb8a30f879e820108a84f2016820225b75ebbd3a6ee16ec5a7677b33bf9840614716bebce9af10c42c11402c25cdd33be9e351d638393bec2b7f45f4c9ffcc1ec03de27c60cc94fe8d758a06c414302db8ef6e8a667917e4828eb2fc7ea21a2465b12bbd176824de63babfc760618d49bbadfd2bcc6bb595cc7f496779e2f1bde10fc63fc22d29683a922ea45fe6d55f76b3e7516227fe67b718ff0b5f0050a5a5f6230b14d5f75391268e147c03feae2b97d2944478fea045bd20c936f55d258bc17742e81929916e0e380f328732344f155d55bbf03cad34cadb231dab5145aca203392994a44a3b8e048f870cc09b7e94395f94ed2d3fe0c2e1cf682c85da085829532b2008f534a1b46615a9e4fe7e874523c28b368b5972f6beda766af77a09ac9309ccf8244145c62a2e0a91189f2cbbca6d067d29c75b0d17fd59f6df6057d075791be2406f2fd0c4494b22a4371e4970cda39d5ec2b386ea67c7526a1f16af7d329862dc7c3b96602ee8c150c031971fd7b4995db63ee7d00e6a21b183ecc06f4a9c1e41d6cd6619434984f40d2315627a61b440895295a7f9b857d539dbbbe2f817fa1bf4a14b04350e907888c132d7fa08a0bf1a99f563fcf6bae676b7efec5d47ae291eb72141b4e7dcd71014f1ddd7f18d45f2b27bb770c970be7d91f18995d3a61b9fd2a052d70d6a99f236a65bbebf8ce3d86e31543eebf40fb2b1b004ec9f7df0c3c50f9831082e774b28a4fa396ccd0ae52e3776758a1c9a4af7b828237a970bf8acc3f5f362522974e75bdef82a6749e4aeb60f261fac1ff7036e3961ca8999313b474acc6a285c923aa3bda4e3b1e2d57414ec7d823ec755fe06a2e224fc1d187fbc5028ba031666007df2926a698f87572435e59386476be22bc5fd64f4246a58320778cf5c6d22832efcdf344bb0517627320d25f45df797a5c8d8fb690310a0a707849fdb0cc13abf24067ba36c4687644379b4d6107fb55a325e1544b296466fed7b1a8c2efe778020a5e7eb990f6dc0859308b04cb4cdc4aef49c675fb1ae31d26c2aebea6d9d63c6a353b27b3f134b9ea18341b3cf87a3059c2c3af502ddb1ccc3dd8eb39e13509007610e2e9fc4879cebbc089e506ac1319e8dec790a71d188bb983038dfaa1f2cfa63f6741f304409bd5a8f2aaa986282a7cbed07fbb7d481a86ea6c07e65b17c55b42548429dc2b6d115cf0d9b8dec0b3e90729c27a5cbc83ed9cb5a5758061928bc0ea9b882400be97cc849e1d61fc407c32a0982751395b7994376831c6ea7b2b56774634fa1c4d964782e1766f39322cd9afafae7beeece2283530cca18d2b68292bf7cbb93878e56354ab5f87bd44d73f83486528f6f8b6d485ca73de2f0b7bd0254b8e1799a6d5a25d17a3df530d05032065d6fbfe13b49882f4c6c23c138201575e37f16007a54afbc706830759eb87f817ea72de354ac4409c1a01ea02570c914ac241917d3b82c54d53ad20f12a81dfebf80f5cdf91f8d813dd26004d2df6c154e1a63c8497ff58ccd54c09fd8467002e893ed2634e8abdb3944f2b27f94af4df0026aad4f8a2267d0b3a21d9b8a9f10cbba38ba95d4327cffa18ceaf1d2e5ff05778aa54505e997dca8bc5f09dc9a10826e759fa5fd540f06a4149054769a8eeb8997c389b96808b90c70f577b002d92ccaf4f781a185bea0f265140e25125c2d6198384d1ced0829fb11f443ac488ee1d7d08948b3d00f4f5327f710bea110892c90feb21a152e969a297ec5a8a8028da47dfb3524897bb77d0e2afb369eb933488986a80a53fb7b8c9d566038b9428249e441ebf814cadf4b04610e2f1051bd4614e30f78a7f31fdda5b360214f42d1926a2d10cb76845fdc6b58f770d87ad891e097fdde3c43a2c291b0ae6f97258acf6a482f18891c9d0ba9510ae423bb1fe4b812b9c4497ccf4f2b6259f91150d7b331714dab676dfeb8911c80c6cc29b2460b43d09e5b82644a8561c97694151a958b284a42ce300fe9ce6ed99ce2b0940aae77056d27b0ad21714316a19c1ef39df356f57d881ecb6db630ba506f973eb9297c29adb5b305ff793c35117408c73373fb037add3bcb9cf036476eb0e0bad60d336d668f525db35cbb1cb7ab2203a1fa56d94541a9dec3bfb8c02a299de879b2bfef1fc15d01b5244a2fd70686de7ad3dc9262b2779fa7169123b918a74f198ce70898b525e25a9746bd031dca489568d9fecb107539f606152d50c4d448f59ea72b68fd2666bd9db778fc94bba71a81165c16f5dec8fdacb1f2f865df8d634958dbdb70e946b2c2549e98c335a568e9c012421aeb6b521bc3f058c15cfcd16b7c83de38a2269d0bfe7b57fa79eeacee482031dc36831631dbbd1cf999541d265d13ba198092b5c5dd329c46f6f3a40bb37424a338c29d6230955087eb95d97dfcc73ede8d35a84947928392fd1539d5dfcf0f8ab519a28527f185fcec114eecf2fe49ce82bc22f35f9971830ad325cc71a119672fc74ed5384d55c9f3c412b2482343ddff84f65be8f7e979da2c5b0117ec787e872d0866b079c028ec5ccc803550b7804b549ea7646020b0beb2ceeb4dc08358ea6970d0897368f387a240f1ed21d6d94a6ec1e84feb5a0118d1ba4551129d7fd56609a2f6b4e573eaa6d7dbc052dd440225fa5c66091a19e08e5b0cbd9873c932f19591c381a0e6a5631269f9d2c20280a6325d376be5dd13d8560b9ab0276ebef355f3d76f401d3c4eb4bc8b6a7f04c333d3b147ac9eb4c1c797458aaec2ba4cdffb67e703d61b0373a5d5f133f14ea8b4d2b6ad4b898aad338e613e05a7eff42d275c1ec3d976198fd379fd992400f4e15b9e102a34129d4bf5010c33d86b9c638ddc98146ebe7ac358cac7402bc3153439d64bdaf7f121538d7ad0ec553329b06a4a0aa9a62eff002407d60e64f0880341f467820793df3316e5e746d85fa0cd90fcdaef2adcb1af8412e26342c57c89ffc350ffe7c0e749d088963299fd9be46dc0905c014d4ddfa8edb687802ffe3c3bc08199901dc3b8860200ca355e63059d5cf9973f9c88d02b403aabb02958002bf5d6a210ccaff96f97f0b5c42f461b08467b42115a9d470be1e8d45ead62361b4dfc621ad35a4baa73b30a00167276ee2189af369df3cc88e4c4bf8f8dd50bfa2bca177dadfae341c01b20da1d54fcc8eef8e3f77cd33087884fa4b72ed24eb4b1effda40a86dd4030d0f313fa409f7342c317dc0c1b1f516c5d208e0a7bfa9ee8c209ce4a6e4fb900b22c16a8921696f6f62b06d22f9d2fc8a33af8f2ead809555d6268a1bb0bce14240ae075b2ebef6c7e25c5332d2635c63e64b21affb399feb11e655df6a0afbdfb6761ff57c26ad425ba64e7f04d56c9ef4164dc3e28a2d35b78c7290183b37f81c00e3b5ce9ecbb6023f78e162d2585e46d66cb401dd71ff5b006f5ec063b5768ce1da3ac6dd39a505765c6d584a95cb789b537a9584b8394ae4383814c1d7ef976533582c7e9615fa6b2572dfd082b2c46cd9c500ced48a40f38fd60cbc4c19cb6f68c37755ec0af395ee0000c67ce0886f18cef4bc52eeaa31563f6784efad26d676e4b7eb20fb10097a5c5f214cbca4c2df454f8cd051cfb3e4da1f4babeaac2f2f119c330068ce991367d55bd1f4da0465c54727982a9ee64b56222fd727cbe7b254ab3093329bfb96ee9d593ad775edd9615ffc08dfe51612dd7a9235742ddb4ab97fe21380c3b5e90b65b45b9833b307c61b825e478b32f8994a527005bbf911d5c1ac2dad7a75b24805d80d46374af95be59950db1d3da4b56c6bf3ebe66e4e61d9926100c7251dfb5353b64a73ea9ed3cbc9b38cd352e784a07874e1c9c4ccaf56c7bba107eb79f1aa4c284dd36516025b1b8d9eef20c5d0423103318c6fc49d874c232ec48d9d1fbbfa094ce6028e004e659c2c3f23f592f9c4235cfa305a678250ce9e6a3d1a3678d07f99d1212c0c8dc09cbc5959f5cc563b55e1578bbff1ac5ce4ebd1e45e828631363348c7d0825243f1f9c4d25cc1fb05fc73dca75190f851b54a8e9355d9e987d2c3f00b95277459103b362a4992f86b115e3a826d98640cc10f6798b2842d8bf2fadde1cc6002cf6022a644fa69c8dc18d121edc93e54ed0255050eaeb4779ab2f06f86f667970b21964d412f99d5b08c1f65d6eac87b2fe61d7bc877ec769324a12558c606f386809c64549b230ee5746ac475bcfc6ac2ccad777fa71d9e418cd03496950054b8e98ead3270f7564e1549a0a6ba8c9f4accec937447ea296b8906dfe244bd726b0be5bd42f12456f800458a27b258eb3a54a750a9c2819e4fecf01d8db60766ee83640f73b913548e97dbaf405442decbcfcaef3374a15e0e57b13263ec8f20b7b65be0501de9b9c5b181ddc2b9d57b70168508cdb38e2c9f9a1e1c3250f2d75492b6dd9df1612be6a3bb0e830aff0f8086d2beb1c2239b64a3bf8d77dbc204fa38136e83ed2646d9dfcb267c89f1bfb5aa1fda91c03d4fad8507aab34b04f86f8ebf8a534f8ccadd9b78243f9a5d33fc0cb7ecf49ca2b3a7f78b7d8382352043b1573b22c0bd0e1ea098c13155c74a4185c52a1d48629e7ff2333839a21bbd7dfa4789da1cf41a5810b59292262108828dcadae7046fa191ad86b3f22178af0322ff03bdfe8b3b2de348b1ace4880bd92625b123871257f332437ac5ece2d721132f67b777ac92d4ad0675608c6e509a2c82681a53645b6056ffce3aba670892dbf10b0d278c631ae0d7222090f54a0dea98250f71c05b5520b65d60e65da303d8e6d32b791edd834fd87230e0548e6fdb90482c2a29dd8a8263e7209e53644b4d9896562b17f58086acbdccaaaa26529a79a8df55dcf48407cc056c6a1665a5989291e0303b574645de02eb644276fab7a56dd09ac5d12e6e3b745e125089f337f58cf3366f3cf753363ba7653eda1557dba69135fee37d37ca099d13c53a130102494fb4924763cbf3622d91df44ab90524f8dad81270bfae0465b24dd01ffda0c3e68ef6734b6f933672fee88c8603d1875f2101bd2b30d54bddefa93b21fb25b1f10c554c4013456f1fb48aa7d3b650cdcc13dd084b009a2f3ffb9f789525e4c0f8659a07432673147f94ac1461dbe9883817b67330afb68419ebdd567df026d3f7d9a22dc331e51e72aee7fb50b57b8fc5aaa952bc360d5ec9c8cc98002fba759f3a63231b5123f8a7611e5a90ac4ebd3a304c74cb1c0af140fcaa5f6775656b8c74e1655822902f873e75d3b6eb01e180010c9af54bbf666ed52dbd5f822607480d1ac3f69b984c9a1fe3249395081bb0c22c04b915039e087656f8dc5e763e414262afd9b69d0ead14093014a144fc2df5b1e7eba2c65843fffaf2ded6c593f25574d86f723ac415176da4da03bab475c7880092c5cac02c0d2e4436c26dce97313bd6deda184a31b9e4ae402c8144738e09bd79b494351a3b8d7d892ea162f87d1d12eb921f988c7e9d66bdc103ce9fe9b317152f189761791bbec6028361bd5dfb2d99c8e946e5b879acb65f71fd0c33e9452b6d8699e575b38b452108b2581e0dcaf0f9cd24d04b6ddaaf2d9adaa7c04f010c95d5425e4360ac97f2ac85aa8c22505dffb90eec6ec589c58831d7d2d819ba7d6d00b4836be1de97c2783357614dd6e0b4a1bed8dece99d6538dec604be1e6e2a668cd9f1517cf12e85adb67c847bb5ffc4513ec3876605b174c946e245b8da903757eb6fa5c971053fcd0d0694e13d4f8c242cd72a30ba8c807349054e79ebe2a2c75145e88d325aaea58076d0d90b93276f5357e1f1bc2067937301d471527ec7850ef9b1e1e5dc265dfecfdc538cc5d3c61c19db5282429364ae8f43a9d2da7d84b08ba964232c238fa37af343803ec85345fc781a5b183141d157c5cfd7065dc2ab17a26c5f44d80889e2092891cce81ef7348515ec2f2318ad889552ef741277c5546387c315fb639d325f8c12fcab5437ff260d8dc6f17eca5cd2624456f725dd5eba8052d19b4fd313df0b1a5ad574d9e7f503e0571eb9c4364972f619f1a400486135ac70bc15fe16f90fcc5c8187e328e58d4e1465f299c6eb7ca89e8b0e60976364ffeef63f4165c030478e8c843b1b60e61d6d5ce4ee1b48160b78b5ae5800ef1c104234563f5fe29fa6d43e26920cdbd646f995f7f96aef1b8b48caa04a2f3052e2a1edc1ac1c007a94a403e713e433788b08712b8bec868d6dccf738db2e595a5cd398d7d2c23ea0a5984a71d38c426e34dbe8448f0b80935c80b6af2edf1fd3d7cf2bccc93214e4e1f9c0588650398780410f8e6ab89296e24a687e6d74170f8febe3166f182226bb76e4049da3134cbd46a5dd9861175b86ca757dc701b87f947a93f704b86c0cdf6c204d4db49d5bfcb3ff5d1f81c809f754e1957bf4a79faea3aed1ba77d352e9d897c7ab6d42801d1fda04be8c62795987c9f99757bb6638c0a802d276a1fba45cc9fa65cae368cc200bff45e16bb34f8b2222014bd7fc82a2a164ec3e49d0f418fdfe61b75e3dd88a15a870364df0d3a9f949e41c25a1a13dfe38c328c960281f8d4458a469c76877ff7849210c7d58edf0adaa17433fd8ac3fbc985d3bf3cf8e107e1d99d29ead170ca373f740e4062c18aea3c7b0ea8e6364b23e4717ed14fa5e64a7aa32268c7689f2ffd8b8e111a3a6f9e7d00a872d751a56d4556d70dbf0498aed680dfc03ff7ecf54d2498d78422c025df59572d52c00ff7e380a9da50d439358feab413edf01beb3206088b32a1955868f58eebb2ac4d15d1876a7802f8c67042da2ec9580702ece72e11e3662e7cdf1d3cd27991b86d1fdb65e6d8a4ef9280c54fe1545f3cfbf2f9d6f2a7d1b50db265578f984cb57138d0518305daf8ac890a05472a64f070015bda88960bd2a45d2d9aa3ebfe2cd72b6f61374a840553b5c02037a8d329c32b0631ce95d00479af30706f3a7a75509809f601d4df0be31a909ca66bb1a413c93f7be1dbd9cdc683841d4099ebeaea5039ee172afcee20269c2da547d551d3bc50ed6059d25001639fe173f98afa886b5fa65db987124aec4216d45a34b7b4f57b6652d123ba74050981e7c19fb360a87400eb32b67c10818e454cd6cb505fbf09efce94498e6b444a850d2224e06e5ec1a0ad2b7ae2fee13135bada5974db4938e564123835fe152b6cc2bccff4b8063a844818d9bcb81c74d72b5a744d708fd487850ebc4fccb1cde7c8b3fb843e46d88ea0e08ef405dc331678ef9b18eed4786b6c47694d8276c6ebeb09869e6fd64703f32f6b7b8e60920af1c11d94f2ad44c9cc42ade0e06760d76fe3da06076f6cb5d274797d86db4a760f61346e6da430583f1b9bb00f3b4049b9284340472bdca9f1ed2294be39d051507d779eab79171382991ed191369414b211ba97e911a0c74b2ddff03e82eb8bffc458de3d12ffbd0b9e6972e1fbf946a6e91aafda106c39a456ab5eb36631029213ab2305a68a7377e0d5d8c3366f24f75546b70e1ddd36adc572c704aec2965ca3a83b9c039cbdb9db2b5ddecab0760877d849aa5b49ad4e71165862e2455d8e34f76aba1066408dfc04097a60e27d1767cc08fdf81fc46758a8c8c06f5a82b82c911ebb18bc082e7b8fea0533e61fb9fb19bede64f10797fe65fc6e40827ba25186b17da48e739499389f941bf2d1502c2b800cde2ec20458c58ebb3e0f8af3915c1d7a6240cda52c2e12f9a65854a856f53be97ce65ebc773cc14b242f34634b1cca7a53879e7cd02ae62aa488e5b132b5611187d7d02283c875dad93cd271392a7e821b246d22f52188b15e4cb0bbeacdd78f53afa4126e4d0d1ac825c6e10b1c08c3b289e1c0cf4e2a7f5b03d933c662d3a95c0b503bd1f7f3804ce5b51c85299880756832e3d1ccfd54052b2512d5413650338cfec24ff815d52a32713d2364683805e6976d5072470d53ed2212c754500aaf17b910c37a4f2a0328f9b0c7c5b02e92dafdb2c256894b88a3526e89923302e60d96f9ea1a600248da9b08261e818dedd95399004714c4b71a4c8139e44d99211ea39055e457b7252c007c1060b743aaa2193c1470098aafc5f19531b584307f0a1d71811f4cc8484201f3d8c4e6dcfad86b408083b66aa68baa091e64623c8a4d4941707372c94ed7b0351e07d89478b17c98d5808736521958851c35591585fdaa265cb132582ca35d13de5bd5b280a1ab183da38c7efab717c9f73c43e619876a4472a220cf6facd773daeae1e7e4a14b8408ab434ecb404a7d22d7cd03015b152738c5991d51b1da8a839449d285b04962050646fdf91a04e9a256be46871dda7b08467f073f9e4c16a22ef1a1a7004db18fd744dc6a6614bf0cb24cdeec624f8d2e93425003c955253814166e2ba9f724f9d3981231a984aca226b059782247de17a10d34fb6436281e12f6976cd4ca1c35f38eb5ae1579d7ef71f3be1efaf5f1474f96454c2ec66e8b48b14251cc324500b857b91eed0f807011f638c25f78c59f36057073c14119e9008b8e93f9b3714811d81d34cfd4ac42a889d56dbe012d477e5b0796bb361ff7f705a57ea19279fa12451674ca32e56f09f4f4af0c1d3f6eb340dc37fdbebf8c320b8d6e30e03ea604f15fd403ef83462e23f6f797b7f221362d7b6100d5ed30d69794417fffa5e61086bdac16276a4422d4e3417f1c8798c52200f137505281aa96a731089eeea7b539d34fdc5f438b1b1176c9985884fbc160596ecfb6af59d2f9fe59bea12b3a998beed919992b7d2ddf7c9c64a23855887e6ae45b54fedea0febb8b516a4c313303e6135a5c87218f6f4ad841b2e807f7a18cf5b47a6d34edc10324c116cf5e016b3ce45b358b39afe081e8fb65c05938bdda579730d0b0680160d51a9e03645d2336737caa5c14c8571a1a69e0c8066b4212c1299914b52931bacb7a07ef2eb8ee6c20bd0b46442029e0216514e3ed379ebf6639efd7e38405598a96c1ba63ccba5d927638e942ce0178e08ae7b0f597bf45ff52eab7c051d521ea881e55fb42792323b5984031e67459c1bea391185b7a0dc7827ddb088dfd712377104cb7c56f88f8fcba3667bf1632b080c90ed36cb4409b3f32630906a9959e2f68755084bdd6dc9e59ab9e05511bfdfcc3cc635bb07ee0cf34936f5ece9595347bca77606690439bbb274e755b3c2ae0aad1ba054cccc19e77b27b6180a080a61c9aaf206305a83adb9986f83dd05e96a33688abc591f9dae66eb279fc8aba2bf6e7150c2202de901ae4c4014c811848c03ffd15d559822132f2053cd0b061d37e1e00395c99da31b6843bdc1ef7c70c5c4f6edfda48926e74401a33aec9b5d9a6c5b1f62b48afba6f37e558f742bad057281d1594550bb83a41c5b4b516f8122c55023ae59feb51ff74e07e7c3fd810050941ee7e20eaa0ed0904086b0d91073f18b79cf28765e20da4586aad723a933d5d0703c8ea5cdf32922ebc58b558f6640f240707641b2e3f4293e4cc8da3b67e512080aab388e56ade5742c1a0c8da7f27753f877f71620e7250f189d7c055d68543561dd89f4e14f69023fd91867735b9a7cb320ab865422f787c374e921e70abc4bbefe51d1413b037d1e48cda518f627fd02963d24bfb998d8aebc11b32ae9c39cdaa082ebc15a5682c4676aa8b7ec8353726d9c6301c564ad3edc1e3c0169e560c1119ad3f1fd7abe17a9e20267fc2ed28316f3ad6997b870a754aef7e3c23c27041731bbb7cf2326dee07d1ba7eaa2b76341c8dd37ab13809aa804b8b1f931819d6334af167912d9a76105f602eebd7ce179d9c5fb4fa84a9aa4dd2eb96c8a46648f3a1574bbd777375eafb15c4b72382578a8d2a2aa2d0c33a397c893e652fc6aca92c13482cad4df51a90628d37dfb98158462461b6e677f150b1921e3e42023f1190337035a25b1d27fc48f8d6b0b92f54c779be14b43c509d286a01ab0547cdddc02b507364b9a720b3fc69e8286725d800e9758a628f8e9486c9ff6a60abac02ef6b76c3b282c9c889a46df5f322b0c36649df30d5a9020655db42fb99200934ef6b5dfc73d7130689a819c9ff7d9c2ee4361e1f098302998efcdffbd4e2eadf0136a80cc5d0f2f1fd818acf1249325147d1dfb4a708449ac1008aa75f528f7a4dab906ca29071ebac7f53c8a48dddf228738fdd44693dd5d69b20be8aa2077856f75eb8cc98c256e13d7c7e791eccaaf86769de13a527d9635130be57f1a79e22f9e69ed3b9322b7e2deb1e1e0f51bbe10cef9edd64dd4a26349d897977acef5e86b6e784b66340b4ac4eb6cb6199d63b1a4a1053e9e358efe4371bff27c90e1255795b9249987062c0f7693ad55f3a09f3dfc9b8a5962837d86eda5c2938ef2a1481334188ced56ec60de9e4799e07a0faab948ce2a9942ee5a5bb46038329b44a55d32d9f595cee10db93e6d6ed0d32c5e7941eea55ad69b7ec50df655a6509bdc64fbb106057be3a56b1cfec013a41df6ff4e4b40d4b3d2dc76c36ba86bff8df8b40d53a978abde79c6f317ea8ec95a75958f0c3211b34edf226b87a4d46dc60e071c8be550290195499d1b259c100eaffdccaad0171892565440de3e43be26bd01cbecf1f00ba387ab320ecaed28d1b581c2f6ef269e0b87eba5b2943ec6e51ebb54c24ce9b8ddab6af96f8382ca69dc9451fbd177ab9ac90c948a99a6380893eb57a9a9d1117f9b71239a99fc0357ea10a72bbb162ef020131106805d23e56f8f940dea52b108898971d9b154d3ce9dcb583f5e485e606d18a92b058b75d23945d46c2994ac5972bb495e6f4cbc8adb510f52c880b80238cfb6391796f37c1f78ab44d809c5157595751010c58e2f6fa6d914b4ac3ab81f7253a7dea550022c61297de63410aef7db9db3cefc8203a5bab5bd86627fd2dbf515582ba2247168b15e1154fbb9c1584d1fba158fbba371ee11dfc2e509094f3e80ad185dfac97db3190dfd5afaa18967b9bccad20f27ef9b1c46723f3a5b3f179af4e12aa8102322db2143d77120bb59b0c48a9b835622c1604f28bfbf77ac6ba18654a3504dce1a2b1f8795b2f10cbaf11e4224a0b7b192bc04446ce8e521119c8c3db74c976bb20c65b349bac317378481f8072e9e40de74dfd3935469e9418b0f6472a70020a717435b9fade8b2f1fd46c7b5b8a515a10dcdc2f6bc33635b731153f93cd5087fbc8a4e65a035913d1c2295795eb053e20d8c2e841f2b209572f40ef30387a60368ccf2c844eccd2a034d99e82b4ddc4e56ac967646b6656496fbc8f80f1ded08650e5d808c6a3accef57a0bf5ef3823badc97dcbe28ebbb6610632ce31bdb41b3f90080af4d70d3fe9c762ac066b46a16c828cd3893e31ae7c2dcc33f9a4881b1914baed7d9eee912c854399ee50f69f4ed7ee15ebf6d22d8ec4b1eeddc13350d2d52915b3e66b7f162f1f9140bcb7c4a44364bfc32f26e5a1287c667ab27b8dc129b74f129d90e751a87b080da6e234558d14b57b9aa3b582a31b7445db7e6d89cd4bcd46eb83aa0721f7c8d51905a39d43fc13539829fdbdeca9bc0bd1267d1c604aaf5e24845561a1f13226741be08a9fc59526150527433b8b1393d7c89f316a1d834b0f805c73f313a0b5ccc5f08a95bb03d61396dfeade9fb9adf3b2259ceeca8e78da3b2b514c31173859a72c2653d337c422a83073c2dcf75e1fc9a915f46da36c5e818f04d75adcdbdbaccf7551bd8361db88e12cd66f118ca836fae5e56874123fda6d0a9a285210128a2d91b497e5e3f39a1ad27b4ea78471597ab53273b86dd013ae60375c4e6929bfaeaea3ba5fbeeda93425fb1db8aae8d110e8db6b2b934e75b50c3431b870d6bb9198be6ec5cf3dbcefc8ed5185dda52da45c126c3f67f2d481ebd5c0de3e94ed4c0dd51e42db22c10d5e7a01514e17ec88543efd146299c9b402c4995455f839a2b6e6c7346323c0649b6aee33954a662396cbc56dc2fae7c4a12cf297f30de5e4c5c265b223a8caba91e1ef3c75eff3a0e06e1ccdb303e9ce07636864c5f60418e426b9270e9dfde0fe64df64e056013f4a554d7c841ce27551a383c600880740cef2918a2248e7da53829ca84dc1a4d4cba209e3cfa42908fefd3f23af9666120c2105b5c084c591f14c4551355a824934e2bc37fbe67da455c652570443eed547c75e8780b3d571780e24c59d714de3eee0080963d78b13728f4cd86409bdd1df87fad6641015cb511226a77d21e9725a9d060867b4504e2a060e3771f859aa16ef87c6b8f7db6628958e383b507191e2413db9c535508a8c9eaba1f11748b94e9a396c5a5073067b9ca7cc38e897aa6fd2c116fe8d47e2853afb1cc75f9fbd272145c29aada48dcb145f91ff5c3a5a67517b68b3527a2703a13c8d69b7714d7d171a9f3adf026fad7b6067e8b30fcf1f65d071edc68d9b2c810b10f8e8c3d88f1142d89cdc4df069ba923efdb1afa57f91ebda96e3ad5f5d743407ee48712d80c59fb51d1913b212fc1d4807eaf91d0e379b488c9bd18a5f289a0d8825e22bc4e29475a3df23f12013b8fd58aca84392fd0a3e29a058e61083dd203990c4a91cf935dc78368aad84ff6201d0ea3a9bb692ed07bb156621afb8965ed22792808042229b2820f2ab448b3b148e8dd773cf58cfed605b21469e222b9cb95b356c5a98cac3e07878f4e40f6c6ce2ad69a55ba6ef32680f371d0021b5ba613195a3780a9e01a8a0e269274310ac377e562b873ae165083db23b44e59018895d9c1d74ee67c47fdf2b61e524e4249fe8f29634698dc9e3f406cf35ddb3cd7458dea65229082d1a782cdf2adc210ca80f085767bfc43af199f28b1731b30b8004af6cdd222270808eb0a98dc6a86aa6a8b91075ec2697bce2cd91b0b02b97135c256ecde80911d6202773c83ae3ae0bc3044e6110dd618d0dee7ead80da3d5e7ba085b53ce1b496a705d5f2a031e04818397c69b5a675593b3500fca78c69c7795d098967d65a2792f8633dc521469ab902a06db65136f0c10cb9246442956fbab936210684e19a3a0ced3c46b470d5a38421950073f7378d646fca802149aeb5c01a10dec6c3038bb2340e1791e8f602a64598e2bb443ed50610f7b9040a54c48fdd89546b51b2da0f0b68aea0b6ab81b8a52581184b0b7395529242b3a5cea4c69e48a9e9c525630918f74558cb12a06667a35e0aac53175f750c9d30ca995af888be9c786c3ffa06ac0f3ce806ebc19da4adadf040ad54de157a471eed0678d512ff4f4897b1911b36c553bd72738a5e7ef2adae0fdbfb994db62acfbbdf6a975dd85916eea6dd3f006c17d4d36620995c5ace1441a43023cc68e37d56d5ebbf4a405b2a372eea7719b29695ed678c070337553391f2794c2a9c4b9b42fde7b9901a99c79b0d1992618d00ee4345e3a5d73489c03b9648d1130692ffc828ded8384e48ef2e8e81f9d6906ba2b641b58edc2502847411e636a1a815c500d427924a7b3d0ba7e43723d6009913a50bb82e789e550be029db28147c9b355b8387ffe438124f794b3fc1073e449862966930c689b5a9f0b0f9cc94ecc047e5ea01d761a72c5c061ddd5bfbc93a95bdfc796371df21aabf065b7151dfb4ead88a79a7e5c9100bb692917d35d7cc18c222a5fe9a8511c6193c78dcabe4c4624f0a35bb0b88cc06c708137a98562fa5f232526f9fac8e27dd862f74416acbad9ddd9c443ef9c49ab141105147a37dfc16e0e02c5d0c2dc6c938601d2582e41d62c8589e6782e69f1bc7dcbe1e699d51adbb7995915614d5bc70909bead07ea0c43c4719b2407d13c0868b1a95b7e9d80b6ecf16b04357493a3262ce86e923cb9f75a7be7ff7e0e864f47199c19870f5f5624372a431ed43b11a8051e3de25b9e7704865569c2daed149dc8272b847883dce70e692d7b424406438e28c5aefcacf83625d7572dbbc755da7676f9438222cfbf8baff0f8425ed1ca6581fadb413960a4767ac13e5a40a32c287589694550e92e8abe0ce79f5f5c0f43604874fef5589904c150f25d5d06bf1baacfb2f6f658e61186526c7abfce81e1b8502bc174264727bae18faf51659df6e37e5e649213b2251d97ac044f6ef5a13f6806e51d8872e81042002ce5819262aeb930853421ae749733648b80e2b6684008f0fff9dfae57350084d50e0bad7c38a330d955aeebdc060c186f5032726eb2f300f6dfc1bf144e9c889c3802587e48df804252986320c415c156e1f4ac13c12c0d40970a862727319266194b3d6de37b244a70042f504aed3edaeff08600f9030b51588e98b83c7d31dc25e495a5b260ea523cbd0fdc439847e1f402c615b02097dd10f5f3b8066af4b1db6b2df51628c68c49f24e6517373e9f535ff5ca0ed2edf34e959ec2d2dbb4bf62c48c0064b8507c6c74d01ac323cf21def37c54c7a83638b2a56b9b696fb72a48c572ab31b7f928a0043841fb7ee8f35be9496426a2349120954a07fc0c270ab2bdaa4747e80f9d038e9bb3d75ab1e4532f6c8c51a0e51d542c64ef15442fcb306b14186784df3274a477c2c383b0bef04ef26013b46bc7924f455445855f78b0884311e28cb8f15ac87b4f663c5295e1d872cf5fce6ef7cf4bae452a4e2d924360d0c75b0bccd73297a14a6eed6f34402223ef52ea0be502629cd26874faa9932052faab40563bff02eb43edf0f8ae48088cc0623a4ce8d9b8b5edbeec2d51a6db5d7ee9ba9d92c0decc5ac28a668cccee78872e15d7b834a384c7e72f8904c380f7451bc2b2533930c50c80aa3e9b15cb48684f7fde8976e6b081d0f76e724237d0b3c5dd327677d6cfbf41df3752d14a46f13ff98d11751ef6dd0e1948991d6f2d65142e30a861af1ea88f7a5e41633bc65e72ae30e90341b2a0b0513d1eda0058d9426b55934eca0146a2391c740e6ed71ee759f9c5c438a38eb359cd9a1a036d3f490ca92a9dcfc7510c9c251b7f19be8a08a34ba442d6ffadcc3e6979f3030454727dde46770dbb084ca5a37cac7152fa0787f12c3edbedbc8dea75b757357c4d4beb0159560f1b500944d04333653699a519eb542ed49474587e4dbe5dc1b2a40d2f1e57378457bccec6e304bc51caf8fbf680cd00c2eee51e2cc1dfd4f81e1a250d9a223273dfcdc773f4b30bde7e2a3f71c465fb2bc1a44f86a3c7aa5298e9f409b5faaf2d7093cc508d22e1efd0d08e20ce580143ad62a9c99936752507755e532e07ebf7f272ab4d3581d2d31dfee86b9809c0ae8a61533d9f0e7c5c5bac7de88bcc7d3984d38946484cc5c090b880e9e669caf3d362eb9e7619c2afe53857de50a0a33f6c0137d87445dae83acfcdd7aa2c2afcd5d4bcf445b7419c3870247db526517e86df7e82fbca4997411135fba6a2d52be747eb5ae004021b7ab90b6151e679b04553d388acddb9aee509c39de28c0abf60448a481c93f13c5f96f24b2465306f3c5ec213af6e6883d24ec613436bfbc2013ffc5120489f0201dd480561a385a00e9f3fde8fef48e19c5bdd10ba32fb574815cf3ef36f08c973a2eb5d87804f4b9613d261e9e4c4993f7ffc6110ede6983de4bb4ad906dbe9e054f08b175e99ce6b0819fbdafd4bee72eee00f2be90017989425098db327ed48821da3e29b4c973f59bbd58a8853f6812fe9d19c0a711582f4cf598e72096be53617b813907b895ab951d4603c2fdd281b76c5defaf931c58ba170f31ed9de0a32f846d27e3106f15ee8c373ff5e74097dc7c625735912047ab4a042548b11cfa1a3b30e48856ce93bae493ad93c2f913b970dab961cb03750a06a93a394725061738daacbdd6d1515142fb3c4d8b1af226615eb37daae38c6fac90eac2c538be21e64e41afc24c3091f1e0b00fec102f25bf76d9b0de3cb5d5ab08a5b75fb132f647e027611c7e266773a082188e1a861223c15847ba279b1c833e7244e6555e374d90bf447e3f3d8d28a75317c6417f697e2f5d63820f176fecfc2fae0b29175f6aa9a2eb2c720546d4671e7ecc587319434218f07d5dd75593b06aeb70e4dc333fdbf7276705b779233333c957ebaa8c94c1b203c910c6cf9c18a4e8fe36a124fb22ff52cac31ad3d2b1ccf1d69893790a6a57e550f41d829e9ba5c8c97adaacd0b08602418abce3c23e70c1a66848a19688309f7d5ab43f0cec82f149699bc1c83e9e951b4549d7803611c3f38b3b0b5fde473b092e361be5d478cd5c47e9aed148f3245717abc9c368a2bdb2e472991ef3d9b0961fc717c99e51c84c05bdeb73f5b6dacaf20f7adf070881349f340bec28d970ca2012aca46b49c16b1513d6f1198e4e0c7fd0898426f1e04406114de0d1c97c4af97c57326b218c1dc08f7c793e8d64f736ee46b8f9654416c312bee78de53864dadb1c1e4fc037bce0f88b1f52ca67e680fec5b329ff973c971f081926de774ac34112777f756ba5373a83a19975cc3176a68d40b012d783870a7579f1132b568d8008daa58b88c7c4e2361fd953864c94d7e7433adc9d16c6648c2384c11372c921bf28ef623ea6db690a64e0ccacf74677142a568c451def20d714ae61cfa54e2702e910b64fd94ab3550449b589e094d95d377869c025c278a811a9e2f76cad8c7707dd125d40213d056138962dab8c694c4b0207500ff2fc24ba387cfe2079ed788c36d55165d03be193ba63abe894d4d2a8122b8080408f113c8420b3c04b823e2c3d2efa1fa5a83a3c50d3d2d6a0208d362ec312279c535fe9038649b2b20b2e6b678d22000ab049259f0a0c79a78c58d314d0da3e657e0e4f2f2f22e60db421712fb3ed7ee04eb1d5a503c00bc8677a0168c7bf2c82dbf23640f9c30ad9c7c7e5efd3271e4ca6bfd816052dd2b423e278688a5cf12d574fd278d9f79fb635f38575fc215ba3ff77d8f8d094972a0cda0d60ba8417a34b808f63b36d3af78b7793af64617d5ab03c3e055da02d7913eb22eeaca65a526dc196e3b8393470d2d993928df26d1e458af683ed1b72dcd70749df0e9b74d7a3ab4bb503df5f86abaabbe63b6f97df3cacb73977dc3794c2ad29a552e555f9fcbd9f65ee18679f1de0879afac5867c88242f131cc43bc3ac4fbc0d33a6c84c635299d7f06682ff5627e420e7820d84726303dcdaf73dedaa48b4a0df0705fccb97e3ddad2de16c3c0cf9e283b3240dfb3cb9039ee322d646f684845df6de0e961c9a1789e3390fdb993293abc6ff9ecaf7e0e97b70ee80438192d99e78156b70c34fa11a39138ecac4fe368ec30023bb78195c15c760f8ef28038ee202a780010b6d771ed53c15c25c9260e16f4c88ac32a145c8b3fe8fc76aa976bf4efda35d6d90180e10809cbc9087dd5828169e179ae00a111d829dead42fee86842b9e6c5ee3b40ea9277f186278b5bc18940e24cf645f0ffcec29e4d7c3fbfbdb801f5a8d3e82a81299d5d78e32b45422d532dd20671276bfd7710c93fa23112498f841405aceb17a4fcbce777207f359ef75afdd2b096d3a9e8a4c3ed794a89ce02177032f8b9044e7a91b92018031315fe95ffd78ae289492edd7377251b1d67825f6c186e91b97bda630fe43bb832596f5259b6dedf59df140a5b2200dfec6f88e58696e5593266e298928a4ffdeeea61512af9a45198b3db84d27e57b50106998988ed36e4b36f657853e191acff495087f4a351cdef0bcfecd0e6570de977436e20873ecf5058b939b007375484daf9593964904df2af3fe767d647bdaf648c2915abc8d01f509bec75b86292430be2f93d956853b089b56ef17eaad8596e7645fe9eba3c7e00563b859c1cab241007b06f9a74a28cdd0e55ac72c03ec3196c5ad808c67d9f088a7eb76703420565d29ff52347d9282f7b04c38dec66d7dd3fe13335b3ac4710fe8204b3cbe25ea002ab4707cee105b6f4917bef5b63228c16fbd47e27a66ee293e10541788d4acf6ad4d1c677e7e7dfe2caebf3a3ea3886fc520409acd35db6768494696be2d17fd6252dcec3b3eab2ce050a6efb0b1f7dcecc0d13f3d17344ebd8be6f615b2976d60c65dec1d31358a23c822265db97b205054bc24b9470fb245a3de8fa77c39918f6a8d8513a5579957a5f19f14b44c252bdc0cfddaefbc2bac6a9f8f5a8263603c18360a88057283f9fb45526ffbfbc5bd7704bb41f0e0224ccd5c86b65dede327eaf2cc74f7638b5bec9de4f2ed019b1a91f9b31a11855133bb79474b0d3503a1465a4142a19247d9fee927fe4a7fd50a56b2d16db5420b5a6ebb3688248795a9bac6fbeba1e6e374cb0a10e08e4bf2c775690ff6b12532ed96c27c1c87c3428627fd028878c1b674e9ddf17e6f6bfae0ada908da966cd1d929cd6410ff0798e7393147bd82ac8898b89a556b303ffb2b1d04fad372a8c4398ca39e5aabdccd2677c5063fecc281f22a3c6d6bd3c3efe8e909d20746827aca70058c1058ca38382ba82aa928dfcbec035e0ebab9462279d367999b02fe38485ceeee6134433789ffd4817407f2b27b658f17aa26298d704eaf348ae17b36986195d24270ad94861d7e81be9d78d36b94fe8899a21dce79be7b3faf9e53b78785789b79808566ef931aa06b5cf49176c56546ecfa8bef0e811f00b15e53d054c62844bd436afcbd5f18a1d860d0af7ae25ce40a8d629eb4f56340880acdb871585e81ccf1e1273b6c98c4a8bd36e142d641f971c0f83659bfc76a9da6a3a7f681c433d667cddf8f4cb5a9e1747090749d8243d4ab3b8970332868af92964501297f43370e1bbc691c7395c418fb4d3374ee887d4a4846c7042bff9ec977ae4414127e47b48679ee8aa3ea0dbb1580a14769b3428c8ab14e0a944a12afa6e61509dfb8f2bd2bd385b651157ace3e57685680af6ede5092a04115c071e66945e1abb20fec37601d7f7fe14c7c86d277254d8cae7f03dae05ace31d5c9de2a18ede57ec82c5dc8832fd72510b08c6f5faed3f207115c6164355e545b8908e54a0bd91e021371d2d5d771dcc32156a810292e33569987d9663f6c1c6319fdbb5b8335ae2708519eb2ed7326f32a20714493c784a373931fc8435fec451f97b893bb6d894e801ce418afe4c69881b031b1a132547e97a89ea5cf22d47117852884bde0cf43a9791d5ba1bafc699b49f8287a1808d2cd5b10b7d9a8eeeca7f740f34cf87a87a183bf1f7f6ca32eaa76ddf455ca12b3b29276790b07e9aaa01f8fcc43e7d626bf12c9b576a0663fd3b4cbc80326957112551610e95666a52b51567362ee5c7337bbdf3ca5014beedebdc1163a1533d9352b23d162850b1518c9eecbcabd170e19f1c025b0d5f50c2a95dd06d7dab8dd4df6951da0677b2584a9196cc31cff8cd6ed1737956ef36a190622f00b17fa6aafb9b63ad59a9799bc29220e9d602aaca0a8556c79608ef2420d487ff7f7193a6727b4e3c54de3a878362fbc98c041af9bfec2647b3f41baffd311b2b883245b82884089c0d0f8e176dc6e1043e042ee099c2612d2d51c64c8837348b4123bc9caabdc0b0f126468a850bd07ee465a9537c3930d44f9809886d209c89c2b141b4b1c27aff24ea8367750f6c178877ce6edcb6d441f523692bb67ae1b1e5ab11d8f0c7cdd4f1fc444589535f4e618db3b9baf77217c8e030a608f9741ed66791ea71a1d4c75316af22698163deef49ef9efa9a7b898a9bae0908f0a62cb412fa7c2af8fd61b6c8138d4d312be2c2a5e490ef05cdafa31da24839abfb8947e4abf22ff5bd03a82881724791279a17d0698cc496b79dae71572eb3967dee98b7f8a3ed425dc02a333e9c69f2999dfc68860f4a215684b41d7c34bb75c2c598557f357249789aa2d5c4c21f48e75d50fd2a61bfaef25d630e1854516df572d6978fee6ca1f59603610d213cc6b85e18681287a354a16e4877db253c9d1cdd16e2801a0534a5f4a90c9d4981b2850e305f2ce063da4f9fa25d1dcb3eac76c10c13a6ee92e67aa828874a7524b6464ad8b9df2bb2029e30935f5b3a3a9a53f06c96304f912b093919f4d6f8d29e560ba72970e42d50f441093fc538d0bc5869e9cdeaba47f31d87f23e026519ff149aedbeaf3571e298da99e7d682d157af9bf99124bca42c10e496d538272d4ffc612d160059a8c0547a8ee692812bf0a30d9993e08df21153e2363a6983e4edbdd001b9502a4238eabf36876c6423a95ae5e1bb30a1df4ab79d1034f248aa053d01d20bf84f9b045f42e07cfa6ba198e7e1e290720d8583e072147eac22419cadc8e2faef31d129b476056a6778ebafc72dfca0d7458c3d4611707df1261c62057c1e51edc5d86ec5d90436d3acd1b0711e5c601f7f71cc2284d4b54aab0b9d19eef47e6caae3c3973fbf663b769f0379d97597b7cd78dce213008717a341dbb3f6a814290ec48e2b5c8f73082506eb304e0eff4a02c05d30e3a2e7ee10f9a7335cff940a70ca809eefdde5db83e418f2d0e68bd68d7bb97a3983b2a401887a6bc61aa87d42f755842285d10353e1164e5ae1b24857915f572f8be18a9236eb22a61930a52b06ac989f0a96e5cc9600f44c4c4ee3569d1222bdb19ce619626ca2238d160cff5b35349e8697a6fbbcef2af679af283db85f24c5466a3509e7b8ed1b22bb917d279ca216f3d0516c16271fe7cf4ecd05dda69bde609e9b8be97d8239e1831f52161d9b89fba5fe1bb934dfca6a70cb0b6be8d4871db51e492fb168da69a45bb30165a65ed1ac909c2cc598b5c3226fcb3c85e4f286204d61569c49c3fbd9e41a8112fbb6f4a68fe0222be8777ab9bc43ea72d5c1872d2a82c2d0546c49df3ca93a40e6faeef2a9a7c58ec13ec8e85ce492cdfcaaf72b96af2e03c179a244e32c866b3d0d28f04d786309cd03742b59dac132ce4b9184ffa70fd52947aea4a521b326ff19263f3f7db0f9f213e261a0111a338a001dba28ef68241cde1d7a5f44c8ca3c50706a78bf79510ab868f44198a5d18d4038df34cd6299d362c5babeecd634ab82d00cab510f98a7cef91341ebfbdfd08c56e1a5e68621840e8ecea36373f70b4412783c3fea91df448b70829840c8bf7d4eff4b93fb59c88aa6e3b845342359e6dd1ed6614f68c37f8b0953a070eafdb790737479c7a285e6b078e882c02ad12407f365ddc6d6d9c176a8b2fe187edbcb7c9f1b5e47af786e0711ef34b76f04f7dbe15a085459d91ba5fbb54b353e57a6f4d7f7a1f011bcc971709d10396379d2887144f20262cc88268ee86d73c4e625f730a9faabbddfa5c160b023f240f907294ddd6d01b769cbe834d248960e4c69bdf7c42a319fb7f69ca35f4cee8dea71499d268a0ac424cca0156de9e03d3d747e792ba43c3210f823817398024fe2afc4313052b71dba42baa35f2797397e9357c3417325fd5ba7d0656d3851bf999a53b93c1c30ed0bc9d6c4641aba8b15b20266fa9ab8c70b74de52a70de1da50776fa97f8af154eda48507c1480dd5eff4c65418fc09b56115830e7faf800985eee06fd33dee25e0d2ed108448a44c09783fd7110915ef870ff1c272fa592c84e837af7493b8d8fa5ec178cecd25e9f9b6f46ccaa404e227ea4f21b389026e7d6651a57b414660b24cce09134d2d632652e88d25dc0d788794277ecabe628078cef50a8e835eaecc41ad950ef070753d1379818ba1941c212cc69aa6a5b8c2a8d33bf486449b9e6210735494fd7662e59b0886242d2d6f1766d5ea99b7c4deb2e36e9ea7121a9f8b0c5b12f396969ce9f1c2c520b656bf65bdec13b55b4ba5605c22479a635eb6976547df9990636d966cbf8c861f5431af75c34e8af8460d930fc05b4ab9ef192f65ffa7dafba207b59a379098c2bce3bf8ebba24e5cd65dec76990dcabb33c2cacf30189262c671a830384d2413af92d16d7ec1f31e62d9e1320ed588f42943456035190b01f243583afc67ae5c753bdcbd5635b208206621cebcb0fd6e5d9d50392b1bb617d8604bb718a6737508ae22fda5434a029b40df700b9a59ecf85a09a0b66a1e14c0a61113710760fb3f944b050be62740f0175bb9cd4f6fb11e1073389776e348784ab4537ce8d18b743e22e6015a781d747dab0ec231d886628642afa9c2a5a6a0914990ce81288b8f808bf7e3d3f1ffa30f083d372f5105310866a6e03dadb3a474ac8d82f1d47882b58955544d206850b02f4c7c397176b6592f206f1462c48eb4f14feef56b70b31d364bdc095c4af96f076bee62edd4f84a2a04d7d6ad23be364d73b81ee06c2f7c8237cddf7025e0e86d667dcd7228e50ba5d1b5ba4f155e17db93e21482542caa9b733ffce60e6a90b94709ce89763913a362bf346273135c1f3e86015de5ad1260a965b8447fa9dbde4cf9b339b6899b88f28430153b58d6763b622261cff1cdeb98922cf807ab24d57dffa966917ad30f6c0fff2f301d3c9df9a0c9cf765f9d7799d4e66f155d210406fe34c51401e20a4640ae32255d94e4500cef36ec01dbbb03be2104646331a70ddf720f61e4b3b6827650b3bbf37a8811be987ce18eddf60d9c5109b9ddec73a129f0111c08121faf3e6549bc4d58900d337f06d1883911baac302024a7ff477081c32a33543bbae907b9a306cf9dfafe0d205ebfd6f0c62b7633d3ac3da712958df64408671a4157b1c74f4f77d4a7598574b5071a39c1d08a41c4c4e8ced7b6a6d8e81c53ab3b32d7631ee13fdcaf1a997bc234024f319db70eb566064b918e346afb755abf6e481fcfb5c03716404caa82b0d8be830dd531a0f96802579bf23e7de107ff37469aa1b4a7ba811a8afba0c6ea367dd3f6343ff3bf11ada373edd7d178c3a0029d92d1e2b5cf486e390f59de36a75525fc3160a7832a4fccaf00574be64557d2fcb1c25c869cceca4ccecb9f85d70cfb42c25d9311026233e6e70ec392f2ed9812b4881934d38d865ede89a21dc3e7892d09d42e93226a45ebb42d8021b5384b3f0b6d7d9df99fb72672a2dad2bcf67c1e09e4ffb4f170ee06abc20fad035f85f142055a35cbba4c0735e7537e62b8d4904d64cf00251ac00d23672580bc6cb4a6abb1f6654dc24f87c4a52412f70c8a22e3651b2647b74de9af134e2b0dce7596f716e68496703b9b9684aad92f3b501f646706939f8ee2d797ae1d0e9a2a561237d3783ccd0d841f13d3417637858c07e4445b8b58fb885868b4efa9fd3dd0445db4bcd40aefecaa7efa4321d712180c63530afb5041549ea1621b7db865511a19fa507618d399c102efd41292fcaa52b465fa85bbdea4a8b81235e7dc1e5113afb1fa25fbe9ffee8c4597f39756047769b86550223e9abbbea53bc9e33403415837a0a35ea4a2ba95b3078755a5a40ae9929c5c335085c5d7eeef9f435d0ec10568c76628ff85825f3777bdad7bb4948221c0021695c5a94a37fab0604a083aedff08da91871016fd43416a5113e4b040bd0139fb35dc89665cd2e67c11c4646ab841a89fa4f3ebdd231d75c7c3ff3a0554361ce78512145d2278217389bb9c833364cd0037fc38e525a382a6177fa9cbbc2d42d7b37cccac2bfb0c59447dd11c61cb450f8afbb58da3cc014436a4b9f3885f8525b07cb4d34e9e0f00b4636c2868572a2318f04cda2c3db0af194b08d42ba3d7a317b41298420e556a07cd076680e22a7eb64a63c2567c03663b5ec09e753a5051cd776a81f159238d3267443e3ad98c95aa32d9f1fb3e93952f8bffcd2c5d234d64719099350debd4e9d512592d4c7f34af51570b94e542d9a398ff4ef607fff8272d37b30a37225b9383efdce177bef4935893dfd6270c1756d080a998a2b49d0f27c8947f05bcc081ab574ebe54ae33400cec775d5b2056d867aeb25ba6f99bccd5889f781bca92f9e7669c033c3131fc9625eb47c60c51000834e497b27eea3f8e806603648f35c499f158f20b3bb8b71d435c26f05f5a6e77dd88f373bda736666eca3f49a31047ec47d6787310b409cac1e6db8658e6212a1cc682ee2658cf33071f8ff251b27eebd5e9f547c1e0bc8e334121705c7dc0f2f2cf7505a2bfd7e927952f774e70125214d2e76d8fc239d8a510cbe4027f1a7543d997d16295c8e2864ff510378b3dc3ee99522125aead9c5c739b11982a09d157d45b38136ebbca30a467b9cfcd3e3973d174878f8145bfd8055343299abdf3e7b54e223c2436029ef764112bda4057ae97059bb86b9cbe4d5372e68b921b055740278164f4a903c28ce575abd19e961fa275051ced57e27c22571df603e2b1de660c876566d766fb301e2318eedf5b0d8084e68e2373252242a3269bee18035de8e1b17c2fe2121186598297247ca4c392e71964979c25f5a0409f5bfbb1661b85d2bb4fd0747cb01521662f324670f89302335f01cb61a4c2df71c040da8f6aaa3132fa06d08151d8e75a59acbea3ed30dd653f0709611851e7a2ac49cea70cdb22cd41f2619a5b591510aab8d0978d42b82ed783e98c479987b4a8ffa6194c08f4b39620de0b76fcb90daec97d683bf219ef9afc7fe648f5da20ddb351c17f0196e7807004caeffa01f6cfa1f2e6e6a5d8afd188e23d8a3fa14f752cf5c50e9c47e2f767c215096e651374115d20dcf042fc6dd1af5caaa9e7add48af3e8e2808965c8ad5e00b153d8da1713bd56034bd4c7f36e5427e2fef615d680d63f491b75917b65d8b035affdc95ebd3c882e224337575704bffa2a4113000a82c21f0bae0d495417939a1166eccb57a9ce24abfe6014bb2c9d00c85a4fcf4ced05050ee96c3bb0319c676b2b02798263c145a539f94931fcfa41ede7b7ecfd4bffb3b6242673e98434b1d94a928216bcc6e698f03c3c6a8490a454ce1f1e969ac6c9c470dbc4112c939b618cb0c779654d0b91192df3bfe193fd1bba0ef7d3c1225d39a465c6c8ddcab997f301c6abdc6493677fb2d8a103045daef41fd86e65d767cb4de62188c3fb2b76635154077e2dcbbe2cacd082329cba4402ec526da1e0c4b9d79c53ad10d2f3fbc7d39bc3a8cb46bf9f8fd4d231493a376c65a824bdf2ee6782c25eb4070f064113e7b55c2a02c24e9278bb40c04680cbaac9bab3b98745c1db9b7c5a731aaad58ce2a63fffcd82ad85141a0f70d88cf816eb1be7996288aa75665301288ce44013509fe671ae8c93640e1ad0d11eda917f82ba5b1e07a6da9f742a48160b5ccddbb514fbf6780b2547d362a661d176480d22bbed7cf7101041b8c84884690d46841334062007f0720293d66dd1f99a6074ad14c895e72cec586e40b7b3b29b6cedfb0494d2a4181e61e1fafc42c888095aadf8b245979e1fbca6823337d8f10279eeca298f631ffcfceb100a40051f275a9ffacb12a8f1467879ef8ea629c833210c043e89ba04884326f3713a08da23ca65d6ace67c9182fdea9b1fa85d149c3cfb0f4f4bda36b7f00cce8d96ac8e2dcd9d394890f182008c1eedf85c7928d2caa668fad7f36ab9df966daddaa3a7bbcc6383e91b474d1cde83420d1e2136941e91c4359256a4244baf14ec954036e054911b98322f405ba0f3cf51d17a69f1382f3b2f52707392f196a0b5c1b8f4c10f834bc0b67b95422c41fbf4ae2a52acbb1bfd605c63e67903e45b930629ffb0e532538a7d7651173808d6aff9a9b250f0faa84f6b61b9f4d56193790b360e4120622ec3b5e1ca6a84dd33e0b759f84d80752b1957235a1bd3d25fdaf95e13ae1b0da139f0e7c958d6ee34e9204c04ef9dc997cda5ba9ae0ecde03164dfbfb949dda2cbad4e0f58e604356a25a578c4c4d669cc6b1dc77f9da925c1d341b7c325ceda82b71ee66d3e9bd99671c9ed6ef0f3f5f4bc217e2eae6a15b6f51834a30654457e8d7a025405d695fba37af85ab553cc2e078fde84e72516bc1027b90688657235fab080bdb624fd2bd093ef7c8b4bca2a310881e62df1c2b13e14f25988f052962c97f6ba00a201dbd04abe7843b57252b28415ce63ea66fb015ab274e2d041972279cb054237ef745350093add4ff7de30ab469d43f9961283eb593674fa29516b39fec86cd008c8c417e6f8e14dd02688a93c27b50b19b0fe67ed55e1bbcfa6e174cc9adf5d7b863b233bb31ffdcab8cb840869748b6efc3a700705e18792f6c9e6705cd27f54fff9f5a2b55bc1317dcebe7b07e6bcdcc20d1b15f94036895eaf59ea7f081787cd2fb28f7f89cb36d3c031044e9df534133aca67c415b21bcc449305a3e14463f6d3919732b0993ff0b49c2d9ecc8bf3268dad83e6cfbb01800d7924257cd31528b4cc048bbcb2f8a6ca5bb4aadb7a95a3ff5bfb14314460e68c1d05239691de76a15648e36f4d2d86186c6465475868803af9b5d1b73777200188767be133de149f81c2860ccc8ee0d717495cdb5e5d186479059699bea916578367e5e73546bdb7e41508105e199ebcc833edd8bc7b61e96fa9e4b15651c5d0d535a8a5318b55cfdbc0eb4cc58b4fcbd1385e673507092c2bcdf257d8c704f1be4bec080eb0c72658afc45d6ee365d56262b1909b25188bd47dbdd3aa61c69c844a04a4250ac928004a80fc835fe6f5ffa5f16daad143ff241748b247d97c6f6fc87fe153372f7fe98dcc45c97e770ebc51fab0aeb6bd872d80aa7cf23bd5272a0c376d43198787a8bcd434ec899cd094d186742961c7d92d9e9187cadbd93d105b7fb815c3e2e2865c53c10759d5b86d532a59ec815daa8afac72e5bd347c27b449497b60740a01c9e1ab71fb9f434d3a627f70902e38caaea216aa6b4b0b0d02ba9b21e39e0dac0a82fc070b70d6314a9c1c68602878b8d701164e9d603c18a2736e88203fdc75504187c6cabdf6f4c8b0d5a944b14b6115d4a6707ccc3bc102ca3379c1900d0e7eda4c417e6fe1b05ecb88a73792e7545c6e3ace88c602555285492b080ff80b499172cc9bceb48d6f86ddc00de9f356551097e9e090d98cf1d7c3efe7af0689bffd080dfaffeccb589f441c51187b1ccfebabb538c645a252321be7cee4d758eee49bd7fd893aac54ee45e12717e9f7bbb46a501644a1526bd365ff333f2601ee31f468d61eb9860e5e36008d632c007fd5b42339ade2f12fc087853d78562eddd17e36c2b3312f61304ac0927ba505bb952d62b21071b3161a9e264335cd6c0795121c322e726ffddcd62e301f34e7cbaf385ed2eaa7978fe9826966f65ddaf2010aeec3cbe77fe2de43fbc98fb911b9e4c0a11135d4747ebf30a23aabae9405174f15d6b851def7b94c936ec135b302e207d56858e539231f3dcb4b2cf444dfefeb699002e70bb185f786a28388958a43af891c095182c4089cad4d40b3ea18f4742ccfbdf2583978de46c6977ac121a761392caf9e0c813e1c3043b923ef2ef854a9fca81b4a4c56be847b45ae3bde4af0716913791df536c3f69394f4c1b8ea45eacfe8aadee50400b6e5136020520e2ca7515b20c68aac6287a342617bfcd9abfaea0cf4f8fd5689ec6e7aa8fd8f977c77ddadf11ae6f7227f9d40af7c9ca67a4d6307b8150a168752f76f129655dc76e547bc7cb766495ea61df8711c027d86aaaef8b3a8f70ca7b074cd504c6c32d83852574c26f9b3826f2682cf006f353882616c5c135022c9dcfb970fe250cbc274dc05b5a2f111682edb4fb16e9c6d8ee2328b7b8aa270d619d7bd3729324dce53abf45ba8e29c6f6fce347a6264f8d29aabb31fbab511a2f55e4520712b72ab4832dc296130465cc2353595665bbcf05370cffd663021dca98c00a98b84ba7c8c068029ea3045d32594ec8e6550e02a52f38d56a73440a96ca375effa4dffda111097d775bb728e5fbc8122a48b345fd2fa28bf08ca18e3241f9b8e821456e85dd244d7e1f8c8b9832e7523ef7402fa06889ef2f39cf42c7a179a49f6856464dcf26dcfd8a349cb48a816484b494eab0afc3e824c6008bffb7ef9091ee4ab834a97fbc5b210b401bd538dd188486491faee5d29033d6f2320b4d28ed95d514a1c3fb8bd961981e66c6ab487d013e5cc0b8b62cb865197383de6d3506dddeefe6c7a23cb3c9ec05ce357a945fe55137f799b4e2454cb8251aed15b7662e256c803aaa465daabe1845d05f14348a76c37ec5f319e61bd032316d880051e60606df3e766ed8d8483c3ae5e46482c1c8d94b762a770568421c72237e24dd855820a3acd6eeedff8c79be3ce3702cb92927085891e2f4a4f57963334155a1c2c06eb37d8bb628a98749f1e1941a4d55b5fde4ba79fb642db66acb323f0a232fd91ba0ab22e1dc6c8872c0825ab073041bd4dd3c29e8e9726741598a12179212fbae3ab9dbb16785290e6b16d678cb3c709cab438e2b3365a6f2fea04f2bca732d8028ed49ea9695df3d8db6cd23977306c0500b66c9e8991afadb9378f47d545a83b08beb88ac0f895f2b24719a5dc7383d5a177f8cbe1e338f68ffc2ef4a420f7ee7ede2847a2bccb3cac3031132f7503bcdd307d996938f36b7b80fa3d8188eda8c6b3b956b6d147a7b2bc742d9bc8c65147de94e917628e6faafa880702a2bc0b29f1639a4597c347e3e986d591778ac4a7f9de2e6a6713fa2b140f0a671246894b42d47b6606e9c35993fbe093e8ffece1c01f5eb3f43aa008f8b6ce9f6d37832b4fe3c991f11ba29800affef1b966d47010da5bbcd0688570c4a147ec0b5e1785372f0e27a47b709570c0113d441544b4af4eecd78c4404d97f6706c625db67e01a55c4d5db694e4681e0cf15cb0e5934e044ae4916ece35a73e26d945e1351485c01e8e006dcc7f5e9b6005a2fdee48cec035b43db99036727d4e83a735e630ae0f46bccde8c7d9497e22ba00f559fb5b846167b84e0800617ad11cf9a03a475353165506a3da974034405cf3ef129b10f8b3f7dfd31c997a2133c303e3616f14999b109709269caeea5bdf79fa956d6fc99f37531aafc30373c2960ce1475247868a2e1a1d3b9193fb29bee64034ca58b460cca3a8bc8e6060ef3148f13b018f8830619448b5d033e6db04c325cfe8b90e3debf17f8834ba9facee85b8ae47c9e5c6df35d90d2579a8f03007a3f225ce13b258a041b7b606bb763e338265729fa6bddeab6a38b3b978f4f00b0cbc27bbd3cc5412ca01fa035e8a913c0c7e0164072e5999e20d83172c3a6fc8fc9bfc3a508dca01356e08f407680bda251776ad21c39fd167d9afae1afa0b13ab842fda734e617ac44070cc8904a7d389ca7e64a646fd0d87a82eb12beab62f6b94a28b755093f9e50957a77044bc74a5e2c0e46455038591c370870c3ed81139ec8b82620721404569e2a0fc68b2381430475cf8ce62b02005e5f7e263e140575f26ed4c3619ca0a7580ce61a37a70fdb266dbdd025dbf729a083dcecdd70346d92b52bb01632a91b6f6d0f9c8213cce710b6500ccc9c99b4ea6b7b385b7a2bac00c2b6d61a08d2da3b31c879c40971578a957441fd5d0e9b228b57bc5e383414ecc40e15ba69e5df6c4d592bddc66bd4497a1c45c766cab0607b5d759e3887643b1baf6157ae8e734e6922344f9bea958fdde9897b3db8c2ac0cb0dffe1a8869ed7d2f243f1da45e40ed61d5fbda29f261b09c56417e39343282956d5a99ce7af078b4b3e638a2c91cbeef484381f852cc4ed1c7190974de128366488de2139b58f5d6bd69e5c18aad8f0539e79f710d342d1c18ec944495ab588638201aa3d339177204b9f0b5d85bc28acf91bc341d602e5085cfbb9438c34ff47d55c83e5bbc7909534cbf657c4a5f7b65092e6d1653bbf5dfd8749d8e16957d12e822cdacb87d0a3562547f8c8aa82ccce7b857b03b13b1c1b8c75d0e98ec52592ea518948a490c66313650d9643ad1893ec10427d4e8b13ca12f027298a00e4f164f3544605b20c54fa2ee0dbfff5748f3eaadda69ab4ef11c4d294b8f1024d8cac2063f0524c804751f4d328269ff7b77fd7b47a5d987190dadcfb7eebec28d68b4985c0e1274c6068b6ffcf8189ded5b0f72e5b7c9f22c8842a898293f45546ae46d159233c0219f67f54f62f65d3404c9ce4f74eb62ebf940f000b7ac6ef8b186c47c58113a599ae72ec6c3b979a3af9aae1ae75c12baee05a7039d940c51028643f48be446f6cc0dd7c38d56c01e82e9d8535ca82bc3cfd7989daff45ad730b09119f2aef9361e03f45431a3bd8f4aaa92d5902f7dc76725a6b5a98dce544ee20e099d3af1e860fc7f3c9cdd244e26acb6571154faff84300c6e4369c4dc476286efef082c4712b78b4b2747578b36b6830f9ac872bc466f3cb6c47f40ae281f65149f8167af11b474e5b0d0ba586997f3f582970b7da243af806587dd4a16766074fa51a54a989fa6e8d28bd6e84fca703ab0723c4fd2413ba18b4bbea46e154c423b1a1718d13d45a271ad8fd4a01a2dddf61e344b33617c3d90a7dcd2eb4161efbbe01f64062f64002a12b87a44efc77b23bc39da67d52a08ef178790d4ceded32e2d1da1b446a07532d7dc202fc5ffbd3fcdd3a10f30cac81ac3f22698c196b4e63930bd425d8e5b19c991ba79b3bcc0363819a2609c94843054f5a9bf3c9e367183905bade67b1beb73ee4a74f70ea573450f3487773c96c05169610dbd20cd36af9e3c9f72825605c73e7be035183d645d905da198b0026e4cf2f56d6dbe19419665de5b316c85b3114b346b1759e5a7bc96002a4ecbddd0a80c7837f2e6eb3824fb742e75a4865e6073b4429b729c86f6256d916b5ee7e74035a09dcd14ebed5f1271795600d83ef44ee4a46e2afd9e2d00496920f60cc597de01457ad1e6d7a65a9e659c9dc4e1cae1e6004754c8aa71849ddbbd5f50aa31cb5ebf47c0c6440792f0c49cede8df6d291e8b98ee1d3a267d6674bec88771250ef24f386702425297291db10acd775b512f692fb41bfdc476ebd4c29addf7e91a2eadd0619d367741ae87afeaf53b993e3b9978f90c7740e03b2d2decb099c60a73cf8004c6f990c0e6537b426769ab278483b2c82375cb1a1e39d9f0c84d0bbdb23f90aa3dc1e1a1d500ea20a5d5e288dd55e86c24386699558afc1d06e9d85bb1939de9171cd4d28ba44c2edc20dc331eb27164a6e418f16396ecd117db9eca819c1f4eeed2b159c4a4528785d1243f221440c60287426915608f5e39b9e648411efc924fe156111e49fa4414d795dc518520ee9aa989ac6327163bfb0e1d5902263de38c5f4424a04f00985d04d3026d455c47097bde542880d5096e16505dc1d63f700d4a441cf3a1faea6b0be0889f7626c68466cf4d14e063369ac5e76a96ec0201c1cf95d07001b40f896dca5d2b7a9288963148e39e50f4c8ae18027b9ea2f092ea0f9f140581e090a6365efed1ffa20cfe1e851ad8f17c117452ba45e39d76a8eaf0210e8db6aa9d99a41156d91c4196aafbdc053c20c6065caa23b587606a30d936ebe5b49cdca9b05862d4d4a53b079833ce2faf6e02d728808bd1f810bc8d441ca9eda16f24a9b3fe7c5547d48075826d29de89cc57b67f38e49e50dbde1ecbc56308763a0bb9a690329bee92f9d8306b30f0288f6d1f753e63dcf10ebcdd6c99e82d72016fc8515b36f2786bff66e995dca788839829774518f39de2181702ef1b4c38a7a55a72cce76bee4a1b60fa11a8f79e62e32d8dafb8ba0037fd7df99e6ae0b3cb670cb44f713e0d0900583fe2eeeb5e5110e5ea67204eddd77131590d06494879ae568fccfb3183c5db7b0b2bebd8ccb8094a583e7f7ac2ecd92450be0eeae245a69d6e8271d4f10d0901ced00b6777aaadfdd5aed9c85477d32e2fe6690f8d9485f24b179665d1309af4508be0d9196faf0c5ed5022cf52b0eabde9a87467a39927b99b7d45122f39ba89de1ba61d6670b0c4e69a205678707681a5ac6733e4631c12f897d59c11655ef025ee2a8678ad41c0efdf2cd1cf9463a20910b67c3654efbd25bbce466d3833d44793ec8691d915e98ad92edb219ad81e5854820bb9f13e8487ab53220eefd6eb890b4a43b5fb170767fdfae5c9362c4877ed2ce7b43309e1b4003b3700d3989a5b4511ed12860715b31c3f9b295423a28a5096fce4682a272f01e2035b4310a2550b60d858f7fa04fff3a111ddfb0e4f8e2995a03b825ba10244eaa8d5093db75c1b4711f7d15a727b57a7c7253285290f31253756ce24b5c69bf049bb7522f967f0f9cb8f3db9ba7b1e833e5acf40c73824d9b2dd117edec03ed682abb6340788c51dc8e7b1e2260c4332d16d68d2a527d6a1b7ebab579c21cb9f2af9b099c897b9f676cd5a3659ce0b213f01f071e888747e17d94610f0272fe3ceccf7047d50e687598a222d13924631518dd2928332884783e91e834cf553472c709762644f9aca023b4684385f6e969952f84df044e15a60b13d506bd126eef5b550f60cf75cf7b8fc68adc5fd40a84ceaee2117485c48959fc62bbd1f1fe9bcc5b7cba3ef2ddd940a191527a36e6cf88e58d6ccf37a2d37d28fa594f68dc9e071f13c5f95b968a77a9aeef4ea4b9fb42eaaf95d12e6793e8edb37fdd669eee094415cbc8d28d1a9a8b41d41dc0f835bc22cd9a5b2e28bb467856f788d31eac99ec9edc20ca4e2d1f8133117a30141f8fd04908628245514e5b788b6d73d97e03cc581544ce4ac426e82498a081b2233fcd19f532adb2ec4e31f4773c01d65445fb9265cf632df4fd1267553f7b83ae217015cd0f17e744316610bfe1340d9fb1bba49a6e7c5af66167ab1ceca5c8ebf8b2f4fc4a4f3aee5a93f2a2782660f5fd533921d49f3ee8022875775491a3bd2bdbcae9a44a1e07985901df1a8cf01c5b95cf4baf09ea7984013157a46f3763a5e08c885848c7e0bc6c06a7488e80ff11ed325aff15adc884d71251102997483d6b184350d1e5112050900b20ee629409691de309177775a1c4dabc6a325962a0fff88865d7e028054849115867ab8b73723f4a8c20a4cddb2ca534bc565f8a9db4c2b0d2b838ffd83d744af27d0b56422ed600e8a2c2c98c94eb4e5a81dbb9759c8a14188f2e95aa567f1cf23459944b6bc27a0aa5c15a05b2c79b646e9de41a40f567e40eca3ce7df7bb5b26ccf96eece7a43c1bc5becf3eaa28bac924bd595bbac968d373f64ec3ffe340a5e257f6016dc98f639794f55c13d2c0fee735e840e76b6b0b28f4a1e3048cf6ff885302e70e280dc7290818b9a9be68a9d2a5e8e9b6a544059f7254bfe706eb7c97f2fd5e2c0c91a6a6955d9a532cdfa8fc4056f57e6071632783a0f5c73d492c80a714a5691424c5fa3717c760c1a0f9093e0e5f59c5186eefccffad09378c129ff4a6d4990e7df907d0e3ccbf87c3392dd8509f015bf6f55e9263b0ea050f2ea7d044912f7416bfadd042aa0794082d421c0ab1e979007f10b983f24424171b14ffc5ecace3c1b392b7a0db934c377d0caaecbb46da8381412afe4e83095a686cadcfe204d16d48994998a6e48fab411134000009a114d76773c79f7827f5f8cbeac6c7d9f129324b620e44df50cabc9dacdf82afa6a6073bcf03c3bac9590804c96f7623df18c68c69e5bf4cf1820ab571c93fd442b4c2a2eb88ecbb61c486ce25e796affccae4a92917d4ebeb8e2356327451f377e9de7f46897912f658c9348a5dc00752bdcd73a6565c5d2077987e4877986eb4011b85f60359f1cb2de8705a8824fa0d221b580fa44ced094dd2707fe07a1ee36ca2077e6938013a8abfbc3a638c4f7e3c6384f0f6adf4b419ad763cd848c5a37af500dd70647b238206e58789979018bd2409bb0c0d0a8100345c9c12a1527a0c19f69fd0a06aa1217088b912f976d62bf29e8fe85a03852b94538e812ad7a1b987bdbbd15256e127e298967916c20a8d215c95590177e8915e083e331c90983e3058765074bbc322453ae0e7e2eddfe2dfb1c8823325ce7d4036c522cc0dcff8283b30ce22ff113579803bf73bd898312f0210499f60dd3c80d4f889ada10509f375547d31df410f32099901a98ebee7dd81b7de152fdb1d59841b55ea70df4ee7f57c98e65b28fe91c243de7ba176c31a3506bbd7356130f35c89c2c79594efb793bbe0308f8ac5d2cb6577c246da84f93aed6a63f8bc877043cf77237a1972c5093e92d94ca969ce09fdf519233735c460df8cb081247c7cb3cfd3ae9a5051553af6ff02ee4cfb77d566dcb8a5d8d333f66a4bc460b8065b73d506aa29f75432f8d742bd370bf526e2cabed3f2a4ce5d43d1bac6070d9fd9cec42b810022fa28a147cf385c45b004c4aff297f229146f50894ff6a230a3a942c103ca39e4843338f633effb85fefbd2190d4c5552b323738efda809b37e6a1721c2d575d568e9fa384486deccea584e5394cc52062cbb3ac13e268b1bafd4be739e8dd7a3de6d43486e25e6465195cb74122c3e35c3f633e2e120152e239e96bd875bd7fa07da88c4335711cb40e817ba6543dfc020c4f0d18cc5a92b5b9786a624fda47314e556585f15221eb048c8e0de12c0ee7b0d2b57a4091845e79aab4bf92a4df0965754543d82540a160c7c2b35ad0f27ac79e294d6e136ed40307e481dddb9212e31e3d3d6ab31808291c240d42265518211d7c3426a8802ec846245374b7186c4c699fb28a346dee7aee584319bc14a365178ad8f4dbe47203624f306867edf97ad0f8119e585b33a7e84aab7becc69ddb7cd02c543279a2ca23b9ae7a03b87a56949890fc8708f020eef8f33fbe4ecb6dc1b851caf1b8ecc9c626d51108a6ff7aa12ff72abd2b6e7aae98cce5ac1af5afc85e095a17c8e7741fd10c5c2dcbfef0973462f9270373d1261c1e695754f2bda43e3ac969ba50bbce2964e83108a4eae2d1b2ee1810029e922e5cc0d5da58f6e3980f408794208e1478ea206ae517ceb5334e43bb60c0378e1b20b40103fcbd61dba379c2a65d19c9a81b124fd2be89540bdde8160a4ae99b0b988df4954111531188c4d2c06afc11e217585ee66ab53459141b4e35e174eb0c56096cbd0000399f5eaa150db362f2a821b8fc42090d2e6f15d6a7021dd80e6b179be665d44000646c5253c611d38c829fd3751a154e43543359561c16aea32cf948e9966a47dd6535a0b065e016ec147d406f870bf2795bea1a2fc3a6ff5d900f3cb6a6bd367099d63972b446fc37e0a149aea5f59b0b6799c19bf0aa9046a367d929d21392533cf739f64598656bc86ea7ae1bdd5075d227e387758e086043c255579b6eb7bbbfb95579bce6a5ce40da0d8c9c443e578209e9e26ee9cd7c2d66696436f3cfa4ff72990fd9302d5b0a75fb45af2f24a2fe3220e590ecba70cf8dcaa79a6df337d800d6e10ee8dcb2533248296a7887d30e89e954e2964c83299fe43608c3f7956d4776563c26d7438cf5c14d77ddc4c67e8b4f12ead8f3273ea99c4c6d8a3c383fe0b529ded3a6b97ab2a9637b0461ae6859770327c49cbda83fb330aae14d5682f648a456b03d4d3f21ae610209aa123926d8e83fbeff1d6e500c00a266ec719e4b78f57d9e78942f7cd6185879f91e7036ac657291844a536bcf6ba4f792704e99b948198caee8fa0bd0946a1d38abe4b2e3a6ab8de9b1b22e7cba0a2566dd18e42eed08f35518095260f258666b3365377556b40e2f06dfaffff27878c6fbeace0cb85ba413eb844c27f6745d214cedf5bbb4547389e008236a3a8d2ac608f118ff4ab8a482cb272d95921aa9b96a9b2e1fa7cd65ace25b55b5b617fc30527655b668bf4f20dd77e0a4be24ccc9b4693354499476fc3d101d7b27e52b571423e92bdbdab7b5ac62e7dba8e8fd17667c7586b8e96e45ad59161dc494da24a3e614725309f82194556c39f363ced60083a73dcd92f985eb2e405fe0964e596a7e21477452d7fd0c3204585289dcb01d17fd19d607d3636a8d39b3ee64d6a7d3f7384b84c884dfc2577fb907a87765e14d89a01ee2952beca118db19eff8f337f36f1ca58db0ab334f3edd95a8ebf599c047779ae22a4b3a72a9dfa7fcebb11dd5e0d4eedf02e6fb197c76ad81ad917158fc1d279ccc8f624ee8fe46edaa9a36889ddda2a5dd990416f82b605dbcef394e7412ed04ad3c41bd85b5c29d3a0cc00b8cb1d9df483e302ed5f3038ed0d569851adab253dbf37dd67e4c58503a40d0196182e38177d7318696fd2c8694c4bf76a50dd0d6908c393da707100eb25fd51e6ec7c953b19a969fb3475c2755000dddfab41d5a41a7f4b95cd8b72e3f6af6a59b430ecbcd9e68b1782e7ff5ebce4713ce6bc73b99d9fc94a8cf614a275f052e9299e0fcbac7d39bd96ef9fbd477e18714beba6c00317778f833666797c6e5c710d34a2f10d7b9155bf73428bae1fc4e9ea11999627ecfb35ebc64100a0d9d8bcfb48021e626a585bed15ae999b5ceb9bba30cf96d5612e952d5b1b45becd7738ae0979b8c9b2155e09248de82f50068f3768304bb9a958a8214e783f2f2c794d7bc6590976a8077c8b2b9241670a284bff1832dc3588b35d581dc7ee2b7fdf7f9fa1d25fd5d39c37775a8fd3561a57cf50a213c16f70f273c6bf5434b094e0422db65f01dce6e8b6bf5d81ccb9d918cb8b0f35c08f6bf9e2b1c90790e9a753f0a42621aedfe7ac5925dac937ba49d9bbbd418322aecf140143a574da59f811c6b9b359df07be44a45d9e76437c8a254e26591ada963d155432883c164b979c7f3ece2958286d7d8a439dc54074d8d92c1204fed9cfcbc7b1b9d9a58a6a74ef2d969e133d04c11ecd3b17252d5036dff84fab9f1368868ef97b1fd3cc287060ee502cfb5b1421a297272684aeccaa381bc50d2c243d5cab634eacec822d1fd75df5b12fb7d8d7d38c6717776683c21f50737dfaca4d7c27f5282167024a0a6c5e2b1bc8d9937ee1129fd12e565d3ea6780e6380822927725607b8b7a068f116906c857afb610121c4bfec8103be15c13343f5be912ca73cf2da3d8d1e671592dbdb031a2e1dab7969af7bcbcf1c8d02297308a1e01f13999c55cf3dae7e0e918b9a0e4cd4a602b1c28566c8a9eee502de4c67555bb56489db5bfb5044f835c018885fe0ca51d871c7e830075028fa2fe3851f6245ebef340a8582a60358f2f323f5c60a866e0ad1a4358ec6c6938dd5a1fcf6e6b2f8b4b83c12aa4a8df4626c37bd24a60adb2751ae16e618d67ecff4d8d03e9dd7dddc1411d8b56766b244af6f9534cf4b783b03856d00698960b330365c2e00572d1cb5379ad99c1e8494fc6caa4b71413d80f92b2300aec4093d2f3e08b0e1b5cc715e08098e15167bbb6cabb42c8bf13b4a35db7ea04c1de67f2f316e83646d8e4d519362917e77956973107c189913f391abcebb247df6d1915caa501f36d466a23e243751df6a8e76ba4412be50f3a6cc3f872e1fbea1c3070916156034a4e2a9e34582d0e879b3d75bfc1e211054b9d0eb76b0329c634ae5fcd868de134ca14bb4542f22b1641356bbf8aa38aef5214cec491c42522d526cced9cdc91af6e530c3afcddf4b85702020d204b6d44ad059e096d2cdaf040af2e01dbad1211249c2ff6e87285d629753d6b69281f51d36648dc8521e3410514db495d55aa13feeaa8432d04a9795fc5d626f58887750f3ba6e76226e41ce3db37a794b9584593581a50ddbef6a196f115e362d0523691f2f4abfc15bb0b26d6a11426bc77802f02fd47c59edd9e1b1d4f218b9629e8c1c1ec9b54698ab44798c57850bdbc99a55807ed648c82364838ead66f23e070273d86f934a5401aa12fc0a4ed4d64a87c0c71d23658435e5686f69552f0ecb0ee456e588514672a540037a65ea32da1e792c8d50c5509b0aef99bce5477e235ac93d54d23d10210e2576701c88c36e8ebacb49098cfe662253921a36649bb90a574af284829095a7bdf58b53b8a1b5d39853f2ba3aead684132bd3723e2a4c6f833a625bef11b71ae14da299be9f09c1aaa9bcf2b79476aacc86dfdf327df06579a83281465e3380b3d67e2ccbf2f7b066d5113c07919ba7e9a27afdb17d9233075ed7891ece205e172a17d2e979af474d0e28a6c6547d891a20320bc95606d333e5eee0033f2d37ddd1d75ae3af7bd670538390fcf853fd6f9a5c51069c3ab8cf06f8027d53649fa972684398c21860aec42cac08e0ce6f1ca0967823c028a429831f48029da519586cfdfa3bf9ac6e088f06993c294872cac9b4e0258d55d441d1bd42cc27ec6cc3bec860ae9c837b09c72c6c9757b41f3e48a680fdc9fc3797253cdabcd6b9ce45c760f4fc589438ac7bd9922fb970e685d203a02ef363a1d4a24e04f7e8fc1c011d3f119f5f23038aa2824693a32b80b5e0be091a46dad0cb789603ca6ec6f2184baec1fce180a40f21362d50fa0a8b1a1dc34c869b1d7a96f4e75bffcf31d62a677aeab4da0e840d10728a472d8eb11cde9a2f2740df86a347d22011f873ddbd1bf55c324b4db78caf04ab63b275eb14840fa721cd2865c9e735e093b0f2fdf0557da2ee84e24e2fc768ca89830f7d98fc23a57fb9d21283445aba95a81f07807a259ea0a30265d61b89a87afbaa3589118514fd6865de69c26e40983dbc83de482948d67d1c820440a6e643918d1a94b232319149cfdb4ac857b4926a9f6566f40413e7a02ce17cd0c8e00e003b0ba8a9a19e678b0403daa9f83f4d304e52ffd6a026499e4e620c18786e21c8b3e44c54b47998dcb03661084a6f93e77f1aec0529ba4de0d8db567f3f91c4f645ab8f45178aec5ca64c2fc067cb9364d8ef2e496b49e637e4972c10f08cda7bb667f798886e44cac7c9284a335d8dec41aba706ca978ed175ac380fd3c458cb2037d588d0b05d7d113c61e101e3a22d38b23608a48eb2d29d7b4b5cfd39ad233fe3d70b6c29ac346a4fb256b7ff8a667345fe54e320ff4ce96f1ff1b95805542b3a432e26a20ae41d4b286d37451064e73d32fa2cf0160706b594a36a4165f5660c5399e6e41bcced5d22d8b236d60a38b8a12c88332c22882fa9b9da5673ac9f9263eb3832c0421ddc085843b4b8c1c821b1b159b78235e05f5acd812926b47a91ef781c0f095b3bb2ceb59aff682e6602def01d00bb02d69041d812bb50b611186df9ff927202f67387944290d76698cf792def00d39ab1e0d8fd96cd346016ded81feb2e79270f4860c23bf6240e7d5b1000885724f66b022d33ab8fcd978cf7fb0ca8223cb26f48ee81c4b840e098586b466975c6a1ed16eeebdd962a96539e22f2f5fe0764eb7aab0a8d4e9ae8061b8f739be9fb32bf65bfdc9a4d9784f1b4072bbc0819c54ded092fd72ee301dd0e97dc4f41ef7cff08e668eb97be0b4a9aee1300d5f896317c20fce3226ae24a65006c9df9747b043715bbbf2e3dfd186d690672876d8b74fe938a24c869d98d5cfc02cfd93f2ece86066876b6c2a06262633eb65759e63dbf13c6aaae340c2b0069bc0a49e8f5e4c3ebd14b024715f9ae5980df037b0a9d587da6ccfb622a881ab3783881c50ddba881821074291cdd8f7469fac5e61db1cee992a57de628c6809b9985676005bac2ac64937c35b5d6c5c558e263f12dda20b5fbe7c3ec1a28a007caafaa554add0eba3f6dd81c6702a45e3183f17d711ceace4b3df94a443f1cdf99a1d1b6a341f9c9a2256b854e6cc4df4bb89af80bf0c8297ffcebe2a3dba6124bd89f41e5c16d1f6c8289c469b457ae8a0271d7c56fbc2a9ecb54e0aaa76d20698012a18353f4621c8a5ecd8d3e0dacaaec3bc8c4ef8ea8590b90ad6896e78be5f0a874ead8c72ae22e1b1fd31f6b1ff681c208df36419553d13d3cced20d3ca167721ae4a414fdb212e27424b1fd3542598fc129f2dd2ab76b810d98f9fac4bf173ae5727821f4a2ecee4135830a776edb52c9e2a753c6e3fd737f659e135323071110080b74edc656302816325733843a7925840dd8415672b3aa39327aded11a269c1a13481eb32bf5a49846a40e6f7f1a574a38de06cdf51c7301ac052c9cd6985a8e2a3af3a3a1b7e8618abfbb1f1863e96bbebef8e021155da0278eecbd7b77ff79d01e140ddcf17a388514028d49049dab6d42f5d12457c0598135390e83061020d0a47d0aab6c40750cf1f9dd31d6ffd2af405b7f597d75d91cb1407d8721afc6436a858b8ac48c10da109a31c64a39fd926b7ebc1b0a9326cfd5340049ef4d84ed3a8ba4e72094b93610297d2f68ac20ce77159036b33626c1c5fd9afdd96fc8a69aeae21e65564dd9d2620cf9ad88719c47f38d90edf32cfa05c22f501ccfab3cd08f81a9bf6ad29f73df432410a290e417c60bdb4c57878f790f31c3309d58e8308b1ac17aa4646ba1d6c86a535bc31b6230460e27ba7885ebe96e95370d47978e4648796abc4067d2edab205b198cf03ba192486b0d95381fded5a289cad56403084ff4ea61872b4132866e444ed16dd3e862334e34a34c2fde19e31a8999f1fdcfe46d470262a6560527d6a7a0f5bb15672f35bd654bf31a14c7167835802c5a2cf3e410cfbe7a2ef30148a86ca91216b937d114bfd8ba89905a53a7b47a352899bc04b1b08a8284194c28e926b5c379cfe26b974260181a9f75950cd84a14ca6ded792afe8147f3b4de2c3b11430ddc60cba9e2a701fe897c2f2f18d4fb23f3ce89c77f5c9b0636eb3acd035138f95f1feec91b1ebc9ed9a293491ec365edd9b7e68d2a67b20058bbb561b16f2dd137f94ffa7f03ef4779857e6129466f7518bdd4db42adad7683a068939f0a7e65cbbb2fb82498881dd4b9e0c2676690ff65843a4346ae6d257f4cf05673645b69f15c2565d87a724cb95006042ee1d1a9bbb86f0054ebbc1103a805ae9d65e408dcb311a941a557865b795ed1d997332cb7dc352fb823d19efe868f24701ef8707de40ae48c2ec1b70f83f9a7fbffa17840fc1cc09ca21faf2f7730dc7ccfda664655c025480d4b7545f5ce7904de326c8c518d369fcd0ae2693000b482412c7931dcc002288a99f527b1336b9631f95b036f73a4860a6740dab0f649e28ef7214367d59a6ca463e38ba23c72be98a210ff03aa33b018997500fbbbf2975fde98096bbb0c514361f61f13e2cae2bb4e2f271c1989671bad283fab098c19265d79568f88a7cc0da7e6c3257f4abfc5bd09233a326e57e7ef89512c357b0ad6b79169870982010517f9620297a5995afdad710431c33f0e14b5d35cd62f7183ab1baa4c139ad2f962d38339293e905e10dc408a4e715be2d8b82755dcf93057c9653644d5727630ca511f6db72a92217d8ddf7b5b8ba76f3bb630f0d9abc510b5a1b66cd83282615ac6b08239c025e31b84562c831bdb1d170d62ea3d1c7c683206272ac1d240f9ae4969c85fe11ed1a7243f4c35767ab0fc42d21eed829aff653a68de0f8f8496001db7ffb51905e5320aca8f40247de77d6180aaa32ff2e75ee08f2fe51a7fa34affa9767b96761f0676b6223d4c8dda22e1a31d848dcada1946d4a50ab05ec68917c89947b8f4a6704c1b991b5ed1e421f7ee0299bfac369144fe302517906de0451090fcec5f6a9564d8f88164e06def76bb99d10d8fb308c8bc8b8c53f2a72603ec3b415c3ffd7441846a592868b1c8c006f123e8ee587a3f9d4101860a8ee11f9cd24ff2d2763762074692e16e6f06ecfff430d3db9da0184796aac54a570bee2595b5fa39aceed5df3234ef0e75b8cef3b878b129a7894ff81fecc320893a0e08d4da73748396fcaafc4ed75c4a51b2220442ec00bd3780223bab775a90856388f01b0ec36f1e828f65c623d15734d5da753a22f48e0f2d78ac57e94e1efc68d771f6dfd24a0b49b5b448009a875a71bf9932b81fc385e62b3475736ea2dc8441e66c58e54364e92ea510fc43f92dc4acd220c7ee0d8de0cc678de41cdfcc4399a9ead2f0b0bbd8f24725fb5f267450f294522fe2700728969145b2038af9e06488632572b88bd25f67eeb14f0c8c8847803ceb001a6f31e630f117fd20e5f2fe5d2d0da3de9f7cd89a64050a763f481f2772c3ce7b306fd506123f4c35a955f115502c3d73b87f918ddd9b4717b9f6bc64e84dd667bd5d5f099f388d1fbe0e54373fe3e773b1bec710f7f76192400cf5ca6c539404d65f080c2a14fd6955f2db25d5bfd052aa10457a4ecaa41e1de52d842345c8f834b5d6673ef644492ad7a3797e94274855fb2e80502ca4c2089c924d69d340953025b980def3b7a36be2ad33b451a225bc2dc23a261f51d58cbd1dc8713fb6184dcbae9727254907d879f50104018bac7cc19f4a8380864c5873f990569e4396ab0fd518f5729e86e6fe0f85ebc5cd967cb0f94bf5d0b4d958e9269f68aaa4d19f67624f711991f75cfd0c017c9fe8c26ebc345b5bd623f0f712919a3eee74e790202b8244feda862c04fecb38de203ec91cf49d49e1a6b0a64cda06f83b3a5a6d0df0a5e3e6c43efc6c83f0d33c6be03b368a0055165e3722f62d7888a28dd88fcd5ae877dfecfd0349f692dc699895a3374368372789a2b53ce38111363fa21541c6ecc034bb08741cceeb20e1326672ca536c810dc48dcace6c10ccdc977b8c790866936b006fb82ae667323a8bbe0d27a88e390530bc77f1aca98fbdbe23b8a71b412f3cbe1088ea56e9e33a6cc434051d9a39aa2ba6f116944dca12a51a7cce3f094826803d86cd73117c2a6c776fd0f71a5f77f0e11cbc9fccb0d4fdd22d5e67afe66033d91788569d2581b1714d894b85301d90778816b9947dc005f5f5ecf818276a38fc0f1e3a42501db0076edccca68291c04c22d881cbcd2e89d2e5ca229e7d88b30fd7463f6bb9026a56c4b048b18629d8c4077dee7ddb4fa7a5ed4ab709e8f9364f4141ef8579e217d855d9e849c6ef275de7ae47d6480d39200b6c2a12f5d857502a731e4bb38bf45893564b6c0561dce33a4f3f8237fea1d76789616427fcb165deeb5b936ad19c61db4174fe30731cb5e982ca0ecf34a74b4cda6734ee3ce2296e47f0ea0ef894a97fb12421b82eaabd265007f6b433b2ea0331c345a53c26915753b7c5f100ddf38388fe0f13e144e125b9eae47f34288fdc2adef699d2ab6bd9b8f13bfeae5282e20958db6680da925afbcc06cd9c80400118f317f7592ddb9a1f4c7dd00c94e72198dc909d6e527a1004bdc9f9100b15493dfc5315dac62d81570e496c24bca6af80c2c4f25b24e82ed9b02447622bd53e3e2e3f41f24dd21c51cd0bc6d7f4657517e0a7e49bb2fa896f448540ae33a9878ffb0e222d07c154158981c285c2813298155b69bc983f0d4b3ea0b20fef42f52b95ea882fbaf6fc18d19f320c71c2efb4fbe15f8f2fa00fb686f1caad42b29d7387bc5d6e94b555e3872961c2ab4cc97b2ac15c14fff097c5f315bfbd9e6a2296f561c2d6ab38fb423b18a3c0a697c64ec8782e9c2fe64fa25dd724d7fe92ddad607781b0a2a17b079a785050120add851e5087c7d13016e4bf0865ef075cbfb8bca465621d1231a2852185d39782c8054ce0596035fd43b4896047139c00ba5f081bc2beca9418ee90ac777dc6318c20f7ea5a8e47e1ae9dbfbea84b865eabdcfab5fc22824497265bd8ad676d583970e530299e1530eee8f4341d6a7843d2c2ca553249a19a1323b61abf760f81c25b8f31701ec7eeeee824231737689ed10b373b7d805e4fcafa52267d0fa5b23502635630ecbc6826cc426bfb83c4ccc4b81c80c5143bdde47a4ac9ece8424178224372f933804e35b671d1d79860b6633faed3b635f9238cb396ffbb6a4f0ec5415890763a5bf25a08d9e5bb621c8677e4c932118cb130cbfbe84b778770366f7f60eb99fead8cccc7a6ed644229af286d51a27abd405ad2b70ff35176ec9efda3d5891edb1d732ef2b3b9cf1d33a250b591d7634cd7e5e83515061b1b0752822a867fee1df7f92a40852cf72ddb3508629f001294ba5c63d12864e0c16154544cd275259e22e1d6b6f44e4184679428272a91663051da3060eb73b61e146a6ec35ec9b12cdd7c035da6f71af7a08c2edaf746080c71747d6f29fd25a49589d5b0be538c87d7f74013ff176a65f566e9ce882be5ecbec17a5cf8e588e6423a3b6860b583716a5957651be47ff875316acfde4b0c214b2ec54596ab623adb045b3a117d7f285bdb13cf38e14488ccb90c61a87b68f7f2ee1e979e8a3766a8377d75eee962ab1e2a851d96e744d9e660258ef2ceeaba7caa1404f53165f45f05ed6df85e9a1cb6b4102915e77c25454671ff19ebbe46199b547b1a05f70f9c52091e27b65739adfc63f0b7473cc16ce839845337309377b861765ad67266a60c3b8acd9233246b1227d3c003ceaf8d901c3d6a91b65edb26cd9df684aeeb66f974d6aa1ab3452a12873333adaa5b3b3c39c351987228bac273ecc5bc589bdadb6737b4407c57cca0d433c69468c95664dc0590a443464f2b447283dd76826af942e3d582ff2c44045ebff68bf181a192ebb55f68ac20fb8ab092bf95ac56200d43160e31f5f20cc4dedf7f1077f974a48ed4abfca89bdb8d695cfcc9b430f983a1bcd798cfd6af71bbc11e59f325ec6fe013bf694355e7d5d521b8c19b8f6e9df6e0d82a2bf73b043bd7b46cfa8410e11c00736c691b63efd6ceff4ede14f823143a3afc8b131df113b0f53756b0785b5c6ca4753174af9be378aadc0c865ba842636e8bd28383b5c2cf5ec3fc7e204174043136cc620d25084eec0470b7d388a4f2888aebb13a075c43726a5562a5c3abaa2c7b6f247162092673c6dc2d93ee96183d84ff28c571e27b6a67efcea21f17cc3796e1bcd563f4035214dc4598f79c703f11ad74a8d42f310ccbc1b63eda93bf115e2e34452a521c61fa2b20eb11659689b97b92bb7a765c8b2cbe67ba5615137efb8179bd2f0b52bc9fc20f4c3bc438aea2915a9fb3f6684d29617085eda06d41da8bfa40be541c1cbb0ae2e6b38e20326183f8170a43809b80e32f0787cf979313abeb0c6291cb38b1afdc93495d58ae9fd7bc1d7e12811a998c32da9b335a7745c213509188b8a112e5093c4c305e6b46cec24aeb410a90d2cc37d3ff6f9806223e3e249f93f5cd2f861de34cd8016a46f6dc119a96b859804484eae7908d1a1d8043023ccd76ae98dbfa25e2d1404467b18b9a92e7e58a0fa56889935621ce6dfa649d7ec3c8442ecb14bc9c0ccbcdc65875c856e2cfdac114f100e09c4845103fcd6588a350768daf0d0fe39d8b8407cd6b408e1bac30cdf9aacdfd743704d1d67037fb43df4c2e89cc5616174c68236a2d5f300019a0a042cb375a23785727aa23d22ce79d826bec21ed0fa1a2156268de98767e35cf1a838161e3028108fab025d60443c857377178fc0d746a8f5aeeadad9ddd356b5bd4e1879c9eff5df5cb014586394dd217fd2c4a858f2cb8d95990ed808bb482df4939f48577249aa394f038b2c9386b52b9530cc800ad22630801bc5fdd70fb02eb72ca80d7d469513eaf76b5134cfcf505cdbed6f528ad82b09afc3005816908e5c7781e3094f86c1ad9707750b927d6175394d197dee9c8f59d0131dddab68b845a579941a76188c94aa80681c27a2d2aa31aaba169f3183902f69e58f1ab2beebc242aba2041f0fda8073091af9c929e26057cdc50e5ad95dfa42c61ae81913fcf6b06772ce3342e5e5412e7f90247ca98c960fde9a219150bcb7715250c1cac4ecdfa1c91de4f76fe609b8d332e964a13f0da730b1c45d48b92d82d7299e42bbac54f271dba107c55558ccea31e59a8c144704b63509667b3e30daa226a6bd1e4bdd919eb6681e350af3cbb54635525403dea3b59810f34ba676ca9fe54dcfb6fe44dce0eeccf0e9111cadafa8bba0c10d8c8f5c523559c4b612d58ef138d4eb625f491cf9fcfcb972d0a30c24ef069b70e6b76c3a92f39b827d041c576564b65493a5b201744891d4fcddfa1cece6c8ae9279233b306336cf7adc66a1f46bd0fb5f5432e0c70324a0ca88ab815df8bd82e0e93f6a3b426cafe3cdceb2e86c8df9127326d4f7d6756adfc71f417b546ad1b03ce53e7577532493de3b1b1e20ba9b2d9e19628f37a59bd588d8c0c78a4566591d0e3744d1f5b886af9cbfb5039e30b9f4758063764743327a4fd8c1a5689006577fc6ba3333435578617eed86182644e891a85ebd6fca882784643b9e82976f5420d19b9385059a5dcb7a0ba5c004be5c7ba64da4cd5a66a58e1627a336b3c46128f9229161439729f4d7a48c628cb57eef1c78623e8b31f32ede6cfb01f444164e9d663e71b91c72048b808f3d2fcb43a6b6624e4ff8d8c61fd5c1bf8a2863a894201d1559a2a846c23fd44ab586351cf48091a441bb5d7b64a7b359ad5d5bc01863f1a4780007ce919604736b29623351a8273788f51db83474c952a3c134f2fe2c2943cbb210a9f1046af65cb45f7471cba7da92085aa9f4387db91c947845ea57e6bca55fa7b6c362f5cc2b8b98ab3bc1cf4a577240cc78a2aad422a596e01ed32729bda30fa058ff4c96cfdac06fe153f3bf13f92e38ca4354e4a456cfb4e4edc4015bde4e8dc925f15596ed88fef181f4dc23aa6ca22679c390d3c7052d6624b8f3421bb2157db2d161617a3d899cd42f608eda2f1bec29dffc44208731ce11805017dd7ef2a3244e179508cf3e78769795ab39ce37126dcf1b12e7afc34df7231109b2d1908091f46bee067d0d452c1fd40848d24fb38b0bd10a596fd37d9a0b98a0d5417434715659c0b913c26df21e7a57ac6ecf6bde89ad364644c83cec2e1c2a0df01f6311ee35a56f41c78789f39a54c48493cb05d0fcddc7e9f78999fcd239d451640722e5c37dfe6c74cd17568455ffcc41e6fb581f301bbdf621d79229e753d430eefe63c04e5861fdda2f618e9b8c7b32b6236a287b16e44e9e35e240691e22de591013ec8bc36d5a4731a1596d2da5dd7e8d725d1c4a02c4e8de85bb6a4624c43dbd8474de8e0edf82d434cc9f61632f0b42a8ed327aaa08175fe0d5e5ebfb1908f865ee1b2a377cba60d438ed47650084d2391eaffc6ae01616b8a9422538ed203e7912f62e52e720eaa30088d0ce11c6cf70d76cddcc7b22e765f3cdb02d8f541c3d0a2e0bed6844477f186ebbeae98815a49b3b84d964071f1469552993e8994913e649b398bae8206bc0e569198ccf53de96d2e4075d584c371cef9c0e7bc54d049c07e9205b8c6d43a9a21ce76ab4e7b122957b27d0a0ebe0b4ad2a6354a1814168b40eb262507db669047ecb343406144f69a7fa7400e6e6febbab6645e18cb7b2c86b37d1aa9edf57beb46e45e0aefae74adedcad10234287a1c55df5f042627a7d70c492b7613ba7e84194f7d6034cd6767de8e3fbbdb1fd5f020ea98d408f14b09edb1e450c7c4ca702008ff4ffcb071c54c9ce5e52bcba7983332b904e338822999b9d6b1e8cb989f19a22cd20c318b22b453650fdd099b434854ddba360a5d0882b0cfee52e33ab079cd05ce2c0096a796975e1bed95a310745b1a0810c44a72bc97df694060e2343bcf3714be6997d09a3839e160c7f4f73f351663688639a39fb6d0ef2add683d7995ec298238fc62a02e42c493f511595b6600f4adb145d361082323531858509cbb39e0bec1642423e1bc365ac0c942fe83aa5809fc935e9d656c5b900e84d95a9e888eff2b761310e31b9691ba8a1ea68bad19e10e56fdc5c2d04ab0dfe2d08d172290d2dac988ec81b1a5803e728e869f75725c3f97ae56e72e7b0ac80e42e358d6431d13fc1fe99e804633a8f1c70b869d16e2ed202a91a6ea044a3b89c0ec571257dd3145fc45a2db15528360e0b18bded239dba7ef1f9ccd0a6486cbfafee42d1c63de00487614178c5b5eec2dac80dc9763ca6bf1125d8ac68296b1837776d1a92ea68125b79976bb79ea09b1cb3d9d0e472c619f52406d9e3c9af334441bdf630755b4f507845699029bde7b222293180252302dfb8608639fb310cbc608ca92a5d7a0b29928769092bf07b6180e47291851e643b95342312134ca86b52feabe85b9bee5908f9ba3e23d3fcf2c53c6bbdcd7b332b89ef6e6bab3d9f93091b00920ae1afb7e3db9450ca69051e12b5b262e826eb1cd10683b4fbfd6e64a2f88cba1c8e8b07095e8ea78084918597fefdc8720cd59fe0eceb7a844bcbc67bf84a04c530f0abc9c8cd90b585c88b241bb01155b31ea2cfea6c07c36245168fc647cc3a6d08a910aa3c08668f57af28e402009e0224670cf9df85f57169c79af66db0d73d3bc8de492a80c5f3c4eee201802b72d6909d95dd6a749f9ff762a5ec5a11eb766739a01dd56cc34a50224160a37924cc9844ece95c6b6f1cb7ab7e7497aeda23ce4e974e97f81776cd24878b1bf2afcbecaa248e1b6b3c3cc49845281bd0798fe9a8e80fac6c440d6e6f5284686ad11a6668ee9dee35b197a3e9f0ae1b9d60cab2aadb66e4605fb35cc1820dffce10d37ba1d0b6feb05506c1b935edbc6792e35d3e5914df1efd1c8f4b6efceabd196afbbb124ce2dd6edac7968c6db382e3f806ac52d69e8c4e4692dd67324a7b4d3b45c5af85f3cb5475ff0ad00f6c12c7758a7736c74c2f8da23b14e8e1385efc29b6df93f2bf4ebefbb1a3fdedc671bd4089fabe19cb1da5955d73a3e61c9a5df2088731f28c037a8066387fafe98368b8037d179084a3f91e761bcc4ef0fc2f0bafb2b56f67611334a0e3217b643277a82c369e1938544646f4aef255f6b31e5caca211a5bc3dba610f1dbe9aa2cf02db5c78bb245fd1af90e1626bf4242518d842100d44548e02ecd49e34083f2304b982d55742d454ac1bf9738532ea47bab49930aebd37f9b2d1ffc5e424a5a25e7da6528c1ba258c280c2031a6a97204b39b4623026a443095365dba75daa5d22723d5c14b809edd47557af0e9cfa397095e038f4fb1ec6ce409d8b8a4c977768a59a99d1fa6df04ff8012a940ff1061b9a937162d1e4611571974f620c89a28baec53c4970e3ed2119fec71a51af28ce292573f26cbe1938b7a19779d2e3cc3b030965543c7b629a7609d1354feaf0d5ca8fcb57fa6e4bb720046ce116729d91d143a8f2a090f0c86f52264f1b564dbcde2a0265ceead1310e5178ab95a4732038fc964fc1c65138ca790745754fe24044970f34a32be52499f55d7885f702ea23efd4e48f2dff5c3b8cc62b90fcf646d666ef52fbbe11fde867a67c54e6f921c43ea011d70b4f8ffd0055ef2393784966b57942aa824ed63e4dfeac2895ea63b95fd0097e96903a55b95af330a9e06c1430d7e6f91786192ccff55fa02617233144e0f04f252794723d312524029162c55bbdd3495e9a5948102723c5c289ff88eda290033eb06ce3387b74d9a6f40abbb74297a145803a90dd170c6a6eb772818fcab5802c8673d563262c3d2d432e6e301b2e8af482e2d728460f26929fcad46e1a3e9fe26716a6c33778db177301b2962bcf2d6f601b7fdb7cbb71c6d6fa8cb14777228545797c07ccb2c444c5147d5529075a9a7082639a119471f395e76364414db7dfb3120757e32f369ed79f30a6f105f47c3701fdd94bb06271d63fdd620aa4ab9e058f8cb3ad0df1d062f4b9844ed9fdd01e90aa3c439288f3391874b8a72249a392bf6bb777911e9ef061535d1ba72fb12117956e48a0d961d276d798912094e8fd529ce2583decac7fe02eff6b1dedae52695e5db708c8dfd5abaa210dacd54850251d119fd82b32f9225ef9ec6924a4368ff8ba2187bb0094dd79fa628af20dafd0453792fd9da82eb8ca7c8126c85abc6306de33efb26b500727ba45fe8656cb30494780f6184f09f44f1d18d810d84b8091bc1119a8b3dbba240ab12dd390b3d0841475be008de89253105cafa24ba24f49e4670be8c6fdc4d8f9dbef3e3fb70ea5b7e3abe7444cefa4b22c99da41a7691b6dd3fad677ccd5f9aa4ce939b45d3e65da674153e26087909705d4b6f0552d131ee6296d98865463d535ee65a5d85457665c354280cc5a7de81c0cfebb0a9aab7bee0d595fc0e01488091a810673c6b5261b70f587faf37abfb30cb9663007cccbd9658d0e9c5d6e3e14caf4e446512985d0ccc151a7c71c9c60ddace2703dccd6d3971fedc6206b9bef2d0435c582c757e3873d3a51f2c5bec5da30003915cb1d9f69002469aede3df25b86bba841b5a4d9ec338cc7ed131e60e686f4ba406772d9cf878247e6c960c5ac9ec28801c8d7d9ada7a91358d3c22febc75af5caf05a6f3636b1ca6abc95151f261fe42128943773a4326b8ea52d996e132353db2f1ecf80668603c403b2fd0894f3ae82e6e253ea787547dc986ac80bacbf7f95c38ca8f173222ec6a1ebcd8fe9dd468ee481151652e00f00c38810768c303b08a3dc7c8223fb136e371b09c4134d779a3064137ce990b6346fdc95c3f072c320504644d1e5ab6fbec3e672522550c5e56ca174e043b4ae7870d07cc0fb2383f076a17dc6d06bc905525750180c1b4eb15e3e7ccda55e7a47087461d6c1bd5017b4a586c7f60ca290a04461028298a2c8495b08604f1f6b1560f57a434c161a414d8ea14c323e727f99ad1165f8aca97b3c5940df44a3e189a61cf0fbd7a2e1f3d9375c5ae5b0fc8e90e9592c922a6c1a2e34204eb903e19d333d7d41d40e96fa0e2d3fc07d2356537a8691110c99456c7ce462b8791ca22582083ce7225cc6d9580b8617702b99f9282c17349438b5293266ba6e20f98bf30cb617b6059e4c118c2e0bcbb910d091a769cc816a9f46d5e5523a916f85142094405c4ee80f2d2c4c587655944650839973c01c1740b19b74fd0cea0bb26c2a0d779a9d8637d32c252cead1e0ec132520a3682c695e77b19026bbbb4cca1d9115fcab84628f35357870690cbfd3b4c793e9f3e2bb6e31599da0a550efe6bc92bbe3639d43e2019f0bc77ad99c9526712981d461990a143ddf70bc4109a11f441fde2f077291e8cd76021e3a895c27be1d5f3f758f81df5a8fdd4a9291eb6271b705247b2bd05df27fe48df2e137fbccbb7e1f3e2df7c989053dca85878634bc945e6bc6043b66e5878600149af6b39b1711a15c095e3c4ac2072b366a94407b8b11aefa6e57392f5feff3e65d5a92da1aca89b352815c8a97ccd07a5d52f6497954124f520eb0e884690d217ad7ae7be7978051abaec1d4d44fa45498bd9afb50037904399f779724b030857733a896f80f29dd166bc3d34a4ab2a9bdc48f12c2f7d2d8687eb5ee4d87dbef5c0aeaceac17793d65b38f28d0fb613c194bc673ba7306ee538ed35cb7581a4c85b1a23d897a9b8367a352564a2290b43c7eddbf001ea8d622144065acd8a882cbd1fee28561994940838bae64c132e1d1fc24ca03fa78d2e0d373a658735b1e8a7a65dc6f3c80749b7e4c8c8abb272f2880a49f5a7cbef5982ea8ac9a3a854d9f937b51a286c8b058f2a741c2fb099b4d7ae55d3fd222dc8c8ac8b03f8b8fe33635ed0d9b5612e3cf30dd393fc5a847e440ce80b2ffa0427ebbcad47320f10e37c2bc02ff0abbacb11232745b00b31d779ecc297f1e4a6effdc14649841197d06ea3640eaa76e9b9ec87661628d882544c68d9db1f691218e8c1d7e22e26eb8acd93dcf7e7e2a00f7b29e6322bee57de8302083d83038e7a2e4b947563f9626e1fff9c26185188bead0161b50f5e5b56e531afbab06532d02eac1f58a29710f771310d8af199219217ff3c1794291e6de6de6ae7f51e49c307eb3e1aa24491e8b40c20129d50cc915d03f467cdc9e53392875e040ad35e7e4d29340581025766091b55c4a1530c26ae756b99d65deceee008b7f29711d7aecae1a1e8dc4a32439eda10342aff0daccba468ed78e1dc33517fe7e28ef4dd7be43637719c24c8411c42361895e38ae6545846edcfa05f3fa590780efc704cf3ed59a99683f0eff768e78b2022312a6d68140e3dbd32470f92ff47135cf0a21d71a4ffe2e4bb08b199a3bdac4ba22519dd3a06500e230f3c5015b048a764a0708c438128f2bbb5e85e2bca4bd5804a1a49ab627ab46cb05aefc9d1f851cd28c781e5c4449a9b49410ddf01ff619346c7033d135a3ec579f37df3a33a88ff7521ccdd7037d4afc0fb5bb0669799e2a04845dbfd9ee0bdba46266f84a17cdda6d73f0088b9602039e2bb60c3c8cc26e9eeb779367ec31023de31ffce0a2791d479ec72151449de03f87538e9c193a00e4eda99df8da61c6934fbd39bbd9f4b4eb0adfee867700f99badaac0bf3e6ec5f3afd8990f96723f8130b72a421f46cf06f49b4f86fedc20454a1ff51425018da67750aa3afca9b40a7294e827b92dfe82542e636c62fd326e56479bff37ae6b8225298713012e6756ca94f1c1c395ec06396bf495e7fb0b8268c7a45df4b2a3b840a1af81c225e5b452fd52eca177ae45f63300928d719d71b500ec65b1aba5b87cc18a9b3c22aa04e407e28f1893749585c529caa48fe1b6227d3cb036e23eeb77136953a203cf74e4698160d64a773d8d225069bd673f1c7833d7a46959f63f0ad3ce243ec58f820f861502ad00ccf072e64fcf6a7a66e93fa21aac8c52a30f582b34631eb60326431ab8a63c7263f8653205a1d86fcd257c4e98563d7194b9cbfd2a1deb4e68a7952748461f0c9c906cbabf0850279c52c9d50ca80bfe8fe888f8f8a6669da9a22c30690238cdb1c7332a5f2c1729cdad668582d995bb68b66c9686533ac3b7eab2bbd0b2feae039eb3d623b3a515d540f2047fdc3a4f54d7cd05ea0399ffd9c150a04c93269a9d935120424b3590d217e103847a1a06c65f218a892ca69dd0655ea30e34682d3999e0342de2474a51c456a4d8614ab4bd33e835cdfc94e2f50d4b67d046e6310ab3752b4a00516226ad58d8888162dfcc66a00219adbbdd09da3a8a939d9f7c1f11d374598f8e2914ecc09f1cda854d0b0a029668fefd8227e5fa063cc4389bbeacb1fe372bb1e57024e8c0dfd6d9650b0aea418067b4a286c5e39f0fcdfe6cd370d7282480490d8e293957e36a453dc705e8db59f0bfc6f390d0b8fdbb0b2d1c7838427716b40389ceed6ac11370906c73043acfbd381b5c0bb74f313851d34f95eb029cca44cf54228e745957f27366ca1970141fbe0c777d6b98f8a5f27b9b46db9948b922c8561a59c3e5604e15a174ca6aa13bea3e066dc0b5aa493832ba671307b01a0892d5f44a83a00b4191be059f2ada22b264a09d58d3142b869e7965f00a0e4acc295b2a4044b85b3988c981242751817ff1e52558e374b882960004c03acf0b5126a8559bf23f4e5a84d689fd08c4696553e67e29e9c85393eafbbd4929c4f9b40ff788b08aed463fe7e4529803aae2eb9a841a7ce8036cc0251e69236ca96bc9f97f77ebe54cb60ad4e93a3ceafe1055ee061aaf7109a30bedc274ebaa4bfb9acba298017bc923a2c435762e9b51c93bd6120c1b403ece0d8631d0d62d9d703c18a4b5497855e0899b50aed9bce68cb5b08e429f9d942a146a580983169c9a511d16bee708984ea556760e9e018b4eb8fcc71b1e4791e485908db7e6542aa795516f30c26dafee1e056e1effc6303eee046f2790401663648613d1173cca5fbf39196e3dd10f7856bc136305af6455020ea7a5ba0077c63cb4e44cf46492db2a3e6e0a31d9b40ae4bf7f7291eb0f71900202415af8f67eb478d5f92455630838bad9729d82799f7923e6bd1b0e759bfd5a3c88486f6456ed96c8970d7ed11ef7c40ed5e769caa229f2fcafe4e748e711b32b0abeea19dd92eca2b8a37c1986fb2bc9d48e163ca596739ef9016c6c9857ec8b9870d8d93d32f277cc293804a7b1bcfced6b1d3b9ef635689ee020951e48c722da4410de097d84f9e608447486329a260f8eb800820cdca0915c2ee145e5a105551765d48460372f859c3381d8dc946de365cf0781f90492699e2d94c4c09715111dc9af50c9ea638d20d02b956a881cbe61456f6415138a565d3768d310d89a516a460ad7292685acb00860f554ba68efb5094a89761b5ad44fabac65eb9dce0c527dd11fac71be318f42a35734a5d6e7648404f03d31a3d6f4076d0cdaccdd5278f5e88d16f6756a6782ac01dedf7818a94beed354838cd11ac4f4e987f70f545cac3257b1ab9dc616edda446476227626b90c17afb05ac509ee7b5f2f006bc8c681af88924fd26e0d8a96d99252a0d677fdd3e81c3c10524803c68ed9f09d654cb44144b26dda245dd76b7d2e6209cfb3f2c52ce87c4941a082c3b187fe63dc2f464a47de25e408b2d507be5918a2f8be25579b1863d59956ac4a575a4339fdcda4c832b840f97d990d9740c4cd2dc4b8a0728eddcf642dd347a70dc6dd6df633aa3f23851a9de38198a8685d06823b184f21b212901d5b307de0571c50267f292c31ffd3b8cd3b507b75315c463d3556033f1f8f13026c8bc823da720c70761e08d52468d593d90347a4fbdd02ba447a20440f38e9c4c08923de028fe72c344e2f44a607dfd75d1eba94594281cb4b03749cec76541f86fe6a73f75c7be563ce7fcd3f5845f3caa89e41ff680d7aa67ee354bf24c8b0bd5dd49a1b00dd2a851f2dccbbb745001e1a912da62fc9cbcb18925d2e91d20fca7c5282514bd14630183fb721699a0033030429b86e17577fffbd270653f6aa180e8b19096f15179bebede00529451ae7b3d95eb6896971d5ffc5286a35dd15b78236b7c88bd81dba668ca8af8be2bc2ed78299a37b226dc2d9b258c0db1d093d5523d45df4b1ef8f4c772e74bccb3fd6b10fc08c89e26862b2afd6c09fd92b1caa7f549b53a98fa967a0755a8d59261561b7afff4dd8d636e07a37aaa1a9b59a40376ed5ba68a0e8332baef75194ac0d463dc53fded17d92f0f765826c56b7cab0dfa4b5cf1aa84f3ea436306637c8967bccd76151f69f46c50b07a0eb0914f518c289a126782796ab42f85ffa9d5d54b1825e19753d03edc4a60d64ff64ed7968d4d1db3cfe8c26f729ae6b8ba4ddf640ab011f149e01a653dfea05c9bcdd46b9b43e31c8f8ddf40532997c0d8e23df2b327efc8b694d563f251b576a78f28cb9f25b6476f6284002aa421f8255f92b45347adffd51640994dfc039f7ec911bdab6eae2ba784117f0a08a8b7bbdeae544d88cf2666a7f94af4cda71b198a1a7aa5bc8e71172380f7e30108700f6cae6cb0df27cfe69bde89c7afe975f2cbcea03ba1c832d64416a206ec779f0b32a85009b2d412b9ce9a0c15c413a11fd5dc5d42daccb7f65a933b37ebcf59b90d2ab628555dd87cd774f9053a2ba2e8a8f10a994a1b26767cb1af1b16e5039f14e952c6a4f853d49fa2cbb8c1d17e81f8fd45b0e2f8834b8b828d959e25e3ed09018258db0e31e8c27731f032a7fde3d58cfaeba76c62dd42e82389b20e93fad950940d7749bc3e6cca4b09b102143365138726308300f3b4e0fca1492c7cdba8870e529fb29769c49f66b8318676ee215eb9e072748ac073ee69ef66fadc036bb7ab2b982c2ebfdcedf706e9b4bd7a4a77b093aa4df9ffdcc01e60010cf4312b53df3e54f95e509144fb413050058c359aaa33127391636eff4b1e2f1359521fb3e77881994876662adfe6b0349ea309d4db9dbca3fd78dececbc4e40eec7a6eb1769df965106f1b42d8d46e58123de2a5253c4adf956a2c5ebf86a554f280f47965162a109ac3d48ac5ccef7b2650c5b031f53edc8caac6a38f18c2a614e7c083a441fc10020c67e6f897a149ddba38c0862d14c59255993af8f2920e60f712bc34a143c0b059e77972d778879e72a57ed9e52991e7453551bd1b517c477233409e72ad6eecfc0eff0ae4a34f696e60ee4432bea4c2f2d5ded3aed8f0bde85c627d5d53cb0e1d4ada17d441ff63831704b782ff43b63e88fd7906e9f32e8c1aa4ed828a2caa8954ea79833f09b0c724c7b97e89fffd6e3a6fbc9f28267574a7556a4a936f66ee1a83befa13fd245a5b571d22fdba074b58be1859ff65f31e64974bf54a0555</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-wave">      <input class="hbe hbe-input-field hbe-input-field-wave" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-wave" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-wave">文章被加密了, 请输入密码查看.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-wave" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">🔒浏览器的安全限制越来越复杂且零散, 各大浏览器厂商的安全限制还不兼容, 确实需要详细了解一下这些鬼安全限制了</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="安全" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="加密文章" scheme="https://blog.liukairui.me/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/"/>
    
    <category term="安全" scheme="https://blog.liukairui.me/tags/%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>ShadowDOM的坑</title>
    <link href="https://blog.liukairui.me/article/ShadowDOM%E7%9A%84%E5%9D%91/"/>
    <id>https://blog.liukairui.me/article/ShadowDOM%E7%9A%84%E5%9D%91/</id>
    <published>2023-04-05T16:00:02.000Z</published>
    <updated>2023-04-05T16:00:02.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>CSS 隔离问题</p><ul><li>可继承 ShadowDOM提供了样式隔离, 但是 ShadowDOM 还是会继承外部Document Body 定义的可继承 <code>style</code>, 可以使用<code>all: initial</code> 隔离</li><li>组件库 组件库的样式可能由于 CSS 隔离无法被应用</li><li>Tailwind 等基于 <code>rem</code> 的 CSS 解决方案 由于<code>rem</code> 是可继承的, 因此, Tailwind 中的相对值都会应用最外部的<code>rem</code></li></ul></li><li><p>open &amp; close</p><ul><li>如果将模式设置为 <code>open</code>, 那么主文档可以通过访问组件的<code>.shadowRoot</code> 属性来访问组件内部的 ShadowDOM,这意味着开发者可以在主文档中修改组件内部的代码.</li><li>如果将模式设置为 <code>close</code>, 那么主文档将无法通过<code>.shadowRoot</code> 属性访问组件内部的 ShadowDOM.</li></ul><p>因此, 当我们在 <code>closed</code> 模式的 ShadowDOM中使用了某些组件库, 这些组件库如果没有在 ShadowDOM 内部的监听,那么这些监听大概率会失效</p></li><li><p>事件冒泡被重定向</p><p>为了保护内部 Element 不被外部获取, 当事件触发冒泡时, 外部EventHandler 无法获取到内部 target, 例如下面例子中两个按钮分别在 closed与 open ShadowDOM, 但是外部的 onClick 获取到的 target 都是被重定向后的Container</p><iframe src="https://codesandbox.io/embed/stoic-swartz-hw8u8f?expanddevtools=1&amp;fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="stoic-swartz-hw8u8f" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe></li><li><p>CSP 问题</p><p>ShadowDOM 内部的元素依然遵守外部 document 定义的 CSP 规则, 无法通过meta 修改 CSP</p></li></ul>]]></content>
    
    
    <summary type="html">ShadowDOM 虽然可以将内外部 CSS 与 JS 隔离开, 但是也存在一些由此产生的小坑</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="JS" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/JS/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ShadowDOM" scheme="https://blog.liukairui.me/tags/ShadowDOM/"/>
    
    <category term="插件开发" scheme="https://blog.liukairui.me/tags/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>CSS样式隔离方案</title>
    <link href="https://blog.liukairui.me/article/CSS%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E6%96%B9%E6%A1%88/"/>
    <id>https://blog.liukairui.me/article/CSS%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E6%96%B9%E6%A1%88/</id>
    <published>2023-04-05T16:00:01.000Z</published>
    <updated>2023-04-05T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>当我们想让保护一个元素不被外部 CSS 所污染时, 有如下方案</p><ol type="1"><li><p>让元素不被选中</p><ol type="1"><li>覆写所有可继承样式</li><li>使用 custom elements 自定义标签名防止被选中</li></ol></li></ol><p>可用是可用, 但是 css 会写起来很乱</p><ol start="2" type="1"><li>采用 ShadowDOM</li></ol><p>ShadowDOM 看起可以在 HTML 中产生一个隔离环境,但是可继承的样式并不会被隔离. 例如,</p><ul><li><p>在外部 css 中定义</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">html</span><span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 100px<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>在 ShadowDOM 中写入 css</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">:root, :host</span><span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>在 ShadowDOM 中使用</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">span</span><span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span> <span class="token comment">/* 最后得到的是 100px */</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><p>最后我们 ShadowDOM 中的 <code>font-size</code> 为 <code>100px</code>,在 Element Panel 中可以看到, ShadowDOM 继承了 Body 的样式... 并且<code>:root</code> 选择器失效了...</p><ol start="3" type="1"><li>iframe</li></ol><p>最彻底的解决方案, 但是 iframe 并不好用</p><ol start="4" type="1"><li><code>all: initial</code></li></ol><p>这个 css 可以重置来自上级页面可继承的 CSS,但是当内部元素恰好命中了外部 CSS 选择器时仍然会被修改样式</p><p>综上, 最佳方案似乎是 <code>all: initial</code> + ShadowDOM:<code>all: initial</code> 阻止了宿主网页的样式侵入到 ShadowDOM 内部, 而ShadowDOM 则阻止了宿主网页里相同类名的样式应用到内部,它们俩正好形成了一个互补.</p>]]></content>
    
    
    <summary type="html">原以为 ShadowDOM 可以直接解决掉样式隔离问题, 但是实际上 ShadowDOM 并不可靠</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="CSS" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/CSS/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="CSS" scheme="https://blog.liukairui.me/tags/CSS/"/>
    
    <category term="ShadowDOM" scheme="https://blog.liukairui.me/tags/ShadowDOM/"/>
    
    <category term="插件开发" scheme="https://blog.liukairui.me/tags/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>媒体元数据相关方法</title>
    <link href="https://blog.liukairui.me/article/%E5%AA%92%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95/"/>
    <id>https://blog.liukairui.me/article/%E5%AA%92%E4%BD%93%E5%85%83%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95/</id>
    <published>2023-03-02T16:00:01.000Z</published>
    <updated>2023-03-02T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近一直好奇 chrome /操作系统是如何获取到用户网站正在播放的媒体信息(标题, 作者, 播放进度,专辑封面)并提供类似上一首下一首 API 的</p><p><img src="./媒体元数据相关方法/chrome_player.png" style="zoom:50%;" /></p><p><img src="./媒体元数据相关方法/macos.jpg" style="zoom: 25%;" /></p><p>曾经有了解过 Linux 上基于 D-Bus 的 <span class="exturl" data-url="aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvTVBSSVM=">mpris<i class="fa fa-external-link-alt"></i></span>协议大概可以猜到系统可以通过类似的协议获取到浏览器上报的媒体信息,但是一直不明白浏览器是怎么获取到网站播放的媒体信息的.</p><h2 id="video-标签上的元数据"><code>&lt;video&gt;</code>标签上的元数据</h2><p>考虑到 <code>&lt;video&gt;</code> 有一个<code>onloadedmetadata</code> 回调, 感觉 <code>&lt;video&gt;</code>上肯呢个存着视频的元数据, 于是读取 <code>&lt;video&gt;</code> 的属性,发现上面<strong>只有播放进度, 总时长, 视频长宽</strong>这几个信息.视频的标题, 作者, 专辑名并没有</p><h2 id="从无障碍角度入手">从无障碍角度入手</h2><p>对于视觉障碍用户,网站在播放视频的时候一定做了特殊照顾(例如只展示封面, 自动朗读字幕) 在MDN 上找到了 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL1dlYlZUVF9BUEk=">WebVTT<i class="fa fa-external-link-alt"></i></span>该文件<strong>标识了媒体标题,</strong> 但是这似乎并不是一套强制标准,很多网站都没有使用</p><h2 id="从-api-角度入手">从 API 角度入手</h2><p>我们只是想知道 JS 上报媒体信息的协议名字是什么,于是我尝试爬取包含视频元信息的请求报文, 如果一个包里面只有媒体元数据,而这个 API 又是有语义的(例如<code>example.com/api/video/xxx-api/</code>) 那么大概能猜到存在一个<code>xxx</code> 协议用于描述元数据. 但是没有收获</p><h2 id="从-chromium-设计文档入手">从 Chromium 设计文档入手</h2><p>既然是 Chromium 的功能, Chromium 一定会有关于这方面的介绍. 在 <ahref="chromium.org/developers/design-documents/">Chromium项目的开发者设计文档索引</a> 搜索 <code>media</code>(因为视频音频都可以被检测, 所以不能搜索 <code>video</code> /<code>audio</code>) 找到 <span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hyb21pdW0ub3JnL2RldmVsb3BlcnMvZGVzaWduLWRvY3VtZW50cy9leHRlbnNpb25zL3Byb3Bvc2VkLWNoYW5nZXMvYXBpcy11bmRlci1kZXZlbG9wbWVudC9tZWRpYS1nYWxsZXJ5Lw==">MediaGallery<i class="fa fa-external-link-alt"></i></span>这个 feature, 在介绍中可以看到</p><blockquote><p>Overview Media and metadata access API. ...</p></blockquote><p>在 MDN 上以 <code>Media and metadata access API</code>为关键字就可以找到 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01lZGlhTWV0YWRhdGE=">MediaMetadata<i class="fa fa-external-link-alt"></i></span>这个 API.</p><p>这就是我们想要的东西, 他包含了: 标题, 艺术家, 组, 创建者, 专辑名,媒体相关的图片(一般是专辑封面)数组</p><p>一下是一个 metadate 样例</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">navigator<span class="token punctuation">.</span>mediaSession<span class="token punctuation">.</span>metadata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediaMetadata</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Unforgettable"</span><span class="token punctuation">,</span>  <span class="token literal-property property">artist</span><span class="token operator">:</span> <span class="token string">"Nat King Cole"</span><span class="token punctuation">,</span>  <span class="token literal-property property">album</span><span class="token operator">:</span> <span class="token string">"The Ultimate Collection (Remastered)"</span><span class="token punctuation">,</span>  <span class="token literal-property property">artwork</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://dummyimage.com/96x96"</span><span class="token punctuation">,</span>      <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"96x96"</span><span class="token punctuation">,</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://dummyimage.com/128x128"</span><span class="token punctuation">,</span>      <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"128x128"</span><span class="token punctuation">,</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://dummyimage.com/192x192"</span><span class="token punctuation">,</span>      <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"192x192"</span><span class="token punctuation">,</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://dummyimage.com/256x256"</span><span class="token punctuation">,</span>      <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"256x256"</span><span class="token punctuation">,</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://dummyimage.com/384x384"</span><span class="token punctuation">,</span>      <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"384x384"</span><span class="token punctuation">,</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://dummyimage.com/512x512"</span><span class="token punctuation">,</span>      <span class="token literal-property property">sizes</span><span class="token operator">:</span> <span class="token string">"512x512"</span><span class="token punctuation">,</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="更多功能">更多功能</h2><p>mediaSession 还可以控制播放位置, 切换音轨, 挂断电话, 切换麦克风,开启摄像头</p><p>参考: https://web.dev/media-session/</p>]]></content>
    
    
    <summary type="html">一些与媒体元信息相关的 BOM API</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="JS" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/JS/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="JS" scheme="https://blog.liukairui.me/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>前端性能优化总结</title>
    <link href="https://blog.liukairui.me/article/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%80%BB%E7%BB%93/"/>
    <id>https://blog.liukairui.me/article/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%80%BB%E7%BB%93/</id>
    <published>2023-02-22T16:00:01.000Z</published>
    <updated>2023-06-04T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="a9f46a898252c8fa04bee20b8bd230ab5abb6cccdee26311a9dd2b5b9ee0c6cb">34e85ffb0b6d2d12b6c2e177fdc7251e4f3b271ff6412d26f1f73acb56b1ede322f2988334f022f5f1dff7335eedf42d9093f75bef88737165e3aeee80dd9120c913a0431273d7f6918d63d27bc2f59da956e55727f107f2ecb90e211ee6f14626a56685b07adcd1b08046a4f70550f0fe9277762c714a82809b00f9c6f5ead4d413fb1efbb7abb974d26c12bfe235ca06a9cd31347ebf76087200389c4c973f794af52ecce23944bc07002a8be07e723362a79f771fa3a85182abecfc389c090a7171e87f29fa7c8157df79db2c8277c262b57f2426d6acf495d33c61d7997a96f1885e781f29e03fd6e979fe3d0c573e7f148add1332a39f51bbf98c38d84a9640e513a6cf1d4d66ab2686a11e2a9c55ed0a8d97ae10b0bd6d81691c3fc4fd45cfd00e168398cddf7230d81d272977d7a6719df2a5e5035885fa0eb57925304ff7621d07e28803f4d3dabf732e230250618dd91347077a2a8e50f1f698d7cad013245df8d276452af38a31176e7a92a019659e5d1a7f19ac29d204b24ce6d37761808a346fb7bea0f230068c598e5aa7c77c617f4b3041be79fa9b097ac8693e2e9986646dbf3d3dedee5b5f254311f731b194854cd06ecb27e3b9a1643bc638a233eabdc8ff898f81ce7e13654565514f36ebb28dd9b313baae7262da05954342fd406a4183ecfe52137a5475344c7b521602aec099f351f6001c4928e12ca7f1f43b9a0086bf28ec55566f29bccf1df57db05ae14ed20f13d5b3085efa00b6993bfe11518796dba5b2126240e0bc916046d84004865ae85d1ebab2f264b8273df7831e81c83109d9d446cc2c004ee738214fedd7309e443fb9c3e71c3c68469a7d440b0589512314c73b4ca1fbf428fbdb4547937653186e5b5ae209e0fb7e832b07b0a7dc19b9e61e65f6da22da59050a0a9cf25f673e42258e106e0c68b4cb9a5d235d9d2490a42562559af160ecb2eb03b7b755280004a23afdbd39e12b742e4e6d6dfb0ead636205d2fa6bed3df1392e54d4305863a829e2fd332ed36102fde00771226343447e9ddc0cabd4c66c2ebf86d1e12f956174de4dc1af54bb3612077c61a1ceef0dd61008c2ecafdd8e12637c6fb602ffaf4268b7de2d7c776c4b232b68e700a495e1eaaded8e3d7dcb4ccf4b92430f3824a8d14d72e1039e9920a88774afafa94442d1bf766c39694777ee76143b07eba2c74cebb6a3fc7e141e72e117a5f20cbbf8939e2cbfe379f11ebedfb83fdb682f08efe3821277a2b02e2e760060aeaa453e50a1868782ce292de079b303c2e67578f77682d972588bc5b10d6ef69e8fa5a2b92264721a1b099c17524927619b51ea7b94148df1486b0a27c862acf32bc9cffcfe6a48390f6316e0d22c34cc50e08b94afe698e9a07e38c53aaea23cdae9ce89af174e91d1cd5a0dcbaabaf6c141f0075eb4a2cff85ce4aa05f2939a82fe280e5c8419832c151249d6da7f536bce612f4e0a87a1dc8a46cc96ef0040d4af3405b17699366c7750ec47d3e8180bb864b1eab4fb48926563e293aaadb07497ec3be8824455c1b81cad84990325984a664bb5404ed1675c58f137c27a35283da0bff2bb3c35e6e690c0aca443e9183a0024121c6fe52be5608327507177559dec46f574f133f80e22c0f0b434bebc99e72c521ba0345957647503ea6bc3c4580c1b36b567e81e786231342e3b0bf5fc4a291b78698d69b47cc0608add6ee633b5c4e92a012856f289576a88f59e62e28ece533a68be6bd119e899d5112db1d25bd3aa1b288c9f77da70f95c01990fd600f35757f47bc30f182d1ed26d3a4d0e4f6d45bad911b4d0b6ff0054772baa49b51e8a70a62af1ed2169b5eaaa79d25c202201df83f6d453ec32c73b5eee30e82fff70ec9e6735a2b669b97b62dcb11240264835e898cba85c0de2df57ae215f99113d752c4eadfdf1a1a6db14c939d42d8ec04c3c7df0caf472122fbc6e3abfe8e7d8ecd0874defac66b4874dd5e3c2a806defe037e64cd254e9e5c61cb35ce13b59f1dbb5dcba90081fb81f7940d87fd87a2ab9e07a75c91b6b7fc3feed61f3178c5ed25d32bd8c84000dd1ff2745c35b368af8e9000782d1231b36f558529ed2beb58a951e1f10fbf627138e8598205dd81e8baf55b81ed7478137c884fa590b507467c0bc605ecbcea776cb1f7f1bf81031a9466d557408d72fa437adc043ce6d2b581f2c1074e8daa21220167b993b9731a72a34a1d8b6b3c5cd49fa22d498946c24d5d3af99a29800c9fd471446cb10569880f313be3b2212383868fbfddefdbebff01afe9cc93af9434100401704f088c9f20d2723a8f1094b9442cf20d08c8f237dee12569794b98c58455d36d2e84c9185c096d74d1c5a098247ed4cc31c735a6e1dbbe6425b4812bf202cd1adc6dd48df2727db4329104a6912d0ba5df218b2ab78b138eb958eca85778cf995efb3077efe4c6ebaf2c58fc7f674b5b7d5d5d9e23dbce1066c7453bdd39e13d352796b81f78f0b480a44485f8264bc958f738f3682be50167ab79b9b6ac4ccec1970c741c57c4109967b6060e470fafe71ef2bf623d7aa57ae403076640d2af2ee809dc1dd2e57476a4f06e76ab4072e38cba7bc7dd6a004bb4e39ecfbc7408ace4111dfd5ad1217b020de534e5bfdc056920d65c7b6cdfc41fdbb356c1fda8358f2e9502378de127e275d3f2397cfdf46eda278ceeba83e5beda9f35d87edfdd1f9de928c3fe31b0ed695b6e78f24ff6d7ee86ab47e92b0e4f45581679c268570021fc71757368133ea92f2e7a7cc678056967acf2d491c3ecb943754a0769b310c95bd05cd2b4ea7cd2fae70d9ab03749c02e59f6fc6c84fc2a4f7930acd58af33e36ed162eff48cb6b3e447c2f03d890cbb0c034f79896f1000004e070a412c5ee939f228c844b166f737b83d42da36c62a57d427aaee39602260d4136d689b4c42aa7876245f3419f0fccfda17c2c658fa987863b76d1c9ef595ccace5f8c7043d4de8d7c7903f742762b396e22bf6d9165772ee31c723823e061451fec2aac303acd9a7a2bea63bb3266cbc34545caf25d981edc7d231adbf2ad0d21a7014a17caf1597b5fc7081dd46c41ac370a30ac60978313e2099a218e2486d32a3f87170f931eb80bb943b38fb1d85e516e34c9b2112b22d81392aeb70d6d0abcbf04b8f86cabed7deb934296569c155f55bae8089dfe60f43415ce3e03157f85a2f02270bf2db529372bfae2d2903293edf8e34bc65d4466700b5e605e70f4a7cecfed15c70e4fbea03493676ec50de62fcf59c6ee236ca2cd65470fdf5696520797ecda179b076f5aaa4dd68a744ab5f5d641f08c646578ad939cadccf3286d0d321c3794344ba15bb226fae23338c795ce52733e35ca92fae6763eca3d111abbeadeace6e6ad6985029bc7d081198ce34a452dece9cffb6ff746e17829be0c14be70841308c2171081691d7925f93fc913e0575886f9398cb80b0dd7ce8c0720db5409c975cc473b27fc59b1ff0756c75bea6efb574b6fa82e3fcb0bc05e003a238da5df8355e4e735c5d7737bb33265377a85c714982a1f49998e395969cf6ea3093aa8561a4ebf6bb8e71ed26fb9e68c90e9e649d8bad2aff4fa56346a566dc35a4812b932eada27a273dfce1a8011d1f3f034abe8b76e94a5b7e0786604f310fdf08d944c0bcff2e83890021c14d6100892b34005e303084cc3def29fec501d60f8d769753180e6fb677da5a2e4d9a37cf35f178539524655404ed2a210ba01aca1f0ac70b6f23dfc4d73bf749095cf088e6845fcccb8e8283526a5ae95a63b13fb9d4fc72c63b45058d0496d5d4990e83793f99f99b20a33ffaadd79431f5f70c36424ddf646ce50b01d98ec6e7f129b3623f03d35e08e6984e4d28eb6b4d6483ecf183bbdfe517ece499fbbfd3193b504733d4f2eabcd8ed6e4477793317e05060d1d76981953003b016c0dbd71238f648654719d47c45e8a73860ad984a5d1d77c6833428c7799942c6f4b4a0a46f091e67d84805411968b78f3b8b11d6279a260f3db159d167956b11dc19b55d5c17778a8d9751ab854bbdb58956a361bdc4fe827073c5790fb6d7d09f23d3a7205b96a03ca245187e2b13fdba4830f0dcf22d1c92cfe7d14525d1ae1ca4481019c060bfd16bcd67e552788ee557370faa64a470223620cebb8546cf30cda500e0518cdc150bb29f4e925e4ed5c48bd692b06182813347cf37d8f17212237c8298b90750747de9bba67905922c3f9203f1510fbbf36f72a53051a4f57280ac2720402b7d740256463605c1f9d9886d79adcd9c2499ea63ed6710dac7bf19d080888eb42f55f3feb2dea5f443d1c016191886024565eff6ad196cdf0a5b0fb75a77b8acad754ce84f5a7aaee7e8326ae6d9aa034cceee324f5a7f5a75e5060b255ca8c74bc783347729f9c36de7fead89e4fc8486606a49749a6b1a6a5fcdabb99dc382055c51b3dd42eab28e82bb7cc6cacd0a6aa5b24353b7970c24b36164bfb6464950e656b0527c65ed8d1cf46d86f5472f4ffa81cd1ed07b92eee113747bb79f48535256caac35321f971c370b535b8e69f9acc638d03a98be32e33215ace6fb5ab755dc31d60e4eb90a3a90c6a393f57bc2d0e1f75950d382451af9eb773dc50fe4d42b775283b5fe52ed8f741dd9373c7f503353d093631cec7b624804a9b8bbde3b346c6b32da81a50e1bad5d4ce72299d8ad8c36b84fd8a8a13abdfe8e7c10e16a3b61d50c9cd16e99023b068ee0527c92744dd2bd4d2b49a2e09f892f007d25a297f32dea4cc84ea3afe35fcbe723fafd9684ed789cd9e3be06b000d8c4489a0b511e9de00acaa4118727c33b372d1357852b18e8ad9b0d94504d206bcebe751ce784b1b920fbef53e92dfce5d631f56c76b0abcd1bb63ca9297e7bb8e884105d3dae29b30e9a667bd62de147ec05f2022d7186d4ec07b5d3fdfbaa143a25d7796c45d0b05e5d282dc2f8c75b520f08180ffced53fdb11996b1d75c83ac0a45b3ec13c73e70372655a9afcc7f9f62255cbd5e10bca01d85918caddbc5637ec9f49db1ccae635a3538e35e77b66bbf7ac05499a3a94dd630ae5a1cf43ab359dcaf75af35570590e498cdbff24af2a97290f3a258d97b9817312ce8b88da84899182feb45624280d351221022a963772e8e488cd9b772afb47920b99a948520168327bfe5fa763d99d09ea6062018b0528cfa8260829400e593d89e62d40b18196cf1c6cc58c88ffebff874c56b938be594b8e499d2671272cd1be91c853f599208d10b4d5a4d9ba681c8c1dfbfefed64da3db7b41ec4820c4e137e547a97e80d29aaf748822bb115a7393518ce6dca7334e274a9f83d77ff587214e178b5e9b91b6ff2e19696b134c17845bd8d0b5d0adfd910b59664fc152d211e291d6b1492c409eaa308da4d399870e97b3d5bc1a9998b595598bd7287af043d1813eb9072251aa0242ad67f8b1817e81aaa165f5404ceb9cda17f42cb16f3f1449cb7bd1f89466d948dd3aa97a2cd5ccba71ed5ff383742240c006ee95041deadeae31d9929d503f250af8ba340c92d2c93b6281cae92d640b26129928a2c43dc0cb1f87b43e3ff1b9ae2c550c86c6932a93feca8bf3443c92c659bb143834d45a996491c4e30956cb58a87c42c6bd7729a56c21171273b02635c4db9f6b1d4e49a60dd70f5669f9d851b4398138d5ea1365865589cd727046e251bfb9146e549cb80d79f8deeb8856350dca3bf446a1587b77437a17269dd6600d2b5ba794922a7551c8143a714c98e203ff6d64d7d84ddc274111d0c08141c552953941b7eaa8fb26ae6a2eed46a6e67c52c26cdab0e9895367f3183f1e8e3f69a324e9eea749ad03b57fa580865199d2c4d2ae17158a3eec6c1468a00d1d8ecc81d497aba6a25bca471e50098476202990f579d8d27cf2bb575d20a6a078acc83f01295d1f7d9bdb8c45aaecf5f82a8c3335e0aaa1c301135f4c675d4fd0f6592a8c0a1d82c9d588e0424db82fbb3fc295135e69487e3856b24ef9641bcc91904e57b68b77b7a90c8fbd6b735ff325151c6581ae817e52ca547a1bfbe6f3e0493f9004460d0edae3d3ed6b558e8b16dbe4090489bf315807480d54c342a0982f2adea0d209d4b3f87f0510206540ac79c2a13eb6b1768cf4426e5df3ab29e7cf06370c3bcd11858e63f3fdefb0973d47e79452cb58cb7d823014c1b5759f92fa0477585151607e54884998003c84cf6b8c4b2ead6d424d0613b65492c6cbd9d71dc66cd4fa16e452b5e3b6ea4c756587cb3c1011593a3b93639a721b101a49d65e2ece96c0e2fb2523798093fe16dd0c2b131ac342c644d83ae97859ebd335a0a5d44be32e9c3a38b4b23196ebf5636befe667a82599b2ac6f326cdd9a39e50cfd624774d2655c01a88cb8e8c2d7c6a94ae14c2200a25964471e6644dbea876426f74c27388b2ecaf4985bdfc0494f183987d904f4225aa38bee9316a603e2ea7223524786839e8e206fedcb7cbe819668a93941227cbee327a68a5b04a588d1f1ee674188f9c80ecccf28802340d59520601fc58f61d5fc18b59eee3308b98e1c4849a774e9b5e6f75d00220dfdeaa4fc5413a74b8bac653cd85f29e125452c826368a97f4b46da8713e39777e3f26e2505a10e4fa459024a30dda2c72f09110ecc24f1b4d0437e6b761ab50c5e5a55adf6bf12e4a9e57dd1a77b24d7fd6551201e1e4c0d0121c95cdf23f21fea68412137c9e3ffe4a48541cfbf07435536594e56240b495c7c05379f490a82ad1e9fc1c2837d6e7ad86ef21a798470e6c131b9f1e3b79325d031349853ae62dacf8428ea1e670499dae4fd0bcaf0a3d689b8e8b8c9a57eeec5a63ee981cbb8a0f15943f1cc7e2c1efef770eb81877ce9bac4f9590c6b6210c0bb177ac99d0aef6806e2099267852544d89fda65433ce4313845915dae0f36cf331f4c468118735bd981bd0fc96995b46df09d5a315a3e2ae82fe3275a3f3a50709a5162dc74d7ff849705d57b4886bb9a545d6335dc4ee997789fb29029d081464aade1225339ef3bb63f1bd6494a3662adf329b14b98f943f154ec7db3156b0e23465438eee736425a9895af4bbc90b3f3920fb7ad22d2cdc5447e16ba4b9916a0d559135bb2d989ad6856daacd59679e2bfeb3ce29f30db24db1448780cd370a287a23025d92ef6bd3bb683d5ea6f0b7a637c35f9dde43fdb870e1d467f16b0a9446d0efff7dae94e7767801707d85b3ba17bb6f986dfbccd617650f19f36e0b9a3075970e4b63ca39b1e3580a4218f1dacc380ced59dc0be74561b5a5209da20782e89a511488157d45dd650da026082252ae21ac008d717a12144c8236ae07f0a336613a98809294a4f462dacc437b19ab26810f6ede1c77e116c00cf2a6b85876939758d8024472370a24f62add8bfedc020143ba1a0e7038c3087c11623730555f77307cf1841083847d4288f0c12800e594263fb55e042f92b8634409c42f4bedd16306e3c2f944abc78f504bff982e6ca1b1c587669f04c97e8936300e2261883e65ae776b617862cee7c08a95d4462fe8e3665bb11fe64f4ea72ebc22453d7ffb052979c7fe0e5b857323b7fbae4d5b2e9c571e5970e9dac096e395122d47e086afacedc8e6be65f7eccce15e9c10b1cf0ac0381fbcfcf80248f3d8c7b7bdc32ec345404e4d7d682c437f985f1a49b839e18e7e7927ebf0f2442dd283cffab5e92e57388252549bfc2c66eff11bdfb54ddb8648291c922137b3211b38ee6c5f24e27f6566a2d420263b94f5145206e27a506ab1571c5c53756d448f598f18572526e586383d5feaed2f7a79abe3eed136a56216bf5265e8dacdc4d04811b56b5d3ba73ef55801274f057b6263a996e6120b7793fcf4533431201d8b16c451d2fa804d34855fa0febd7d71eb1d087209574dc040f0880a8ba8c59dcdb38ebc7c8b6b556c0845c1fc70db3218e1c1094fcec2370266be8f4b927d47068bcdcd517d58408821e60e32ea313f24f81eb0fa7ed1d0c78e730a1a0d5a69d770d950d352ce091c088d9c2642b6158da2bbe161bb65410320f698764e2811d01514f6ae048a85f656a04852e63029ea47e219e963dbcdb7e7a9ad66d8edf070807c8821fa80922d40d54418c70bbbbcfa2843ccf9cc8bcb295c20b61034c10a724bae3dfb93717407ffe79b5ca478f2575792a77ac9a8ef943e4e0dc6fb8516018d42b1be0833ec481e6ac3ca050e4e77855d6e49acf856847a1fac25d99a219ea1077a643f2c236c8557f7cfa9e288781714d2d2a99ad2cd68e6964dcb2a4ff3c57849ad7809bfe648c99e970d305dfc70270bfd8ebb73653d2e0f322895af5d67f7bcb3c0e6b4fea6ea26d3dd718b8e681b5ed53f0814a3b0eae475225a735e682759dfeeb4558168572f0335269b6f4f5fce790f093d782cfa89a521be6886a994b63e3d08353e2e8e31a2bec3651aca29337b3af79e5aac21ed54d54f45a5c0acd2a10aff182eda4120083382feae7ed7df58cc5a56edd08232336409356c21b1c21b3be300ca947fff81bdd91693ec307672b5ad8dbd558abaa2278a1f996e5d0141be69ac776fd7c317acc8a9ecff045e92ae18e515e730b87cd82c201b5cbce93ec15b4493f28ab12695dbb9400b2d1182903d61106b7c8c0c492fd5b892efc8d7df8506ae922e760b12abe167adfd34e4de683f33a00b26f4e40c9826fb8f45c661d05788cf566d9889fe16e5f94f1a91dd42276beca5ce3fe297be7f6c3976ce533a69a4dd4768d53f20b0745030837932f4913631c3a177693836e6465ceb9c3b0b4bc686b18f89e8a7f87e83f3fad65e93ee4978a88b1ad98c344318947935a1838febfffe8dfecfc4fce4d4ee7f4d7e4bd3ad9fd9bfde2cd0c07b689ad5eae0d3aefdf3d6cd9f7ca156887b9e282168c0e55827388180947dd27a0bfd6fb14bcee3ed734a32ef404680f704e7ad7c5ecd5e66183a2afd3c818e60d802ad050b3ad9b93f1681056f29d4a2576122aa00793ed18d38db35ffe9bbe965c57aad5b21e096581c5ca17adbb178b0cdd37af8fcaa100ae74ddba9d084e0787cc182dd74f92bfa5f6fa89ef1d949170ef50dcb2c7be80335959d165683c4f5c19a5a3e719b5670f3d8b6a694fd02c5c7f29ab3c05a0317712b232734f651ae60998319147200bbd7404477e6382dc50e4a5307a5d79b521fdd3a212e6e705c0d4b827cfb8b7008a1b6c5bf9dc63f03f4e70acf7e9ce68a4bdd5582bc01585dff9c11039934bc0515e609803a55cd7119e369b23ed4048cd83b33e871bebbb8c970cbecbf5b9579ba561512233a50bd5de693ec79a2ce241f8213df8b6957f7fe15aaaa181966f530e3c26a2fd77457e9f422158edb0aaa356f519f33568bf3099a1128fa2aeb05cabd1ea303d1d00518a1d5d7e78147cb4ba091f53a5d6c99bf32fa47857f2ded4ffa6d56741f09381ece5efbf9f4414ff56ce5edfa5257ac32ddbf012383849efaa8c7fd3272575105e371e7b136b82c3d4fe5a2385940b91e403ed9301dfe993bc4357f44022c0bd893d3c771e978a0b3cdf4dbea03f7355a0d85d1c7f6bd6c7dc12c444033dee0f0c9336c5969b94af1d59791f4ca95d9d88d0ff1e2f02d22d994a606a97fed8fe7e51e672d5fee374ba2ac80b48e70152785e8dd6bb3c98ff491bd7e1be3ab28a1db3a23362f8225d3b097a0cca121c031fdde4f505f6178b95f70d137c08daa122968bb12a0b52696c21db8b8873e0c2b3c41e61a6eaa569b5acbe090705c27dc23359d98449bc4b56ddbd6a63449572c77fb2c66b255b12b27134f346f632690b01b881bf59683e104e496cace8eabed36fd61f67dbb72ed1987c0730ea858e0de7834807866e5a629d340a0a2efdf2cc46d1ab6853f200437b6d6582f045d0827aba8dc4d9fb3f36a8e0fb2d48509daa0304a878d9803a09fd0e75b1c02d2e0fbac89083ce3ada64740250a717536f79a2545b7d015678203bd809b45fe8f908630ec57f5acc122dd311843695ff33609066093e8d14af98b55e214f6486946a53e2a0accb128d6cf3cb18ee8393ce314ffc899f93571fc872b7bad00721491c3c37aedc3b656597bd1ca3f5edf0c48706f82bedb6dadd354d789ba1e4f38e1d4b40d9ecb9cad25429f211cdf80c3e077f389f04bdbb01b8fbcd0b32dae3fc1f56f0c376ca75576222dd31612593050d1ea9227523c1e743e48b96579ab632402586b2558346c13fc604fe89104ff43db0cd600bdf0d6ebf05092e41bd87a51bbc38dec38d9a2039ba5bffe0bb307a45b6c33f9e78f94df76c5b9ce0a4d728a4952f4fea83987e177f0c26fe867d8e04f4bfc620ff177117b8dc67076217720943e1f373437bf7e3549fb4a24947d9d0501110f18033a7d3316a8a8d711dfeeb91bb4da2802d4cf714d4d9642a1044486e32c211db52eae0185e071b18f8b317c8551b8680a64b11b5525f42865342de21e210af2b86f871b244a8df5b85340d20e6d644d06b7a643788209bba88b70af9441e76755cc2c1bb92eda5633b00f795da50f6def89cbd08745e8290e0bbe243f887425ad3e3c685eaccad44ab7e2b783e63c64ade6039b91ba4a668361ce10c2eb9cf8d0357ec570ab3a3275d30f4a8604cb314fe8e91eb43ef520498cdbf54540aef25b04ea3ceb52966fa8f3ed481eacb6231d51a82686420ab569e00f4e3e445873fdc532e7de71d972de20a43a0a5c17724d9ecb81de880fd2cd9051df2bb16019bd2807107be38bb31039856d6e48078bb0da81c083339420baee3ef76830986c6b902eeef6a5998bc12e1a039ea0897f87b1f300b4e85179c45f83698f49e20a05c1611a7a00a8c2d70288a369e20eb208bc57f694f5ec27a6e657c7c2aa39c55a4298b40ce83c1bccdc99a9a5b2f9101efff05d48aded14e9a78a535d3e476308fd6ee6395e36a6294d3c03e9503971497f0d139550caeaed9eab817c438e5d5a46991f604fc0cf5ee20d0d38e3b780fac2c7771ec1244facad8797e5cb3ee9a7349d0bd0c7956cd269cd1c994993f8d07487ad8a052573d7f4dffe721206d58306b86381f8c455658af19705a1edb7ee7cb12c11ee03e80d5b997f0e686376fe19006fe6091ba59cba126fa539df5853faae6005322886cf4d2be098e838ff292eee4684dd2d39a026467b3515f037426c4295845a0e097418e58aad434b67e10b9d98ae111f92af0fe940bab76af88d5a3a26f3cce2f768efe8ad7c8ae672c6cfaeaa7299c5b8f908f40f2d34b6a15f263dd89fa88eab9e5d834e0bf23d39c74c36efec30760e4bc84ec56dd987ee8916a0ec289012ba6df7d53e6f245ed046fd764649c453fa611ee099bb38595ae71e8160773a278cc9afac5e7cf32695074c535027fd10b8e4b455a08b39ce8dc868aa3a701d53efd54ff87c618897035f3ada2f89a934b2a98149b9e644930380f835d94a1264f1b72a33c6e5eeb5f37340aeb140adf464dbfbb0a773971741836dcc1ae23c273f9c92c7144f77415c800d750cad5eeb97934e304f880ac9f977bf2e6e4f2dfa1b71967ad83c3402a35fdf865a1717b0de25504ca1d3b48c8fb908b652120d0c2d80a4256dfdaf27018e4487dcabb2a8d6f9f68092006cdaeb0757feb5c2a4879b2c372b1b902bffaaf5bff69ac30a312b82f626ac9bf5a5a5028029884e38a7e32e06a05da16170a2e4e64a29f92f5eb11c9aa1b207f1c71c73813fe0449e5c1e58fe059c5c8c14c1c2b5aadf55530141daa8a2caee72f8e4651e72b4e27125a80833c923024c9aeb3f735ab32f41f509938702ab9eab46786607a3a3b4b5c6862f2ff59d160800aa5421e50dca00d3f80ae9aa82ab15d04a3f2c67b991a2338df04d1684f59b981bf3a3266e7bbfc21da61a4e0869bb67a0d4b9a7d0de89f8a10f0340c1689bc29e13a9f320578a063c1e29708262ac76913b638d98f392322441f99a83ebe418d12925e5dc61ea0dba57141859ba8bef6b86ab42d9fe18fc3b5b2e1ece7594f7c563e728a6405ec19739c8725a4582183901b033ef30345fb1de3a93667bd2b4bdd497fb85c8017db2967d2b4c6a44ba08f723bee449988d406e7ce5a3b4fbb71282e2b97f56077fae7d96e376ef47b89d04a1fd8236dc431dd77459615534e4a15d477769aa9da3f4810969d62d7e020cbb0b0161e26e13c5abd3f117e3bc8663ee880a115462e5792edaebb03250ec2cbbe077741c3c908df428ddc03cf6b92263895d4c40b4f87553979f26fada005a322a16207f1e03d0a0b1e280454d92aae70f1bbde328033f0ad4de1c4ddd2ada75dd9d3a6811ada7b7b869ae82b7f1a3e71d3f113a06b73987acc8e58ef3b3ef0b9e54bd02c51ff5e490ae0e438f9ca4e80fcafd4aa9831abe0d5582e1eb60d9aab99f6c9044fe15b8a978c00e5c0e9d5e765bda59f22ab868a32be40fc1e3026690189eb9ab0feb186a25b856daad3e5497769b162c000c3e9018104dcf4fc7e0dda93a9afc30ddfbc1e05d05d91b23d1ee504a0d8efc9cfd54ce5af430c22903251402c7ec9d18682fa6c24a4f9d63a12da00ae9f6c52541ca33ee056b7f8c5530d752b1fcdfb53e0f57386965b7dbda7ae2958990b5e9988777dabf3503fb2d1dbb8e3911e270f14fabdb8911e5efe4e56e79ce7bea1d1ddefeff5ea9bfe104cc728e486e9402a008e47b2f460d9d609a154e506e714a1d18859dadae7c13a5aca588591a85ded4a778d924c1ce435a165369dc39394bb8a7f0f9bc071cca0378fe1ff19bb9c18317561ecb91c6353c96b820acad5e35d1aa2eceb0e314915ed6740eea32da8b8b3d26a17717dcef995a94e15e8b8bd3038f47ba3866644a3b77144bbaa52e5b85d95e1c2631860338b7a8656b9db88a3fc992e3fae488d9539b52e9146bdae750e347f88dffa4bbb7b23b51b1f2e8a58fa2332c27ef7cc0110811a3aa83f14b30c42c368d30b45b318820d83b0c85f099d734405064ecd8ded66eea9a6e5b864edcba2b507f9c3ae77e9539e095684164811839e24f0939f4b74afe13cf7656349d8ed734d62057869910c100ca818711d5a967e934839031fb99386fc13efa0b296155705abb951f486bae2b3ab3a75f5d863900c6b1b34249e8fc61ae5676c9fbb49da60fd4e6e99ec5f5153147ef9d036b88e4945da3d33803ec5552c7b49441b9206a26c17a213cc798c6b9872e7daa997162dca64b4290f5a23c3fa16e8724ae97c576663636cfc0d4431f2b924b291c47668346855f761192d8ae133b8c831c39954ce4098af5712d63152a2d0ad47f4751032d8f202fe9bd15a125743ce528d47d59a8f83bf6cb8e13c29d94043f3137bef707330560fc85825a2bc8d312c0df99ee62a8f2cfc8a5590d7b4083fff4278a1db140530bf520fe5bbb39c479eab2972be3bd03601df478adf4aa7d2b4f3e8412ea2addea990e3903895362ad19768228b2d05b1b18a733c7ccf969128d476a66ec0af2395bb038590743880fb6af28f267ef206f53b021e3b0f57ba418487692400eeb22fe5a3d65bf46f0b5561490ece3bf1d09f5278edf611bcd584ad27061394d487870c99738e15544a07e551ba27a219804bd555fa3b9006929b8f36ac542d6abb97620914befae393acccd6d5de9201551ba308c4b9d6f67e3c7beefbbf7c420c367eb90af4bb86a992599da3a48ced67603958e2658dd9466f8841291396ce2683ded5d76903b6538970414613d71cbce094c0e3a9a2afe0742e4d7a1902ffa121aef9acb7911cd5b0a059c71a74fa8a9d7ed84da3fa448c34ac2574bb6fdd80e23639d7b4362c4f88b0108fbc3d10a21a4efabeee7063bd0d6097d4a05f683e82d258b1f71b88d240a568d2274788dc1ed7306d3df04c512fb5b4b5cab8342901f499da5c5486290cadafe830b6b4c126596eea016ee0e9c9a8b4f5e946970ce68ab696812104259fa5cbabdb37db270a138f1bd54a1bcc3baef96aaf10f72c7b27dbf3b93dc4428cc2da41d54ebcdd043ed69cc79716c85ac27159a5bf6d68b7657252d750cbe2267546ebf30012699222ee21e6b0ac5b6abcdfa52a0e3227ae26ea39b55d6f07aae39d6275873a478cd9fb24d6acdbd853467755adb1f2a72df1f4948d378d84f7a64175797c0aebe03b1555ae7a2ae73f6fed6cdda67aa18d03a6d6968dc4022940275d72264e824f4c56ef3f8f99551726e252ee175d41fbfa6930d7f564472c7c23ca9cf3f97ae50b015926d8aa510a9d16f6e39f11df4205792d1a5dcf7792b95a0bef2a535fe62d6856a30f318fca3d9493a6659604e8d6b95a5c893bec900a5a225cbf1bbf053b2485469f2a7e3df95aff9d9756f57f0cabe86dc0ab3405e065d90378fbd55fa98794179c39a04af4209ad7653b81385d89f92718cb917460421039951175ff13c999f286d8538d4d68aa347149e2d26d1ece4111552b4d4f953a2505d27a08217eab0111f11230789747bbf060e55e947898ea252fd25ed9525de5ea73abca4ba252b555628f6b3fff5584a200ba127556c8c5976d99d7383d84ae7f565437a18f7947479dd4ee9d3e0edacd423944d97f53f73628fa23ba66174c555695ba1b27a9fe9ca8672fa9911f2a7da2cd1be23c897735c7cbeebc76be71fdcadbaa722c06f2af9bdaec28e50b6f58f1ab0aae2bbfb657f4335bf8e4941d1327355cf39dd006a230b5556723f6789965ab73beece48fac2398a5fd8dc7d47091955c41cfd0d687f51bbc99e73d1666632908906f3e7ce85d77d43f4dc93c0f1315a6c83fcef9cc663c41f4f3242f17630ade124d6914ef3fbce49db619042cdcb90cb4986c2dae944f6f00d244e49e289261625413bd8685c31bcfb7e135969f557f24acac77822a5482bc4434e656701d1dd07f05899bb13289afc523d417f744f5cefd89708fd3d6519e69dc96a4d9e0f6b7fb04876a6fd84f443bc3d19742b9a3e60035a1b28ad05353238f58385bb3c3f4290591cf05034392557edb881816f7b4bd11c84f8de74dfed8f4c6a07238c484c4e2b862b3db748239685a71a479d7f2f1d453c49501e518fa68e75eada3802fbe678496b7113c1e2534a6744feeb1df014befbf90cddaa0b96cd37be18f9021bd0990bcfe6952fd1e22d8fe0ab2c7f88ed94311c94ced8ffff433d103d4293713763bb23860146ff750af50f27d0e462b50c83f9e94e236912df0d9ea9e28d2e46306a350c4f54b6ff86e96c891b82c5059e2af33f8c9c78c7e11c73c2b496c6427e73951be1fca8b434e37c15d96861364932fe7b342c85e5df430c2aa95bbc76d1b3b832fbc243cab34b576e9d3f4ee7b41a74a6ea74b0c442d7078e68b3e5b3b18365502f9dc92285d57d752823a2978eabe7e9fca43999b8a98f871f36ad67533df9a3a68423417fbd1c1ff76cdb154ce8aefb9233bc99585cfd377c10954dd98d1f62a7dd1d8b9063e842a787353d1637784e3d2c07ef2fdfc2de26adb4105b931adcad541e531a056ada24b6009a173d058e9faff832197d45cf7cad6309f1f7828ec5332d5c1fc8dd5ab0b72bf36e6164fc86048674975fc0ecb2aa6f3af7c8eebcbd516bce51879a82b109e4ef3f86879b66f3f92b68b480e570f4c07c9c41485673edb5d1dc61e364a17941d2736bd27dec9bb0db4ba85058eddd0b16cb09d5ba819af1aeeda250a255c5d2217c6520e9326bd596b4913fda3276186b18a53f4993a985dc409bc2ee2b8a9bb35d54f5c4b9778e2b807f4e98ffdee1fc59d623699869ee72b9416608d67033653bf479fe85af51aa0879fc5919217ebe8a1e8519a10d6f4caa2978c4473e936c1f10b3effe5f0a64ee7dc158cc8cae7e3b62726ceb08a02b3da75396b2461871ca66eaf9d4d28f32d069885caf7363924b39e11b750a203e2c6631fbf35acf11dba3735edbb351cff92e68f3c3f27a15915072442eb8d35c800b5cb6afc21eadf2b589e28313e7f689e53297ee4051a599f19ec8cad54625bc8be4742f81581b14eb84fa8c3c5a45c9dc68fc31721324251464cda81613195607f808f12f9cbc1afe65ca4730d0766fa724d64a72a6f7d20bced88379c3e5cc78d756b1a69243d962c154db2532544e70d2dfc725e856465972aee6f4d657aa0e9e21a724b3f764b9675ef99c5ec6d4273ed16f40655aeb29a16f71852100bece6d2a4430f033487b5d6457ddd6282c315c8681472ca5e9ce399f699d98b5b3d0f123460d112675092c01fa1b942dca112ca4135d26905672ddf567f25a59937bedad5b3f4bc379ed81a690174ff0a26d88f1b23235b2a025ad69e47729527350ee77d4ae8b5fc45d459efa750c1d8f1ebeb8ae541e7635bb26e145cbd409144e903ff505bf0756b71d555ed3a35f9088c9a18d762d6c92810b5010114b79e881c4836a76482563be14f6786d9791b2c96b76efe949681bf8ba5a905904cd73808dc6d98d262592814e79ce4944193ce85e5f68e644848ae1ce7c4f32c28b928d80a9732fc09f82b14e2aa6e7993fb4fe6428d3c6058f721009720a75595f7a07976010fea795de296beddb1df0855cfed2051b83434f6d70cc9446b385609a0614b1dda728300e1946351246b69acdcfbe391d0a2ced85835d6c6c22cb220305462835e2141de3b71a7295e479b8b01123585804f1fd876130bfb2352f9a10780bb16756c492b34f939748556ccc07715dad10ee613c8e9379aeb8f3a70c6b0a44cd4a6a5f888bd08d7fe8d1bd53ec18770771ddcc0e6cfc42a00e2bb052f4eed3967b9c94bdca09a80c018870116ea213a99b585604a112e8cbe19b205ca80867d8d65dd8c1e6efbbee0d280bbccf25c4500688035f813d255638804ac06d678e178a170aedff2471dbda28303972e0024eea4b150fa861f659b2d5aa6cc83b4029e4839b34aeef30667e32a46f413fdbd282424db162d366aa74afa70c8773665430168fb687add511c127bee143d20df1594c2ca3f9f65c7dc97a64bacbecfa55cf1564a8512c56b34f22a2b9702bacb1f5d1853fa32ba3a2625bf90ede6c3f81fe8916aaf7a684f9452138e98b4db8713dce5f570394dc933532a967ad4033981cec79e1178a83c9cf47d9b6b9db6706ca307a5443cad3854b45cad855c369904d17a50d8135d6dd3d053ff26d52b35b19cb7318a222aa43e29a598d47a116d8a9170fb35d19c61e937bee178bd23102e63cf74511a555a7fb6a9a920a9df86cfcef5de476f680b84be79fb0b7cc93f3af2c3be9586ebd038b4ec2c47c371bd2bac76ad881d5c695cd3e307564b484942494100ac4691085b1c0e50bab21988e0f2548c6b7a98f813796c29ec3b886123369b66533c4067b25cd88070eedbbe517cd61ae42125fefebffa2d67e9d9bdea3dfa26a60a972395485b5c76401673a9e3379c9e6f54af7379e5bfbbfc17ca27498f920d152841d416f6caa97b86bf95c22219943be66656cfb1d8f2787831b50f538b61db82d9ddecd47a7af516334c1476bc46c76fe9f83d7442c8727293d58fa1de8f89cf0d8cc9cbbaac5f2bf631b66205c9ed5c69f1fc670e1967daa92797b210485f60a22617248cdc6cecf1865416286796926b4bbb5c0ac9293706f07a732b4d6ef77b126f7af0c58178f3a143647963d6cb75d3eeeb7b4b63bf994c5928bb8610f9aa7e89f75a3d3d3946c8541587aa4b6fc436b7ef790f5d2376d84e2464edf18860a2481c59db7110c4b579c705f196d48f3d1b5ea32f7f44ef5990b9c283cb7f18bd46ef3c9591d8516badb5a1cf209a5401f29a0e105a73996b362e345330586ba962d0c8ee0b836cb4356c7e8b6fa17c0e3ced3702e4c7dbba26ea537fda0aa3d3695f21fcba81e17e7da45601916f956dc31c9e33df968dfbb62b4b24f1b5014c029ad93db978ca3c373c3b93cd548473bf9011c6adafb77f05894d942f97754fcd9974840478ed34d64479f5e9271189ee9ea86a44c38127ed47ba8fa0f7dfa9026fa17a41d8e45143ed9485022599a8227c3679f4c91583463cd9390064ce6afaed53bd265c5ec752e357754dfa112c98547d60d8a12a97aaefe073ab6e08ce1be6b0d50ac4aad95ff88126cf891d96f7d5a1558df5b5bdc29af8a322638fd79409c43865a2f3cd7e8046be60e119bc799c953ce319c4882bf64560d28506d82c8f99c735a9f47506e0a61176b507904331240242287c65ce2d564f2571032730823b90146a9baff17886aac96dda1d5211f7928728f6226a57c2e93d6fda8786ab5bab62e815148c4b2da7eb674266593f50aac062fb59c7fdf7d8e8f771a1bb64baafe98f9204cab5854ad8fb08b4b289f04edbc18ce44f506f953fa0e09801604c36cee8d1254fffa76f4efd949b9be18947b87ea70563fea2ae5c0967cbe719454e0f26bc9ce06bc0ea6b1bbf0b5cbbafb39dfbe9334a2968874eec60027f50aa9e3d4dc190eb91a08d86e2c2bf8810f743e01f9de3e370cf50edabfa12b277b90964d475c5aee4fb53a9d71b110807048990de2e5115e51112d6f3c9f31375d481921bf369fc088e66f842d5a59e6200799671eefba4b7b7efeefaf4775541e8922900f06754b6fe057bd4ff4f3ec2d722f8cb8fb4d1147eb2a330c51f81541fcd6349d2907b1e2123883d669926cdedc7488da62e700a16b7e9efb06005bcd858f68c8f60217e417beae398fa5abb8006429c5c7fb7bfb81c746862b66b27b87e8e0eadfd158d3a90e59a491fd80ac1157bda02df74a490b8739224d65160118fbb621a0f2b15d623e6631b53f57395258c8d054803b0fa194069ea399630189a8f6b3664723907cef69fec94042f869d7c8c5daaf59a68d0773013f6855a7200697013c96461845f329631e9c3f101450c18ef12add9378853afe4a1fdd30e6f2586f7f36fc6c137697f9319d46448d38e0ea6fd6222aaff3cdae8e51034a025c0020358d81a8c4945b1248a90f0d41898400357656a007ca1e525de63ae96ef853f9634bfd47e12bfca4c26aaba0c6481b95336370e92ee493c075518291880caacc78bdc936877d0cb75ea2c450b48b4f6bcb14cf081c7383d0883760ee132769d1a6cb5da1d6b323ec62dae9931f8a551bda9ac4c2b6cea79f29d7803a502253c4daa4734a5814bff2f71e30c762de23809578134ec187f7c2860fd47aa5b57f67dc861b29591aa50c99168742d4a95f780e8774b1a00094b688855c6678d0971259ff7df9022ccaaee677f5d5d6e7ef794b4fc9872660ee0bfd115b137d41b7f3229920402593beed7913058ebf212f42f2fe2bea324b4731f125bfc96243dda15c9c1892bd39ce2bacd550fb0b6b7897ab06cef1d62d1ae86349af6cee68457329fba9607b3e1e5e243920c9697de7ca2398351c3e8cb5505a7e18e3d1ef31199f2017e6b770c3fb5409e9d4bf0ce7c5e565a356a45c1986dbee6d26208ee76431ec0b2ba6a206b916836200aa5d0f02e80dd83b9af457f3fb509b7776c032c55396f682c87ee922e18232f132d337572b54309886f7a738e50a3a928353b0626dc6e2fcf1e9d426d288dbe04583698105effab4deadadb4729de7b321bc6e690e57d11e7b03a280b1b22fa85f14a5593fbd59c83f412ae8269ffb0717f7318917c6dd2d9691430fa9de3e45d650527d48839ac7f6c659d8dfc7e26959bcb0a5f7aa22ed999136cbd66bfb138be57e223296b4dee1997ea164f1b4b92fbd711209c50e00ea511f97a2c24b74f9119ebb0bb3dbb623a94f57eb090eee013ea5ebcf2498912f1fc58fa9b660a69469b796371a9e0c6ae6b7fdcd6248d62445c0c559a87d1d8f5c96f2d92ab3d556ec173e6bc6597fd5c14506f5b233af7c1969bfc9b6e973f4b06e9739a128ca2781ddc1f3b9338919a37970c5f49cf92b2540e6bcda8b6ea9c6bebf05529654852e1b597709bd76b5ea9d6bc08613df16fdc61584d3f7895d5d7f25dc0998a9b7b2d56e705a0cd96b949aea6ac4226909286adfc18c13328a05a0e05efd8197487a85a02e32399ba33cea46a575ef90f3e3898579a0db731d2b82f33f05533dc9e9d95bceaefae149ab995c71248088770cf0d116f10acf2331e38e2b939a827026a0f6db3d091287a941de23f30bda2f93aeb98aff1caadf8094df6c062ae20248823727842ac5aade95a3a4bf77caf1e4500962029321ea37a7f487946349eab04bf5b083faff0ad4b694e2137a87fe00181c22f756ee8ec9360b7ce23391f6e3d48d3ee507f8a57bc5f1792bf4ab509d7fc7318040ae0b4ba8e960ffd7ff94e1ad6414141985607cb46a3da6f9640f9bff32f5a89d82211c92196bb3d3b66c07b0e08c88033c9205a4a5c47367e25e00d7e110fb4627a5f0d3e7e867f7f7c69e3f78890142762a7ddfd2f1e56753d373a1490904a75470369c4a00c181b6c563d27770160d9dc2c338da775f8bc09cfd77030b8f8a74f68cc46a0df2e1469b0bf126bd6024c76c3d5d6165bd2bd199b792238903fcbdeb1f004cfaf62f47d41ac3524f8aa2421b223c3a0e9d2c0a8d33e5bfd3b24037e82f4a8b0fb075d3ad03f2bafa58fe54456a261e6977a148fd4b74337b607414da4d5f577d691cfd22992cd8c6c67a5662e2d3905288e67f0216d38e7e935aa777861ae611741c8fb0a71ed286431e883049b14a3140897591152edc8407242ed0acf3152a1b2de05fcf1c4bba42fdc43c17453be0bd3b49265712bcb977edb7b0bed3d7374c4aba69870240371d5b7f12fc37c9e18eeab0c8979da6a9b523e3d8beca1323b89d7b679ffa8827767770af79dea14f46db8b3be2f3538d688bc424d9882c3d42eb24003f120db02c53a212cf1d9c422f2ca3fe1e946b272c237242ba620737ace7b5d19660980f205784fe1ef46a38b0cec4f450e92d421e16e959bdb36f8187a355dcec7486fa578ee90bbaf1ffa70388bfa9a6b576af47153e9cfbe872be29e8a1ff5df8099ef593b420632e78ba704e3791b8d716c01fef8ec03b025584370999b9a7119613a4ac3fe8c4dfbd2d23fc8fa1ad5519e3d67101a4e47d21840cd832b07a9a38ae7f5d82068c93e5b050e87231c6861ec4bada60a5184f35aa8f16647fa31bcbaebe7d8225e248af16d82ffb8442b17270bb6c4dc97360ed173d5b59c989a3430115bc40ceaa0601b5e7012df0e57f581d9aeb4f3c315594f170029de84e8d850732da4c19566005e61d947d4c9110ef64219e7b13c217d75ccee5aa12a14facf1622423f0e8840e9252e9b12204cd392782189babd9cab3da7f17c7ec6646ac5412162669b646ba0907138738f4f33c039bddda0bc68b9c12493c3e44364cb70dd2ca84fcd1869e83c2f5935b6d104080d20d608b992b7070c3694837cd7593e23dfb2c008b13188c1ce9778a414019122f86a92411936e325bddad84497ae7a85b19bee01a7988b45b49b5b5b5b70a904781907fda3bb6436bbafbb4dedaac4727f14c72d1f488332e5629f155987bf4f66ada25f37310de67b45a073044a5a958a1602c3a2f3a5b03a9126e0ce6c0c306330b341f53bc5025a325f06b32b83af10a426a0475c0b5ef6e0070ee2e9912655c1220ee21d0f7ac812df976bfd30c9f8508b8eb00f83e252e9e0a27c45d0c38ab55bfd84850b2bbd0ddf477986ff71e8e1e00a9420267b848c09a831eb3ba5e9dc033d9a5b9a760949db8e0d1711d145d27693828d2a2887e54df56b89ce2687435c0c6bec050e5c62366c3184dbcda7405b54b4bedb76c4e804a2b7e1522ba2ca9635ba1f08191d0dad15ca3f04970e6d71dc31b00875fed870f7c1438efdbdfed01eaaf7963f53e9b7b1e27dd0cb30e347847444c14cd177c8eb03d6e03d0985de4c580ee578089e37bc771df059911ef794edfdab2d98bce926c3061347a2ef947c7b87dffe4447b632b90662a6908e2b34629faeb33df1021995c0c3b8682e55f131aa8cb3c6ec888d981fceb99f09805f5dcbb3435f20defd41efe4abfec27e064a4d4977f2f35d575d5bfbf7aee8edcefa69d763621b7b293d74e90f8807b598e13d71ce018a59549d80402f82fdc328d37102a69baabd55716443133c6cead37e45e3e3ca77ee16d3124c8d6b96494b86a3aa833eed1b05b10ad3951284c378698ee60bbf64000f0710cef112df7cb0ad25cc6c30369c0e0f5529b0a764c8c9d559e5d4f61213fd4405a0c1ba773a4863235b78d77236c009fda3b3570ad6ed905dfd8fa1011b8ee2890616c570ad125343e65c5f209c95204800fb1e4904f5d976e49a5e777e7f40e5fe026347bc724eb75551f03a64e97b4546a4bfe42fe3f30407f204dcddd40dea6598c4835ec4017bdf7a2c5e0b4895b93ab0a0188a08d4491f23728e1ce30aeb88d23e59806c2803ff92a12c2e17d5a254993871cdd30a3d1ed93000897c93028749b886c8ed81d039757f255c95a8756cf0463c2c6fb23aeae15a06faf9b6e88cc586be3a27917446bf767e3f73c70745de15967003ed71c88a9affde570b97aeebd1c04937b964af1c2a1742263fb6bb2df001bc9f5a498c60b5578c21eed775f2f6dc87aea5dddfa6b16b27f0153373b189c70f698d9d3d76123b2473ee9caa259933fd3a239fb72e5e69d28b12942504d94a8f0344eae0e5e62d66eb7b70bc0b663554faf03eadb027ebf004cec98b46e94baa42979c499f7dc74cdde8a04108ac33654093c11bfc1354d597d18b2f9f1cd64400763c4bdbd9d7b863f4bb2a6daafcb485b411d98cfc501e1a8e1ddc17d01daf2edd3b4dcf314c144d3780fde92f8809ccbbc8cace8a7e9e9982ea6c6b32543ad9e0d87ba3c78e04e579c86bd044b444894de932b438a3ed183da2dc1ceb9bd3b22b85ab8933ed82d04079b07336dec0c515c1e4df4a75a5e35c22162623648588585f98820118775c66680f51a3c2e06e1e3f208a9fbf9d602487cb3a0e75337a1cd57da597aef4661343a69431fae9ee3bc6bc824e607f9fa877c60c07174fb62d3752d6b8e9cafbb1b82199e0ceef702d3773d66d25ff67754b3df4b96d4e3cd13f0a06613306c032110cebf0176270abb73a9221297e5a69de1de537444a1946d1deaf1ad971d6f00d4024a920f98728e04acce554af9c2df98477751370bb00d67ddffd8729619d077131354d11beba6d0fcb780fcd1a14c623a4be7febb56df5de54f8590366183d338926a089e733cdf33b2cc308899c74ff517b1fefd02505db9ceea670197a170ecfee2a3a93ab5d6b0235757e79a81b3b53b49e2e68c3c4caf830a4583bd8d788b9c366fe180550c9e0f2423fb77465d4cdeea2784fcad14cca3fd10f7ffaf1a231de034a17fddc5c5ed19b57370a3b136cdacae0a8a3f9003401d11278148da97ce182feab12554e5550bfad293d123e733f936dc9a3ebcb51e0da4c7abf224a37222f1be5e0381c4124c03c1d903b3c83506d32c6d613ac87ed65558142362a3742a49ebdd405e25d4195d4f34ca3e59b48daea032ad99bfba23c677a4d653bf66e45c355cc001f5630fb0d585935f7fc62ba955a337d8cc6d8cfd6f57a3d88dbfba19d2f09b3ba9361867be3e69a3ada9d1e45f2da4e2d3b46a70266a3327096e3105f934265cdae4e380e72f15ddd3bc59f4aaaf0b6f968f80ac2784424477cf3c527a3954f5a546da9f67fd807fc0f6539d40fa846011362aae05f552230eec87d26c239a8b274358266d7d25671c01815e748791c1005a39610ac72552ab88eae86368d4b319dc1fbbd6d3b37b9143296394a3ebc57d6620a7e3d55ab7c7cff598b37533e950a9f5ed435f49b9a1705a534ff42328515db8eb872ec9d95b203b9f9a932b5ee29fc55a977ee333038ecb0fab2746d2995609c60aeb23ffb0fa6dd137b13665a2f6d9017227c2368d84dc45436c9b51a31e318cb0dd49ccd169a1fa2ba873b71eb224c275a33b1c43218961f758432f9a3bff60d25746945e1d8550ec181a440e9fabc4caa242a291cf9a054072d013fbb0cc3bfc8ca5947b198511ff68b45ebe6f256a56aa0300127ea38f983c825fde571676f58e7ab59a6472a64b99ac469ffbe5fd60461e80a8bbbb4cd22b1c511087552edfc24a19d36b61f3b5722a844c173c2a36f5a102bf6fd4f3ff6680e782c2e39af6e72cb62e26a3638f4bc2d8c05a65672fca344769b42d16927be32288fbd34e43c0b6b86974baada20129fe291a37403a9071080db1db04b4d04d87168f95ef6ef6e9199b4ce7b97a30f1d67817455e430affb2ba76f1e8c44654903800f9d0e095d84dfa83be7a4def20007fe32b22f841f7bd7a7e6acc2eb296e41dd9657ef6d85dcb59b2a9e1d23f6282af22ddd0ca3bde2aada655efe9717090435c1501417a5cbd14b39f402b61b9ff0c49cd4a69194e64d523c414d7c3bde0411ac7925afb55ec1f353fe7ea57a242d52ea914de1e466fc2b43298259b85b545344aa1ab641441b558fe46ba2590f9234a294d6e5109a5623ad0ea808a7169fa3b079094559aea5cd8e065373e6ee357326b2ae5e848fe40d6890d3bbf6f519cb85ac486eee9f432bcec6fe40671c4ad8474da49ea1bb9f7fa7066374001a901b06919605b93a283f33f48fec8b011fcb7cb202f32fc55a423049ea03d398be49311d2968134b7be4d3b9f1b7b9f97cf63f8d755084083f4c74b0d07c4bd3a470faa22dedeee015fab34f165366743da8e5ed5c38f7ea6fa6dad85bbe92f7bde617c7079fc9b46eb42e017e7eb7be9920931f352c92d71fa22817aae6b2c4efc612544a711c8a5c6a21aaa2d60b9e8beb5bc8680bc2e724d8960a7accc868d6317e93ad53fd0de5665230bc4229359608faf4f5bb987b14a30f955a1b707b22fa2d787fe0f49d8fcb5951d788e1f60c364d07c690df2c075f95d5944ec9967984d8b35648855f4b1f2814ac3c0b240726e4f0925dd57cead069cadd8c30a8085600b7104085683e170df5f571286109b6e0c8d4a54c252224d72b2e3ce60171088035506b26195cb9daedd2214088aa7275000bac4ea2fc61fad968b7b86736154d96de6dfb17987ab66e957f3ebb321de3d8889bd4ab0fb731339ba8830e0c3222f54a088daf0957fb8d0b3cdddb90690030d5f92126b4496f4c3740fe0d48a483d8aa9b080b0d1fb038a43a7f10b6a4de7fe6f2b97f8be6ff36c53f971af98dd029b3848c3c80e625608be161d8c121ac7d87fe2a0983f3464c3b10c40250be33a2f252ef09f7aefa2e8cd37d108101a3028cf48960ce6e502d9880476898dcc097fd2d84955536e51a155c33d92ab81470a2a987a4149e49b16f9076a864a900030175c4f51fb2009039bb34b5a1394e7bc042d24be1ad3239408257e5e3638fb3eb4354067b930c8d54bca80268cea7bd1ce5f618c900f427ff8c1b7d649b826ffe85a8f40cd5becc6c2aea15dec190557adf716caee062744cf77e1cb4e48ab11051b24a184dea380331a1d6f51cddfd670ab7a5cf39a50af17c35a0fa57e3793531d6c3047c63bb301cd95b8029712dc02b8494245a1239901bf6569392a129ce2143cef2c0d0fd7cf4210e5428543b20e5a28c630b05734277eef767b0de6387f9b533784b6d0768a6d445345e4774b33303ead5ca0f7966973da3d70f8bbcf5f7ecb820db43357ffdb9b37eb8b3681ff8d9b3fd0d5a616d8c106097e87d4d93bcc3559608ea6f884e6b249eac8302486eb910726544d3c6e2e6ec1e228634529175f1b42d6e08567c3886c345ca9eed3e2ce36d9dfad85de8df29b072a35eabd1ffea98c9c6f8987d5739b8d8cdf1a90f5f83bf8057e74ef370481a994ded268c7991e543ed504bf08b0479199c3886e1f2e61c57f0ea556cec32aa8c9592472b37092cd9e62eb64d9ac175d709bce630f3b1aa1114f745605299bea9c0b97b160db5241bff274ebd3e2f13bca99bd3a216b92a77ee535780712892f3edc59530bb60f7fce44d69d406737d22b41c36cbcfd4a9e8722c103b231452460344c8ef814fcf05f4cbf69ea9f1a533589aac482ae7022dd27274185d6a78469b7da0977d79760373e7727bf09cbe5ef5ab8ea401bbf7288b124afc5ce5aaae35dc3521b894a3cd30f310e9c639b924f45f4faec35ab8efef4c4b72f813f24ba5fd0d79365676feb49aab324dc16229cec277f563689a46d5493e5e95f055fece3485b0096aa459efc4c65dc05210f09106d9f4004fe66ff21c70408beac0ebe35fb9a1b64c2aac502fdef124f90242c39b4c74b6ef7d154f6624d5a7a6a3f1a6972f9daae8f94f68160d220e048ad2adbc324ae3ad443991989ea16b0eff866df698fc8987b6abec6560224f4149ba6cacb46ccc6f03b46a36a30abb36102738670c52a41a75b34e090568503e0d4708e75966b676776c6acc0cc773e921ec04857f9eae00d7a596d9d5aaffd83842e69ad46f6db1b53e3fe71eac5aaae65777abd2d484d2959c31f17610fd67f878fc5632422c0323eb3e07b7d51a962cdd5b2b02eaf56aadab0e27984b2a4128966fc735b49f66553932e7bbd2bdf4cbdf9ae77cd5fcf999b6b735d63e0e23c078c820469ad78d17a71da4c4b177f3fca47bc913d57aabed0f9e0d8152a5bb13ea52240ac0b555055049ca789436d7558d4e085bd4b43ea2533911f6f1c58260c2d56ce33ccc3720789e92db85c47ae6a5807bddac30bb26e20bebd7188f1b17dbb6432408d600b0d31b4984b496c87ab5d6d6165b3a2c33473188fc098b3fd18bc9010e4285cd904e8e37790ceefb688cf264beedf882fce8bce3cca5b86aac40c186e269e15c63612eea5d314c0c614f2a8d63332b28feb67cbaa91c48e4046482b24c721fa98dcc8db0443c16973c26b03152c4d20ea4ab78679053a04b820d4b0ca64fae95c5c93f5ab4f352d9fa5a82914eb1b9d108324145026d39debe67064fb17573e8f84f2ebdacb7721a739c7acb19999ba3d7af82d2be1ab0f3d599cf9aa1340b2adedd946a02c77019f64aa7154df2d2e8912e921470dbed8c1fd8be07663eca6c3a5acfc8d7e77224a6d6822eaa3217145175f054d8fa8b024ec90c0cea1635a1990f679f21fc83d33fb3ec962841ca875065d11e5935f174a8b7129ef67cc80ae84dae9da0693fb080c20482a4904e6718c8b8dc92a53988e324b1d7a3e7e947853f767ea76b3ec8b7cfc89dd2b86db024a7b25da3897843662148cd703ee1095617a86f7beb47f58b902a67b276f5325be62198545597b681b1096d66fa756cc986204a464528b0fa3e2826dcaec874171f448096682750bb06600e2b681d9409ec9e538a8df4edc206f479172171687ad906fda04398af960ab8ef6ace83c55d498f65bc45a1dd4f4e3152a478d7acd400c02041c80785fb4fc7d10f9fa7e2f2ed97e4a9a798c9e020eca53592a02f8692ee04d0caff8446ffc164f7f72708977dab7d9ce58b0fcda5f645c3e61e3404f8b7b459b04257a83a63effc0bece55867c9a36f867126cef8a9ec2789838b504644af9a8b65707c76ceb8043b5dd7f0f01a8948f37b124fff942cd3ee07918a4ad1e3306dd8310ee0f538e5d90dbdfcc7d55e497135ac6abc77845d42dff88e647b0d00cacd8f8709ddae11889a851fb61864a5cbf24954a866be44e5e3f3631531400ad7178f016c5c9d5cff2e0a49e807d260f43c4218232b4a3bef6489b046987469e0a70340558992c0e16280257e03216eb26e3df65931536b271954558cb32cca5f3b834f3148099ce824809300166028e7e8556a5a8cbaa9c4aebbd1db28b826242c4d9e5bcceb6cb247690119ff0e7ca028d3ef99e26c7ef1a7b9591da2c76ceae7b5977baf0b0c0c0742a911c23de30c126fecdef6741bd6d6fc0e58f8ccf8416cb8b01912c6c0e184d88d6a90f6b672a88c9623cafb6a5705d47fbdedd453b692192128710868bca6c136de61d934505ea6f5aab106899b609a9b3b33bbde363a9edf244dd03b1179bbb6055ec3069b3befe649b00479256b4bfca25bf51c1beb9bca0c16932c49d4b59e9d38ed7df6383d116af50483b2bd2315e0c4b812a6d5d97fa443477ff59adeef376ae8fba5d2984a7b9e62ba3c542a12709a2e381726317eef7439fb2c780c1553955b04289c076b46e80a8eff4e6be6df0a650b2015da8ecef54d14ebec01a6bb4b109f964ac796f8c3bc3af25317705b7453e04dc72b729f18c6abaa69d2dd56f96c9f6bc3296d610312aa7c47311cb71aabfa30a7088b06032691a1dea4cf10742605696f4fe9b8d48a0133cc690ff603d253c52e68e865ad1fe04aeb2cd096bc721c27740ac46fa75e964a3570a540003e0a421e1958ad47e39c7629c940377df36b7564fec91a45f3e70675fe5bd6464c1ce8a956ae7443ae944147861551a049c399d8702a2a28ea20a2ce0ea031c5212371e7815ee39d502cce562cbfa75428ea653f4d2e3b2aa6d24e4b9a29bd230b24dce272862a7e4d9169c191039ad8fd519098a7c5c2a068a325078befa12ac386005c0b03380a4699b92ea05392e7065e75ba5d7e22c238fd9ef61cf9deea484d8e522b431843ebf62667dc3f2d5290d22825757844b9eb752cb2ff419f4905574eb55394e86ee19612faa7b511d81ec304201271df82a69fae97439dc1ec74142208f1f9adae735098fd6aa2d02bd338b70d0570e5ddacd68ffbb9362c43c748cdca4aaf422cb5e97961475d7e3fe3c3537d2e4bc80c4872d6dafa228e64bbce2b9a31af5f242476ab1f9e698bdf076f2c4a98d7fd973ad6ca696ed2a1356513c9f98c4b0dc861e2435c454efa6f91850fa1e9276243d8d14299de75c361561224914018aa0f29ec6796824493efc6cc30dd98d9b9344e5dfde5373f0b3ec5e4010bcf608123e34094c65e5cad7570d0d4ee12c2085c26bbc7e717b6e900c6c29d7a76b2605d80d1f2df8ee9588bace9cdc45bedd9ad490f787cc9eb093f8a1b5779e2bb5eea081aa495bc099f2c865874e054088755ed9c5b2786d44fd2532eb9bef561c15d4779eaf6b40645e90fa1e95043442805994b7cfc9463857ac6e53f78aab87d8b6ef69f73972f0b7e1a749356e6fb9b92e462237b42d88be916e0753e47fef677116a9f3e52514fcd5abae410462adf627e3953672d76f7234ec29f603f227156c66680323b022282cf0751d60b0cbfe65da69341062fb7dfc645b4e7a8967d89ec28c4aad313c8e8cb3dfb1f30c5ae3dc778822fb74c37cd165db2cef43ee4023c0b626257cdf5bd551c32a14d874fb357fc7cb5f045a572dd53753a8d0ba9a30c19b23e99e25e6e03c6db1a96a0374ef181d449059bb31a80d92eb753c2428876afc2abaf16b1ec5abd81a97a5056fa5c27c344e3da7806c1c9c947d6f56d36bc7c42c092b1fd3f7cacf6a224b6f25110852bc6f448ce6fb14622d62ca0590e74164c1a53933ec1b5492e4020bdfc5336357d7f9b6eb710374533cdb82f6d5aa06ad55bf43af43d5ac7d3cdf9fb3e03de53334260d8a3b44cdedbbc11dac5e333e41622106df71c2c760471dcaca2ef8ab7b34452eeb118aa1091488229ba16fbb4817165f346d0abf6c458ee25d432115e94ab4f18e4734f787d25410461c934398ba8f299245e0da04eeabf3bf23d2ddfa7c5e5d71e7587ab607a39a631b6a486bcb1f6dba453c6b1feba024a558a2c69eb63ea9a8ccdc5d07205c4a2ddc45bf160a7f95e73842c1121db474fd8ac331518c5f29ce2631162426db8e18f7a75778785b9bd25858b77cecd775254542603b99d5d7cb9c59d72c54e32d8c2b70c1b0f621c411c5546419267f1295cdefd3198920ef865bc4d892f9f312906df6e2c4b2ae8dda016275c9e67d4cd749a6336db4b6ceb56a2f141bf192dcbcb993d58c453acdec3835ab0f12e89b96c2a601384726a668273a4a326fbecac969b1d4122b01e7a031b37329c6500547f32d24aefd4e3600093280b8837cc41b0db2be75069acd8347c7d4df8f8fdf5cb7fa49c5b8d2415879084c5d1b7f0f4fe2c4df6b04b868c11142803b7e6c34c31a4c87c1e39e1dcd4e2143819b916833633899b6330d5ce8a1f46e091721b1fd7192bab666bba7ade15da75ab7291cee573ceaf3da43fae96e41b4a1e3f7cf9f18556f988877203e168b5f39794463da260eee925c25ac34dd27f031fa7995bd80a0ee82f281ef9731ef4b4e4d3e90e209c2fe48961a5de6e4aa13a344bd52e8ade0b00e2228b9e83451a8635cfe3c3a185181f6e6e0635f13baa8f7dc01cfcd9c96f98b1d37a9477c8b8b350d8a063317216381f09dc22ec0cf3705debd36d3495de8f30967c1bd06c8e713d481568245bbf13e5b054c0cb4d558093a73207bad1d6de19e2ec0cdb6e8042e9ad0cd7733939c857ee5232a7c2bce66581c1e2e7a4c59b6b24f4522136bdf09df124c6d07d4237c905e9614bcec341744a9fea3ed530b4da1555480a6720715cedf10c301fceb73304c47e969afe1b5cc248bbf2416ed8236e0b3d3d73a6d9db7f05b2074f18f8b412c60448600e9c77ad4c674ae7d299951be0dd80c942a69d297e7e5efdeb0cf6d4335f3a19c99c93d900f2222d8b6797b38dbfd76a8a0257f4024964f72e84cedfb6035c1df741ac8b7d2e599bb2398b8653432d689bb42bd90479eed2531c60dccc063d5c385b0ac64b68fe2362bdcac37ab486a687ba1be21250ff4fef29a034e4e40565953badd4cde1e0d4aca6c54493bd273eb4c3b449e16e04b23001182a704f40d5e143956584f31f747ae92620bed33aecbded5bc006b8bd065d2139602b4d08ad40fea23142abb60654b9cca3f8c3c6a5899477d2997219a38f5095302d23e5a6abd23803990dd9ee66d6de14d9257193b8dfe302d5b87aeb7c92301c09a5737e668b64ae4709b0fe3ba689d5f984a1d2d9b07c669a2166995c8420ce7b1e320ce3c58ab521f2fe05d206fdfd857f17479d6cf52cf4548e1345a15e49d414afa3d0d51cb5a8b99d6186e397c20c471a91201802f213a4a50eb6ccbb77723c2c773ad4f2f15b1f5456b4e8085a88fe964ce2f3494791f47ed9229c17af9f61a06bea9f1e8da04d5ff6055a010ad6eda1004c7bec33d42496d7c3fa070e23c9181c9512c08a4c0dafee3790f6633b1dd49e873e00909159a77e8575b20256479783355cfae096dcb8dd3328c7ca54ac214fcee8d799b74911ccf661277ba2c3e496d9a8a927aa2382720e6cd936bd3d2e9d69c5fae2852ecc3d9a1fbf599693f0b6f64c17cdbc1ffcfdfdce186a06c5108e1461f7a9457011517c4007493b070d8c4f6e16b27ce3939f239d0cd113f8eeefda42691523d487a463f0e69bccfd201a9644ed714d081ac844091c5dd82919bda3e1f3e1b8938dd60a91b30b4cd08108a0e186a2c87a7a37e3f831da2cccfe08e6d95cd9db3540897d912c1c8682a5d68e231f85d59d85863036d831cb97fc33c5369dee5d678a45b4dbaaa2778c8a7d29a405321014c38082c9596034e06c413b87f363a797597a569aeae414d9a01a7ab0ffc5afd6f313ad8f0dd7ea1931c767b82d7c566b1c22b3d32e165d52c192341a0adb3981762d2460485bcb56481fb27dc3316e506d0553c96092ea18561291166b7d14da904be66b6171dca42941f8ca373e20d1f4f2e2da6a6e08910121aa9234facfea1b8efdfe039508f9b27bf753cf56f32ee079d46f3f2fe4a7fcca5cb58851e1e3cfce3ee70984093532ef1041eec23986c8f85c04c0aab055cd457c827bc67eb11dc3b07e6ac0b01012c65fa89a7283f4d85059e7b1c66169b401a177ebb8f334b6537308ee72276b737cdb90317707e6d919d3689f7e8cbecb0aaa974961f1f9cf16ed24677717de4b2f67bd92c22caf336ec4a5613e28283e5ae02d6d8eca7c01b83e59d7fd6d042fa60c579be61f58e827f0779e95a89f616c39894fdf86c0b570c38fe78132e74fd91857886d158525821906cc6014284936a8b62b0bb37a85f489fb0f432ed50f4dcb2e83d8c9717bff70e8191c637fe0e5e5bb632bd57d8a63918ce07b5701725782bd82278c53217ad6c1fe425df154de187f30b33308b7385802fc11527d03b60a31bfd2bf8e5b5f76a7e965f8c4b224b82f7d7615140d5a138dbcb10670be1ce021926403a02ceed6950c3f609fcf9ef6f7b130479bc1009d30160dac138fdbc5ca5df5b245448aea639b7d0f0d098c2506fd0b681d26e1ebe35831fa20be4b86d0ef37f8b0fdd9490589f6ff8c31f06b2a213631259192e3e3773974a03979aa0ae6bcbfacf29a3d6c5a67c67f67b60422a61f12b9741636834066d6119d094b5851515eb7e4a4a4e38983bb34bee25ba5d934de29dc2bfd8f84b11c9f9b9a9838868049bf83f5ef3987e15bd061064ba5c044cc9b95edc292f61aa0867462ed76c4488bbd5c414654953545ff92a19058fe2c54c35ef6047a31bd2b8f97fef0b56836f86ad8ea98565dab77f75f402d7aadf6a462d8e5dd45011fa7938c18b3fb373fd73e5500b879035d87d8848eec1b771fa9555ed0139424b0c4b4394d50677fbfdb22cb230c7a9319f7527b41af06a2dc133538cece56892b023057adf44198b55bf0cd12ca8c8044dedb0f398af36d183b4bd4bfe347c42847fb4e5f17e74d0b92765caf8540da10335b9700d4d0219e7a8122a237a3dd0b0342b8351bf4517eda727aeafaa02b3e6e14c549f8fe49c5c6a737b50148dd0445b34cb88d592faafb20cb3500e522a6d8f2d0d0c156f1a5d0053f71b5e5ea93c78bca44682b939919785368d78a3f764ff00bbae44e1e45436e5c28ebbc78723ae9703e58b51e255f794b6c1a44fd293fb86b6bdad02e439bf11f8bbbf54bbfd130ad7e81df460b3a82049006d91db4e7f04c5959e3acec397dd0587ab0826a7df9bbe70004afae649d7b3c35e9b30b2f1b68a1329f1272b6893e0fbb95cac1ea99423663fce88707d65fb143b7b4e4ed5ebcbbd432c3b7860b8525558dbcc89d876dd6478d25fed65fc6f07ae181d9e25b9f11e6fef12b9dcb8c7c1736c87c1ef35a4aae647f246e6dc6c074f78ebec334decb817ccdafe73a37d3e77d8b91d9194387686bedc6fac1f5c39a0fe4b48b42c1aa7dca8b17d9644da7af1ddde355c5a0ed07ae951cf6e7968720844f519a4ef189fc6eee61eed5f082091179dc0f4c09f020744062e5d5748fa87ddfcad959773bbacbe77961d9c92f050ab191ebe8a412d0330298b332e7a45e4495b62e261650ff370022ec66c13978a092d4a4c688eb8d4572a440e83c08adcd79ff6a1232a69110d3b604b821f89e4a0c9d66c344fddb551fc55df9d65e6d62b58e90fdd74c2eb6640184b0833790b085ab6d01d6c4bb96242e9bc1aa1e689640c321bf951d7a231ef2710fdc546a8fdf223e3dbcc2afbb3470b107e284f0ed6e66e851b407366e0890d5ed46d9cca29172580d1095530caef8a682b0ce6ed3b12d1622b390fadd3faef217e350d474899ab591507c55765e734a2f1db86c357983d62f63c8c270dc52f7e3e0c14b3a8b2802e29711393698a10994f3199d66b69f858816c3c885437113fd3ad0bf926ad77da1c42cabad44ba7bd14413d7893bb281093430260f74e7c5c29d7bc14d8cc90363f0d942efb124a7be10be8a3b24f169dec77252cfad0ab810e494d6dc26bc8802cfdce1e1e8e0e8db745e219f62673c99f8561acdf57e31598cd2ab1bd1acbdfe160f27e42acbed9e42e00a2e712a9a05850b1eb81c7d0c2f02757ac3be87eb8d250e0b06d6b9ebd50b28723f24fdc56f8a4687b2c5e270a7333b58619c799e5d9a4b59fd9e1a4ece9c122ab611dc4497fbdc0450fb1b7381706d98386a4098055843361231a724833ab98be7e0be5159d2ecd060468b7a0be39983f75c4a04844169985b31113efac7477112cfafccd7c2a581db9361a787716b5191f5aed1bbcd726aca02b956ce99e2cf581c8180586b4fb8c8748da1dcbcdb2f639a3af04967653b96561412b9d5a097d1794c2a58bcb897f33366ec896cd03c86c5ecafc3ab5bf996272884f97be31b72ba5cc977adc9026ebb5d042418582dbcb9fea54b50f4a3ffc0d3f19b106369f2af5f3541294517914b616eca9f1dcfacf63a98e6f841d4febd53dc2c2bb2186308979a669770457fe14b0b8b309292484475abd99bc6c7bb6286e7a5adb43c9150726861d2052fcb985eb7f02b391a858070aaf4089351530f0ff43964363b4af8c99c5cdd2eb1ea653729af0c71a574ef42e7cc1faa2a02a210e737f516b0c68ce707dbf30993594c795ca569177d2452489318d3de93f5db8420f72e120e47b158fb8cc40e33aa83d0913d4d3d186841e09d7061f7e8743bb5977b918055e88508f8a3e873d8cbc9b7e394017f9ee7afea2f4c9925ae7ba894477177596db65ec8df8d1f2813f28283a45d7c42def94ead13652404911abe8cfd11fabb329b434d0932ee487ebf35200896521086462a41f0945e0db48feeca95f9ff1cb9a2411a40f60cc9f37445eacb415da1bece2f9e3faa56ac2fe3b5f0d72aede17b1978e99820f2faa96e04594279c1654ddabd4c1f748d47001694eea0f1970f822140591707ac6ceea8a7908b06e7166fdb8010edfa3497d061293b1503ad06c97a347f3e64b3a15c9736ffa02393bf0b47956088904730b0b3f91947d3b86f2dbd9ffa58ce44902c2d7ad6cde18fadcafeaa9bcbe4677afd020a69b196a70dabc886a8c654760a06ec590cbc14c2023c80a3e8f1f5a7b9dfc11b3ad86907fc7b0d1c1a6d4ba6698cd37738c2d38c5b31ac9056ebc8ac64b317e2ff78cf25d53e5f7e95133c63baa35d6d0d8d2a675c9521d74f5671f456858a59b4e0372b211de4f4b053383c62598853b615dc9dbae46b04eba84fd2c7dc41204b545f84a9f6575e4e5d0d32315a7d1c8f2ddce02248b12d19397cdc5b337e9cbc7e8662c02f4b062fe99fe1281d8b0d11c787feaf43cf1c4ff49409fecd827451e3f990811297659f938584805542465ef8d99f1a405710e0d48c99952beab7f0fb7f1fb7c6b6fd285a096ba6ed6147f8ef6c4186a145f007e5a870aa7cd68da96867c362f382b460f2299aadc3ce381d178807ace6b85badf87851e21d90c84cd4a6ddcf58d59a496b64233c328973db13e73a2f33faaa8c858d63585be34fe1bf0bafb6175b26fc5ed466a5fcb8da0416752e960cf04e73dc444342d542b75e9c6da901ff271ed4f8921180dd4d4fc5399b6b28b1a864d243d523d3193f60c16b770c58137fbdcd8416242f31ce57af4a32af2caaf8fbab051ff55ce92485ebafd21b0cfa273ce40626f94a2d2f42207d5e6cadc3d2879cec6a12597cafaef4cb0ae4d21a24ce52b856b50ce2573c3e89a88d6e56bf1db7d048d0d4fb2d09e057026f8393375254e7cc54c54ac74f6f6e204a8335bcd46a136bf1750bdf664b348f89468add6911492f35bd45bcc5df38a3130056bdd448a894e402eae05da9a991024763851c1fdc83deb7654f71a92351c92de87eddc88fa065a00fce39834789cc5ed6d941d7c37b3a4a656a88c2299a92f516592af9e79f915db5d3d19b4ce68b3dea2e7a370bab13eea25d018a68afc809062078e0a7eb068e4f88344e14faf2a531c51fd0dff2f4656825cd10da50124fb36f9203b981350569b963037b6b5136277a0db786ea3a31ad917357fef8c5da84c2fbfb2d5dbee936e89f5dbcd967f4495bdfeb3e7f4e92479fcd1e35db0ce26680caceaedca0e9092b4db45030428bf4df267bdcb860d14c34468ff5e0c717bef97c85607b4bed5bd9b208ac769fd6f157ff10c1a66fc6bcf06dfe27e9ef522445bf0163db99c56510407792f6c6a1ffbe0d1b7954b49b707b03905a66b9daca3ff00ef6a061ffd6a1c977734cd54cb58e2b2c0d58fd2680d97a64f0c32887bdd0294c2619e563da4dd39dc1e9c11295c32eec94b003c97120c4682cf6ca8f0c06e46e26012035e42b2576fb8f41360409a4cccf06fe4745a0abfd71b16c3d767df41e42e2c15f067f2d6a98d3659f363e5cf1199b1ece34b74bc5a99f657472cbed5619fd9e6d69bf1b5b88c3f555fc912b5cf7fad57e096467e0ba3629106da47c66703e94e313fb26f3c6bad79600640b9b23ece40e3740fadfc9943a552f20b426e596b8ffd66f0e0a8b2aa7f75ad50a9a053ef49c17ba9ce3753478a8c4650269cd0d6b3db74ad6007cbe7d29b15cd57af5421cc7e773238124d6fe7066b76dfc8c0976c5e9028e9977009fdbf37eba2a2e4b152f9e66179c32887802106997195b43b13a58b917eb03bde7e3f1f4ab98e1accfd0b1cb259fdf8327f9154516670810106b41a8b6c3fc5dbca7a13cd2edbd7aa64245ad8ed77ed42619bed04f20487d1030757727a2f29ea726ee01bc90c413081a0a26955fe73ffd76335a009496af232ef2d5fe805dd3ac3b69e5a9d19e34cbdc97978036ee24c9e4fbce1e90850fcc777f1654a24a3650982141e0c9cfaba5bd9fc31eb9adc440dc5e9674ac93b751edd97d0e6da1a8c37d2549d9a27a99f47a02fc50d547ee1a0e700d175125dfd8cbf4317e1681a6ad777078b1c4dd50a9ee96154d192860bd81a13fcd9a353ed9357d801e60190a736397ee318974f2435e6ea68a27583dfb574b469e12507e3531505db7ba04db6c75a235dab8baceac362952360ec1bfea5439a2e0ac9839de93e6ccfd8d4b8c219f57ed94fcf6b26c14376ddba8ba4179e52269e2102c651da39ebec999762342ce899d14d6484d06ab9ee438b145d7e9fb572b33499fbac6deeb974bb302db6a8b5862037a23edbdab368d451d19042ecd9666ba13be60acdf5d440769bbc60b52101ff1b18ac83c3339e019546e5723d28b78d267230e0006adbc117963866aaff863099cb11585feb5bf1e0236677278437823c5889dd91a6cb63bf8dda0ae0645e6077725698d9be1608c4c0c89d76222bacc8a65937664db6496611854e0ff45f0a79a2463839b5283e6cb6ab42e86e401d4bddc964ecfb451fa2da8f68da87688b35c34a23016b2a29ae58f408473da7677c8dd2e3da00410a597a751d41b44977f569d9287af95fd7b171e879bfa7e6cf56a00393a5ec7a4a911b54d89fa8c4379c69dcc2a0e02c5c34a3e66fa312a13381a9cd5657f9893f6da2a34e3f4a7d9b17f531b591a22d5acf67d329306d7931ae44fa2fcb9194e119dfe8a67d709c8afd2b82460917a3143536b471033c37003428e56a624084cc0c9392132b8b7d0cdd3c36410b9a5f14d70ec6498831dae5e51155ace14401f271b6008d91e7087d46d052d7a1e4ef73054e598d2e59edd1f427caf16d761d15471a191af747f24d50c2f0654ee1182847f1e1d8f79b02eac2c7b091a0c55d317403234bbb383dfade71c8ad4f5e962147e7d887267d559c45ab14643c17ac5cd6cdd17dd4d473af8c54bd34622b587b236c898df507ec3135cc4ec65cadae417281a2e60482a0a2879dcfc71dc3a95cb7f94af8f50b05dac20a30a06eeeeb8fff8b09e3b19e65c6bd3f3f9ca3db62570332b90cf6b21f71f302a4732c9ec99cc128767a4979ebe16ffa649f469cee69929fdd98d3c906727c2c6c32572ce8ce5c09f29c161f79d74d9bb792ee91f237f5c4991b285b6f9e475f1c70499d9e0a06c4135611d6d1af5a50e07808b261e91fecb9ce26bae6800b24df150077a348c7a003da9223b86feca44935aacee7560d2da06be7295317050d555d5b2e03eb0101005db40c547f4364a13cd136685f8901331f371d2adccb23e0a4a49c6670e995cbbae26ea770c238ae748d183ddec06b1fd8659bbf8aa05df86445441fb736714b78366b5c39efbf9a3b97bc50ec5793623a91d29823fe73f0be5c45d6f8f509f54ed692c540a45139ae622941829e3399f60533c4785228409ccb27b474b2e68f5ff61a837dcc45d0c25f95a2e1f5ca6bca132226b1efd679a28a7b964605732899cf3a0d36b4a33356e8c4aefd1e25b82e02f5f049304e5cc3156bcbfc3e83fcce75e274ffba66894b71f608376490566db5e6735aeac43d1a192152763f6eb68513353f382aef7a892fa45688445a5ef0a567fc8dce7c52562568f54be145f61fec3d62caad3e8126f8ca760ea70da44398d88886d7c121f1f8218854a55fea75237e55e4c5537d529956c93036113a3a1e140d9cd430f4f4c622fa31fa9a4ab3cf71a910a3045f7b16ef1ee3e4ba787adcb02e3184136bafb4068f300b8bf98cba575904c80ebe41e15b16ef33cd3c6a3e976d6ce2a8c9423420c8cd57b03067f995c2551041e85ab63e603c842b5bfc4bb7b6592bddd09843942d369a5372c8201309c2f062c2f8729534f3d59966ac5279dd595518f3e3366638a6b43a5f6f622b81969cb49efdda8f564541c34a84efec30ea450ffc2ee584978c135090aeadea0b30cefa08ee322af5fb2f29316f5c8e199383419c75133d948997f0c53d4643ac8c5799df53df955f6a8a8213bedcd0131fc80ae54d33dcb49706d0fdced59b655c3688acc32de1cf14a7a0e66a9b2ca2d7a301299ee8849a620a43ab572e48c9c34e2d9ab3e233c3011553ed4f84871e76ff38b004f48e60920d24551bcfadb3da3c394997b712f1d7e8e98746608dc21338da6c6b6dbab4555e07c0bda3c84ed7907da6bbe5b20948f38b88c3d3b65a06666a829692f7c2ce6d1d38651e2c8a695fabf79a3b78a5391f56aa34360195ce9b0ec1c2abe310ae0a14c1e50c7e39c7467dc31b03e712de934b7b7568d4cfb3e44c39217bc06536e521d375156cce7487c68a38a444593fec6a290bc032ebeadb5cee7ec13d7ebeeb0af78f4c53388cef789372e9a4a9cd4ae17f5994f0e664bb5bad6304a273f600d095de7f91bf7b80bc37cd349b676f3733aa2eba1f7584b5ebf0b7ec872ab542b1e88517d34a0276c88435f7e023dd0b6e859eac636701c03fc2a0e9b4c741d109783c0d4d83f24ca7af152a72b1f3cc3ae7c0c1334511d6f04bce6b5093a91bb72046c2e7c60f337cc65a23b8f9debda54a91c6ed96a96ea09010c9b4ff2e330d9e33a9804300590a43c9b07e95cdcff3d5cf44c43a093aed598829a0a1518e7f3b28e2cc528ea792c6ab30005a6f7f07e0b78eb5a3fa5618aadee4f2e94deb1c2cfaca98aa9fb78d6ed45c372a357b7c87094c2a83c54514605a16f033aef3ec03ad4cb7be5d64a0b8df89109c03ef32807ac3b3b5e517d1665c75d6ea12d5556397c4d1165193113fc7e55767911303da5453dc6e1d10a85dbb99284fcd06ef4d468e13381993fd49e5872509bc068f7fa066e5d8b58f1f0c76636c7bf0917457e447b3c8846dcdaffb06db56c86fbc25a9c0e31af39f8d03e3352e7025ee8d93da1846f792bd2349a586f8ea0bc553f23801ea70d629eb1149b2e268cdf2ebe24ca887e4ac64667671e72ebffedf5ae48f41328f120e55d01e93bb577817ef150a5d35239c946d5f5099189a48cbd895ea87b5a4c3218efdd241d13d3c4defd66e76397b2f1652f93566745ccb476834053e235e9cd596092b43e0b562e0d1fe518454b4d00fd2a48c60e65f51e762a1dd32f73945419199bfb75318e1c27841ae2cdbec18d208ca8c8cf3a125a0289571a86d57e79343c2e3c1d4e0a1580c52e5a37e6607ce8b9f1e783661c46c7f318a4fb024f2c93aa394fa03974071f2e7915ea75099b051fd0b1754b43dca2efdfcb0a101d98d28b10d0dfc6a77695e1f7badea25dc831a09086dbb08585b4f2061267aa5706adce9a5ba3ba59cb37d1bf13fd9f99d017fb09c63ae51090122fc76ebcb70fd414178464708c82881c62dfde59aa666e98937ab431b68864dd014c45aef9b65ac0e10a422011c9a7732c75cd37e13dd17b4f2157fa057681cb486d9ec172e3a677059168afd67af364a18d6d2087156a807bfe4b0028855a1007d233cd241961b36c63ef4e433034090ee37b02273c2964ee0963f9db1c8c0df748864a8990dec68232259c69e27b1db2dee1b5fd89dd28a469d75074d40b4e5dee3b1557280b7f991ba7bdcc98e0c7db9ff61a8f17de54a400930a6c6055f840541b0d4b75ac6d7bb74e42f6914051be235b6bc6c48e3806dbfc3b8491bdbc9f5cb5953d7c0fb6e016c2a2af150f7150929b348caeb4a93aa72a6d3d67dcd4f4c5cf2b253a5c862121b2a1024880b0afe134f3e6c05420ccd3d4134d7c335a9358af4125d5c6497044bff8b12ce50ba4e0b4b1c2f3afb94c06817ad03c6c07921befe9c6eea63673ec8d684ba7dbbdd317e5a9ba23894f4306240c59981e36b508d5962c2854f0cb78ce5bcce630f6bc5c82bd2b8958450a90a13aca035637f61fc291badc8e30cc56e56d933843ca378c6341d4773e035123090f6bc1c8c37ff67ee717ae55073439c91480e41b1023ba1e45f83793ac36c27ba7f254b9b4e621b8ee6665aa0fe35bcd7d52885a6132cb55b79895245438938d12eaa587c0dea3a74c5e7b557618665a40e2633bece53f726da49d8e86c793bef7ed9f6919f6a859b9f18913d54ee1a3dee1fcaf511d19cfbed2bf1dfeed45cec2c1b66ae7acb8bc3089b1e4e6ed7323bdfbc18104e97be55b808c4ff877ffc66f815b637afe43cecfcbbe22f8a15f1b866eb6fb8e41b11e7455424e4d50201aa25f6467d66eae76e7851d7caeefa18a20d170bf25d705ad95e98ac753c01e1cb98dba5d7a74a7cbb2e125922727b2fff5772815032d14ee234ff9ed24888f2a63d1c8beb682339f2381d2e29749c96f1554e2d9271a6911d88b7791227ff3320f9e505aebc4643498111694da85d10aecdeef846e5b1db2bd94138d01a631fc03e973b6031b0ad7a071d2adcf80851382efa2c51472bf3d63fd7f9c6c92983045281616500e32b95892c66d1cc52abe7a13603975c6d515c1b9204f57b5098a067db4eb609b825e9e01300da9e5621c34c2ca00b9123044172044a2e3c463fc3e78bc9efdfb7cdae6389acc30af51fda5e2bf7b349080231ffcdf1f6d06cb682a21dd5078b1492e32e54d2a1e45d27cf1c0255f8f599aa43b45b5800aa77f92b1be559942b4b60471685a875a3c5b3b15d29b032af5ddd69a001d6b6ee82c6981712b03bb52879398b7925f4e027c79529e4a572c30e58848a79a66a1a87e0ff4e6a2d5838964b358e2bf6ff062f250cf642df4537156a9765cfcb9952dfc55121f293b300b4ea3ee4f758f05051a8edff0179f8fa78645caa98fff321c5e84681244b7f043cde55ebe4f191f8eaafa3b880a6d1a558241199e145171569c605771ec2f730656eb5c3f74940d1dd890ca1971f3a275f49fd319deef68cb53e33ba05539d4dc05015194683eb684764225ae5febf0a86ba1e92a2e3e4f81744f6fc72bdeff62d694994e1007f948b11e1e8c1a5e2fe2bb1863b020554779bfbd46e7a23619f6e53eaa15969722142c962b84e1751951ea59a84dda95362dbf7f5b651a53efa07ab731ecfea3e3dde08498edf7f3c6cc431b2cc3789fd00b5025dcb7fd94d0c795758c017e2f7f136b6e2ba70581a573eca6576e5f57530f873a787bf7fecbcf80e3073c5115559a9a32a3edc20c7d6ae23fc8345773ff13caf6059511528df460c1e7f1beb323290a918adddfedcaa7d1089ae66d6926bfdff053588ee5b3f632f90469aa92ad9139df4507f6a99080ca214757752be530ce0867a0fda04308fd566b7a77ae71c864e7e81916b443a36f40e300f610b89ac52a872e6685cd55cbe16437b467f9b28ba83153519cd80d4778d4e517c7d9cb0e3896cf902312c57596bfd4aa4b76c3c0e785bce97e320e4ff713a37cd2fefada8482393269c6e34dc5bb7160090265f511e1c73781a127644c628fd90e552040d96ec80933cccb5c48b96b3380423085dfcdd81ca64a33a3bf39f484022bb451391819872adf4382704ad24879957e765f7e9b31084c55abaa936986062c654e7813fe5d61b506b687c31d2afe7e1805dc4dbdf1080c27a78c5a851db7b5516e49e4b87d9dc70baee1152a60162a948def6bdf178aa7580c4ca5cfd9b9c123afc36a95744170cd2844aba6bb341b53f4e1f9d4e001d10db9b9f3178e1c05a612b9120d9b3755c3df772a30d56448111e1f93b4740b6b94b66b0a819d5eea1ac6154db0b0e678c30031702a4e2a83da41b0b9376b354bc5b3bea5d4c715fc9683f4130076249a65169e8ee26918bcae5be89ce6a20f950d44bcf8a90cacc58a6e664f845261f3f2acd0245296e8ae9a139493d4bf4e81c3bcea01a9b97733f4bbaa713fd975dd7342b376ceb699227181e4b395535a934b89631819e0ba3cdb211c743ea07abf2d40e55f93076e98f1b0af45a72526531f3192ae5c5517d0be40e8bc8d125157f16e8f8848d6fc8db88622f837ac464bc7cd9967a705843e120bd409dc5b0cd5abb25fe4f2ba8adfd115a0540d8bb635105810f4b9899ea537e435aa28d5e4fffed3c37963393d8a0d1a1cf104346eb2e76473d9ae2e4445757e4bce2e3f7bb224a2dc44081b25d58b80cacef68427387f6d8e63d281cf36b5340e64cba0234e3e1623bb60eb68058765e586027b48a54b8a865f627e8fb124056c686633c0ed68197fb2663629e2ab947596e5f80e88dc58e0cddb38d09c4018fe5ce28af8250d4fdfa9cb3f99f3c2ccc151fcf0b7276affc3c5c57bf296bcf4b11e616d11ea74b5b5d46bbc2eb041faec39c11b4382188f54d160eed2a0a827d74df2f4d2b4bc251ad3cee595828ea901e3732ecdd3199fec539f3f7c370597e79c95d5494e9363a83b80c3cf31a0f72db355d8509af6eb75fa6e8f9bce102cc4f6a115f15c41d70ecf13ae74746e384c6f6496fd7ffb52c0078169dcd43e4318005b404dbc0013ddc9b542a309aa59408cab2b67eca787850e81b2c7080bf044e6e2c93ba715ccc5613468a06d87d9ebc6e5e7758b4e864967c519fb7931e79f64ac4478507d41debb1c3e64ae3ea659183ec10c1d8f256c35a1624d6af5da9976b669b24552169e4eeeeef85e64232d0945af618c7f2b58e632eadee3ebbfffb2595a071c6492eaae4bd3e038205358709ab10207d287f3873d13d584781c745fe7763cfb10b71eda758910743d5e8f77325b95d4e2068839afd5241a2f9e59476ddef8af1ff753736e26a6e55c8028ba2d0785be48f3644b8f2f47bb505cb5960da2fd2b8f8912a072af29dd2571e0a6c94cb0f8a660ababe144c69a996454c506e9e495df4f91085ea289ae123789f9bc70f8ab0ee8f03a3e37275fb36c1c72e86b46613a85eb199947dae595526016ab8b2f7440253ab57cebb52dde03d95d4bee803736b7a0a504e3870a06e3b36339f21afb89122a8f8189e451b3442bf96891259a3673441aae06b96bbcbe66ec40d5ac0c57047f726a74bcfc6af5b6efd5bc0d340b03fe8d3eac730f57698b4bcaa2af20aba16c012d615d2065d285fc40b7531f80d4db9985ef58c6671c94188420c5dd234bbcb245ecf6bd1c3e8e63621a15135dac34d1bc6ecde5026e946c924e5d0b457c54f92b7dec4e4c771816acec8fa642b348660e5890e141ce9ee9351d900022db850f4581d0680f99988e056fe1d02d6dfe1de36d8d5c6c62f1dda6e7b014fb6be3bad489ca37964185e1c7b097a5b8988f9022b0d9cf42a5b45c9601fbe1bb2460b58c2cff4bb990d71408529ff89ced7b02a9d5812d9242317260b0d6d224ca0d8cea34d8069f40638badcd7a7ce34a0178385245e71d515493f12529ac1e52809470c05e45c04306253fac1fbc31ff3b2c5d92cef3bedac9c8cfa99d86d9704d4edcd7804582a3d196e57d9809a5b3655f7723cce3bc8ea6f4a3f8c510d8a1698a9a3e7f3b87a3e407b05bbb7dc76175536e0c4826e4d51b2a23055a64b8d65e2fbca99670f32678610b003879e0003e24b4b873aaee7164d233cc9022c22dc142cda8cfad9e7c7f52ea81fdb3b0d1c5c9741666f296ccd3c80d3939e9635cacecad8217bc4f83ce640e197c6a88c0f69cc4074789a4ff7ce0955ddc933ea860f538f0f47489cc9249fc922558ae58b18e4f863f46ae9093dd6256abb8061bb7d8ba60e294fe0b7c5f869fc7c69da0c89b2cd3c44919b47dcdc9ad2faf31cc1fc05491d9146453be83c9324f0adbf148efcb19e2c02fcb00866381a6ca05371f6fb56b63d9088f1038ec0f99de1583934fde8e527820e0bf965323272003cb3a813ffa543c26737c5faa80627deda10741f6cd8a4dda783a3bb310504405aa7c83a5af7f1862a3c88ca801fce09516d3f0d897b274bff6307f989fb99307e8c05f1895baa512f130d10ebc642826dbf8015e4d5db44de536a92ff70f051ef2301df2f81f35956018b22fcf17e062854088875422190790291fa1e756f86bc3a053b274b36015bdce793e53e25ec47015fe5eb3a6f5f29e955b14dbae7f31c7313a4fbe18450d0c27659711481fb66b67f1b9aa399c763ec391abbe23ade6547773b8b713cbf74d05a937e0cbe13a6a48f25395304371acce807ffa749bf0affac8ddf66551f14b338e0f892b3cf7425737d125e53c991ecdfa8b6421970ce559d71fd737db82e4159b8bb873c1666500968356454421e3b04e3b7109af63b8d1432a298452cc04b10a15d6455eac2fd087022cc1de061ce5f2c0e7a7871fd47e29716265858a8672174853c56d203a47edf8048f2d4c8b30ebc75ffd5f40d51baaf6c2a3be6a08456353090402c9523a47c2e6c22ff66255e245ef48abd6890e027beea8f2a309146b14b5d117bb8af197cb545c807f518a323f52cb4bca570d6d7406e42b9f520572f45db65c1f6b1f1dddf5479f2f28cf2cb8b2d496898539f19662b9c441f0cbf14e47da0a2cd4d0dda7dbe7505891a8f7b7aaa5876ea11635d541a5b234fc73e880611572c499cc7dc8c4f3ebfc295209960b50e0e55cae39cc1e383239e5006ab9f5be0a83ff920339d72df5016184183c930c3e4ecab027ba65d16d483e986f5c27a46296b384a697297e7943eb1e0daa0548f7782e67fb64cdccba3df2a8e626a3456b61266661628c50ad9f993dd955533f01d65d6b0c5bb2e27bd906c20e3ca3a0b35625a1ff4be9cca38a249eeeca8da0820ab1355d79ddbe7881a57b351f6c70ee2da3029a15fd8af0e5fb55157e54253193938f9395debe4e465b0cc135c599f1279ecec8ab008fed624e2ff3801ff89ac9009a59863121d39a992d503364e0090985b0f84e7b8551e2cb52dc7ff992393cac457a88522b9e43a498c0c7c26bad0a4d7dddd8ddf186275ea78fabb149dfc2672192b75ecb161be235dc3beaf2cf4a380dfc4591ffebbcbe03cea7d7f20c86b86090f21edeabb476fc7970f285757dc43ce0160b2b5fedf85d224b2c04812993bcbd5c2cbf6fd2f9d118f9c502b3bdca00ef36a72a203cbd7d5b774815453ef02c4bb40a476334e8e964255a27e79624ecdfdb9a58d67ce80077eb1dde95367fb767cb48076d401dbb53b6daa17545f71b4988bb646aabb7e8b85ee424d2901b43730984f5139a678d991e0c7fbf141efc9f14c988eb1803cddd4bb6a568e5a21851778923df43b32069fa2eeecfe67457e743a60d7e9c346c9cb29f6ef73aa8e06e10957979db53caf378f20568a2764c42b55041682a1712983b53946953023b29dbfad653cd9024c6f6799dfde9dbfd974c5321608000a34a0a001c4c48fe50a6b8aa10768453e694705c83cab46fdf25e55baac953c2970ef4322c13ce1e3d1afe4e969a2ec17514f3b4e3a9ece54fe74f0bc9a044ff175a3dd0b4831ae72d69dc0ca63786a93707bc1817dffd519ba3efb41f1df766e261289b9cf156a76174f31eec8270c59a59881f4d117bf5134d5a2800f5f58f31d03d3b93fbf49e5013dd3f10ab027c1775a34de49dd7324b9730915f5886bb28b78ea8c785303c90be029dfaa8a6cadecb2161f8acb1ed6264d3d37467451bc8b22c7d126ce0d3396018d9c4b93bf9dc973152d51306c7d9eaf4314b8d38236ac5a56bc66c57778bb461be1e110eb169c9848b02741115792528654285d0d99887bdbcc6c0704326c10259534c7afb647032a50c85f9a860e4be1cc9a2ad573881865c5f9472168faea85b2c3bc57ae1a119c8dfb4ce6df42ffa3488141418d7b02eb28f4213bb0fca34fc28cc2e1769bb9f681b29513d7a8410be53536e0210880a93ae338896d93b1053bbb476b0d5ff5947346b2fd6d6e926acc9474f95e176c0e225d3b826ee475f7e2bb5b864b1b8c246d72b249ed52b9ff90c45a0f3cd13f6fc767638bf17787f48fdef51257997d2a447fb181adcc6c92a06da6d6f9dc843d1a79e0837fad3718a45577e762894ab18a85b34fee0ed8eaefd52dbae952ec29c9a2e0870374e828d281081623deeb167707f27af495e6e00375e046ab17b696400db63bc6aa88e4b20e9e4fdb7004aed5e23d0a909aebfd5aa6b30b1c358f41a49367f0464f2e78d8682f5a7c07749f73b952d46b1295bb688f8465d4f6fa5167dd2f2c9caee082419fe72b23b064edacfe446fd191c891f80c30747a2d1a175b52a1f841148812f3a7f413b468c3e829232a1ba408d645209f8deda11fd9cac21c451ce1b14160cc8ba1eae922348ae0e77c11897616ffab07772a38c2eb12566f7568963da8ae3c6e72b0b2bce84e884592ea72038a2cdb1782158059a6fab7ce5a31a1f84eb63ece2fc5b1484621bdad613ae32101f89365aa9204fa4c14e31245a7a4b3c8ae42ddbebd1c72b55ccc92fb380b1908d4932169efe3e5629cc2b3e163c19ad35ec342091de091ef2585e52719ebd1567ecd1d10e285701c612e01d13341072e70bc5285069fd6612d8dedbc5d8b087ac60f58b5171baae69c2bbdc86bdad1f9d2dc71ee5c5eac777af88dc787304c2d1d4e4419c8fac2a9c09750a5f19b6c259caa2800750752da12285ff3a89d32e98897d4138b2047fd51da0f1084e3f69c7e18ba77b2b92615ae6e11e4ffcce2d4cf501c67b0869e793521c1945893d53f86d916231250b532e1cebbab329f265448ae75bfd2aa2d49f89d9f70b28004b3a2374137d76405cf2b8ed6bac5b9180e66c650cb77e749e60f2299e12f27949d1557e2f2de7c20e293b138a20b4788301d48996fea66ea8feb2d0a83d20f2302da79e059d7211e7253ad66acc253ebf7bc39976ce7ec984e38587679dfd3f64f9bf44f57cdcb98f32805e1c6a8c95e037c28c4c9d5d08af7391ed12f27381a4bff551c9c03cacc12609259293a9e5f875f8aa5a049b69a9e236d00951fc00c88ddf7b415b7525b40ac4caff91353337f37a6bd23d783514a4499a266ab24175c846677c08a0f7127bce245e2fc5c712364044e309fce324908b6f1e5dcb37feec953ded1e42991b0a235630dc7fee5a80dea2b6776b83706f647f1ee5098866d985e5fd1bc3900a4837156936487ae37419cfc759537a464b96ddffaa2244c687c38a0ef9fe918a4d079c8a92177bc7bd6bd5e882d61596b9deb07cb21db7f896ec52f4dd6dd30f4e19d7ea9b851c6af6eb9776d9903c6d9a44229540361e3a5f825f8b7fa28c09166ad0764e3ed2f6f9bc5a17d4dac05c015eea357e877d32741ec18455f36b4677db6da1a97ebeac51ae255056a2d057ad801fa9831e71cd5ea25300952f578567e99a5b26b2d4ea8bc21c4483ed5f2795bacf660e33e711ed5a9d42bdadd86b881702805f828ca859cf24bfc564cbdc4cec4466f84e2c4f3f698316d2201e5aac7b0e0407fc58c229876a7625a6d41bdd2d42c0b9c49aaeee411bde2f425689d26e0dd3cfef7dfe8046061d286361ebf9e1ebd08cb7cc43a41c9d17147d76d73ff2af3f9f8763b37f7ab902922fb2dba941fda1ad6e85762ebd2326ec65236a065737d82cd3e33d0d2275fccc41bb97906a793b73538bc4305e34c79aef1cf2cdfdf8671ae1189017276414322296e6bebdbc29e9f1e1d3e38dfb64cb390114e2d498f174e123815d2eb6b628b57fd93664378b547416a0a01b8ab708a8c089c7bad726ae422c1a1de97e508837aed86a87bafe58f3f0e4dfb14a00d73eb2c0e14b1682acdf52aafb53339edd82566b28a89d43076869bab32929649685a4c520ca5525f1304e7832e1d4522338ef5ec34e978dbcb9b549bdef5739c3c2830b89224d44287aa0cb760e1fb084afa3914c71cdff37444a0815446bc05b633139d8bb2829bbe7aebe94510f20ceb0426d39e03a4c84ef43d1c78668c4a4593d8327f1a23d76dea2c6f6508a885cc49c705e578d7d1c9ec82f5a0dd476b4747d385504671f15b839f5bbe926a1061dcf314218869dff7d41865d9f2e3fc2a5fa0185985b58199732e3ec51c464dba621d2888b1b2a634e29f41e7d7c06acb5c4fe14c7b26f4b06c2134ec2e0654a0caf0de1cf581e3364ebb9e0544f2b68303755abadeb5dbb8643a7c78d48e2e9bd9d9b593939dcb5baf82a960598833c8d5944c261b15873549be5c3f0a54bd6c1cb6adae794b09d7ac9cc8b80d384488a37b675a48142d149466e54cff6fe7028ef947c87e5889b2e85deed4a54296f42e05a769ce041f9075601dd5a2698a586af4287a99a4271b8c616dc3b9105b5a28227a6aa66c7cdbc38ee6109f5c11d578e2cad5d24977b44e07d3fc8a2b82b43d990267a722186bc4b11bb85ea0b0ca05d50827e00b712a589fa5f39715ce28df43f0344857072ffe2d378199f2cd2ef526f52823d4c633efea08cdbe7fdd4b753a10776020931184acd219719aced24affe4daecdd93969415ca9e7193a1f02117169e3b0f0360ccd2215d2acb76cd8470f58ec4fe890e8f9465a1cb0a5c8765b01a211a4158a337a56cabfe6a504c63d71ba30eb4110e1c954cac4c4159f870b8afb63b69c90ef2af0fffb96c33fecff4d6f13f3e6fac5ff6322762886de9798e5e03e8f80ae5d1793fc93677efd693f47482928bd75b9063ccb6bb9c2ad7bc4817dc7e950292684c8314790d60c66acbe75efaaf8f3dd7ec784b73fc62d741ff6f419148dae4fc2c3b1dc0f2732c6c90376206c6f88c041a6c1a9d9347d3152d972062afec486b7949f8fd4de3bfaf80d8396827c57920ab554bd7721914bcfbead07923777fa14c22cf6dc2dc4aa7d37831ec8b8670392950d366a5c19f4fb0ae1efe65cb70ee4536b61b48dd6e06ebf0141250f57c70b767e521058924e2fa2f77f0c664f032ca892a40454918b5f3aa5ec14e5e95758ffbbc6a9c20dbd53ad359738b67948345bf5f104a279fe117ac6b121302d634d404313563748fc2d06371a93bd775dfddff947d4b33d1bd912adb2d8a14874620aefa3abce71f2310023ecf878bc44623897c07605a04c536686f5f09d0e83731aeec157c4da02d81599aab6d340cb9620e9a033659e87761f192391178df72ef970b0cf6c1d4b70cad9bde4ee5587d2fab7b7bda665a91c8ea065f6f82ee23e77b05f2d02c7634d85ae76fe77a01ca1d5eff961df48eeaa15cbcbc74e7399d27985cca89b26566412f26179fadaf3ba9349e7a57df9ee8345fe795ea8d87fac3ebcce712b2a97266d372da196a10589d6cfbd6007c4768e7318746d9924c880b7c187e39d813cddd2b8c09f739874e0e184ac5d2afe23deb73a1c6927a5bc3f07fb781bfa7236feece0c3d74ba1c477d2816fcdcd1a8246f06c79293f39ed9d6ae157c5b0c0d4423ecea9860623671e5e1d8dbe64544c5e984d9504f90342d2a3e309af273f0a52c786bb7b15184531e7d7c4297cdecc3d6beb3d8e22a42c74c286df21844ab5491d8c9a4ced326a7f162ccb527d0b46a8c2ec27cc1cb87bc83ac0fb23a2936953bf39811883497fba751db83cb4556b7ccdaa0b95509a6bac96c4ebda8e400620d4515ce7a982f47973eec1e07e92a377e4630bfa8f315b121744efe20b73ced879b211287796bd5eb2e0e35ee303ad0d2c8979d1e9235105708b7eaef7eb0b00db0fe27a9642a071be3d78c1cac5f19aa192fcff6f58cc54c8976ef2e3f1f740604b23585564a7f86365466ad2f1bbfd83c9d99c2d80dba4ed268084a960bcb04a347033b499dd95bae03de00104cf51ab3ba5f451b8478e58f505532980eda7fca57b71eba5cc81595c3f2dfae23f66ddd255448ef4671b989944e651d2fe956f5fe716929af8a5f7714892a71a2111f30988b46b8b6acd1110eab7a2f610d5ea7869fcb65a37b3a0773e88575d520ab7d274774d9e1162ea3071c9e825951f3256fe2a71688d8f58e1ab903193f834c9ab0a91d86b5832c1e2710332c7192cf962617c46d73bc6064e9559aa00914d9336de1c8c188cd5d64b8dd93f104af83d3da380658a2351677f0c7b23655f5dd91d7eab962ecafbce6fe9f9aeabadf0d852d99ed5f5040b6c766bf1c73cb15dda3c6a6586751b462422ec0be34d437e412940c7ca27ffd1b5aad49d6175743830b628dba4b73f87d3b5a80a6f794baba7830c47031c261b56d2e12de1f3ee7b54b5234b6b02c3cac58d35bf51347bd733757bbb61c3d8220b2b938257bfb124af70b89ff936b323df58347bb430116fa179e4af9df5f5e52c6da3ac2c39c40c88a68e015f100c1554e9ae72a9c31a25275b7af918f9137a885f0df962b6ddc66a5ebbc8cf362d80ac528efe944b5245e4f34e93f18d71cdc0aeb6f708d65e8539f75ee016b416cfb3345684805c23bc615ae991ef23e00bebf46d4c3d408e948c2d4453c85e15d6b2fc394d2358f6d424d4d3359a3e995b3e5c7c892af81a595b0a82e7955e02a90829bb77c7a949a0bc0269387de1adc215c6bcec05bbf8c0bd3dd419e119dcc75eeb72e617f291a0adb8423d1ec80d9476944c2f87867cbaaf477ff53442a117c07a3b8be7ae7c548bc883a7bc11e58811dc8502f3ec9e5e4673b858849dedf5322fdb231492d2788044497f019f212608df8eae4f4b7a574968f5a706e36d09ded9d6b8384a6a172c2ed60c494753f084ed8d89d061323004a07456c86d502575b6d308a24c6a41ee7732eb50ba28462e81580b5ae751c39fe315afa180f382c170058990d7bf57e325bb26e285013462e2390b52deed4115111e12fc4c197a9daac74379b069527a3c04410d9980b428e5d18f2c32470c3d12365b81c6c3e2c6c9e08506b03802c5044a4ebe6b98dedb1187c8b3eaf8b6a26e5b13025ade02c3e69f73fa581bb4154fc2e85b793ca06498a273ff26abc2e904d383cb204bca44564d7ed977d522b47be404caf14657a867e9a08921b27c5824fb5d1147e476deb82a76a546602a8b7591c24da970763d55ba6b17630ada9151c9ef39af50bf7dcb49e4cb9aaea95d3afa5555064fb8b736dff51f64e4bfdfa7a026a6c7f6d4c50398ff0c0e117c7a13b98bead60cde75e9ad3f8a16b9044bb6d441cfbd65e9de7cb489b7fd8084fb095e5a65d89a0753456d5e94e336fb5dcc39df854a854fed1c4955926fa26f5ae358e074bf9d6f2f948bb1c02cc3751a87e05f6c31a8352b8a5acbb6a3eead184b01372e0be21133727ab06601ad8e8b79d865258d622cf884a3a40e3d71cabba955b23cceb0459e12f838940fe97e1dfbdd6a6acf0bcaad8e8db5c3064c7874e1835003030b3c5071391089cd4b439daea2da7ce48a48396bcc3ab76880f7b1656c24518e5b0a7e09f30a9ffd2bf5b311b5966a21bbf553a0f5455095953f89dc42556fb623f5488c42bebac5ee1685c6556aa933f9e2ea80983efba38fcedb0577f0c03eb0f8ed2073a476ec0afea9dee83e31a8a268675384e2c44239ea80af60774ae5f0b700dcc83db1eb15ebf4975facc316ecbe143f20e452c3ae2298bd85f2855c5309a5586b3cc2064a7d6be317f56c618c10074383e9109d719c900a16f93c9b9d5fae181c9e59808025b0459616a15c5d11019299d2ff3384d9c443e110f710481545fafaab7e32bb8c5c59ad64d015e8335588dc9c36a2cec7e3b77b024230f9f7a3bb339936d22201f3a25afcd352b81d8427c49985cfbcb53bf638610459e950bbbb31544417c4832f99d11393bd410c59eff79ecb04463175354fb5262000f1a024e3ce94cde5f9ad1c842be5cb777e3f68476d15c86b91b6954ae0d488df2f26fa4e296f6449b40aef0561970a3d76df2ace0d63fa2677cdfa901987080b7540fc038f8cf3a87601455b184821af722b07958d07da0aa1479b943a11ed80b71069913d5952b0c6f85e4e5d9c840c50c0e382cbc11d3b8079955f41c61a908eca7e706471ef39806c2754e2105170c311382e762cdfb2f70e9f607295c86b4a7994dcf43c9890aa06e6bd8a1793bf89b92abf6deea19e538f80633b3b2c6c7a1cb0230e6a9b1daf87e29cdd33fa1122ea3558672a90038ce070f757e2a78a5212710383b9779f69ffcd1e5863e09c0016eb0fc82910ad3d60da6d8062ea1efcf28b9447c967d4deec37db8550cf111f23b40ba2d59ca178a5dd7e61fe4daf60838b1e7a736a3166abe637845b5a5cdaa66b31cb7f7a70416ba1e8f48fa8fb1fcb80b4136ab725cbadf07628af6ab3d6a583a0dcece28e790b96c7a191349be04514d418fd8ea4fd33f414bf66ebacd078285c432c4c0c4ff9d686175892995c67913aaa2d203d6b3d8cf71b37c196ce5b8d5685f74c6294be0cadfd51ac357e54f387cfbbe1608f4ff1f0b3f9ab814ada01e126628d00a35939e6bcb26addad7b7c640694eb8b16f61f8b2b421d60ee4fe2b1df990179f757dc0c471f458ae84e2c5eb70c638d719aba7069eedf0bef12f5174245be25fc742115fc3cce314aeb36d2df97312b45709d016cb0f0a8676063b96cac475b82f892c4aecdddeb6704e280a3d2f345c834d105d6ef9d73c0e08afc751ef8658475313b77553d972abfc445fdb5871d1cdf21749942aedb8dc92f18acc55fbd164d6b5298698a9a87297b5942d4181387facc5849a42416110f00879a727cb054b9ab60086a1041c5c3e593b90f607a66195e0bbd41cbcbf29b66e0f833d02e65ce1bce8080a32377ba8d4b09dd51c840ef3d8d02695afc0d54b4ec1ba7c67d3d903627a7f6fecdb6fe14759f0e3d7781cfc16dba27c8376f7b5ef0c0c0c6afe626b7b55f46689067a6f5e418392423eab963f5719853c22e309797cd8bb8199aec9e54cf080a44ddd3efa459ae3f8201a48a6a782f80c6cc2b1866e6919673c67b114c1211ccb27538ae9dd258a324fe9688df06a1258da288fb540bfa00ce480139acb5f2d2c3625a5e6fcb9dd1ae323f5554fc0acab0bd57c65f9f7a0a61e719d1f216752100d761f9be827f0026cbb3de2a4d834c23406c48726067c6e45bcc358470deefdefafb6d11a111bc0756f21eafaec88ed12dad1367a466db1576ef81b1d1835645920f61e8c74543b7545e5a4d8855de30a1d839b17c69a5be7e16281efa36e8aa82e619a836897a85e52ab5a7f1e175336f010fa34b4c9d15bbe0f93dbbb8a4b38e668fdda9c5dc42330b8d33551ee10dc5c0cd710bc4288bcaf96e9037202f1609aac86b226bb48f141e5a8777024d03884e064e0d05bc9953be7faaf943c0f0d9203ec88c193039467bc95d18fdd6402201983af9170158af109342fd5dbdc658096354ac094cd81205893df4ebc2bec024cb65508fdd7b884c71e7bede2e52b185da42a8f7d0a05f95ef9eeec12a7c8fe2b9b23c631d96939e941adc81e9621c88fd7c03597012a206df6d52dc776a7788252d4d658c0d62fa2a14ca339196b307cecae5b5a00b9be006acfe6f0e3c5109cb9ffaf35d43d95ccc84f087b48e20f0ddcac66d54d43bbc104d689718b5e8e1142f0e611ccb967523b84794c5d2969a617faf0d9c7935c34c3159877d45a0751fdf2be4d0d066e59f566c8fae6e2a8d06356a375ffbb8e4b2ad0ff1e6b1118b470c014ea3d22c5b8aabed918281efda3bddbd28b348beba09247af12479d880bf4957d3b054f702e1c1342c47c1862a013c05501500041f9df2a511c91a4a0fddf43c99a0a8404cc8646001101bd1d7436393e46b8391f6ba2645dff54421bdfc48e4a991855c1190146b3eacf81e23dd0c02284e19c316fe4219a007263316f5cc7e2f88f81a4ef3098e1f092278b7967cba4d01fd2fd90733339b1630733f850cbe091f4501a3d7f670b5ed5d0b4e8d33f0d7ec5c134099e06a6d1365b3c812c921ebbc36c73fb64902b9b2ad0b53bb07dd29f28f99363f370b380cb231635b1162f0c4415bb25b1d70ec7e8e5aa712487a2d2a91bbec26b3f6f65fcbc4025d9a7780f9d7b190d04f9fa1699e16ef20588a9c1c0e0e6846ebe0fd99624814c7fce90d8efb1a4baadb46464765fb6f062bfb3fe248a172de6710e6ed1c39fd329f78b4f7065e2ffa2e1e3064d9944612071153d84577726164f308cf498b1cd2484e3d9ac1a36acfec90228a83130098b9d493b59332c534ed57601a3b6a4b3cf60559006a414dc55b86a4d31cef442040971ada6e8f25c2961dd9196aae3933b10fa75309afde76674eefb94ecdc20e3681711cc36bf2b5139842e2ed509e61954b2f81894d19762c78b262cbbf002dba4242ab4c78d407f6abfeb454dd4bbc794de513d1a877b8ad8e4583b79cf33cedbb64b2df07574db54c0d7fba0471ee5eb09b9ad3ad96d300d1d257c4cfee132eb46a23e652a840156f370f93562f771708fa528a395586aaa7719071f9343da89ac358dfff1bc6cda71f2ad9276789647ccbd7d2289c22e81b9c60cc2039c948b0edf13783767cb2a6ed5276ebe4dbca41f9df89545b5a4e257ff960b9ab4af4b1ca7d079154245ae9cc7706687feccae2ca4e967b0a4407b9305848c6181af149312b783e968412c6190293cccbc9095d7b4eae7e99ea9e98b0d526a6058bb7757d30a901fb4c74d4b4f43712f76fc283e0a641136ec093656d6dff45ca27ab9ec3b433711964240189337c58b093f93b143130b7da4cf162a0a24c62c38c00560869e2c377a002e0d5968d391c0e5ea7ab7c5d0faf77be561d52aca5ffbb25dd827666498f138eb3f5cae4efbf5d8c9134956f689b78fe343737c220269b2790006fecc5653bda38f55bb7a5619254f81f123df26f32e9ef13a746971337ceb527e2f53840ad8df58446a5e84ea5f9d9114e1757da520141cb4a2627c99b549377fc3dd477beda64f763e044c8366eb4f8ba065edcc9bcd08d9302b180c1d12296c75485980a5beceddc08b6b024fc8aa735cb24a1faec1e0d20f8b9b347ab5ffa137c13e5f61818e4398395457e42a478097d785cca9343950b85cbf171dc86cd168186e63b9f26e91e7cd77d02e57a89561f6cea154f49f71800420e393801a46bc83ff632d0107454a86d06a2ef47854f667a0ee88ce94d39a694bd0eeab1c6fc4344ae8dbd604af8a5c642f219e9e989ca2aa934e74b6ecbb115d4d4fd4016ca4aa3fc746fd8ccc2fdd31f295443633817a4b2dd0546033b917de10dbdd3d8afb6ced7eee42842d02f3c71c606b4c51ae97da31ae695b6b5aee384b81667cb036f628ede125f1004819626b1c27485814d225e870e6be7ee0ae486e1126922584f21c6ec3a6645213c79cfe04efec583b4ad0082f4a2aeed2246f8143e94af6ba01ddb0a020c14f303c641f10cb3cf9f0ef3f535f0e4f39ed03eaef26330ee2bdb1e8cd6cd304a05a6816fb3684a812b32512e091ede98dc171feeb2586d6b9800fb390ec595acff5ae54e664be7a4a6fac02906d5a897fee9cbdfdf976603ab0675c18f9f42e37c96b863878049779a8c56cf2582897851f3db47aa8de509daa4f4ff4c80227d706820fa227f07bf3aab7b0ca6aa59c20b331f4faa4f0ff93ba80ee4b32f5b5ed1d161956c853bc07c2dea9e78a0c891b53f85988f30452886f9daf9ef2a7ed37b50200bcd306cf6d59aa5c9d3566d3bfe9faf56abf5c36ef9952a8b9a3978cb28304d506d8f853ed6ca29a8dc6d956d8d961bca436f4f4ff59ffaf2742ef62d7d3b8e62c11022c6562d5c524e982f6c6e708c4c10182ae5281a8dbaa87ffb8e800307eb80c094b3f6b5abee45118d5d80a9bb4fe8d922802cc7d0531f518918a3bde60ef2c6d8e681958fb4f0bb5217cb7b4407b8b5630f338ca6371e6c64332bd914fdfb5948a5f118a0962c08e598c83eaf31911e1075ea8ee9795f100b095440803cef53e33c680009a6d932906478c8a0fb5502b85e24b880acd512c6f0216ba55e53a66b24d8915596452c8d498828e2a67dfd7d14e43af7ab2458f9cf369e641bac1008e897c64e5e2717d3a6b607150224a1879b0a2af5332c3b24c930a8b15dbde98ce7354c78562b82e6756c4f5a12230246d48e69a8fa2bd6c599d7b494219a79305b5169aba12d45d0e5609cf889a74c2326e798a5fd75a84fe235e1d4a1e3c07623480c4459e067cf71e737321a8954d29fe33ac8ef59427d3354984830186834b0c62af6c5f260c040632f9b7a9cae790c4b42d91fe703b43c0be0af55364bdb64c495882720d4649f3c3f95a36c9e92dbb8d2b6f6fb4d8c7f2b6386eda7c22dab751c8be3f9989538b2f4a4d50e37dba47790780c61b6c7f96a8c9bc922e61b0f47c81d3febae6aca16f76495ba96c55f0dbc8b19c61ab3f1498a2b2cc343c1e3ce19bbea131c405c71f942156318bf1dbd5233a83bd617a8afc15ce53040a805b9f78650decd7e8ac2a779c3d12afb0c4623d0bd2b24e3fb3404ed94942558366589c55c72b86afc4947caeaf24208a82814ef9ba98d985573aaf622085081058d214a34c90bff5ee6b085290f889f304f4a8fa5e6010bdb3984c8edf4a3f9f1d51bd41943d3a00fc62198add45a83d971faeb28533c4833348c82b1ba5f39c586ea277405ea74ebe3369484883190fb95cb5a3febe27b6f3e4ccde7e8c3c01e57e7f250ec01e1103e9e9353988708c68dc2b8a65ad68912f57e2e21334e9ba193f9f3ee51340c273d91c5a148dad560a41bbebbd6a74a9e562bd0aed9c444dae3815d20278c2c472275513f05c9c138fdbaee8054a9f72bf7044b711cc266a9ad4d4363dea0b2d38f8192b173ecf024e3c16e0852e90f2fd5be92e513991fce28cea905c21b45b2821787adde4a6e8ae5b2f77a6b64449847e03a3d3a0d3ab9b683e2b3187a05dcc59ff6b76c7eb9b848a66e8ebdc3bf87a16568e77b339aeaf09fde289cd88884b49c2f81341f26d60157b9245e25ef035e0b25252f3855927f09507581e1692455bed7b447a37ba4c67dd8a848e6346164dcd17160f3570c4cdd2060dab39e11573be6c1bcc458cae5a2873c2b6f4b58288629181d77adb2f3cdf2de3a9ee26a38a1325372625c38175418118fc2d88c61ac0a4ede45693768cdc5b5cb3250c89a1e57a96ea5136df926e105266cee6b9df4ca73b0eebed5181ee0cfcd86f79d06a5ba2bc4c90ba6e42e8c2ee287869fd68004892fd834fb0943bad9dcb0bc8327e34e1b8c8b9395c2d1639cec75a6e0959d6ebe91bc9fc94bc5cbbcc8776aa499a23ce48914c80a0067bb1308dbfc07923432f5406acbedd884309c58e34a1fcf44a340e944452e75085f9d7a28b7de420fad0425876939f25997adfa10c0b677c49792b0aa2aceef9da0d50c8216ef62563249433495cd6d6bfc2c8cd1d464627d53583fb771495dc45154450a3bca1a3e9aacb1a4e539f625844c3376bf1fff191d97cc4173d383fa78fdc55d01320dea147a1dbcebe7dbc19e414ae28a20012de66b914b7c8c324f936cf712691fb7fff547e44d797a90be3e2dd88ab94531fe94bcc30306b0794d6fc18c71bb845445807b4aaa5aa5550eb0f1680e713e4004ceff63143c00456aec1d47fa4afa0a01f3ad2a91c837d2cb9d1828fb180885512208f683b15083eab1a5d1f6c9eb18ed7f62e4de4c21e726c6e6e1041780c5f443e8858249832874d100c182bba004059de4252e528a6eabd37d0ffaf63867831d8d4571fcfce2e7b3d12e35f4219b461f73a38679755a60cbed97d84220801cda63ac4569905ecb2fd21332d48ef611543b4822960c61464f641d3c741c206036ef94a9c00e5c71600e1a070a150728f9dec4028f6b04662d2f5d226473758fdd0cd71b6992a9e998046b018be7f1951af414f0f372008f7c737844adb95974074c6b44f95ae91685e40164b7a5899a975d4da41c8a00afc9afce170dd076c4efe6e4688012fd6ccc398ef03111f9a99eac09881993949cf5dc54a9d4f292803416c5afc239d703e2fc9ffdbec4a0ca1071dfe035e1720043d8d71e4b4d37995d58a3dc1441e5a68ca2282155a58953c8c1f5e851e121347f3025fb2aa81d8053e92a12009b9e96e5d6c1bf2f9b02cd09ca811e47288d639229eb320e9ca4e279eafc7b32070f2b07ba156ac37ec9b6c12e6534df2642411040c8b855abd4c3ffa4f3345a8841a6c934e222f7a50aa29655ca2e218947fd1a150ff4278ab137cff3e920d66f86631046518759394cc199611647deefb06280e11334edb6f35c5b9d323e72c41f01bc0fc78859393ff46b0c9d3c99b364147f8e15249f9b1c874e71ebfb4513daa0df65f180b4470e86f554fc403c76232afd4a1acf0ee50e4735af9df2ee2ae2bdc619843fc5cd916be809614a72c0230674f7946a21c0d38073f91d5ad8a3328da1e3f3321df0ab3a5d91ac606228e677676dea309824561e1e287166a6ddde9c6830d8c20bb20118f7007e6372d834409c613cc38dcb39d8639ce96c50eeae9d4efb335f6d7515f2e51ce97a0d898810e43692f973628188f882a3dcf3942a4a370805024561a9cedf76e9414a5ddf4f69634b05d76838020b6af875369d8fef49b57814f9a82dd95377de7e833a24da54203d9959ba3889b21e74e4a14c3b2db1dee33a79759ca46cc6532f36940f931f884741fb6895da006ee433a3f359ec1a7fe8e907508a890fad0402a31e7e93a9ab59f9040f7f9948caa56a9f184741157540946c48ab66dbaa0b398c3db0f63a0aec925e6a0863c18774fe34cd2e1435d598c0b5f71f1f3713a5d3908085e432de877d14e79de3498747b1fd84cd7b5212113aa91e51ced062b8016f97540b61922a6abf4200a44411a7ee8f7c8e20dccee9bd81592a91d649bcfb116d1a844661b9fa280eadb72054535d02b1479dd4a6502024c2818f12b98e8ed53a0a3fdfe5f3b7b9adec115b9205e1c324452bd28b0c5ed807f6b50c1c8f383de0385d980b75e7b7738064cfc2c091dd5c0ffe05a00f4e1ff257c0d098e5ee219954f19e9554e12819f9fd3eff977079d3fc1e4c3433210005c2e7f89a85674a331a7b12c5c534d2cf0975e5a4a6ecc9050fbd15fb60e9610fa429d4563c5c5178a3112ccbbc0b13be57cdd4c76231e43e98325270516c75f175fa7879278bcd60e71714c2533fd5f11449621c35ebac54a34ce79440021d744713ace473771619eecb3373609d3ef8492715888046d2b043423aca0f256a25fff4147f293d409216f8f22e94a9c0c289f970da47594301f78358983decc69d10148215e9941367407a0a0eccd1f4ef111b5628046014aae6a7abb70d1612d5a3a7b4930014482bc831d212baa877b8e9404fb49ea41999ee8833d4ee3490a5589b01d09b4be0c028e3c13065aa4a82a145826e501b12eaa3d589c3daf5d27127a76dfd17a075788a48f082dccc77f8582c1d1baf300d70ef3de3b479fd6190ce86cc008b1401f5d0270058d6c7bce12c2a54572aded0f460986368a680a2a3fabdb81e15efaae374160ca6727d684ec384f3207db00820217bedc498368386f3c7d53c595c9e0cff7d9b9bffca8675f7d72f88ab143c3481d254c7394637cd857912824d933c8dda22c65dd60e778165490a85f5ee9462a17c938a618172e137b747676003139b327be274340f76beee19ed0d51601e67efb79e24b8e2b0f9b6c077ef3c0c2bd1024706594e653165d48d5390f693d294948484972090e80533b2977df1474e34739d76530a58672041a97794f6f86c7d122795c275c45c2143fa3c0e31458303d124b89424246947676a190af98929962bce727e8c2d3a778ca25f59d42b9cb5d39f7d89497f972d7e07b1f35f3869f74405cc3217abdb0ec2bbf7da6c131d3d79560d4295830ce8d0388969462b2a344b679d49a2d274c47b75d16da33038697ba25dae5bfd3610909f637b77cd26f1ba900c2b0e7e68400fdd670674be499fd4c158bd0a2627e86d2ba34f4e63506ed28d2d1e4c69e7e6d9746be53e01a18f57a948a336878f8fadaf5d2c73fe98e83020ad47c749ac1782eda7453973e1e03a5f894a90e12eee6db26c01f25aee185b83d00c8967bb367b82058b96077587be1c3b41ea9f926255c7f28664330bfaee745458dd165d0e4814fff85155fe0f92a41a4ed4ee554495b9742e4c6306279e0530fa5013f0dac5c81d49faff60ab5ed2e037188151652130b47288417918769a0d5807171c207dbebd65f522b4f36636936cc59c0e1887c74854f90a7591a6fe24d461bf636058c020db52db07f117e9346ac16795c78bada0a08b95164f589283da52e857d9e9f6a7e70a9c2a9e1e22d1d7bd880e0cfa4ba9d0cda3ddbc3e175c479d0df1ac7d7e3e5cc22d37301734eaae85d01588dd37745f6af78969738fc9a513234feed431d8fbd87e0bb2292428ec901619f4a14185ed96ecee1e3c0a58980a63dd81430c82cbd3ae56aa2900143e4bfcde9a002a1bed192ed1fbfb9e992145f0395345d7de84936f91a73e17b8f91142e918aaffb67416f6ddadacb468b0dbb124ffbf8967e87f6fb10e63c85a9826547cbf8e9d0fe0f3d17d8190d32cbe7010b3294efc496809e3de3a82a1124fe24525b91b1a80db2219baee2d01a93ef7285afb6c74e0886913b271208a46b17572daaed70585b27d27218acee42cb73a3a35d5b514c1b74371048a2cdc0586b617907464c9adc652bacf523bfdf78f966eb388f55886e54445a7d5a3f2160c70351f2eb02dcea0ccb31962bfd009d34d5e73b36873c4ec14788716b0db9125b1deb562d6e192ade1990e34ae06be96deff37d94861f13d50570f501d38d1b00360cb302596c7f7d6386a11ba4bc9a14231650596fa0ee392a583e44920e97aa16f3fc9fd58e8ffa79f269b20663b20300a83e12f1a7f4060137c373f9f950effda3ddf44475c801ebee118edf0cd903a36d9d8cb01e440c5b8c2d80af50b1b81ba02de2ac30131cff56dfe3e8c2d02e00d9dd305f9e9a6bcfd563856f9e8dbea4194ad9a5691fc558d88462f2299196659d36cd487e67803dffbcc8773cbd63498199907dee8f1acd7ffc5ecdf677af12e24932347ac14b896dca7f84f6a1de480c7248fdf32af85f4d34a203779d880055410e8a7b7f59e593ef8445975882d0e69a82f2fa208e7e3da7680a4353d06069f58c6e992018b0a9ae3dad839eeca87fb60b5166e2c63d5df3cd81801e4390cf85e285378aa61576b7d5b98e3422de3b61fadbf90f22dc22c5a968fc2e4d1f3c1f2b2f9ae04d085756632b8dc967b05eddba4a9b9972f36e98ac7f83f84760a4132b62c4c81bbd5ff4e558aa84837adc14a1407ae7403187440b261b05bbfd8a40c6c5e5c2535ad1a20c0fba86b03e54e0f46afe12806408942af14927a14546c391c24b402123b47c2d8a468398955bf560dc92bcbf92def3f41aaa265aebc3f390c8161069c7153ba32fc4a21b9e9402e1ce5fc0cd3c6aa234f5b47a5cea5b0067e12c2027dc6e7d3a6f9ffc6ea76bc762b5d26bd3426618078a9eb2a9ca6ababdb42e72b5f99a1b7959243b980a954ee532ed4cb1e48d7db25b5e8f47f0bc605fbc3334bbb8c085c7f896c3706e5bf3610431c34ea578f078d1b569d05e226a4f1d57a4d04a870b17dcb01a8ce2b9c5fc958078c6d1c8c284957b69e5090bd9499cc95a364bdad11f92dc0a60700ea0f6af2a6a69ac4ca83d5d0e35cfe77073b39fb769430cf93ffe62321e68d5af27ccf98a13af76d0807b22fd892c851d98560275d75a505500f43a120650f0a97e1fe2ad2fa785bf8e39f6bde8cd58003da8ab60374b5a6e9f29fb517749f7cd1db08608f0a9d66f73defdcadb136445406815b80a65abeb475d70ac13e70c6db7a7db649dd3bd1230cc2d4f79b9f688d66f6268ce07c289a1378a7b8b2a1d1f81b2ce2bbba25e29a9a43341c2ba127854f5f68714ab445aa12ed5c8f41af9231d3413e4b9540b5fe1dbc5d3bf619c80d7eddea1359cea348165b630fe68db294bddc5e166d7e66a5450d3b0c3ef21a9962d4fd550870393d61045832c3d39d579d0256840f37df91843e73536d153190e9aa86ef10bc6c8026c49acad4c363bf3f12f124b3e6f8d524cb6ce4caf749ec3c0b40d3da597e9d080d63e094ffd11ea303ece139a795d7c0d36113dd82d827f6bb09bbd007ab2830d834fa9202ca4d461183ad2203d00c27e0c84f7c16c4ab59a758fc3dd6e109c969c8db07a280b74806009ba17c9c2b42b6905e12616a1c695f6e19135b1c5c7a152dd8ca0d245412f8d46daab936a734e240b0f7d42bc02282023f52688a8819d9e560421e9f91149369494693b61c47b4f7f5c8b06f06d913bb4bdb96f9fc8c940eaaeb03ec7f0f745e0d87b6a61816a51bc3d3244e3e739c5bca83f36578a37b150a1648f2b2a8fa138fdf23fb7f7937d6c62463164ed611599f649e946ef71668c2781c6d2244840c6dc9770bad49b92cd2540a12e7154c33ad1dc3be7dc0572e3f225374b334ffa670f59a3d171e14c0ce1b654724ad2eff12d15308ce676a3b9814f012dac8aa42dbce34369986f9da77ddc22c77df30cd901ac4e7246ec48ab742dac743d55fe4ad4fc272f28224feb6edd0b5c9c28c4d2c04e6a13a13385a7d2e0e2605ccb6fd9c28e681d53f0c5b4d6cb1ee80ebbd941be9e427d26754a0e1402fd6dce6f5241daaa61b02d5fc555fa0544b0576bc2f9106621cde4dab7d348667d28bd656c39f5c9ee9c655485fe16fc5cf052df1e61d3524c96deda47a326feef03ee23f3b6f0f2917d287f0b38d8031a5afe610864e46bc1e4013a3e68af48cd58ffa1fd3859c6ebeeb86a1592019df59fa0245b75478e1543c7b5af2e4a964a00a237772a0ab109160b2fd91b8e0f53f7e223b2e32a815aacac472196d234df613494a4be3de05de0bb5898144dd70ac7e86f3cf49d39b068ca28c588e26da3ada5966b836d2212745d694de4394aec3a53d47aa334a91108017d6049eb4e25243b45a5b4928f23da19d4abc323d4c813d6781981ef228cc86825c9481c2b37a47f1b8de6a5ae811305eb50a9e511b77f5183e4788c42d7f5c826028718bb3be18b951f3da656c0591b6b900cbe824fe1c4495ed53fca93ca6dc8c638343d867e7d6e7b11c2aff4a7694eefd1bef01b65ee06d87826cc04322de2eb95e3ef2837178d491d798a8905e98c37a8a38e434d998ca8a096b9396e98c56414cbc15886532df72f883a313045990cd2251d04a121d97b6c2569b4b43fecb868976181b26533e7c7fb363d472fb3ce2d022eb0c506bf14eb037ad045461a4a382c80b97282f7262d42ed3eada26fba404649a86029ab551144bfc9bc279c5340542ab73a896bcdf4d60419e5639eecac81a23f95040b2834b422e794b91c2e043d8e5ee37abe333f1f4e4bf2259f6096411f19babf27246c5fd3191a20b4318ff52149928323e5223c720e1fc34d80060403050972f62e2523b36cdb40c8663a96a384fce6c84b3adef858fc26fda97f64a0a791b7135f84df7680666e6f7e988948e50404ac4dddfdd4e47a2dccb58ba063fb63a31613876dcd2275d9536d6a752f0b8702e1f0c6cab112165426cd4a5a9284c4e517770b37d22ae6892fea0b0cf5e1ac7cd9504789cf7aee8f723c6ecc47fcd5733f6666f29359fd3f622e0cd8fe5a9522f08940e77eb1a24acdb6c59f8afede42a980b931d1aacb4e393b990e98ddfc455246713fa81c0ce98abdc7146c2a7056de9010f68e2895c04cc05cf3f418302cfdc207d0cff16f1352adfed952ad273d98bc7ec41264548e07b34ca98b6e37dcd69c951d7d403e665ce3296d38a34ed04f34022bc9174f8b64e33f2f7a66022bf860f000bd7e812ddc023827e9db4e7165cba35e60b1ceccc22141263623ca7e6651aaa2ff765b0f80898f798b9482cb352ae6b9e1df07c57d5b7174e5a2c0829ab36445953a06ef8c40ba3517d0d5ae2775962653791a9a0ec39d7af416bb919c8550b998575d8499432b4ae503fd7a8c67843ea680629a5ea56d792cead0072a7b23757d1e4d145971ae9ca84778a23364afe5a8cc7828e2fd44f14d2b1469042495093d7f37156390a4eded1410edb0850ce337feddc1a8d4e240aa08ed993fc43c72fc694cb74b7b96029a85fda85f30a65fafb0e1e5488fe215161718ed4dd6e2b0bdea032a646d899f16903364e5c19851a48d7b4b30fd56871c71636e430d74f863218e6e4cdb664371dff1d88181d525c80c85729a2425b2c709d68534d15a05a69ba071de7dc7a42fb42d388c412f2c1088fa6e52d783cf418d70ac12e77cb7a82d48f3aa0b03d7fe33be8fa332e7485fb6c177c2076bda1779687675572b9fd8a244e8e8ccec9927f1887bdc8a563505041ddbd3d381f1fdb3b61538541bc8bcc6357077788ec12026cbba884edce39ab8fd58efe5ce39ba21c1ceb3894f24792af5ab343fee79a9b6d290d13aa68c3318013c9365907b7ee762ce04cb1601c34bf429fb76b3084283690b9f23563f4bdaf9234390978b466a6d1b02aacf8bd34a07ce4de01330d17f67d546c28a4ae6734b644117f4ea785d0cffe41f7afcfc0c6ef411da49f54cb73937c678fb73def0c5b5d7024237bd8550db4147607c0c793af4fd16ff40b74b927e7218fe6ed3948e61281177a1eb753bf1fe66ee907f1270de0067d2a327a08d3a23bfd69bd1ea5665a554afae3b072f80679edaf02d47cd21e73e90751895f0d9f1bcf19a86931e11f2be5678f7a5153055f1f07c058fad888567450f5b4f5be947a0358c4a04fa639b3dc6d840654cacc819b5b8cecdfb7cbac7d2cfbd4cb27e1e604a8cafa112ebd0699fbeef34367b669a3653f63f2c60b9b83e2d20de4657ee5d3aecd8608a9d48b0530af45888170c518b8ba00855f033743c04df6145856480dd70215a426f12984342bda0ab4f4cb37df6e2c3c6d63eefd7a1b6e87b893f022489b9bef794c77f74e5b3cff89d3dac316845bf822016a138de0740288a02bac5afcd19ded3de26c2e5f0c79bdb0ea95abeab41224f0cb21ab8f55919ae46dcfb0d3cfe7dd12b1280281e4332dff558d34fbd8a7ea2a7fdc6edc333b880c4e3fddf7ba773ee2ae8352f51d4a3e4da6a2022bc8c5af2fe92263cc2bd4cd88a87ea0c25f7423f164a547262ddb5a1a6c06463ec059447730550d270895b7311d859404542233efd4bbb18db6b83fffcde2803936a3c111efa08725f49071ed52f2f10f28f5bbed1fe0b9cf297d13cf441086be95753520fbbde2b948873b0372ba3727597d8416928b364c946df1bd8c85744921521dd620dae7c3b9a1c4d99c8fe9f97c2afed9ab92370fdd6cbc8e96499240f1da0ac259fa5b409ce7fe03420df27545ebd9e2ae75d2ede3e46a306574febd30e8807609e3bbb6b7de4afdf5dfeed74931118fb87d7ed7fc0fc01c91f1abd777cd0ed8178cb7f817d20abf3be57fd03576b674631c354d8e8355aa8c75261c25e2de5ab4ac342b941d2121fa3c6c992a02ed5bb07a7d4d61be4378ecd63432aeb1477ea1e96e5d9f4e14b0423172b3e40cdbd689bfc56110662f858fb4504b6d13111545e360ede36f0b10930014e0aaa84cd1c349b93c3a02735fea12e93d59eddc888c98bfc5f92829a25fb102c30752d586d7cc3fc0a0d465e082efb50b777810eb672d0089bc03bfdb70ec76a46541fc166f2e1767c31a57bb7af0d443cd316412391088a49d7357d76f171a828cee190a48a490ae7234f8f0106d216ce378da38118934adc76e03a34386939faddc1072cec8f88d4269c38a0b4fe58b9154003c4de5006cd533985d55b6b4c1d6fce81fb0b54c29bd0a0479a50660dca2703785605ef24aed141e7bb13e2ced7d33a4d26c16f585204591c10d9a4e3deaefd85d40ff3e2e7891a4db694812af62bd5ad5d6e6999dd5de6518652a36730ae8fede9da9c4def4c36225c55925b8e735600cea12b94d7d188adc5df6eabc8d632f6f3776d68e3954183d25b5cc5d53019dc21feadf4a9dfecebda4c16db8e42c26100fba36f4a21e0f979d0e22b4701e67cb7096e585bcb0df14cee12fc7f95d759d8b5a848a1187e0e5abbbeda40d9026db6fbd3369802929c86673b238b466c53488c288e26e634ad74af7c4b6bf9a6635bf2f12ee0e27981a65f240a62586f4f52316187d619fec71429f5e72ea691078d5ea6ef302229dd917239f55bf62d86595aeca59a909a87f36b58842186257461dac0d5d9a747acbaadb4d8a9e22a40bc3fc480c114f8b8a57ba5a9d89ae11f571781695f79c08a214d589685ea1411f585e3810397fd7cc1cfa8528fad256b5806ef254c1594374cf95e67668b7f318fd9c5f877c238462d9e3a092fce7d6c7eac33c6023716acfce0cc257d5018a0dee096d7c6f0981e3b959b6787bdca3022cda33d65423868a3c03d9f44aa44cd0b455be512a3ac53654b3f80478692b791286e4298853e10cffa7b32533affc53b205bb96c612d92f08a8db4aa2b6e141fb8d53786ee038f56c1c39d42db6c2a1b4fc4d614c1a3c3d894579fad6f796833e185aa0cdef3f3da5cb8c4bbfe4d7bf6e85c9ada761df386d3e821f3b6c66638a999a6d18cb533a0628c2bc559df7d9b86d99c6aafa92ce189fc0d68c2790366be9bbf745ba2b8767338e80d7995e22da2a5ed45c40041214179fb12f590e43a7d7d84dfe562317edc432f1de5bb226181cd7359e5ca51ff3983e0deb4c922bdb867a84d2d55288ce9f3f984015b3cd190783c16921ce4fbe88a62c024c2809cc71e9b7b04d98f7189819376d58a3c2d5dc72aef95de3ca28b9de00d960da8cbec35cf7126499dfc880e9e8ee8e68abc6ba0b428878b6162b2fefa23f3001927411e440a0ce79775dacf454321ddb67ea37e6661e39453b16edfc16b53303575b29ea0bfc6106504aa973</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-wave">      <input class="hbe hbe-input-field hbe-input-field-wave" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-wave" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-wave">文章被加密了, 请输入密码查看.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-wave" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">🔒各种各样性能优化的奇淫异巧, 不包含框架层面的优化</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="性能优化" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="加密文章" scheme="https://blog.liukairui.me/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/"/>
    
    <category term="性能优化" scheme="https://blog.liukairui.me/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>一些 React 的 Tips</title>
    <link href="https://blog.liukairui.me/article/%E4%B8%80%E4%BA%9BReact%E7%9A%84Tips/"/>
    <id>https://blog.liukairui.me/article/%E4%B8%80%E4%BA%9BReact%E7%9A%84Tips/</id>
    <published>2023-02-12T16:00:01.000Z</published>
    <updated>2023-02-12T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="基础">基础</h2><ul><li><p><strong>修改数组类型的 state</strong></p><ul><li><p>💩拷贝-修改-回填</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">addItem</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// push 会修改原数组所以必须复制</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> items <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>👍️合并-回填</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">addItem</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment">// concat 并不会修改原数组</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong><code>state</code> &amp; <code>props</code>异步的</strong></p><ul><li><p>💩直接使用 <code>state</code> &amp; <code>props</code> 做更新</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>increment<span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>👍️使用函数更新</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">counter</span><span class="token operator">:</span> state<span class="token punctuation">.</span>counter <span class="token operator">+</span> props<span class="token punctuation">.</span>increment<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong><code>useState</code>初始值何时采用函数作为入参</strong></p><ul><li><p>当初始值需要被计算时</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=></span> pre <span class="token operator">+</span> cur<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 💩 在每次渲染组件时, reduce 都会被计算一遍结果然后被丢弃</span><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>  props<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=></span> pre <span class="token operator">+</span> cur<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 👍️ 在每次渲染组件时, 都会声明一个匿名函数, 但是函数不会执行, 不会计算 reduce</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>初始值是很复杂对象时</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>k1<span class="token punctuation">,</span> k2<span class="token punctuation">,</span> k3<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> k1000<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 💩 在每次渲染组件时, 都要花大力气一个很大的对象, 然后丢弃</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>k1<span class="token punctuation">,</span> k2<span class="token punctuation">,</span> k3<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> k1000<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 👍️ 函数的声明耗时与函数内部的代码量不相关</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong><code>useState</code> &amp;<code>useRef</code></strong></p><ul><li><p>区别: <code>useState</code> 的值在每个 <code>render</code>中都是独立存在的, 而 <code>useRef.current</code>则更像是相对于render函数的一个全局变量, 每次他会保持 <code>render</code>的最新状态. (<code>useRef</code> 相当于创建了类组件的成员变量)</p></li><li><p>场景</p><ul><li>变量维护 UI 状态, 更新时需要刷新 UI: <code>useState</code></li><li>变量不维护 UI 状态, 更新时不需要刷新 UI: <code>useRef</code></li><li>变量不更新: <code>const [foo] = useState(initValue)</code></li></ul></li><li><p>陷阱: 不要使用 <code>ref</code> 非幂等(增量)的更新<code>ref</code>. 在 StrictMode 的 Dev 环境下, 组件会被渲染两次,以检查组件的幂等性, 并且不提供 Warning...</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">ref1<span class="token punctuation">.</span>current <span class="token operator">=</span> ref1<span class="token punctuation">.</span>current <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 💩 会执行两次相当于 + 2</span>ref1<span class="token punctuation">.</span>current <span class="token operator">=</span> someState <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 👍️ state 连续渲染两次值并不会变</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul></li><li><p>不要吝啬 <code>setState</code></p><p>与 Vue 不同, React 并不会在数据被 Set 后同步刷新数据, 而是会合并更新,所以同步的多个 <code>setState</code> 不会造成性能问题</p></li><li><p>不要在组件中过度使用 <code>useEffect</code></p><p>将这层逻辑抽离成自己的 <code>Hook</code>, 方便复用, 方便阅读.否则光读 <code>useEffect</code> 都读不完, <code>useEffect</code>也可以让代码更加工整, 可读性也更高</p></li><li><p>强调数据流向, 单一事实来源</p><ul><li>尽量让响应式数据的数据来源变简单</li><li>没有了自动依赖手机, 要理清楚状态发生变化的原因,数据变化会引发哪些状态变化</li><li>强调数据的提供与消费, 我向外暴露什么样的数据,什么组件会消费我的数据</li></ul></li><li><p>在 <code>setState</code> 的时候注意有没有 Effect 依赖于这个<code>State</code>, 是否会造成循环更新(还是数据流问题)</p></li><li><p><code>useEffect</code> 的 <code>shadow</code> 比较</p><p>在写 <code>useEffect(()=&gt;&#123;&#125;, [])</code> 时第二个参数是一个数组,当数组内元素变化时会触发重新执行,但是这里检测变化的方法是对数组中元素<strong>进行 shadow 比较</strong>,并不是像 Vue 一样进行依赖追踪, 例如 <pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Demo</span><span class="token punctuation">(</span><span class="token parameter">vals <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vals<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>vals<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre> 每次渲染时传入的<code>vals</code> 都是新 <code>vals</code>, react 在对比时就会发现<code>vals</code> 不同, 触发 <code>rerender</code></p><p>可以通过如下方法修复这个问题 <pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> vals<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每次对比的都是 vals 数组内部的值</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>vals<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p><strong>千万注意 react 只是对数组进行 shadow 比较,不是对我们传入的变量做依赖追踪</strong></p></li><li><p>Hook 的闭包陷阱</p><p>只要是要在 Hook 中使用外部的东西就要注意陷阱, 例如</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">function</span> <span class="token function">consoleStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>    <span class="token function">consoleStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>跑起来没毛病, 但是如果后期将代码改成</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>store<span class="token punctuation">,</span> setStore<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">function</span> <span class="token function">consoleStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>    <span class="token function">consoleStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>就完蛋了, 因为 useEffect 拿到的永远是最开始定义的<code>consoleStore</code>, 其中的 <code>store</code>也永远是第一次渲染的 <code>store</code>. 为了防止出这种问题,一定要装这个包 <span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXNsaW50LXBsdWdpbi1yZWFjdC1ob29rcw==">eslint-plugin-react-hooks<i class="fa fa-external-link-alt"></i></span></p></li><li><p>减小 <code>useEffect</code> 的体积</p><p>俺理解 React 所谓的函数式并不是严格的函数式, 而是形式上的函数式.如果我写一个组件, 里面没有 <code>useEffect</code>, 只要事实来源不变,整个 View 就不变, 事实来源变了, View 可以符合预期的变化. 当然,不可能所有的组件都是纯函数的, 我们可以用一些 Hooks 在 Hooks 内部加入<code>Effect</code> 代码, 但是向外部表现为一个自动化的事实来源,当状态发生变化时对 View 做一定程度的精修. 在外层组件看来,代码并没有副作用, 外层组件也可以忘记 Hooks 内部存在副作用,像着纯函数一样使用. 例如这样的函数式组件就看起来很舒服</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Demo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span>display<span class="token punctuation">,</span> disabled<span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// 事实来源是 props</span>  <span class="token comment">// working 是一个额外的属性, 但是他不是事实来源, 只是算出来的数据</span>  <span class="token keyword">const</span> working <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span>display <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>disabled<span class="token punctuation">,</span> <span class="token punctuation">[</span>display<span class="token punctuation">,</span> disabled<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">// useLocalStorge 是一个 Hook, 内部通过 useEffect 获取数据, 同步修改</span> <span class="token comment">// 但是作为视图层, 我完全可以忽略这个问题, 从我的角度看这就是一个 Storgae 的事实来源, 从外部看这就是一个 state, 就是一个数据来源. 函数副作用这些脏活, 已经被 Hook 实现时候帮忙处理掉了</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>storage<span class="token punctuation">,</span> setStorage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useLocalStorage</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'cookie'</span><span class="token punctuation">,</span> <span class="token string">'tocken'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#125;</span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>所以, 俺觉得, 好的代码的事实来源一定是 <code>props</code>,<code>useXXHook</code> 而 <code>useMemo</code> 只是做状态桥接的,<code>useState</code> 只是帮忙存储数据的,并不是发生变化的事实来源</p></li><li><p>增加一个 <code>useEffect</code> 依赖的时候要想:这个依赖会不会在每次 render 的时候变化造成循环依赖,这个依赖变化的时候函数内部产生的内容应不应该变化</p></li><li><p><code>useState</code> 可以传引用类型</p><p>如果 <code>useState</code> 传入一个引用类型, 在 <code>rerender</code>时候引用值<strong>并不会变</strong>, 例如下面的代码会一直输出<code>false</code></p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">let</span> demos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 存储每次 rerender 时候的函数</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>demo<span class="token punctuation">,</span> setDemo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传入一个函数</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>foo<span class="token punctuation">,</span> setFoo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传入一个常量用于触发更新</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token comment">// 每秒钟 rerender 一下</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setFoo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre</span><span class="token punctuation">)</span> <span class="token operator">=></span> pre <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  demos<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将每次 rerender 的函数放在 demos 中</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>demos<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token operator">=></span> d <span class="token operator">!==</span> demos<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 检查函数引用是否发生变化</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>foo<span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>useMemo</code> 的使用场景</p><p>当成 Vue 的 <code>computed</code> 用, 能用 <code>useMemo</code>就不要用 <code>useState</code>, <strong>减少可变数据, 减少数据源,尽可能减少事实来源</strong></p></li><li><p><code>useCallback</code> 的使用场景</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>deps<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>对于 <code>foo</code>, 每次 rerender 时候 <code>foo</code>的引用值都会发生变化.</p><p>对于 <code>bar</code>, 每次 rerender 事后, 只要 <code>deps</code>不发生变化, <code>bar</code> 的引用值不变.</p><p>那么 <code>useCallback</code> 有什么用呢? 可以节约函数定义? 因为只要<code>deps</code> 不变, 返回的函数不变. 看起来我们没有定义新的函数,但是</p><p><strong><code>useCallback</code> 并不会节约函数定义的开销, 因为在调用<code>useCallback</code> 之前, 我们已经声明了这个函数</strong></p><p>为什么用 <code>useCallback</code> 而不是直接定义, 或者使用<code>useState</code></p><p><code>useState</code> + <code>useEffect(()=&gt;&#123;&#125;, [deps])</code>当然可以, 但是 <code>useCallback</code> 显然简洁</p><p>直接定义并不会影响当前组件的调用, 但是如果该函数作为<code>props</code> 传给了其他组件, 其他组件使用了 <code>memo()</code>,只要 <code>props</code> 不变组件就不 rerender, 但是你传给组件一个函数,这父组件每次 rerender 就会导致函数引用变化, 就会导致子组件一直<code>rerender</code>, 这时 <code>useCallback</code> 就变得很有用,所以</p><p><strong>给向外提供函数的时候尽量 <code>useCallback</code>一下</strong></p></li><li><p><code>StrickMode</code> 严格模式</p><p><span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3Mvc3RyaWN0LW1vZGUuaHRtbCNpZGVudGlmeWluZy11bnNhZmUtbGlmZWN5Y2xlcw==">奇奇怪怪<i class="fa fa-external-link-alt"></i></span></p></li></ul>]]></content>
    
    
    <summary type="html">菜菜子</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="前端框架" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="React" scheme="https://blog.liukairui.me/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>WebAnimation 与 FLIP 技术</title>
    <link href="https://blog.liukairui.me/article/WebAnimation%E4%B8%8EFLIP%E6%8A%80%E6%9C%AF/"/>
    <id>https://blog.liukairui.me/article/WebAnimation%E4%B8%8EFLIP%E6%8A%80%E6%9C%AF/</id>
    <published>2023-02-08T16:00:01.000Z</published>
    <updated>2023-02-08T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="web-animations-api">Web Animations API</h2><p>类似于 CSS in JS 的 animation 实现.</p><ul><li><p>基本使用</p><ul><li><p>定义关键帧</p><p>使用对象数组的模式定义关键帧</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> aliceTumbling <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotate(0) translate3D(-50%, -50%, 0)'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#431236'</span><span class="token punctuation">,</span> <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotate(360deg) translate3D(-50%, -50%, 0)'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用 <code>offset</code> 指定关键帧出现在动画位置的百分比,首尾对象默认 <code>offset = 0/1</code></p><p>若不指定 <code>offset</code> 则直接选取中点作为 <code>offset</code>,例如</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">[</span> <span class="token punctuation">&#123;</span><span class="token comment">/*...*/</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// &lt;- 第一个元素, offset = 0</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0.4</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// &lt;- 手动指定, offset = 0.4</span> <span class="token punctuation">&#123;</span><span class="token comment">/*...*/</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// &lt;- 未指定, 均分为 0.4 + (1-0.4)/3*1 = 0.6</span> <span class="token punctuation">&#123;</span><span class="token comment">/*...*/</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// &lt;- 未指定, 均分为 0.4 + (1-0.4)/3*2 = 0.8</span> <span class="token punctuation">&#123;</span><span class="token comment">/*...*/</span><span class="token punctuation">&#125;</span> <span class="token comment">// &lt;- 最后一个元素, offset = 1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>定义动画执行模式</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> aliceTiming <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>  <span class="token literal-property property">iterations</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>执行动画</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> anim <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>aliceTumbling<span class="token punctuation">,</span> aliceTiming<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><p>Hooks</p><ul><li>下面的 <code>anim</code> 就是 <code>elem.animate()</code>的返回值</li><li><code>anim.play() / anim.pause()</code>: 执行 / 暂停动画. 注意,动画在 <code>animate()</code> 的时候回自动执行, 如需手动控制需要立刻<code>pause</code> 一下</li><li><code>anim.playbackRate</code>: 动画执行速率(可以为负数),可写属性</li><li><code>anim.currentTime</code>: 动画执行时间, 可写属性</li><li><code>anim.effect.timing.duration</code>: 动画持续时间, 类似属性见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL1dlYl9BbmltYXRpb25zX0FQSS9Vc2luZ190aGVfV2ViX0FuaW1hdGlvbnNfQVBJ">MDN<i class="fa fa-external-link-alt"></i></span></li><li><code>anim.finish()</code>: 动画结束</li><li><code>anim.cancel()</code>: 终止动画</li><li><code>Animation.reverse()</code>: 反向播放动画</li><li><code>document.getAnimations()</code>: 获取全部 Web Animation注册动画</li><li><code>anim.onfinish(callback)</code>: 动画结束回调</li><li><code>anim.oncancel(callback)</code>: 动画取消回调</li></ul></li></ul><h2 id="flip-技术">FLIP 技术</h2><p>当我们需要对 DOM 的位置做调整但是又不知道目标位置的具体时可以用 FLIP实现带有过渡动画的位置调整.</p><p>例如, 有 <code>a b c d</code> 元素, 我们希望将元素变为<code>d c b a</code>. 可以直接通过 DOM API 调整位置, 但是无法实现动画.FLIP 的做法是先将元素的起始位置记下来, 再调整到目标位置, 再通过 CSS将元素调到原为止, 最后通过动画完成过渡</p><ul><li><strong>First</strong>：在任何事情发生之前，记录将要转换的元素的当前（即第一）位置和尺寸。您可以使用<code>element.getBoundingClientRect()</code>它，如下所示。</li><li><strong>Last</strong>：执行使过渡瞬间发生的代码，并记录元素的最终（即last）位置和尺寸。</li><li><strong>Invert</strong>：由于元素位于最后一个位置，我们想通过<code>transform</code>修改其位置和尺寸来创建它位于第一个位置的错觉。这需要一点数学运算，但并不难。</li><li><strong>Play</strong>：元素反转（并假装在第一个位置），我们可以通过将其设置为<code>transform</code>来将其移回到最后一个位置<code>none</code>。</li></ul><p><span class="exturl" data-url="aHR0cHM6Ly92Mi52dWVqcy5vcmcvdjIvZ3VpZGUvdHJhbnNpdGlvbnMuaHRtbCNMaXN0LU1vdmUtVHJhbnNpdGlvbnM=">vue2 文档<i class="fa fa-external-link-alt"></i></span>中提到的效果</p><iframe src="https://codesandbox.io/embed/github/vuejs/v2.vuejs.org/tree/master/src/v2/examples/vue-20-list-move-transitions?fontsize=14&amp;hidenavigation=1" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="vue-20-list-move-transitions" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h2 id="动画实现的比较">动画实现的比较</h2><p>动画的实现方法:</p><ul><li>纯 CSS (animation / transition) with GPU</li><li>纯 JS (requestAnimationFrame &amp; style)</li><li>WebAnimation API</li></ul><p>其中</p><ul><li><p>JS 实现的动画会被同步代码阻塞. 但是更加灵活</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- request 卡死</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>不使用 GPU 渲染的 CSS 动画会被同步代码阻塞, 采用 GPU 的不阻塞.只要动画涉及的属性不引起 reflow 动画的采样就会交给 GPU 处理.</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">#alice_css</span> <span class="token punctuation">&#123;</span>  <span class="token property">animation</span><span class="token punctuation">:</span> cssRound infinite 3s linear<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> cssRound</span> <span class="token punctuation">&#123;</span>  <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token comment">/* &lt;- left 会引发重绘, 此时动画的渲染是由 CPU 完成的, 如果执行 while(true); 动画就会卡死*/</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">#alice_css</span> <span class="token punctuation">&#123;</span>  <span class="token property">animation</span><span class="token punctuation">:</span> cssRound infinite 3s linear<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> cssRound</span> <span class="token punctuation">&#123;</span>  <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateZ</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* &lt;- rotateZ 不会引发重绘, 此时动画的渲染是由 GPU 完成的, 如果执行 while(true); 动画不会卡死*/</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateZ</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>因此, 能使用 CSS 动画的就不要用 JS 动画</p></li><li><p>WebAnimation API: 通过 JS 的方式定义动画, 最终会将动画效果通过CSS 动画完成, 其对同步 JS 代码阻塞的表现与 CSS 动画一致</p><p>这个 API 既保留了 JS 的灵活性(控制动画执行, 动画执行观测, 与JS交互),同时使用类似 CSS 的方式执行动画, 减少了同步代码对动画的影响</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> aliceJs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'alice_js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> aliceRoundJs <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotateZ(0deg)'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// &lt;- 同步代码阻塞也卡死</span>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotateZ(360deg)'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> aliceTimeJs <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>    <span class="token literal-property property">iterations</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  aliceJs<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>aliceRoundJs<span class="token punctuation">,</span> aliceTimeJs<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> aliceJs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'alice_js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> aliceRoundJs <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">'0'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// &lt;- 同步代码阻塞也不卡死</span>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">'300px'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">const</span> aliceTimeJs <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>  <span class="token literal-property property">iterations</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>aliceJs<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>aliceRoundJs<span class="token punctuation">,</span> aliceTimeJs<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
    
    
    <summary type="html">一些动画相关的魔法</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="动画" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E5%8A%A8%E7%94%BB/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="性能" scheme="https://blog.liukairui.me/tags/%E6%80%A7%E8%83%BD/"/>
    
    <category term="动画" scheme="https://blog.liukairui.me/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>Chrome DevTool Console APIs</title>
    <link href="https://blog.liukairui.me/article/ChromeDevToolConsoleAPIs/"/>
    <id>https://blog.liukairui.me/article/ChromeDevToolConsoleAPIs/</id>
    <published>2023-02-02T16:00:01.000Z</published>
    <updated>2023-02-02T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="console-apis">Console APIs</h2><blockquote><p>来自: https://developer.chrome.com/docs/devtools/console/api</p><p>以下插件可在 JavaScript 代码中使用, 非 DevTools 专有 API</p></blockquote><ul><li><p><code>console.assert(assertion, obj1[, obj2...])</code>: 传入一个boolean 若为假则抛出异常</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">assert</span><span class="token punctuation">(</span>number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">number</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">errorMsg</span><span class="token operator">:</span> errorMsg<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><code>console.count([label])</code>: 输出 label 被放入 count执行的次数</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// default: 1 (不写 label 就是 default)</span>console<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token string">'coffee'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// coffee: 1</span>console<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token string">'coffee'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// coffee: 2</span>console<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// default: 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>console.countReset([label])</code>: 重置一个 count</p></li><li><p><code>console.debug / info / error / warn</code>: 与<code>console.log</code> 用法相同, 但等级不同</p></li><li><p><code>console.dir()</code>: 打印对象</p></li><li><p><code>console.dirxml(xml)</code>: 打印 XML 对象</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">dirxml</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><code>console.table</code>: 打印表格</p></li><li><p><code>console.group*</code>: 一系列打印可折叠日志的方法</p></li><li><p><code>console.time([label]) / console.timeEnd([label])</code>:计时</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> square <span class="token operator">=</span> i <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>console.trace()</code>: 打印当前调用栈</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">first</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">second</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token function">third</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">third</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token function">fourth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">fourth</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="console-实用-apis">Console 实用 APIs</h2><blockquote><p>内容来自:https://developer.chrome.com/docs/devtools/console/utilities</p><p>以下 API 在 JS 中不可用, 仅限 DevTool 下使用</p></blockquote><ul><li><p><code>$_</code>: 返回最近计算的表达式值</p></li><li><p><code>$0-$4</code>: 返回最近 1 - 5 个 Element面板选中的元素</p></li><li><p><code>$(selector, startNode)</code>: 选中一个元素, 相当于<code>document.querySelector(selector)</code>, 其中<code>startNode</code> 为检索的根节点. 注意<strong>这不是jQuery</strong></p></li><li><p><code>$$(selector, startNode)</code>: 选中元素, 相当于<code>document.querySelectorAll(selector)</code>, 其中<code>startNode</code> 为检索的根节点. 注意<strong>这不是jQuery</strong></p></li><li><p><code>$x(selector)</code>: 通过 <code>xpath</code> 选中元素, 例如<code>$x("//p")</code></p></li><li><p><code>copy(object)</code>将指定对象的字符串表示形式复制到剪贴板</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">copy</span><span class="token punctuation">(</span>$0<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><code>debug(fn) / undebug(fn)</code>: 调试函数,当函数被调用时中断执行并跳转源代码面板</p></li><li><p><code>dir / dirxml / key / value</code>: 和<code>console.*</code> 一样, 只不过是做了 preclude</p></li><li><p><code>inspect(object / function)</code>: 若为 Element 则在Element 面板选中元素. 若为 function 则在源代码中显示函数</p></li><li><p><code>getEventListeners(element)</code>: 获取 Element的所有事件监听.</p></li><li><p><code>keys(object) / values(object)</code>: 获取对象的 key /value</p></li><li><p><code>monitor(fn) / unmonitor(fn)</code>:当函数被调用时输出函数名与调用参数</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">monitor</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// function sum called with arguments: 1, 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>monitorEvents(element, stirng[] | string) / unmonitorEvents(object[, events])</code>:监听对象的事件被触发, 触发后输出事件与 <code>event</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">monitorEvents</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"resize"</span><span class="token punctuation">,</span> <span class="token string">"scroll"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">// resize Event &#123;isTrusted: true, type: 'resize', target: Window, currentTarget: Window, eventPhase: 2, …&#125;</span><span class="token function">monitorEvents</span><span class="token punctuation">(</span>$0<span class="token punctuation">,</span> <span class="token string">"key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p><code>profile([label]) / profileEnd([label])</code>: 开启 /关闭一个 JavaScript 性能分析. 关闭后可在 DevTool 的 JavaScript性能剖析器查看分析内容. <strong>支持同时开多个分析器</strong></p></li><li><p><code>queryObjects(Constructor)</code>:返回一个构造函数的所有实例的<strong>类数组</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">queryObjects</span><span class="token punctuation">(</span>Promise<span class="token punctuation">)</span><span class="token comment">//Array(20)</span><span class="token comment">//0: Promise &#123;&lt;pending>&#125;</span><span class="token comment">//1: Promise &#123;&lt;pending>&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
    
    
    <summary type="html">一些 Concole API 以及一些只有在 Chrome DevTool Console 下可用的魔法</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="DevTool" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/DevTool/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="DevTool" scheme="https://blog.liukairui.me/tags/DevTool/"/>
    
    <category term="调试" scheme="https://blog.liukairui.me/tags/%E8%B0%83%E8%AF%95/"/>
    
    <category term="chrome" scheme="https://blog.liukairui.me/tags/chrome/"/>
    
  </entry>
  
  <entry>
    <title>奇怪的 DOM API</title>
    <link href="https://blog.liukairui.me/article/%E5%A5%87%E6%80%AA%E7%9A%84DOMAPI/"/>
    <id>https://blog.liukairui.me/article/%E5%A5%87%E6%80%AA%E7%9A%84DOMAPI/</id>
    <published>2023-01-18T16:00:01.000Z</published>
    <updated>2023-01-18T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="node-element">Node &amp; Element</h2><ul><li><p><strong>两者关系</strong>: Element 是 Node 的子类</p></li><li><p><strong>区分方法</strong>: 一个简易的区分 Node 和 Element的方法是: <strong>所有按照标签语法书写的元素都是 Element</strong>.依照这个规则,</p><ul><li><p>以下节点都是不是 Element 而是 Node</p><ul><li><p>Text Node: <code>"I am a text node"</code></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL0NEQVRBU2VjdGlvbg==">CDataSection Node<i class="fa fa-external-link-alt"></i></span>:<code>&lt;![CDATA[  &lt; &gt; &amp; ]]&gt;</code></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1Byb2Nlc3NpbmdJbnN0cnVjdGlvbg==">ProcessingInstruction Node<i class="fa fa-external-link-alt"></i></span>:<code>&lt;?xml-stylesheet type="text/css" href="rule.css"?&gt;</code></p></li><li><p>Comment Node: <code>&lt;!-- I am comment--&gt;</code></p></li><li><p>Document Type Node: <code>&lt;!doctype html&gt;</code></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL0RvY3VtZW50RnJhZ21lbnQ=">DocumentFragment Node<i class="fa fa-external-link-alt"></i></span>: <code>#document</code></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL0F0dHI=">AttributeNode<i class="fa fa-external-link-alt"></i></span>: <code>class="dmeo"</code></p></li></ul></li><li><p>以下节点是 Element</p><ul><li>Element Node</li><li>Document Node</li></ul></li></ul><p>可以采用 <code>node instanceof Node</code>,<code>node instanceof Element</code> 判断节点类型</p><p>也可以采用 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL05vZGUvbm9kZVR5cGU=">nodeType<i class="fa fa-external-link-alt"></i></span>判断</p></li><li><p><strong>property 区别</strong></p><ul><li><p><strong><code>childNodes</code> &amp;<code>children</code></strong></p><p>后者只能获取子 <code>Element</code> 不能获取非 Element 的 Node.前者返回的是 <code>NodeList</code> 后者返回的是<code>HTMLCollection</code>. <code>HTMLCollection</code>没有任何数组方法, 例如 <code>map()</code>, <code>find()</code>,<code>forEach()</code> 等等. 但是NodeList确实有 <code>forEach()</code>方法. 这是它唯一拥有的数组方法. <code>HTMLCollection</code>总是实时更新.</p></li><li><p><strong><code>firstChild</code> &amp;<code>lastChild</code></strong> 返回的 <code>NodeList</code></p></li><li><p><strong><code>getElement*</code></strong> 返回的是<code>HTMLCollection</code></p><p><strong><code>query*</code></strong> 返回的是<code>NodeList</code></p></li><li><p><strong><code>tagName</code> &amp;<code>nodeName</code></strong></p><p><code>nodeName</code> 为 <code>Node</code> 的方法,<code>tagName</code> 为 <code>Element</code> 的方法</p><p><code>nodeName</code> 结果全大写, <code>tagName</code>全小写</p></li><li><p><strong><code>innerText</code> &amp;<code>textContent</code>:</strong> <code>innerText</code> 是<code>Element</code> 的方法, <code>textContent</code> 是<code>Node</code> 的方法</p></li><li><p><strong><code>setAttribute</code></strong> 是一个<code>Element</code> 方法</p></li><li><p>CSS 选择器只能选中 Element./img</p></li></ul></li></ul><h2 id="innertext-textcontent"><code>innerText</code> &amp;<code>textContent</code></h2><ul><li><code>innerText</code> 是 <code>Element</code> 的方法,<code>textContent</code> 是 <code>Node</code> 的方法</li><li><code>textContent</code> 会把所有子元素的文本连接起来并返回, 但是<code>innerText</code> 会返回一个"人类可见&amp;可读"的文本,它不会返回不可见元素的文本(例如<code>&lt;style&gt;</code>、<code>&lt;script&gt;</code>、<code>&lt;span style="display:none"&gt;</code>).就好像你用鼠标选中这段文本后再 Ctrl+C 得到的文本.</li><li>也正因为上面这一点, 所以在读取(或修改)一个元素的<code>innerText</code> 属性时会为了计算 CSS 而造成一次重绘(reflow),所以它的性能比 <code>textContent</code> 低.</li></ul><h2 id="样式与属性">样式与属性</h2><ul><li><p>增加样式:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> xxx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>增加 class</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span>className<span class="token operator">=</span><span class="token string">'aaa'</span>  <span class="token comment">// 设置元素的class为aaa ，如果元素上原本有class则会覆盖</span>Ele<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"aaa"</span><span class="token punctuation">)</span> <span class="token comment">// 给Ele新增aaa</span>Ele<span class="token punctuation">.</span>className <span class="token operator">+=</span> <span class="token string">" aaa"</span>  <span class="token comment">// 给Ele新增aaa</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>包含 class</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"aaa"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>增加属性</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"data-id"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>删除属性</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"data-id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>获取属性值</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"data-id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><blockquote><p>以下内容来自: https://juejin.cn/post/6966062224892756005</p></blockquote><h2 id="尺寸相关">尺寸相关</h2><ul><li><p>尺寸示意图</p><figure><img src="./img08.jpg" alt="img01" /><figcaption aria-hidden="true">img01</figcaption></figure></li><li><p>获取实际屏幕宽高</p><figure><img src="./img01.png" alt="img01" /><figcaption aria-hidden="true">img01</figcaption></figure><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">W</span>  <span class="token operator">=</span>  window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width<span class="token keyword">const</span> <span class="token constant">H</span>  <span class="token operator">=</span>  window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>获取浏览器宽高</p><figure><img src="./img02.png" alt="img02" /><figcaption aria-hidden="true">img02</figcaption></figure><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">W</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>outerWidth<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token constant">H</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>outerHeight<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>获取当前窗口宽高（浏览器视口宽高）</p><figure><img src="./img03.png" alt="img03" /><figcaption aria-hidden="true">img03</figcaption></figure><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">W</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token constant">H</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>获取元素布局宽高</p><figure><img src="./img04.png" alt="img04" /><figcaption aria-hidden="true">img04</figcaption></figure><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">W</span> <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token constant">H</span> <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>获取元素内容宽高</p><figure><img src="./img05.png" alt="img05" /><figcaption aria-hidden="true">img05</figcaption></figure><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">W</span> <span class="token operator">=</span> element<span class="token punctuation">.</span>scrollWidth<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token constant">H</span> <span class="token operator">=</span> element<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>获取滚动后被隐藏页面的宽高</p><figure><img src="./img06.png" alt="img06" /><figcaption aria-hidden="true">img06</figcaption></figure><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">H</span> <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token constant">W</span> <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>获取元素距离顶部和左边距离</p><figure><img src="./img07.png" alt="img07" /><figcaption aria-hidden="true">img07</figcaption></figure><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> top <span class="token operator">=</span> Ele<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span><span class="token keyword">const</span> left <span class="token operator">=</span> Ele<span class="token punctuation">.</span>offsetLeft<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h2 id="事件相关">事件相关</h2><h3 id="鼠标事件">鼠标事件</h3><ul><li><p>单击事件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onclick"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>双击事件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span><span class="token function-variable function">ondblclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ondblclick"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>右击事件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"oncontextmenu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>鼠标按下事件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onmousedown"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>鼠标移动事件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onmousemove"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>鼠标抬起事件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Ele<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onmouseup"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>鼠标进来事件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 鼠标移动到自身时候会触发事件，同时移动到其子元素身上也会触发事件</span>Ele<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onmouseover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 鼠标移动到自身是会触发事件，但是移动到其子元素身上不会触发事件</span>Ele<span class="token punctuation">.</span><span class="token function-variable function">onmouseenter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onmouseenter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>鼠标离开事件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 鼠标移动到自身时候会触发事件，同时移动到其子元素身上也会触发事件</span>Ele<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onmouseout"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 鼠标移动到自身是会触发事件，但是移动到其子元素身上不会触发事件</span>Ele<span class="token punctuation">.</span><span class="token function-variable function">onmouseleave</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onmouseleave"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="键盘事件">键盘事件</h3><ul><li><code>keydown</code>：当用户按下键盘上的任意键时触发，而且如果按住按住不放的话，会重复触发此事件。</li><li><code>keypress</code>：当用户按下键盘上的字符键时触发（就是说用户按了一个能在屏幕上输出字符的按键keypress事件才会触发），而且如果按住不放的，会重复触发此事件（按下Esc键也会触发这个事件）。</li><li><code>keyup</code>：当用户释放键盘上的键时触发。</li></ul><h3 id="表单事件">表单事件</h3><ul><li><code>submit</code>：表单提交</li><li><code>reset</code>：表单重置</li><li><code>change</code>：值发生改变</li><li><code>blur</code>：离焦（不会冒泡）</li><li><code>focus</code>：聚焦（不会冒泡）</li></ul><h3 id="window">window</h3><p><code>window</code>事件指的是浏览器窗口本身而不是窗口内的文档对象。</p><ul><li><code>onload</code>：当文档和资源加载完成后调用</li><li><code>unload</code>：当用户离开当前文档转而其他文档时调用</li><li><code>resize</code>：浏览器窗口改变</li></ul><h3 id="其他事件">其他事件</h3><ul><li><p><code>beforeunload</code>：关闭浏览器窗口之前触发的事件</p></li><li><p><code>DOMContentLoaded</code>：文档对象加载完成之后就触发的事件，无需等待样式、图片等资源</p></li><li><p><code>readystatechange</code>：document有 readyState 属性来描述document 的 loading状态，readyState 的改变会触发 readystatechange事件</p><ul><li><p><code>document.readyState === 'complete'</code>页面已加载完毕</p></li><li><p><code>document.readyState === 'loading'</code>页面正在加载</p></li></ul></li><li><p><code>pageShow</code> 和<code>pagehide</code>：每次用户浏览关闭页面时触发</p></li></ul>]]></content>
    
    
    <summary type="html">易混 &amp; 易忘的 API 们</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="JS" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/JS/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>一些@&lt;svg width=&quot;32&quot; height=&quot;32&quot; viewBox=&quot;0 0 24 29&quot; style=&quot;vertical-align:bottom&quot;&gt;&lt;path fill=&quot;currentColor&quot; d=&quot;M19.877 1.468L24 2.534v18.942l-4.123 1.056V1.468zM6.53 10.898l4.115 1.064v8.978L6.53 22.003V10.896zM0 2.572l4.115 1.064v16.736L0 21.428V2.572zm17.455 5.62V19.3l-4.122-1.064V9.257l4.122-1.064z&quot;/&gt;&lt;/svg&gt;的东西</title>
    <link href="https://blog.liukairui.me/article/%E4%B8%80%E4%BA%9BByteD%E7%9A%84%E4%B8%9C%E8%A5%BF/"/>
    <id>https://blog.liukairui.me/article/%E4%B8%80%E4%BA%9BByteD%E7%9A%84%E4%B8%9C%E8%A5%BF/</id>
    <published>2023-01-17T16:00:01.000Z</published>
    <updated>2023-01-17T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="11f8d5f51b1f47ca30d91e4dbfd7df90f2a35ae2a730d05d3ff53dff65265051">34e85ffb0b6d2d12b6c2e177fdc7251e7292bae7e81645cf9a3bcb831b55e8cc88bdb9fee83aaedf03f728c5eae46c29a9c8995b7a2cce5ac17cad16f25e8ba844b4de052198c04f952f42f020fac630225c4be6b68123b5e693ff50e8ff3adbbf11fb5ac5d7e44a46b0b472269efaac6b8afa19c5b49b58b79050b28bfabb03149f3ba01cfecee10ed700e0f52254a86a076ae19414fa0989d8af440ffc64f6efa0386ed2fe946b29ab837e4d9a04bc2499de75859052c482712069f314d64fcf5680672f88fb399cd6e4fd07cc77a0ad582f2009072772d139adbc30779ae6107a628d608ad8c19e8b600051082833e85ed80b2875f7b0c445e2d434cdc50c9f88ad4f6aa7985853a4e458476868c2017a0eb7874eab63f155c5cfb15b1df504fc98ce58a13c6890f014a67f7e6d33dc7bcbc0e171336ccc3b9af6ca575be42539d9deca428c7348d3dcd11c766f875f4847d8c78f6f1dc397e3fb4926f263b25c97dde09a6b13308a2e532f76b16796acee809ba8332f91f72b200e1074b55826ba65139411b92f49187cef659fb3c9789fb92561f88eaa1d213811eebe5ca2c3e215602c89222e2660571344df6f641f970d4a8743f1d0949f379633b61c194209406d1e473153a8e7bf25072dc9a39ee3a4e2b82d7842d64fa9d51da924518f2a62eef55ce67e6ec3e7e1d0e0d1b07bf741d37f5ea801725f41d636363e7cb97d9aff1a1f8a5dc136eca16bed234e4f97ec578a2ed61b2adf9355b933941386184b1edae360bb3782b65f0c2078e0e4f95091b9fdbfb013f5c01a632c7259644329c141c49a2ada531a53ed77902e58d61e4e116dda68187e19d3fe77021aacebff0e5a12485869d11fbe4c8eab05773caee89a4a131f2401a1dc47dffa803d95ed7726b3b95ce8e99ff0137163cd7e884a3166c0d22312105cf058ba0afd2660d6b748516455d3474bdba1a954ee1d3648fafd465985114682a0a83aaa797e57e745457872afd8692492d43845cbd5a53770d4043eb1f3e316200caae7f9cd9239a9a03c1ca278796ac16cbeb98f62d760020ed0b513d849ff703f8ed10f6160fa5143a12fe73ab0b1b72f9b763f1f51b3da4874204e3a1073506ea90a36060ca43f90393c6bcfc4c650373f1b46b0484680b4817a988d04ab7a46408631503379ac24335abe0c42ecb7cda1f4e7320324df9f2322f60f41976d0149fdca862297b529dd3c5ea47551f0a7f8f9f8495a95e333fa4a5ecfbc6119361683f366e33ab01d39b690912021f37714e0643945d8ae7f671a33bd0015baa65b55a7d953df71599314cb4856f8e57f875df99390e655ee7f6ee5b5a0ba26911d582af1cab15ec09a7f28007ff88b4eb34b87fd9a44f3e0bb6d0ce79be8b4a05501ba472edc3d69cbfc1266641fbef4dfadcc6764aa3dc5145639b5ac8685831e9ac8fc76ddefaadf8abea9f8bc3ebebd188944f9ed7e56d2a327f09ad0d19946039dc12c2ebb7d7fd14f6f427a51fec6f2ef6635e928b6782d25c4e28a22c638a5087b13e8cb80ee22e19168855205e4406efeaf3392bfffab869369122027a755f53e17a818761affc64817728a1c928df7a46cf05c6799706823ef45096bd3f7fa0af23aae792d865001826a1777257b61868746017aee403bc347d20e334913791a5ce421e28a36c723eba838c7666de359468584bdeb42de699e4661ab45897f5cc2cd8d10ea7f04b292d3059d326ccd83a5bacd017bf1438ad3f3e97752a77baa8bbbbb8e875d2f1fc7749604f8f428da885a166fda20d9d85d469bf31b50adf7d5cf3a933d7de9044999cf782c9dc854b92303606be40b8d4c1d0c517c4cb3881218a5cfbd9e22c182a8da966be425de6f08f2e5412bcca3e066a58badf55667ee7f9a5e20d037e46a1261f9cd72d79da4678bacc5e42351ccc1874670a6340995ddc840091ccecd97511b8fac0fc098b66a14ef25e9271a656572cad8bbcc4ef5d0c9835dc39c1cc5825e959e647c4cc9b8064a948270de7920c1ef8992a54c48419c00e1af120d686e73be4ca55a26cc123f4bdfd2a1eef685a9965bc8a407d8c57fd417d681ab2959b6be414ef9455fff9bf20d35791dc147de1da61cff11e85a7c6fa52b750b551397c41677955e1db96462b126bc204571b0beb7d2fc2b7ffc328df3a861740d550a4a17dd28af26c0bd46f7ee06bce7de40dac47d6a24c7409b3a7fe0d62669a3d7dcd1544aecc3f4637415ce593826610b92c804cd8dc42099e591aa35c2b96b913510ea6cec1b0685a647a13d8adc5b7868705110bf99394ca97ec299a34c925feb7307a92730354692821c584b860f1e965cadb03048967902621fd0b9e15232bdfb399248b155434a3e4e4e2017e4b55c9ed4b7d28074220a1d02e4be49562c212e6fb142573ea7e7525975193aaa6b4be8b48cd7d2e43f7fcd42fdfdb323555469b2ead5e453de4486008ac9ba0c6aa6ed878c4b6f8ecb6399b8ac6648d87f3c279f714c79fed98bbebb3d8d0c775eccdc71f859ab953c9fce02095ae49329c6933933a515984f5e766dfb2e9bf1ad69b50653ec267b016fe87c9e24aeafb9fa7628c3d59ad1ce4d6f7b95f6dc05cf1eba8bd093d3fdbc45adfc94d4949689c362e85ff3dc5b9911cd2d98affa13e171cca1ad7d363538c6d6fa0e009489bc62366e2a8f81690223a4ef5f044c9eb63ab7ea1e628d65ce45f8531d2b1abcc1622d7f048552e26941e4859c1139b68b67da2f28933dec154cefcd3bdf44e10bda9a8e238527ed5e074e3b73b5348cb024102d9bd30c5169e817744bec8640a865812a48c526a1152ef544a8912759635c891936f0b31311568414d60e46f6eda35f86b64dd738cb24d1ca7086e55ebd22c87bf985eda9bb5b5b33f0fc69fa351e52637dc0480bf3c6bf27d1c0d261b25e3723a67dd21f8d71239a59679ada2cf65f241809689fd3e9d955774bbc5284fba672b2195629fba0f629a07efbffbe96f9a61b31d47cb774ab27d8216a7118ba9424119b94ea117f8e7ea9cdde994fc2e1be36351e2c7edce4718a208e1c3629601405e38c16a45b379bef76b6f454df4bb9c7a9a1bfdacdc5dccdc6a72c7381ba23f28625450eb2422f53788afcd2727722963a481c1ef9dcf3f7a0537089c2f8182609ed9b7ab444937478e4f1defc9bcc403d69fdc5d217eca8c0633fb9909823e52523c424a723c47f045828e3b9ff7ea801f741119392c07ee5ef337bd14085bba6034068987f88212598d4e0792a5ce026f1e6f84a576bd3e026ebb354b217ae1cb8a9f351f6eeb80232aa9b75251f82c5b966ac2262ae968a625ae41321fcaa39ac1aee339e0bdb12619a43cddb7607e87d241470b2e7bc6608c814e0acf9c4bfd10f197ae05e1705ee34b167a938e0548b8ec4e09ecbf9e73191533faa7c9dcd4d41db4f4faa1cfbf4fa963ad17cf14b408c0fa196115a18128b2cd85e863062160e81e862ce0c6bbeafc4333451435d50f77aa083deced7a7f789241df9f1372fee04a8f7106af889a08571f0d000764a45b6c311f29e2f162e655723df65638ca6c957ed1292f85e3f20fb4cd568b575aaee9b33c0db461fb81113f9173fb090b33274a512166c4fd04f4a9c9e76589a902728d13c47f093968c3efd7c3d78efa12ec5eea6f1040fed58f6b2e3a4c53c719552f7e7d8acd9f26d9740108d36b8e35cb224a3e5055c871c3cfd7604bf775bf9a491e1543b9f9f8871692eb305e8abc91965d6f48da981d6484734bf2895e1d1af07188183d4afcc230891eb7498be3d27386a7f78b181b973e09ef12287aa74d0d4600ba780f8b592519375b518927563f2daa8baaced99d99483f640c1f9c560991c25266964eee3ad4cbad75c3cb57754c6922a73ec50fc021dcc0751ac586318eadc22b784f2829865544596cdd25ca5d1bc74700bd01afe2dbeba09ae2db5fe7be4adeef1752964bf34cbbc2c13b78b8b28942c254c3f67db99dbb5a0f486c95c309261c5ee3dddda4deb2f2f53a4d0e9ec791772d2dfdb269987d55c9427b0dbed9635225b4783e0e8ff8c47e5dd0611d40cf20c80ed5488452e8637a1e34d34d8404c23e7104f11a6c675d74af8f2ab450ff8e9e857b5f3cc2570e282f038303f69a1830b83c9359bb7ac0977c0c30b038843bc860771bdab255295c52536c0599f95ea8240b40c074107494b50fc33c19871e74a7ef5403da23998c28340f457421c69983af6a899992dae2a592cc81a6a7294db9fa38d569aeaf9bd387b21219ed478dcb105605c2ad1a3013c41bfd89fbc851660e56aecd7df190138160bbd982f09e6338a8771eca4564412bb3027470164b1d8c9bc0f986fd1a47721eeb8dfef8a185aee0899890ec5e3930caf0cf9bc14d9e18e6cd02a74159be363e3d4af30d9e1b63857a0d8c7de9a461167e46393c569c46361191d4f98ea87719948a67b43b7f11412cafe8707cfebabc273522789e8027f759ae532b7b4cabf688782b12f9911837aac64915c439c58cede08cef5cc6edb6d4c03d2b90745cd15ae0840779872b7e1a792b335d605379d9ce3b15484d2402751c1d0bf640dc93d174fe2c1b307132648b06c8b898fa9c121843ec8c80b29395fd012fef42c86b746974d5c70d14dedebfc23c46ec1d842b4890e876134a35520fec99fb520a39f02938b4f7bdc55c11d81a161e59fe0aaa9db176b5edd1d2e9c3c704e0d65fe33259622d277648424f15962ebea9466c85bec2e96fb15b61701896b4de540e170c495a50b183741e0a484e65a79d1ec9df0db49fc61d72d5baf65eab408c6a4448a0bad9cb118ff1ec7067c17df2986d98105df8d6b1f4ddd793abc497dfb3f1ce6890b38a3212c0d15f041d2ebba373c787eaf27939b7a6db5b17088fff5219acc2eaf18263e4d3c339e675bb2b659aa034543c2d0280d33d4e531660c29e9d32432947449db0cb279efbfbf8f7b105d2cc45fd7b1698d004fdeb96eee892206f4714dfa811f6ebe7b80b3b8524a018cf5442bf48f6ee8be0da5a7270a898dba47a6a9a114df563af51fea63bc47cfd81603de72b0e96dca380b050fe110d27f9365485f9a2ba644f19fe3226b523bfbf5fef83bddcdbe0651edb595e365401475dd6f449fbbe10750de35e52bb8c4008e9dc77ec688eb45ef9e1d41b9746b4b65adbb1eec1f2d864a36b5c45518d1ee9ab5821cd83ca18301c24f7f70c3851315328c8bb3910da7033a6da720bbec9f12cc8c0a07a652ab7b1662b534082640b9d46e69fd6bdfcefa67b6a8982a55c12abeef4d6a5861ec191c0ad9c1b607bfa14f95224205f637f28b1faea9e539496501386fa2912a9984d3199e250735a14af5f1e21f23d8658cc424b049f49cc23d39d42bfcfd2e1b2541a748063e3fe2a397a8327e4b65adec0848f0537d1047159cbb7ae6ea23316438fb1266020e4a3401bb0f295218a9e3b7cc377fe050b150dcfeac9f16d03b7cb05305c9f65015d8457e85494f6cbd660fcc10943e867e760410dd6b38d3d024b73cf091335fc616101ca4437b90c68d15b1cf6f47a302e8cf626a94ba7d1daa3a248b59ac0bc53528d4bcedec67149356bfd045802cc3aab3d217dbe4a1c9311bfb2f6fc612814ce5b27d9dc78b72fa339aefc7aae42d01c78cefb7a83c469916cfea5ab38e6ab920a92a3a655c601d75e20faa11891ef5d8adc35f4163f73d727d0e2775d061a08b2b5b30f726ef9a2341d9bfd193000f1936b12792104d653bd485aca0a0194e58ff23307ba3e4384335d7399623e1bf2a98b6a8b8d93867d8bd91bd4ad223e65656056417a7cf21622cad826513ba8707f74ff69fec98aa6621d168a722c16e4089f18b3212bbe1d318eb0984254ac34db8c30a446524f3751e3a86adc4af7121e19f6e50db00135114b536af2957aa0fc1be939a72cdeb251a6dd9d2060092f9f6b87fc5f8c0e0a40caa716b281200db70490583ac3f8839b77ed8284e9dd74269ac2c28e60c10a6f24d258dbf120e5a56fa4ef0b0b6e0373a31aaed8a9d45785eff02060538ed25590fd2dd482f5e3f7dee21ac57c83f9ec95ef25cef2d54d7fbb00dbddc7cefcc059a8aa5460a0f5a4ecc055fb390f4b288651ea3717585bee68f4cdaa24e034f87a7f347c57dbb1136c5df821058546f5d22363b13540d183555943b70fa1b052f8771d552e5742510f032aed06aaf85ac328b7b22e42b54269c38867dc9b956c338c233b5ddc96aba24a1b9fdbb4012073a94cb7eb543474b409d132c416afc43eac08790577455b362467cac0841ed7fb1b2236ac351b72ec8897669c138a4ab1f24aaa65da1270feb82ed5212590443b38880f58245e65e3e0f7a84e4e2565b18712bba162531656f167708f2a62dcb8773324d3a09048174d63a344dd03a58d5a2158f0d7f79ed052abc83e1c851d00dd18b215615853e6c2910cfbe9d0815555387fcf7994d55f73877fcecef80dd98e2580e2878e9219d107d1cd9cc60717fa87aa69a22ddffa4130f96d0508af2b7d01752dcbf57bb014f7e21d0aba53cdd988aae32ce5b2838849d8098cbf42dd5ac862d89a3b0d4499228d6ccb9a337507824ff63ff15a834fb110cede6905b57bfc4755b4327a72c372b54c72d84f948ab36aec3ad5f8d008f9dba4519ccf2624266f5e9b7cf163f8cf0a53e2fdeaf8de8020859a3445ff90aa4c52c5ecd64a9252f9bcee95239fe970564d8d21564deb98eedcdc9aa8ce4d821e3bfc730028388920d6ed1deb231d8a3745d0bd6a22a2ba75587558a0aaed139766146c0355add46cddca139ce1e247595614db2d17df42dca5e5caba9049ccbcd98bbb3ac0fc4107a907a1db85b9aa800e5ba6f9323529d78286095c22deda89e4b229ddd0facc9addabe93793797c36c7f80a50904e61e5e11c0a45241179d095a7a0dd1ded8a384ec39067b872f46399355abcce02b01506fd66f161b350059a07f08e391d4d01cae9d8b7674f811623b712e655325f43d1f4df98bc14eda255de4ebdab48dee57bfb8ff10aae7baf4933e3b244d724cc5daacdb7418c9dc44bc6c7fae7e7ba93f8e70fee6c8d47a718a8f314aaea69632a7e33eb6d6a2dcfd14325a05d04904c2861fe6f41fd78142feb3d2583a760903a9df9f9404d95bceb259477d1506e7ac02fbab134e391d69dd8f478aac9a76cfc4fb9bdcaf8c0f38d964d3d99d01c8b2d3cff73bc4098d7ce03c3e56aedce0a5900574842d5241c36de11c1deb09e8410a894ddc4a158db726fae362eca9917a09dab87c21834be828491fdc3ff40d6fa05101803c75ebff09676114c8702da2455bd33e223b5b16e7aa296b486922c719fca64115b1f52bcb114852b4adce19eeb1eb8d856b70b034fe6f477789ec3d2a0d8032aaedfc157471a4c40b4ff442f40beecc0653b5ed6800b8b607c77a5453242a9ab7fb420a7b2663b62e93713165dbc446f29d386693b6e9f3b5ff030113aa7add44b975707e9336a2ad3a36dea3f28843bb25c8f994f643362fc7497e51d70346a0d993f7728b290c5851656cf451e2a4ecdb81e8f9ef2ede4c79003875453057cdf43c4d3ec43a7536e71770b7ac7554263750544fc0ffdc1d1a16c5865bc8a2a15dc5207a438d4a59d7e8a0e44a89941f5e998a07d626ee8d3d30aa8f731469b65c71d5f1f27a02cc2ece7cf89d3296490ec09027ee7e6f1e4065f1406a531bf723968bf4879d16821e4a2090eb9eda86516142c2e1f0e41c2712e7ed2bc4e6aef83cb83825a96129407d6eef271b2714151697f1d178495b847a933a3b92f478f5106232d232ebb0f186204ff323ce97a40e81a6500d31018b25ec671eb4600d15ffd7f6c87b123b2f6c9d3c8ceb029714fb18dda08d8e5b73e895f0c51db6e2475a99ce08e2285620a6fdf5a6fff83e12aa95cb68ba5807ce04f2f4dbf8507702020991645c9b07db86de7de8e599c285cb1fa6cf73daf52fb58045a6fc65c849d802ce2a287edc6ed905d7d57e643976d47034f266783b3b25c9c71be9fd70da56f608b251c4e87aa25667bb824b844d9fdbec822e57fd23a30311cace6c9b890b135c4c63c14e5c82e1751773626e87743bb8f7e8e04bd6cb09194ac4594b50d0ea143f67e82d90c69235336b48934de274d86655c0bac44b115df91fcdcc8ae50632b3581ba7d00f7b471e198448d87b69608305faac66b542e1f561d44f4494f37fde571ee88485897f5c17c9fb1cbbd427953a22276ec05c21ca23f102c7ae92b0a66d2ce23332c302833f39f4fdca035038838f766b9d1d662e974f9b94f28b65ae9f9cb13ccad2052c59addaa7e4a79ee64ddc30c3515727272d78152f85f26615169e33b7eb15a1f5bd47af95addf104eebd9c9b56ddb0f6eb0670f6b824167859ea8844633ad454f74ffae78656c8f54e7adc0ebedc35ffe643e3a9b8da02a5b0a6eb2809e7f320633a82924075410e5139e6426252cdfbe6501b163925a3fbc7690168990f6764076b1c067402859e66bf738048c18b9be49e03802de954bdc3f01bd59e892a719b30cd1468bce549ac31f1ecda8b1900421c94e7566a5ef8de2a098a74abe1fe6dd01a75ed387808bd535ac3216f04e974d56caba5dcdfe52202a11dbaa146c1c22867195ffa5d900c1d2b3b7d05fe1caf0cf8b3dca1df737f01c5e5c52c838811d54fa9109c74322263e05ca3b1d393122f26f2ea0aa8b9e86cc96e2f487ef2f8cb51067b88ae5978ff751b91509d13b2740f94b9cf481325581854723d85444ee38cac9561687264c91b7feab9944dfc2752d1dfb634835d06cf778817dc34f52be2fb45969393381a8a646495acbec22c688cf9338f8e5a0647a115ac61070c9a50d09f76cc53a014d476e22866fe75659b34a7013931cd87200db8424bbfb85bec3fbd35c47dcd1921c5f944227a9480202d312fac5e3d88b1db32526d07d33d6ed9599ea6f1ad1987c3a161efd5353f62fadd9f06473f0252e4e0c2b6f104d0b75eb44f6ca33346796c1d12cd8a87c7836afc46793bb8492a7d56c37a4196cd3e7413c8298a21f9282a9bb63ec865c72ee6caffe85bf60c915752c3bec398182175da5acf6f47cf6cb316d09ffbfffa11f5ba8e30846ef57531d27e22821dd9d39a8ba54decc96552210ea6e4d73bb443d9fb33d515209983645d5810aa50ac3e1bf51cb4c823c9d07460fd4f70b8d5126931cb452f4b54a180a7c50cfefcf7ae3f36cfbf19570d9f3fa6846a867f7397712a967f44ab3c33b83d3f14abc00d56ebca786045c50e43e4cf567a55b43dbc105f8ff4bccc2299e5299ed51026419914f51c2c4d374980dcb248f9c64cb82e16f5048d74303f4c8f538496b29f850ab08f1784d52e3fb7aa9f315e00f1226943e4accfb4d9bb0119a6016fe41522121397b9803850421545e74a8e53d10b3c3b91ec362a72578b72d3be6eea12de36c0ecdee837690f4a1cd16f02b31c4a34deddac88ba95386e677edc995d7462a3e21689f6961976d06765b88d8cf67595794b7c2dc84dc49f6c2f612ecb7f75ccfd1d1b817a529e2191a06b4aa485ea13a79e9c830e4c1a09e14f1497f1b868d51b917950f69468c7cd6a17947211dd706813c7c5e4dd495b2705e39c2f93b03e6c7ce2c1a629c1d098f92b338df44f91be5e46ffd77fb0b2816cc443fd243fd79580d31788bb70a801fac8fd01ed1c49636297e5ee65dc74b5e8cab3f0e6f284c0a867c0e8469b12514570e6c0e36165266406bf4359a4e03b4c871c3a8508b2f3c5f91905178cf74825f174488040def81fb015170fc2031f54c5a7a2a68b6f5d3617f7885bcd304d533f3e69c936c1ab6ec4fce0cbbefa195d422af21e1855ec266f7abddb3a9c8d4e119475a1a4eb15f958bfdad28bbb187ec0549084bf4ab15d06bb168020411bc8935224a8dee4c9daf2085d28a5e8bda8e155d7fe8d5d3c0dc4b237e794ece436389d8ad0976e8875ad0eea4a0c7dd0d9344002b65f006cb94780f730b9779aa935a6b2d90b64b09fc70c0fcee104b69e64c7c1974952d33aacf4b8e4da8dccba7f0ffeddff7d0f2f00a16e73715ac6c0d36d6740b64d9fb5d5831441c606ddff2b20d38b93650eabc45dda26117c32f36c44d81be27908f1734e240a3cab62455728463bdc0af1951049742d68753c69bb96b6f1377aa716d5d9cf37a125afe474c864a71134158cd72fdd8dbed61e43a5af045369adf4b052bdc990cec1dd6487eb83464bd687e2881b0db27bba997fd51a25e294cd52a6e2df2b31bd275026e78487124a1280e89e7e32a9f23e0a07ac6184d23922a87c9e2ec24cba68d9700a601d776013af3a78b4789e11a07ee4738fa224f773b86ab2d90b7872ca459269bfbccaa729561cf8139dd12874d1166f13918cd4d37c991863b0538fb7196c30c496ae0430fbb9852c4bb63173e466e66eadc8b07a0435466f708af47806abab73f62721c64f5f8c8af4e8d7af951b52d98a64420062a554bb55a7be6dfb36488681afe088815ed41954c2e0e0b512e3b2fd3e6459ffb9bdd1889311e6515e9670295b7eb87dd4e3d11fb4412e6f8887ac760dbb425ef4987aff3dafe40133dd9e212ac7ccaf4c5d2670ee9360f47d45c1788a53731ffe5b7332689549ae401538a60498dcc0bebb50f1e32c13eb1dfb30b27051571aaf07ae8172902d575ef2dbd821f3f6d55f08124da00697ad1e27a54441aa57bf35f9926118340f6d01155e206251b181b69a6f7d6b844c3016c4d36d0bf1f91a9e4cb01a92ed2d7a42b9f2db83dc2374d21c564b5a3f957a5b6c0da500f245cb54736a4e82f726cab8682673e3ef370a587ee322531ea9c418d4d926d9acfc0993a45a78ee22a797611abe438707d77f95f08869cee9f6eb1da37cb3bc7e4ff58529b84cb1bbc5a211fdba97d1017c87b43564f0978491792344acc97dd22c512ef982ffe2cb17876602dfcb3273ca5104db58c462ccd03ff72d74dc4d9eb598916c224cfcce42d4c68a4b718cc8c6a2c81885971fb6201dbe12f3f562aadd92a95ff06a36d5b33dcae4fe1444d3b672f5c2a50660bc770174ba0647d41f6416f78f3dce104352c068f082bc90d2dbe44666019b219452a67c55cba91fe22407a4980b91be739cbbe2ec72828a78b09545efc82e43910d14930bff7e0f1f0a8a2d5bf6d063102911bfb3bac0e92c3d8971f93fea13ae572b9c04e7c1a01a06bfea1ed7236f3ca682af67a7e2b4927f5324567aa582042c2b9e4e7a61f940855919231315ce5f3e7deecbf37a52042a6ec5938825a4e412aec2f2f95a5eeac9caf6c0ddce90f587634689feec52a469bd03b8fa24b1a4276b5c862c9f8d0b6f978025285dfeb3e03f29999fdfe965379f46d3139639d2b68fa7ea06c1ed218c632792f684d685ab74742908a4b314b7335389308e927181f6d5b1db44c5cefad69b208bca439be3272b402642c7b48053b92b4ef4022ca5f6cf9525b06f4c0a4bb46a30ebd38b2ce280d6216a3861067518b3953f49e07ff9934fbc02c70971cb259d94edf50d8773ee31f63424151bcf5159d257308e87e110c419f2a4bcd0e7e74e23bd4dd3b4833ef97b3e1db348ca87941cfc8ed5538c9bf576d19756e7591758048012b314ac151a34933529c08c1e2618881511c138da2e3b8861565cc102b50205e5f2f9d4384277c3bd9397ace6ed13577ddb6609c1e698c315692e93c99b931fb40136628d0f009daac34b64ea8b0406ea3af1b1c100f15d4cc5523bbcace42a00c9f2babde4bcf4283feaf6eaa21799b00f55744429876b3deea70064beae43d8328a2236d80c84081eb79bd6c4e48d428b6f1d54d4b5f26701667c116a70cb314e8df9441a42381d952bde70eb53d54bf06246826fdb97faa54f0511565209f47c7fd4dfc3f8af4e18dbc0437abb757ccefe65bbc685a700fe3c527a982c54185714f1c8735f18785dd939996f23e2c2bfe7dba44814c6e4e3e70d3b28a3c63e14fa1b25f39c139a5e58f69dd9a740a0db6aca52c3d2e27094323faa39b33d508023100eab1aed4d97be3c605e730d771d2579131bf0106cab557013b78868d60b9a9f1d304bd87a3f42eb5b320e41857915a8008c38f4ec692dbfa7ae60798bc913b08717536f0904fdd0995018dfaddcba89a4b0b8b5b5751da9affa1ab3d7f320ee837d96dffe60aaf2c863f9b68e348c74f135bb9ef09d130cdbabde9134c14a4fd146e94386195e4beaec0a288a02c9e7f4fd6c78a1ed8a7f5534d295029025c1baff8ac70704396a556ea8dd4faed619369b19e66ec3fdd3a6dfb0888a1eb78a9f334fe178f9bdd3a1a39fc0ba8c1079b0a81dd1fc8c3b5ec2fb269e83e562f6e68aaf8df527e7a43b0e2a1538e3956c300ff5879fd0c1931b0ad9ede83d5544679836552eab8d4298afafbe3944705b3e27bb308a1e2dc1164e99a3400cc0e89a3d91f0237f908587388157c0798c0564fcba765111e0c6db45bb5fa11e8f0b8fd3885193cea902d9ff9fd215c277f69dfdb49aa8dcab59bf5bf1ff260ee468dc4c4591c75746f397b24b35dfe765f68f33af1546e1629899eb1ad92e38c5c714b1cf76a3271d06f54e3a4ed8a725f9c780a34fd8f87cec841b0f781425258fa6379d511217c75262e5145a3b29f29661b4fd35af9724b04fb62b63e87023759534a2111b15fa5687ed8eea07eb74a1cd86c48fcd10212e1e1ff3812d2b83cbb429a04bc860164ef4195c662fcde868ff2299e87c7adba8238fb3324f35303334b1fc5ec5ad9e274fb2c091f6a821765699a48b19b4f1f60cfb6b64d4d02ca8c7cc90148f978708bc53f06d48838354b8da7616346fc1a41257e0f54b424bd0ce1692451e8e091f9008bc48470aeb1f7ce3fe1b44042fb74816395b3a19eb5c3e09436346915a72318b3d9a94d6ba07e04969f2ddc2c60900b80b9b84a612a0aae777e19815a428402bb9cc94ccdb92d6e9622c82d7677718be036140209a35816fcb5c93894f9cf2fc4493a28bed585c74eacdb8ceebe22b29648bc854bc8b6d52abb320bdf295ddbd91ba9fdc314da01fd07d9b9a05f66fec9d82f9ed6b4973ad3b2b510aa2287b8a3a6f37a52f4bd572bf4d0fe946ea91946b2ce61ef596ef17263c0c2e18faf06fe88e1ecb4b1b4f06f0412a3e90f5e5cf852882166e11d44185def804bc8520e31f5bc6222a42e12af744dc0e83f0409c1aa0e61d6f1f1b36140dc441c477e168046161f8b850751eed00e6a8a525b814858eaeccd5ac2dd4d69e9ababfd1941f5847bfc5269468404edb887a56ac55d25a6f15aa3f0c7e381f3bb1e2b5ff21647c842ab5f197905b8c9ea4a49eefd51e07fb3758c23c0d79805f41781299dd0ff6c8ad93b3042a990ebcec83e8bb4b23ddcf412dfd9c4c656c8e4704845d475d459cf404f997753d4729aab0a20b98999b1d052d2c32b11b8d6a73bed147a4b06202908cba84ed283d410ea5554013e818197f98c0de7acb54cbf3279b4dfff8d67021a7344862c296a19dc0e264b71ab184352dd8ad1d14f1c83e4128d35ec5e58e5239917f3b29429c6b6d7e10cf2826e3aecd1a569b2f11c2a3af159ea6e9da3a4a41289bedde64e271fe81cbc30c743dfa85455b39c885b8389c2ae0aa9ba57eb97e03eb99b4356fbc814ca4e06a2f25f69c5b22b4482e8c07d6cbc8c4d6d6fb7da33c892e698ec19c9db462f1b04ed8c49f10a755a65c054b8126aa583c5601a068695ad47153c63f2a816127cceef7335902fc9bbdcf730131513e1cdb8ca36b49ea54c6d619a16a343f9169c04a20654caf2d46dacd12b4d9528b961acd99ee9b90d46e07a3c51ad909376236b72d7a7d62028186c03343a706b927f18556062541d01186cb28c8c40e286cfb5473054d6ef0badebc1b8f8a4bf1648963dcd01a7ef85dce415086a217fba54dff08a1020f42b14c838e7c48d8b932381f387a8f9403b534b5b9d3b548c8f45450884eb7785846129c551f37afbf4378a73e4134dbdd81038fd79e897858435de968b7235223adc786caded6426d0ca3610daa839b7562e6e89e7f81ea58498673c74e6850ec4a8e00b4dc03c17f439a357188bdee70c53756b633871ff2f86c0775267bc3362633c679b922adbb4fa624c1098141822e14a8b1ce1729b0cb6939fe6a0a943ed1b50dae5116afdd87cec0e6ce6260beb3357a4b0098eb7a3b0c119d015c80c4838d40d91173fbcad524bf9242ef0f43e47b1bd2c9820191618400abe85ef2972084c02810fedc1ef823f706cc4bfd059888f0e76c6aec3ef4f732baf3c3ba1c10391f68c125851fa606d466943d0f6c95edce247a0f555efe8dcef255067fff1b3b613310694842227ac3e5d461b96a92e5d3c193d00b690416928a485fb8228a0ae0d6ad328b5692a40e7fa1db4d84d941d2876bf2923016922090a5aac4710845ae19bf76c550d18cc1b9d9ceab8abc27f8abaccec8dd251bb725548b07ec636b23fd0702cb4fe6cc694be2684002f4c9eb83ef094ea6f55b4fa6e1254815f240a900f805054b8530764c5a410a60ffd9ade2a0f76ea9ba22053ff81879aa1a5328150b01287e1d445df669ee0cb91518de59309f5994e4afeeab84e449f6a13a36897cfc8a824293cc3e5bd074d1c23a5da4fd8a44f4ef554a7bd3908964a283337044b51f99cc744ab2f05bc61fd9bbe6d2d6b65ef4b844daa1c7a2e67099b0977c62e879d05f81b9aa3928e89a6db525edc3b1df328b1ee5d687a0a838a0077d82853a29be8c0e50123e9ff7324db724cd4fa1081df11cf820d0f3aea494f44fb2194b6375bc09993b077bf9bf6094fd029284898501775519b3691979886876bd2c61326f2d81a81d2abeb36e5843875fa7b1181857df208f044802b7ccab9569784b07fb705659d4aaee8e9ac59490cc873c0770ff492a1d53c2853737818d63ea611c8e9a3603594883cb32b1922782d59636255bcb720c5a623dcdcc4c0bff2c2f057ec32ac6491153ce5c87ccafc20a5da860cb56be77364668c566d4a76fb8bdbaa74ef029b0a29ba43771397a4b42e3729d2023b765a65e1e411e5dc019c600d7eb6a20127837d9ad822382f559bff41936e4af79bb392c9159598b886cf51780dcfb5287411ed585e12008422c5e48cfc2640e62a4a31b3381764bc48488f6071a5c005be4e3f472b396b9b765cab7e582681f221520b5928c2d3a4498ca8cc2d1a6e5d590cf7d9ef5f341970cd97766c64fc075731b5573406edc91854d2bab20fd8b326e589dc6f0cdaafbb30dc3b65086b3a56eb6820357b3668c2d7a5648c3c7d25a87a97cd79581663dbd2398df03914c31768e98a01201613c5b49472cf1c95899913745db30ab3558f22dcd479f886feefd720b90caca313dffb80a97fd9597b4de1f15824ff15ef5a393df39316be81b85c39d0458c1f54201e3963ef0478e4f67dfd8ebea3350183d469e8a4e91ca585d157dcf811beab141823a7df51317f0d3b89a7c4b2a91015e576f45498200f489d4d919f6471c9149494a7f001b90854056d8771b5afaabc5f1b5ccef6fd3eb2815ead26927102298c9dbc284e26e646435faeb2bfbd43174f421a01b96c0e2e6e56da63c170acc43cb438eb3ee3cdaaeb4d636372bc855332ed853c9eb47c86aa2bc62efa2bdae74fa19703f0a43cb847cae00d036e733358d0c7bb6463fb30d9b64c965557aa541b572e175934ba5d5235476dd267d8249b18e9bb609343d384d9dc4dfb5ed77aff062b392da68933637760c5eff542fea747e59619bfb4d5edcc03d51478d2078f5410bdfb8f411e3def4876b54a6ab1dc63c6925afae2d3c0e30d0ffd10bf111bbec345a6c24a1b0b13ad0b18ad3844904c5b18b68bfd4439a2dbfdc585c3c53d7a7aa22419922b45923ed483cdaa0df447269e404999a7e8edea9e469c2cdc533bb3a359057c60f754222a9c31f3c0943470d63f3789a2d188f7b0b110691a50118e57ac7694d58bf40c825ea7da97c2c12125db6766cf4421cf1d1487818724cb10e70d7315078bc479ca3240acaa208940e437ace1117749a64de8684a7a29b136b8ae71decf06cc18dc03367e7037330464a7fac2db472166fe23dfb41aa8e060bbe892ef9bdfc1a0ce94e58fb3306ca3fad257459a153835b60d88032d514dc14143fda7113436007065cdbcc42349204365886a7a87d89fa5b5af604c75fcbf470ebca40dad9a657011b6a54e61d5ea891992f34c39535a18ccefb4c7ecf838995abfd99a0dd22c6dd4ba74ee5a85df797faa566583781f8cfae1d28d982f902b9a1c43f9f6f03cb37187b60ff4fd1e0dae1b38b21ecb52e81f3493ea41349362d5566f3b613c627833f176dda161d6cc2569cf0a3562d9b347411fc00d4bd0e2f842b607e8cc7bc022bac783fbe50ea2dbcab31a5173ff3683d54348112e0fc3bbc0eae300d873f5111f34c37117b4816f76aaceef4efcab70d74367b7552dac0ded0ca9b73d72dae0d6d3138c2e0a5c4e0dfe5ff10a67d241c3920deb8749dd555abb31a2c55c571ddd98dbb51ef9e350850d2880debc19a70bc4c777687f3ff2c23979cb9fee8421e6662f37847eeb4d71864b82ddb0fd7b2e308f49b21dcc5b6f976e2b0676b11ea5682dd4bcb87d4718f56adac50e2dc8c53826738253d6cefa6209a69a190f7e0e7cc31e590dd1b004f7aed34ddd5a5bc214f1eccf350abf8302688aa57071d20aa66751b5d1bc5435efaad121903583755f14e6642d9087ce28009ba7beacd2ff8d6d7f50fb6ab237b3754b314ca32db3b224fffce5f10ed4e54312d73bc35aad0574b66e71b37ac34a5127ce3500b4ab76a20ee1befabb3668c179818c48697778be97e0e80883a02d025437cb04e2c5a681d952fdd04ec44de56d2ea6f6ffc4090ed534f93e73e85a2766f51a49b18f60a0ca5086b763f15cb270223d92c5215802e1f8252817805cab11891275252de05b6dfbfe7620c8174dfa578aa47ebb21148ca9610ee95899b384587ae6b49957eb36ff0a1ffc7fc3db6c3f6382ec54b7f29da78cbd0e77469e642320aac32f8b8435510272b930f80db11646a8d1ba909efc9f6f97e171373b76c9edcc62395b74e8550be0350d947a1955f9346fb453fbe0fb4ed84a497b72af656d73320d91852612624851e5160a4806066a92a04aa44286978124a4ee8e5790d6ebb30a448ff784d631164e32fb00ce1a0018e91df647d3305d0cd721ae85caff1ddfdda5682f0c826120b35444c144a003becd1cd6eb7f707e904183d9729bfc4f7ffa78865775afa0cf9a766baae45e9be00096a5320e0968a25c81372e936ed7ccc0ac4c8b510a04bb8b2d5ab4e6d21df0b98996cea4c40505b6fb9958e9d95f85900f7e585e7914d362fb60d8c3971cf230d6e76671913d745affe0493adb29b4791bb0f70eb52835ecf9a68877ac9149a97675425a647e1495a057809fef272d7a28618f6f0bcd9d7778c72b1d9b7db7f927547274e0288c76260350ed1772e8786e69c2326d0bf931706f1611f6d83dae1aee2ebe62d5f09bfe7fc77bed0793e018970d0cb15a78231ce9a86fdb8c046851a117713e7331827d8f6976f901f9cae7e5a44f813d988e9c1f41f9b1aedacd3327c7bbfc7c15bff0ba2a3c8f6cffbf112a92e1b443f7eb87da972e1ebc2e2d1ad1a11c6d60fbffa6d7410b8cb3ce642b72b1a010649f7dbf16c1f2d274e22dad801eb4a593288dbdc3e6af0ff2a62e685ee72cdd21dad569c04c2b5a762a0a85e3a8f216edd0c24db8ab9fa6968b22046488c2470dacedc27c237a67726a2d9d7376d9f9c844cba1f2febe78727cad061248dabaa4623f3f8591306a4ca3d2fc878e50ece05e72b18527d007f62188edee33a6c4807c95527e644e19997a1c42198a805ff411025bdc87e1c4d28e79d81fecc365bfe88f4026ea4c193b4dabda6c75da0b9c7e9544f0f655815b0930f4386b96aab872c0728692cbc9434b758d28611f0a906b68e137284d4b8b417c14957fbe2ca14c7f5899325ce68188c9d0e5686f1dd3043b2330959b90378abefececac8153e1daad4b8c4ed4c8105dcbaeaee700729d401acaab0ad92ef76cd6210054ed556cbc6dc558092685630e1b8f1c45e02b6ccdf30eed74f84b0a2a981b9778fdd65cb67827a44120e58d2a11dedf1b9cf5c4d9cf91e362d9e5ae6165c2957acd952af2c37cb897accf56eb0847e986c8c154e60ecfe6890d3ab2dcc0d11f4174477dedaf8e4409283abba3cc5b88dece133e5ce32a8cdf6b9846e5217616569e5e65393a031fdb98420ffa421b91aec1622b4d3a3e1a6717527e593c0fc861d731df305423ffe6a63e139e305fd6a6a259e0694bf2c7acbe51cbcc0c32d9f369350e2206984395ff24bef6816952f8f965653244fb97002ce4974690b915497b807396023181d4292df6765949ae8de579701837ee331c2f6db77dc7bf1118b2720582b47f57d9b08e26c0034101347232ba450a482a7efe01129dbb32a7096c0c801483fcedb71388bdaf306742dd0fb0f61a74093d654e15dc16b0cc955545b27877e1c5e29c600b96b20347a225c010b3a1289879c6f960592bbcf7eee3ed1508b7a6340af1478705bfff3dab2c5ffa2e1e6d0cc9e57b53c17545e55b2d6d9514bed5629d004a4f8f97f65c3df577f142d927e71fd4af71b7a789de71eca7b03f6d006aac2b4bca359e2b72631ec05c10bb904f5f91b8669d0fdadc670ed7d0357970d5a080225d3d4ba819c3be1a85b84eb9722620b99489445f44c2ede2b1f9b3dfbddb3ce6d681040eb4b0b915b0d18943cdee38580c8257540c125768fd295643d2d9d5428863f4fb95df9cde93f8e34630575394c770213ae32376519b59370a739e913624d4a9675e710293514491e38cd880055fe1c4d41d6b6beca8b7c42324a73059e54ccaf3f2e022a63553ca89dfcbc3ba218537373cc8ac4ed70f5055bfdc4515db51222ed6c4b5b0715624d269de54348a0f9a8e7c2c2027e01314c56d28a00408bd2761859ca1d0ace67c5fb88c76177829c531bbe39ba9fae8af01e8e5581d436857d0f9bb591d842055ace083d237a7ea397c0737157f3b2a6c27d6b0db35390df1e6934a6ee2456ec3cf95820a8f8a2dae4e47ae8572a42800185545a64f58ea15a33336c35986cbd99a4b6dc5d47664d43fccb72f5bf3788de70f1572140e245a806bedbb95dac24f0a2ed96c114ee4f004d4b96e16d9b2a9f1c24c9f5b3e3d756c253c7a0c12344ebb6147270f4b25e38610e500b6f85faf8785b655a68a8db40d4426978d23ff9890807d2825796343c36334c4a94f343ef87d056585ba1b52a5ce8886e596aeb969391278027ec4e61f33707a195e64f91379a68fa9fbb21195951e8c026323203a217aa0ec55bb9cf9d6a63dff8191c5d1bed100f129f90c78366a85969a1e1bbe9921721d4579e5b4046ed4e1421b6460a6cf01cd14808a1bf08ae80315e5499e02999c3bfd52f9d4fe64c63deda749f04217eed30b801124c5d0b300b6b500959ee169cc19ce238bcbb34d995a1510f062672ab0660dcba4bd7868cbe691fd4d155f1b11693f0cbce88cbbb2dd65061eaf050fbbf9a3660381df67175c8b7d678f04b797318b241701c23a39642e3188bbb917875de44b1e351af45be1e2849463f1093af905b32b9ee369d6990722e7863af8bc626b8b5b691368358ee0e92ca31ebd0fd4647354ab55480797162e2582f7d1543e4d9247959841b3067b7836fd4861985b5835e66d32601863b12c9fda61e4f0bf43e521c9507cd63fdb9eb26e5304ebbf93ff3d1218c1e37836fac0d66f97b0845945355e453a8514cf8389cfa604e842957d17a60b9988c9b03e874217b690ec51a4d0d731d7766cd42e2deb2908d84f9f75df914a966f41aa6b297320b895951d47ea36d1ec58fba30b84a92f76fbed0a8ef8fba4d211d8ffc4dc76d19f0e95e5a62c44ff41b4ac9246f91b1004b7ce5925c483e21bc53b7f396f4e112f91ec0d1ecf87c11644dbec16a6633142e8571d2e28a3cd4dac0305bf858a9e69efabfaf24bddd2a7c50cb23fe6c85b7029ec5ae251a77909d2946d1e57abfb61e9ad91f9c1cf6827b91027dd45bcf168fc3e386db8c9798a3bda8487b20c5993607ca1db184f65629bade5ed2eb4a712a065b9e3789da03ee30f1571a961a53d6a09cc71bc0e40d24e079cb39c70f1f1677f5c329636eb49e7a896463c39b0481610aef9bf8541f0ac8beb08cac8258a54a3eaaf1d10dc1c4b4044b3b69e361ed3424e9112672398587183f2e6c89eb0d671c44e4e4c8a2090897a5e77257c0af2a9a30ae88967b8b925b3f8f6af739bfc02d9810183608b54727789816e4cf16a0c060f385db42f3d372363afa3aed2befa1a1c1b26eddd05dd2826277a27e94339320f6ba73106ee0beb5ed4db529ae609bb275f829d9a2c628ffabd02d14ee8c3b8b3860ef712a68f53a068cf1d824e137efe204c0a563e5b71cfff332df646453dbb8b78d52efdb21ea3debc7c8babbb80e71d8956dbf474400717c2dc0cc9059d649efce56957915eb14f200703964602be6c8b17fa3482ad5db19ca377a2af76d9da7aed7090beac70c144e9392c3c8e3e16d924232e6e7d044b4db8170871587a755c56aebf7783a780c0f1562988f78b973992a540cc787fc97d5b0069b536d3001dc5353e93b00a0eae3ed0b0d8563eb6efd89d479e88d136a7034ab98d79366552ea9a64a586f878d025ecd6e071b2ae5e9d892ff7d98810388faa02d2a2947b892917c1f7f25c5f2627f0170179f1c8679c5626c29583bdfc4786dfd020e12c25a973b7cdf808e1feeccbe2c3377d29372d575f3768ad4886e5059f3391b2e0f17eaa36028e1a76bf1444228984f0caada6f401e75565497c62728b4e12899f8072732143c44f8ce2eed558c4497ea2670aecc9d2ae3b3fe6e5dbe6437fe706f329a796ca2d8ebbf2d1998cef34b756c8580aebb0a879526a60b4139c70d574cb1076698b3ebe55d75d47e4db7d7f058eae14b37728d5ef494048fe703e7d8481af6a194526b0ba061d09befc828c6cf171580837be1adf4ba3cac56404de0c832ebd57ff25a0c38b82809d6283989e537fa99b6a104aafb8189a601ed086931dd2f0ce0e76f653f931ffdf983d12642b59272bb11b3f4050e70668fa5c775d011f528ba65b462db0f57b3d28abbb962effb45fc34d6191d9c50984bd56e383c0693ede216a7ee1968b672b4efdc6ebcb2096827525714979b76f191a1a5dada4f68085420947cc3c7faca57f88bdd8b11bdd58b7c4a6a390a47fd617ecfdb2d5a8913d21b1b4d2cbf73b74647bf8d3a9d27a72027d6c90b100fcf2055db29a3b8459cc6220e4d00ba6f0d10dff701c19b455a2e93ed9b4f11d93490c15b0ecd7c5d322f7c35bcb372a9efcb333fbe5044b15855cfc0eedfcfee732723945bebfe0ced0cf52bdf6f81dfcf34a491948609a02e4afc58385401c24a508010bdbeb9a2eac54c59f9c33786ef297bf83cb66453ae09ca41c94df2b97751c3223e11c762f848ef486c13baf7efaf8db4bbcdf9cfc879db2590b84e2ec06d5c4d2736c141cc332a14457f578b3ac4918034aa719598b54b6d6c9d6c0d55e381118a71dbd4c6b0528c88b8837b0d0a2d0f5893631fc13338d25623bcb9bbac5cdb6d3f2bf415ea4868058857b2c891a3b3692ea767dc0f3df99e822a9cb138d542321096f27c97746f0097d7870436166d4a38471b5bfcd2f74f5c75d211c7328871231eb0e7f230392ab0c9d7186430b7eb462febd7f7fcfc2fa5511e678f8a35e54943c990b27608ee776f35bbc044650d8e5a74b5b43e353324ab0b8d06252d63fe74689cbd4eda75c8eef061d5b53085158c564aca3836cea2d737eca0631ea06453b834067cfce38253358a751f102ad7b444c58ec3916f569a7ae8ff15b75c2a80851b91fa18eac0af7197da586f1506dd3bcff43fbf2a9f97d8f9bd62affb535bfbf80539a34511be864d806cb0a6f649fcd0c040b6df6abd6f8e4cdd8d75c4b278e242b53f603c8aa024f79e394e8d0e66e8876276a80c2183e652c6e81e930a4497bda8678df1231daaa63dc148326f1401ab981958f5333522016c1f536d85089a749e0a486c9db026519cdf0ff6aa54dc4d0099398a2197d7108e2c394704452981c17c9c50ae161ace3ddf3e536648699d463c312914e2a203887b0cd57fa9bb7d56ed93057b413f06863690b730e98ba18abf6bae31e89c57dc96611bd576d15c4a11b62f1c84109853ac09bb491baf2581ef787dd00276780d564e38190bfc15287d6237b47842abc9a43c0cbcfa19c947af0ea50a28013973f528b1724d854bb55ca4f62cfdabac0b54ad52b99463f673e1f91f959c64644f0036c8aadc9e3a1b7e9450eb751989533d3b0c80bcfad10c688e11e9ad65a1e86d847c9a19e187285e93f700f8c59736310935fb20aeaff5e4fa5cb070df4dd7a9127d86e15d23e5464854084662a069b82fb90cd5a48590f2d457c6e56b5d0c2c63c0a32f2252d8fde1ca1b1b8fff0498a9da1a01e1e9d37110cb7b082b770b2c0a57c114149479087cb5cfa71c411a1104f6a2a33631b79e9820fd3bd95e9fa74b4624da4910b04918157e8d241d87f73f5f415978e2a6d7633e15194a3d7249381c3335a4ea7b8d4df1a4433453d254c60cfd5e6b9ae4eef274a1fb6c360568446a51dea80d50de05ead57405508218cd65a51fedab55e0c6ec6c6fe8069e8d41b9a313160b9f8839223fa896b098e3818795ad459f349c30d8862cc54cf4f1a1ab9c3ce3221ac27cb16742ad94b40188c9a5fe1c8a58b8e238507e3cac2cc3a2bebafd2a540d5dba49617700eae39a9f298c3ff0d76426b2795e628fed3f03175a07fd04dfec6f266eff59361aa9f665d97a1a6c3169c6d7a32f4d0933da5b172875495f50994251c5781c065b81a53daa29a3e6ef2a8325b839b9fdcdf31408a5f50e3becc919e824666a63690eb02fe4b5511138d4eabf497a42df712507382f69db2e630f46a2d175f24eea8ee6c5491bec447956fcfbd152de5c560ade0e8afcc9ab10769ce1e6788cac0fe644ae1e2cec9365d855d7bc36c60371c02001b15040c97cd61b4838d7670d564035806178170a65f53b58623c62445b6b73c4ef45f9b9ee9bfa9facf03f79ad548894b762c09bfb845d846506ec26bc1d4437955d5554cfc84fb52fd25e7c87f6f5b5cc64a57fc72ace25f557dd7f3f09d2aca149b71072a9edbd18370dbc18357e478ed59303577a12547f855051ed07defdfe72e6aee5fb491f81086ac3a85171f5f2a0db7bc538d787c61877abff859efc96cabc14dacf3becfbb9e3e34318ea4fac160f71bb74c596fadf9d9aa7b09dd542a98ab4f565b8c4598262dbc6821d99642d0afe99c55c0fc532633ca5161974371f913a9ebf5df6e9254d3e331e81fa192115d176a0b32119162ed8bd368d66eb44ff08a6b770b2376b89b42a7dd102d79803c163d57ed812db947b51d9a427d30220c1094142365e04b509dbdec50bd369b1671e3ecbfb12417962394823928f68b14b32412dfbff89bf6eea0f6029e94347ffea36073ea58d99ea12bc6302beb16e6b5d35251408f31b7d668bf2ec34f3a76b005ad28a8aba79003995ea8e20fd94ee75f36802e7277dabd1c48234cb3c807ee5422458981c7a6a2b566596edf0eb2c4624aab25033b45d4e50a3700e10bb7ba0ab3362b579aca4a99341dfa768fbcb04bdcc0c6c5124f226519c47fed0aa7655f80082fbc68f1e541f255e9fc0be141b7e50ff8e3b77c22afb7b066b236d970abd7992e84b564b523c7ee61a0703d485c2f205bc9f70bd750ea28dc644cf40e9d2a80d88b176ba38c5986ab34f0fa3e92e27be6708ae8d7648372f2bc4d7d26ef0b01807f1ca03188ad21a9f064412d15913c408bc2427552f9bbfae3e02ed98feb32f4e1afdf95916afb248b2a45b68fb7e3ffd91cb937cf147ba4ec56408ebbfc3c6ee58b765067c38903289bfe776fb0c28a7b8d6db60d8fc7c478047efe07b6b854e280bad4e19aa59d0668747a5b5e89f1809264f72813b829954f56ce7af2d34ae0328db3b6d048694af8ec96fa465c241e159b4a2fcdcf3f053f7e5cbd9d01ea4ab429166e6cc6e96e3f5de807b3301ab0a10e755a84ed2145a17903114ff8b21aba94d05582fb828db8a9967c60996f0297b32920da3cd32c4edee8d02b3e78aa4816593afab51c3b0f7b7ba6a28e3432b8868cea77f17d0db2c55c7b7e4c0e1d60039411c2ced01d5dd912703f94d1d48f601e48b170cd712e257aed0601ecaf257d0ee884901b3b78b3a5e4142ffc065c8369774c5d359c99187b4b7f16de1c50730d89e0cf1deca24c75468ea62c1f55375fc371682d4685d090a0fd1f5e0c3f8e9cc96c8e65ce3e25e94db7a9a79bb80c59df6a8112979ad48e08efaf673e507d630e39a2331180577fd78c3c4c0a2fbc17334cc60ab28949b268cbe2d68a566858e9b4d5352284f07732db424cd6c47a28c6a43f6bebc6590581062ff9b11aea1c04a92fd68fa6913893a261388c3ab208d1e626955afef7ca6ec8e527ce53d10da4746bd94dd0b12886813d9401cd481e0d75412d112cbfbed6294ae135fffaf74ce528328d0b85aa8ec87a21d288ca5aafa5a23c318a235a11517da6bb9064d4edf831953b0596b6642525020e937d099308dfe25ecc7ec79d5cfbc153d034e50ccb820bdbc08752253f595327928c4800ad96d01f63c14d8eead47da5e74adf12b097458d02eb08bbf4fb510770ae873a4ff4d17bd4c3e10e7392f3ca32c6302058d7ae093bc1095253fc92097985b5ece85035c1389750f887f547d79e8a3de96d68ecc8d8f44df36fac4a2021df4fb8f4ad836148d81af2d0194035c0d842f560b7e8ae1c6c67a7d350f378d6ddad0fc0b650db95aa553a06451419959b6884d34bdd358a42d144be20cfd7fd389564aed0106040107cdb86d9fd771c1d82ddaa5a30e1288de74ff9692cbe159ec658fb7557cf3dc3916024fd4e4600699198685ffd5e3e4fc34e72b523ce682e2d66be27739fa73131868be9d1406b16b49678494a9ccc7eb6a2b4140dd32162493c5cd78597f1d610776a1fb6650d428f414e46ac80d468b8c4ed412cdb8b7f19797fc96b2ec8663b05f0a6b259563baf043b3256a790b17b875ceacfad430c371a87587b77c1668f2be168e5f67875dc0c51fde29acfc6f7d9992fe7c5d99a8276d8a208af70ec0d55040ee7959644d6835b3abf1cf28b350e6f0ff3e74aadb79ece4289be3cf96c51c6925b730bc787897829aa159c811e1adb1de8a872d56cac1e7c90dede0db788c70ca97938643aee3612237b13b682130d315e2ce7454285843050d2c43023ef6170c88ce2bcf897ad731138272fe5318ec8dfeb1e8d10ec8930a1b01c1b047ddae879b7ce503c2921fe9ff5842b47c4bb7304a10f891db256640fa44439b2331c4c3427d8f6cc6172f03945284cc9e1001105587e918b7a43953b9b334083f75af1154c6a68eaa8e8fbd1b2fe89eb5f79c94124b4bf5683ed3e8823b5a7bc3ff54306927e4fb7a53562339673bc27fe837852c108235fdabb8e8e81389a088f06685fb1a35512454eca6cb060d8fda6a91c4df1164751b2d498cc8f9bf796c8ea312826ac67916a5b31efa068185f696c19376609db06f2efe1934229284bd04d24310506498039f35abf099e935a2f553b7f45d5de5e15cde52abff1a7f83d035c82caec2cc3377ff3ab4ffaa4cfcb5382d0143dfdb4e2b5d3bffb012668b6fe660a4de2034cd7a62e7dff52de9b04b9fca48e72079ae6167ddb9087dd88cea5b5f50831abac83f6971cdd3310ee0e5c58a1c87013db89a3731e2c37d0722cca482b664fb45129ef0d387d65737427746a7a72de1f0ed1faf3a53840ab416757750f9dc168e57e9bd69227f7e0e548cbebb92ec06d0d8e4d2994379eb6839fdcbaace5f7a75b8cca3744fbab11561fd9c4bf94355f4c71a0e138365da6f2b8e3457145623623ebe861399fbf0516a00a41f85a222a2530d3fd65c8653f3ef97fef4d36bde3858aa58a8f9e5ea41bfc6218ad0c9a0338bb81df409c90297a651f4a958c079ab5c01ff90e163876a415d4928a44bc43ad1fbb18caf0e0b5b1d0f712adcc51cf7436848bf286e1493a81312c8f12f9893ca6c9cb0e2008c1c0b3ab1cc7474f96e4a95b038522d9b887b7efe228d0046e599df2514b4037b76f2a7590dbd2ac25b32f3314ec07ae517a64a2440eda853b97eda45db24960f03714d1df553469cb88319a55f61b4592286d033c75d9dbe67600b41d4d8940728ef86f7f999287e6ce4045bc7c65d47ee92e10ff6b2a709e4969fbf3b9088017a476d60c91a34c828e54699f66ccc972b8c15b3ecf154a51b9d828e280b9dc7583e3ce77b1a42063f5afb4ae5c04ba28ab8e13daaa4bb3c78e3024111761f0b75c0dbc427f8f841ca0fe11f98c97e9a9e57d2c3f6e04b08059bbf9c1f6f816769545db7ede00f5c081ff0cf9b7b07e651fdb07e12e4a8546a96856a425b054d48efb1dcee1455a7ab1c628a033cfef40be042e57048ff3f5375344c962a16d63666f81082e1455be95fc52201b0f6a6dd0c86bbb21c7c462bd7d738bd8a91f82580134b167bcb2e2c96408c6b581085f0f5416c923936e5d5b2fd637fa3c971300d5db7f9948597d6de1a7325211dc075dca2110a140d704f69c589af1b0c71517ede34e8a618b6f21f86159a469d8d09e3562b4fe7ed45b24516def02346902bb5c5d56d9996ba1d024a76ef98a12c3359d29d1567544aaf3f977d07f0ff9fbfb2eea1bd7cd97327145b21d5b8848fab64f44b13e0f310772dfce73bffd2faed149e5c03e47a0bdf28003485be72829e7297c8cb1b37636c851158d7a89ae2e1c756bf5db52042559e834ecefda0a9b4d41af3913b9020ddb84f95a11918462edc501e35b6970d473f8e12f9f5d803223826d0c91afc7b86b8c654020971729303ffaa763f8abdc88d887cf36ea3ec579d9989e052442352c15350d578e6362e60a84ae1a2487aba58f2db790c83c36e61de3db8260d74d94f5db152a6c7bd3d837e19d29d49f50c6207043f1d24b67a1fd3d0e8ada8d87cb41c1be04569e0d0d20752e41f7d8d1560107626d8774bcd69502af6647f81e7f9f15b2deb8cbf7a95b62e1f35a73252cd66821c85ce164638d1e6007dcd93fcd72bf311696d7d82a4ac45358f92c2b11706c0cfdedb08e551cc23a3d4ae457bbfb444fe9b91e5d5a0acbb764fbc46d9784c585175811ef76288102f5d1e5f1b4d5f74292dbca19fbbe4d5537a781f90ca9f8287c9110139b845e081bd2f24f291817bf0e843fbbdcee7da5b03841386a9902b20d7ebed569e89324ba6dff132ad8e3cad077b502b42d28e32c1149fa692bf7d9734ba610b2c04a5f98b6ea681987b23b1b3a77d9ca8a63c14f62e6fb850479a1414f8040b9128be6a2105ddf74121bbc336f7f4c7718163ae9daeda2e63e9bf03c878ab4586e58b0e3a647f70b35138921d84902c9cebd1763e91e01aebfde2885fca99c3541ecad60d261bbac3c41f8cc318d6c91b13e956b246d2d37d4343f36fa228c1d0c02c6315781fe724eca4ba4b034f5a9e71e9c78bf62bd84e27fba9a442fa0ec0047867b38dffbeccc03ff55dcb1ee879d64d6ebec1c84cc5f41056e5bf30a1cbe5ee4db7a1540dfc01b80a49db2747b76fc476262e69ec63034a6281937450873af3c8fd599e64402bfc485062c83186b6ba943c916b03409b78d083de212a72d27a59c9791354d72c53b0a5af7a100f362de6c567e01cb7f660ec940ee1fb79446fa1050672cfe731412c8f92e18523ee2807991522e2048c18a7153fd9a500712f5c981df1b44c5b243c899770c656639dcbf48dcd65268aa659b53575ba5f358d130ea33fabeb4c2af13a31c9b366dd550099496ed1a469e4c7bab3ebf8b5bde3667bce66be07843275a607f97fbbce41a9c1a7359fe33158eda7e5f0e10d5680732c006f570cb2356c0b922b61d5b609f067479138e38076049149fd3fd626e537c2f153d45d02d6f17e90c709947cc4be490168de397888970f37449574d1d703d1d0ad02691801cabf894b9b04dade0c8853f4f23d5e923580528bdcbc938bae0484888bf3e5f6be9be63195b739af11e1687c942be54a1fc92b6d6c36dc0eb43809a5f33103ad2d8acd9a81f511103d11e059ffb381e0badef773d079e2b0f6512a575bf4341866d1ed528a9b5bdd242fe7e966dff7f515b62ba2e26315309c2b4ddfe27a2d521af222ea87845871fd6d604dd8b131b86ba562af0663a998a321601cf4a1b72a738fee59ab70cfcb928ebc43cb16b388b6b4db5e552d3429e96def123dba445884982876bf13b1025d16ebf00d217b613db91be17b87e9ccece992af93dd356c5d73f70dcd958667fa44a58feecaf3d0e12aebd5cf727639f7912fd14bffe7f3c526398a463fe3c393a8123fc195b1ca7caad16579a5ecabe796ec502071b7a2dd9dd4b2c012ce33ee204a473383b99c460cec1178c681a3dc70cad42dbcac043014be14166cb4292cc44688fe63acb6c03ba3edcb7657941a987b9247e0c752b9fb3c6024ca33f8a0647c07f0be67bd2d36fd2132737e0a74ca1e6f41f21245fa4c03f022235527ad34db04cbda4340d6611e087108d4d39701059a2569f10deb635e56468b557fdc52392ffefb1e9213707a85bd9fd072c53d78a8f0ec31ea034bd92b1929aeda37768857ea68a655626a6c9c5b6a4442b3692f49674be7d51f0cfb89b7aa804b4d9398cae088beb94e597de8ffdca5068f9310d8cf9db75492b84ad88d2ed9797ea3a88c39f5bd4b6c0ee6a7e42fe1b4ec298254129e8b36878009604d2080ddd5a0dbd90b72ddb93ab16ef778d5f4125496697f0ee722455533a738bc6e22314146035058200f33661700be036762c5dfbcc78aab2b109ecd96d1303f7ab092475574ef681650aa759535e2002ea7625a0c933aeb0793609b9ef960da067f83dda26a572c003f60df6368257f1797d742dd33a91f1d6a9397f565d54db9b52fd35de34d516f09f2093bf850c5fac0c1cf2a38081475d48710168baa4610e6343afe4ab2e4dfe02f0a839ac77d07d2a05338e2134b2a0c1625b7bac4616ab3aef64f7c1b7617b83d8a13c16800fb5965fda02326566965f5dc454142d7980f85cb95435b60f78cc44ed398dc06ae20caa6f832dedc0bfb2872a28f2fe8d54cec051cc363c8d6e03aa33d94c902196568150eb0fd2bd702dfc93f4c7e2c1259f28204ac2944a3669adde4f9c676b9f5d6b066c4d4f54cd7933a4901738b04ec3a9df0e07784b304611b357bda1c6aff9171787eb48b24dd1cce504933b46ec378ec911808360e4e6f189b7949c373c8f65a27f970682ff776d7ae6e5e5070d89725a1c4ddc8897ae0d39161337396d32d0845a9bbc4a6e7ed7d673627a8473f02312afaf434697021701b9c1b8c427983fca6588fd7dc7fd886b23b1a155fe697f19ee865c803046621b0c7231b01777ac2236caaf6f42b7bc85c7c908ebf785ce85eb3b5c439648eefad1547e368e2a8a7888934e18b9209abf09b0cfa12e9ec530931d7565d0e280fb00cc53e9da8162badd735fa91e473a571f9fedd9b69245d038add1176e63a7c4d336bd5cae5a0935cd96a80c2744b3d2f553c1f97a0785003db2077591ffd5a8ad5a0396561c6ae931496e6661c2abc1c2505debf9bf6dd29fbf1735f5658257f2c5c137b19c5c6dd20a33aab1d5ba2d044dd9e91a478a603c4b789d6e6f0884ddc4c8fa834b6438b6f6063c09215f0dfee18273afbbfc0f22f28c59b11c3a16de314268fc8bbc2ed609d3f8e46973c188e120d24aeb3e2838bdd72195a1d9eb88053770b59e3020d850bf08c5af5d89fd61c97b88a19c82474c682482c1b6a371b6e025f643788f86d7a852d0136fb736dd7a6f0d7a4f96857667d07e697d8e2a4e7875707dcedfbc5706cec5aa5e08e4ff5b3405acea2879be6d56e1a2c433f61c01dd9d0188538e96a7181d4f13343ea1edb40f81023b0e4dd440f6b72337c38202b25bd97899d82f72e1cb0975812d4cf98b5cc23549a117f3a1864bd6f37c903e482b2eadff569cb6e9a12356c0fb981278fe54e6446e038fb63093710321f2af278e044bd16e1a3277ae687aab51ec0d3a66278ae18609a2bf7592382a5a70930a62d07e1b64d5657e3452b13cd91237bd9fde7bde4660322c9476838d2fcc6f30b0e439e0a3563ce17ebd1f6054d086a23eddcef1108ded0bc9df408d286f20c4fe9723fa3165dd8e7cea9cb63b0ae7735f2a4bfa11fea435034166d71c4ae936121b85ab947697421a798b0f6e1a69ad34590829a3fe67ffdb5a3accda44c1c363d6d9fdaba16bca9473e3148a8f2b74ca6bbe403bc21e96fe52ddebe88a0cf8ea87153b17c79fe88fa0c48007210e99d58d6c962c3fbe1214e0ff8d9ba0cdd275ac1d77218e2dd0e96038db59e035c2d6d9b24f330dbf8ae2c17f97b5cfdef10aa929fdb73815c5aa7935b68204b6ddf0b41880aff5ccfac9c4129848fa92614b60fb838838758f4c14b5ad3c56815ad613b678bd6c0795e0c6a6bcd5995de0d87e7fb6cd94bfc9cc3958e2b27a5b004fa3d858c3d85fa37b4a72bb5b40b5857716bbb7dbc8e0aef53ead071285528146d799f105a85a16cd159b4f8425a271d13f1a45ea144a8a0df363291f9b2307585aa7d39ccc61c143dc2709f1e588a122292859c0d3a0e28fdabfcf4979e1f6adb37cc8348aa683f7bbf811f562184ad035deb015aae6416086fa484c3f7f4b65ae6e13808ddc18dc514e29bfc15f1819a5d7e10d0dc9b86e9ffa45b4ed4de6753c3900fae8811e1041aa5c65517bfa719045d9b63c9c92de51c7ef3d306bd3ff94c62dc8c8952017923248288d1895f7fc71a665b59a66f7e89ee539a193f4d2ee5df002defe0022a52f47d785a368e61d972f17893ab0e2121228d2b7e1c024b15d209926f4366020df80636e16024d47678c2cb6f65ad66021e6630551196b8a4ca5de729ab4238616d4f3a48fb06627fe5652244c4ae3de2e98308662e92eed387cd1a91fdead60c4d9503494795c0f880819fdbc312bab102d87d2f9252c8d829d8417ab59c8c03a1f8cc2e5fe17c587158f24d978e30b151caafdfeace064b0fa74fd797f08c1754cf47acc20a968bfc8ecf84d1dfc2628e31689192697fc405e7f72115f17bcc41c2083daffe7a544b3144e8dcacecd622ae32ae0badaf7cabb52e48eb1fa950f355284d34c23f37324e951024a1fc32a21ee26f5eb7302f912436551994d919c90c13356d665f36e383fb786d912693560689f0ae2d20644405f2c3acdc6a3d840598b76507b8b9f24b3b0c9cb95fbc95e612ebc32410e7093da478c590788d9239a54c869fdb53d3a7c401f57eba6593caa26d99c3bb3c903aea7e3c5a6040aa7fb855ffa35eb2380aaf7638e0ab8354eee2509656c79d6f0d6310aee7a14c85f15f73c00346efb25115aac91e8e1ab0ae51e5975722ab70c308b30b8bad4e2df018e23669c8ca397a83fffecc33f650671297692234cadd085b548c58afecc582628400cc1437f7b7c65ad3e44b9e641f3017f39f40ad4846a5c808367a7cf08b66eb3cd7779a122b7b5747901cf301e6fc643b08c2c293a4d63bd80f61f899d8b2edcdab6b17e1b464321006f9602a6ad992ab0a11fd67b44e4030e92e527e12b3420c67a5223912d5c96320634440007a8f66538aca1d35302087b65d56a8074330509727f18df42f92870d3d91c3e81f342569e6e973626e9248da4f8c32988ffb45724a4a967adfbd7498992666f76754121211ba25a8e39a6c7a3513e5e87205fc517429fa4daeaf40f1a2cd6d16312c2a8006cd8c8f51f13d87ce2d88dfd6b1eeda9ad79bdf9705a64a4fd79a6685cce8b237d71fb977b1ea2ae199f7ab05eda8e0ec873a464a0e3edf138933d95ce5920195a1ef247c68f86cf49a62a2f0e30c931f0ed2719b5b0538fe0765b30ebd3b71681498d6abad84632e6b07e9328c39fa187b856ccfc34175cf25b669be987649265e1127fffc8c862ddd1dff4a3e3084839421f3c3dfe4b2d7fb14c8840adac7e94e729c4cc96b70510df17b14e045969567c99a54d80ebaef90008c8798b17c6dfefad857f0f4a27d1240cd9a063d0a71fb09481e8a593b2b834af9fc618b500dbe36c35a25d20d2bd6f5b27d0e717e3b245b223776e9acfb6d9e2631caa7ad32201f27385801cbc1e6818068e5649df9f37765d4e82284574caf0b51839ed5a44fec3ddcdaf0ee68bbfd291e67d222bf86c0b24df311814a0ee52efc4839234a14e1232b45856c052cd33c0543127c88032c6e93a74279941f129204c8aa3a4c544de217070452328b2c6cba29483a4bbd8366a10067439faac1377f31cb6d16cb6e51758658657d6fd09b8fae9e1476104a8bba42b121ee399f1ef09d7f8fecb60ced475dcb299a0e2dc7fc09b7c81603a14067f33d659020b75267eddbfe8027245e9c66d5c1dfd5e28f7513eb81fe98bb1b8b6e1e5bb647282896f0b879d51d5103099a8eb2f55ddfd946006bd0427c3cb1b16852bed9154ad8da37651f23cb2417809abc2d4821f50951112e1df4df6f3d8a267bc918b7653996cfcd5edbbd9be8a8c2721aa60875f414ef0dac7c8f143d889534fe720b1627ea7a1bd4debfa57950af8ad9ee24b37c78c70e9468ec226662079e34f42fb828c8c1ed341a6dde27ba2ea17a6bbe58dd306aec1e8bbff36430ea39e3b9adc44b5b27ec3713d1435110be2f32d4c90b6d0f5c25e285bf8086ed6181a157cf597ea68d4a8093781cd1b0eb55129c2f8b6d9435052f5c15a9f472fbfa128390608532cf6e2e3e6a86d5589129bf7f426799d21d255bd76f523c4f42602fcaef77205340d1edd935dc4c5a902dd495eef0e03aeecdedfb507a91c3f186c22b9c554481037fefb0d766d8251a2900bd706b866ac181998000b762dae09335fbbec7c6b2868eef7c75f2cd53540b1b11597027f5e1b7bd276e61f0ae356d46e0145514be5c769727e11a5412d06fb6a08d51920e495c7d5d521f0fcc13af69bc3773b685b0700a81b38496785cd4c3e5b6831a3f276d5696b5588896dc9e8a4b41d107f6011e2747e7de51df4801fc5b8111883067242b5c95b5b99fef83041315c9839496b277d7cc11c5dbbad32462680429e68f2456be84c7992e78db6b8a0c609252a58ebe1d00b54ef49a35b4f071461342aacefb2814368dfb99ba3f66311f28bcadd4506974204b41b1bd4637b3c962862294d9e93d524b84e6706e633bd190d4aae9e4daf3e119e2344bf0c39c12af8c18926e3385b664b085a93b2c938cdc53f130b629406d23b26aa3847469db8e10e4ed4aafa81d78fdec1524ca70d1b5d06a6ac9471054a5fffabdc5dc27a75acb8f3fc5a64d270edcfd60397f4b7818e9811a144b487d391a2fda7c101c577fa44aec1beef0e056ee5e263119419e56ac579e9d2c5997634dd55b196fdb37ab08bc0f9e8f4ad22dcf5867e1de3baaa20e03ca66e460908c23b635150230dfa54080d75d78741ace61b2df15ba3d4cb16b5ccc90140d0f2034db40a83a7f8f570b26eaa8779aa844e054f1d32e038b3bde8c0a3f2bfdf5d69fd389dc0e7e436b4c104b5546f64054806412827d88def804f9d9012b34ad3a5c584531d3b55e03585f79a602d322603d62aa125fc35d4b8ce2d00d482c0210446c6539c6a379f281e48e23a133e0552a892d84f1439a30fa12396d50d6e76b216a6224d3b10d8a28abed0fbd246b9deb4b35c7dd6ea5aed9b76a39378d04853d3f1834d7d75c7c0d4b31495434f102e0e146ecad86e3ebf21c3de8269bfa1dfa0d2dedcc939f58fe5f8438765736b2ac4ab7feaff2de754aa9048b55b79f61e5f349883167ff1d3118381b718e51cf524043c767dbd3878463c1830b57a9bc964ff073f1ef6fa343aeaf6101971d501c6e65367b28cab84411138fbb5d1cc2ef2b567a5e43ff6dbd74ea017e6c9c3acf5445187fc488f587f3dc8bb66f7953f377b4ff173ee3b5d6206f0f1a3e4e534ec329d7e73183af351d9fdc33111fc0c578dd9a65d8659f7b44d6b741c9963cc4c201a208b330bb15e3593a013c231509509237a784f6621a1eabd72cbb1be60f11b4723aad2118900bf54345ed16d229a8210b8df17880c34b4af58a7cfb2beb0132c1fd6db16b296a886cc4e6b66ea3bc06c1b3124c367ef4e037ea58eef38c944cbf2f8b108251fa8b8052cdbb9abb2625deb1f6f2df570cdc60f938fce017fe8c206cac0d44e936c9e0059bc20526b21a84fcbf68a21aaa0473cf6a85d2b6a62fd8ed5b49c636ecd2083f0190821c08397cd31a43e3c7e07a9002c5ccc3693fa31ae4077d82ab5d8a4c04561abb4aefd1fc92a43d8a3a01acd4cd90e10caa1ee2640fe66aaa2b13c8e085bc96e99abbd496d03eada1fc20386b11b1827e5e6bd798e0f94af6050a72b6c4155cfda216251d91e9b3746a22ecd9597e6452de7963fc71311f3138bb45b9adb7d7c6ab131c18d403e3f9fcbfdfd74d01a257916159bf45511b2b6cc1f9133ad8eb40665b7ccdf69d4c1217a345612f51e4b83fb802a64e0e072a1d79c0f1cfc85085814272fef0c143666a009c21dbb86e69189495e4a8ab21c6ae165a05c87db61ba11c3b15d199c33bc980d8f77dbe195843faeefda4fc8e843852899c4225400ddccb27f0f1ae43ae7759495a32f57afe4aef277d6927bd4567398b1197075a78616e839eef33c717178cb423489ceb6a3bdc48e7758ef732f1558d6a7d2b250566889aeef414862872e2e40d50fb72f88c045fe70e6526fb1403442abb47da5dbc499a5bfd15040f5cb40d9b88ca2a3fda9d60d75b1d9d5e8ace1f22f2e33ffa2939a1fc288eda49ec9a9d5634c210cc1c4fc8b56ef33436d1f5aae229599f38233c36213eab179c0671f6f624678511c1c029efd2af890e0c4dbb62ad77dd8ae8bd9bbf1d4af5a7158c579d0c42e94acbcfd8f72fecd41be4d10a8aeb373e78f3252b020793128e1346188696874cc30ffeca21e167c6db38998f0d56a987f4ebf32063c7015ef947d2b7d3c9334acc12799fe7683bebb819894739c7d0fac4115fbd0be14965251e05815d216f16c641c79c03c606e4a3c99ffa3e057e7f212575d17c67d6ed06cf606a8233b1f9941ec27f13021be0d5f19706ae045c05cca1ccb4dd01735032aca91e80f514a293fbe84e25cf3d16960d650a5741a9da4a94655bfa852742bf010368d20e16a3acccc704aaf72c0a0dcf2e4451a144ceadec8f327767d1ee9332217f5a5ee3f95e77f7d4869b7c54955db8aa90e3e9f2c7adab71d0431b61563224890a7fe424fb1dd20b1376fabe8885d163488e329c27d53472ffe6bb31b93c2837487569bf4d546a5d1eee0e04bca18a7a9f531e599fbdd923e8e97d2f20dd260d2720c95ac65561529f08e495b87d3763c02d68c0d60c8cf357dee21c408867508ef7cd1708f264feb747bc0c1743543371c22740636df3dd95ee0e9ae87e0630ede23f17225d64e4c782eeca9039fc8eb0b676fc12d5ca3424aba71827e4c9686d17b184e83bd73a3dd2234d2e19a2b95baff76a14d56aeb27c43633ec81164386cc96925d82048eb496144c9297638f606abdfdbc97ada977603607142c460b355410f44d5c227eea1343eaa17119b069acebed82d4b81ec0345bdc5249579ee60c48b2a1a0443c7a18fdb8ba4d6e482f4cdab0e2985ae60f04c5a214a0df202915be1336504d66faf28fb0fe99b6eeba4f44b729e5c734fd4226bb6d07878f0c797ec705f68190293b17611aa29198ed9117ae43109bc2fbfb5189be32077d574c9fcc892978c285f3df65111ca5cfb61a10e3f597fbfb0974881dad6fdbc4f17d20cf6991aede682f2caa2dbe5a4e7956f9c1e4e165940a4ad481dee52c40c3174594f018217b629ad86269a19456389eb8e6ced5bddfb5eda1ae0e5c90d2939b9301461c5e2e83e96f8396ed15f61d6673083bf6fd210d3c0ac5a766f5207b27e49c167603e2475055feb894b14bc8ac86ee61fce0d1b7be78643f690383c945840d029d2acedac4205b0c3aa50f75b104bd224954ef5455227b15a4287388d1b69244c850759c699cd15c6e69d356c675a54df60584a238423a780094e871f9b37a5da4b54d2b2e1614a8706b19bcd768079321e44911d5fc7dc28b8311edbe16e5c647e5b3b8f7f2b5674cf66fa79a004a6f924b01525b55cee890217829e6ce0a3831594de93e74d3f2b83e34461e984170dd269886ee56aae130ebac96f6441bf0c5ae803609e21793d0b0cd0808da2f4b6f912e57174e1678ba443b8572107db316074d6504e5533c0a141b394acb4b192734f0e609a5b8fd78b77ae8fb0f3a19b9752a3e0ed1d832c6b627ef5f6ca7608ebcbf914e02b4599fcff250b7422979a87f2d8e3af2b866aa74eb971823573206e5a81a9da71421bf17d361a072d6a4ad12bfe58d08a7e24353e395d2de38b23ae6834343d62581b346c3d26b1e1b680cbff3a184433629ea437fd0473085c829dfa43b069e33a96034af7219dfc1703f9030615b6a420da7feccbbf101c9753629c765aa7c7ead8a935aafa4ce4b9e42fc5c621a46e9da0a51ef54ebf8eb9d4c17480b9124ac1a37ab147926b59f6b339795ff5b81e57216e9c66308089900165c86cbcf745e932f0820c02b71d20bc9d9fff7839a0470bd5016394bf0db0b26b48b48123877bd19ce164a5a781edaf8b8a69e45f3040c53c8e7f16cc1553dea0955ab7535d5a08703cab183297ede8b6956f51d38266ca05d990311935c493b0667d7ed1ade10c99db3bfc028d0fd6ca58f3456b99b33d1f45ff3d68707bfe91765f7f9c5645c0c55f0753b36b332dcdbda4ec1a6e37429ddf995b252bf7c8ed7579a4eb4d2ba3eb6db57e71a2526712737ea34260538aac1d99f83fbe6c3bbbbe468b4a329ff77161c4011423154bc7b06a5414ef3da8f3c3a6b4b7fb02ff5509f9d670820f831510b5ee1342b79da2905b2b05acd29afa95cbc7a3002dfa234934ae29e2982457fe9e4fd0a6e9646667d01b6ce3bc62934341193d4ca9f1da4cd430fc02d392a0300513a7865fa12d0cd74198872125c44d7bd93c81b26f0d033c1203183ddcdbe3b3cfa06148b7d807229bb4686caf40fe397e68d129495d4dacc5af2c1f766ca5bc53cb9b803dbb170a6913110b33a877c44498ecd65a275f61c2ce59fde18b48efc8b487922cc0020dff54169afdde66409ba839ca9eb55eeb64c63dbebe8e825b74010e327aa8bc2045f04831e3997ee1c2f3c608aa7929ba8d4b9c56aa61e2e01ca6c0cfc9a11e66650373536e61fe4204e15a45c83710e5dcdf5e2ab6ec64deec90a0357d983442087df6345f12190606bb12eb6b50bc4fb8163ac5c2844ad4db999789c551d8d8dfe93e3c76e4e0c97c6d06dc0743bda0244f75ae35cff05905518a785eba1f35cb3541cb62ffc241845141eb79416adbfa6d4c6bfcd01243a4d32c8ab6e2ec27e51b8f6ee205877c3c724f92a47c4c9a7a4d6b4d62ae87bc8b0c7fbb48ccf2424a6e3e8a3ab6837f1e9127204b1d06b14625a2459e794af8267835790a7ad965d24332cfdd03cc5ba9fb222bd96ece5af73e98779fe0646ec0ca634aa60d98f3e24401b298034ad17bc6d8c323334ecc3e39b859dea0116ea6d17228446e05031e07e6a9fcc2f33101e36f20ecb2a8004f7eb30473e46a4748648322844b7b26be93a48a2533086d94b49a08b8bb0e49eb282b29a3d57c2749c9aff56a191758bc2b5ec837a86640f47b208df31601c3a8fdadc9e09975b4ef4b746105b1aaba820c33737c410402ea773d684d11696666da2c2ea4a9997a965e1af54839a311d5462c185b900a84632dae6eaf282e00adbb88c7500928d1c7ec2d5f91fbf169b5d13206d3e5b466b0dbc9c39e0ac5336bd2669b4b60d659f2f11d63eed84b473342b5f1d126f5f86e5f06b418b652a0565fe46b262abcc177f89691c93e75479ab4b155ffdd1aa6dbe085feb2598bc42247cbd43f50ee1f441bd80226b00562c87ae0bf28d14553513ade1d545e125530cbb1b76764c20723be6ec76b4a06ce08813045934ee7552796003d3d20ee211a220cd0bcd817f8aa723a4e2c34e48f8ce7c7b97bc30aad3b74943c19e7075ff7fe66f1b69ee5aca2ef5d3dc566b6ca7a12108b61e45b3ea4d75f658d82d1fc27b5cb17e25f187a0d3a3f8ca61394dfd29e0c23c71cd73e244fc39f2ed1911adfc25d378e84679cdf4c6498fdd35559e7f480ade4ecf9957750be2d5e48a1cceaa8278aef81cbee43c731e8ae7389ca657f73f0f7db8f931b261876c7ccf49cbbbb75e5ba07cecd50dcf95f67298225ac76b639cad67f3f0c409430e783106b37177e11d8be6535c0d1d6650781e28b6bf332dedb0e7d096e13a133ea4261acc04b2c22d5b87834cf6cb47b90af514c145880d4709ea1cc5baf808ba6c8e07dc453f97e4ad778550ded487be2a8bd7a8c8497c07f444d11d8b9400dd3a05fa3f024ec12dbf705ead863a365226ec406b367fd0825139961a8ed84ac59fb9030bc3bd47b815dd51df0e51a7056eae09afcd15d8ca41fc5f2191abd9eb726493f647e8277eccafc91ce1b8d87cdc8be14748a4b6f305ba8df4bfd99aeed2bb4248f72ef38627e4706de288086f6c8db0c875d3e9e7bd9225cd197e2883e638bc6fdbdbff9eb802f2f02c5e6772b61c78009f66f18d73c9a43f52b511ce2468805d8177f406c3164a217436f2a33af7463c501a8809c976643ef3d3a67c5a6f584cd6c70bad747e0e374f0cc8a340dad3cd5d07d4c3cd16a8812630619ad956e8fc141082ac8953083ab977349641b22b000cc9188f07021806820e7b842220eb6d71b1a5cac1ddf0c94c6f17910a545d60b4785f73ed69c2043efe9968ba642c140e1a8350561262ba934d7472093c5283b46645960e6e67b69949178426bab529b393d52c37e2b5957f991a40a1b6072a6b71f9b4f7ac7e437c983ec601b9396fd8ade351b3e21f3bf9b2124d6b58ff1a97b860b0f7c4f27f6e03c0b6f38e4981bc4d4aaf2e856a30109a88c4462e92ac7a49286f6a14aabba69dcb31f2ce5f20661f75a5fe5431078d66c80598f2556c9f562e675569e7ccacab53e25a75b3fbfeb6fcd2e5b560aac07ee6f473c0d5a696703a47f817e6066759e940046e855195f639a57dd06fb838c9622d5fc7d96a2d925a9d49ba99e3877c1f3780fe379fcb9701b1781d705fdfd9a510cfa566bd5f0f572e81022f117b80c82cd07b9cb46b1db54343e8defa4e7aae09c0d8b40a15d601670707bd13379a504f5f00481ad9ccaf59dbbc7828544dc290652ae3cd4eac151810424b1f2ac502f06c65e65279b3f90281aa71e77b3affcba717feca1bfa263afb7dee6e88ad99374c1d33092c7677931080424e141a0bca06675749822947a1871b99902b81ffe6c0d7a47a191a5f1878a15f8c623fac55605f3193388649d16dc029e6b8a9cc12b3a065c7faef65ae639525f8a378935db2bc15ac6c5a2c061878a9d9be69656b92623174ae9c5078dddaaeae1890e3156abe5bd79dd10ec5bd9fa5597d471ee897cdddf86eca8774fefc4e229c99e311c4a8142179e4066f334c69f81c9f15ac32fe2324f6cf8301914cb70cb8db4a1bf045cd61a39343ed5b64bbc5cfc47cdbe8df642ca39082fae7ab6774aaed71101866f8a21929fd77de26ad1c51a690245133038924f1d0a0ccdb1a54035b5159cec1e57683db365362b978fd2d3e16fdc8e2a3eeb0561ad110853f5b6606c672368925e61f5577af128439f81b7fb7b7f2cbae2e33c05f0b124eba73c57f7cf1d9e54869f41e2bb5ed12e8a4ee7238ec99b0c367e3a20f417dc81524a37dc15523586b369e1be674f1cc33b9c52c38dd721fe722033773c408686b4e9e5ec80a49f90622267fec1f2e08568272c8736b7d066106e8922e7275af4708e007bf039db20e7e460f7fb340b2efb480e8bd508bf2eeb2421581d67b5768d2196ac0e9db6905f4bd9b694bf2b5364f215012cddf9975227b2526bd60fdc6f4563e04b0575bbf7b299d825736ed91cfe84a3e6fdd13d4bf2e213ab9d9d983b96d3b38f31618f1f6c6d25a0388dd734d0e4b3881f238d5f9db32fd8f84d6439b873b1986a91f756d119f46721de99e655f9632fddecd716e04f55d0aa92fd05e9e9a80ed29eaf13d2ff93254f95be99802e9c6bfee392171eb725c73d6de0c36656d3c7c3c2d4a784baec4680d8ab74f4ddf53d2db7a22f36d7101d068e984dc93c17c9a2b5baecc857e339e0f372d3bddc698692ee43b285c7d74db7c394fff0c9b595dcc8e84b89c49ce3361181e3236c6a9b09e1d1cd8be62a84a89cce76378166eb7efe2444791b11b4eb0bbe03f9e36148a7231064d8b5e5e37a97e78ea2f2d89d49a27c01910d2dd70ad2518eeb9b5ac6629c99668229d693bd0b931306c789e06fb28262cd17f69834100bce1a300038364d3c926550318e816cb1362a1506a0a834d8cefd92783507417d31db6f16c11e6cf7d67b0f8ee0d2e4097637fdbe6b984f0c7d03bfd95cd02167d1edc6f6586d3785bd84f757e88d7e5951721b324cfeeb11e347eb3d57d253fe1b2c365b9842d54a6b2b52256a268792dac78c13815dbd6514b6fa5771512cb8ff194cf270278a20bc39f4b8b2dfa7069173d0c6112b78a98208e7d9affc2e76dafa96b9ff38d58cc2d90e0bfd0e467ef3608eaf19853d359b75c6b1190a840d1512f0e662b91244e355d403e769b3c6b240b04e7b1074de5cc7af178098bccac4a598020e17cccee6473f4c3be4b383a74f3be9fe73d7f83ddec552d40ea4206dde1a4a2b3b25fd3f5cec9365f8382978f0d47e048d8302e514e333d3746e5e70ee1180a3c541d4c592de3804863d33790e85f9db715159fe9ea3cf89145e4e5e28ee9f7d384739abe14333cc491914ff252c0aa01ec0546971d3f96c54a70071429ac91d325d45f6e85fb14993eb752031ae40b7d11172c1f0809f9f26c57f61746c8cfb58a4f303ca05618ccfd46139b29e4aca8ad32321c6c2b0617a44d8d064544d24fb743ae59526f90ebb595a0bb03c734c150a0c3e95bee8fb82a9557a5a18ac7b05adb549eed92903093d98dee54bd60ee633a384844f25d837cf39fa8569ad748afc08093574a03814e9d9fffc0ff1949ec4b4dc563e5c401f4ce3d3432ce301b467acbd415801a88cd4bd9a3e95566c67c95af6191e321292b9b3a7db44cb4f6411dbc9dbb54c4517be73d189995eb2e670c0ecd823969ebde1dad60c272307a9623bf305a406e3dd5863084effa699cd240c90c39f9aac9412fe30f9c791b7db88aa0b2cf9beb1b249645195625ea5bd4b7f0f9d4b9e412d827af399483a9bd7eeed2b1eaeb1c8734a4d7fc6dab627cdcc495e7a38a648525b585f6de66787fe23fd22d6364ebed5140c4196e9cceab228f4d224735db761b7de7ca9a461cae95e6fd51027c0eafea04dae3c09c99ed11d1eb9102d53d364e34faa392551252f12445062a5bb6d97db56dd5e763bb2898e5b1ffa131318b0ff62c4ead4f46a1cb9953d501a6f403095453414521d563d69b9f21fbb4bf4c96012eb74a2fd3404e5626465e3efbfde141b1c188302edde56da87b262223f8eead1edd9f344e99f78494e527567882eaf2257619913dca08004efd7b7c4faba00c11961e5127f5a6c36f1db7ac576b845d6ebb4bd243696e9529296e96cb25e8472858dee5b7976cc0eadffc3173d8bbd69fdffa702261236be691ea560e774ea0fb9913fa112cb16556526e10112f5a235185baa09c8d18681207691fc3b50becf508a72e432cc65185d4481b7337f9591f58f4afa32aee227bb96b728640e362423037a13b8a57436bf5a7b6b8792c7e53fedb908b5e8e9d1ecbd9340eb9aaadd769d4ad98b3d7b358dc340253b252d98c3a4491d44a84795b2e0dbf45b07864d2e5920b47f9e3c32f9709c3120af63932fa8c7d3fb727ce5d35c7c1c2fd0de8b0b2e4498d2b9996d9f111006d6105fbf08a820a77104439186098386e5ce4271635aa951d50116664d903ea147666297fea170ef3bfd679a110191df0bd2999426a70cf09639947a92a08d23a30805739c048914d112957366398128a1438ea867b529f1c7ed323ab0984dce8fe5e6598e11adc7de4d2cb0dbff2d3c9014a8c5a9327661a6ecfd460502ca15e172ac713186a520d0c31d16457777a0a9a45da56890d3150211d7644e43a5e715bad6817e4309e6391cd235306057d0618215268253e6fbc575115362f6815792f6fc10b84ee62b59bcb90b40f0bd22816a54ae41c2d24a03777dacfb1912150ac3a8097b9058524abdbf5d20fb5accde48fc47e1436b987b2ba1428b6eb95ad349a7d580772fb242a774494ded57cc51a1df6b04f1e2ed1c2f6d12ae9f8a92670706132c86d39984d5b3f45455996afbaa4c39e8e150443e507ddc967e8f9bcbbe59b944f0d3240fed2e9c43dd3fe482527fac4fe048a9a1967f984a9e701b3ad05e0dc5804350010c20a27e3d926d0d17652bbfdb05baaacde78d77f6ba1293712a46c1bc0df6bce1504b5e834f1196eef3caf6c1a2b43b78eff1df77287608e8e2a2f8fed266146324c880050b0c6198f3dccace130c0165e22c8461fced401ddbe39da4b56be03dac5160f59c5d9c71cc6d8918552f974c37566142914dac4cdb992b639dc9a72e42743625d195e419ba614d2b40d5faa1f4ce0a3060b2bb1b70d00954735e1d6698c34eb276fa051efc12c2b6fcc8c82abec0824950dfda94333136fa362faf2d35e618b5200b0b4279ce1a5358bd6f33f668fcea6e7b0410bdfb9f67603b5e894753943be81ec75679bebdf95d7efc027acef5f45ccfd7ebde622a56734d32bba87f8db94be428965ebfc4829712a479812fac1c0cf723f738e582d0e8ef953439e38990be651a4f254947135160b57952ec9c09c9fc4a24419cc4c2dc699e445697c3f2b037670a458002bc32d7967f3a13491a05ef6b9bb78e6c051bd7c9e71deceb7fb68fbb8285d729324870b868a51d430eb8384bc8be1d57e543ad3f141757a5a447332cf70ba281b6152cc9c8857f83de00257507693eacc83e32fd8e6e7a69b5a6534d9f1ee0ff3066dbb4eb4c86b23c408318baf684c6cee272a67498b0a510c5e129e1b9b3a09f8950049476bd6de1f6cae7986add82dd76c91e9a9210bb80d6939b69643604105a03db90afa3f2f9555120ba6aad0282200550321dac6c0968634259899b8038c8802469b89e99364daf2dd786945230ad09b16b0dce6a2f7f88fdbf02837fab88faf88df57182830eb77cf682d8bb00a59816b357714195cfc5b41724d6f900ef45c666128d8f854b6a38ea5c37ca9cdaa8044e253dce4bfd67f959bce03236783752f0b7bcfc8adee1354040415ee66ba274b437dbd1e429b5f455703f5c0ad636b06680822427058640e64b69c4efbfbc85100cdedb81ebd75ed016395cf8150ba738f5a63cd0d545228ba49fb5ee3aeed995366f61fec5403c879d8ce70fbf766894d635aadda7e43c1e125f6450b2cbc70f81e3d3226bcb83ba7586bb5d6988f07056c569cdedb39c553f9b159e6dd91615c082214d7822b1ccfa618e0b8baf107ea28cbfd63ac4b664d3921b491660e2eec5b9f8fe149b631e1623e696170dd1d04bee3355a84d8ed78942c93d5c0251fa1062edbbc381d20c2845f0a26c35bdf23aa50f0a9e68d8ab607a36704785dd3b33d6dba6e5ee77f0b1991de52b5c7d7ef4b82c58702f2200701e9b597cd864ae1218424c3a0b76e6fe4c376fd927d0f1d6d845f39ae4963cb5eeb43ec555f04053c81a88027aa866421f5cf4f36f4f1476bae219a09da0a3cf0517552a3592aee67ea73224f046ec0ec11dd2303f67e3c936cbe7ebc7984de63b9e3f37fc12481b58b71205744e2e740a0d35c40d1b745273a1388f3c787a4221c32d4c7e7317d2d0920be8d20e10ee9f24e51e8a69b83165a9e5212089877b8671cf92ea009dfcaaebe14869300dc79b631a929e4bb0f5003cf202b6edb9f8853b5da0900edd88d4aecfc8a2f5a5d7008230d4fb86ff1ee97b124d901d27bea92be2a2bbdd20306e85e75420be218d19e5126edd87809a06a3fab4e5f7f569ce076c240785946772061df73e85c0d3c8945e66f88d138068b2b231590688d9859da1a4532545dde4a9e7e29c87378136e70022611aee66fd4f9613a7d457ef9899c5cc887822ea5a0c3973d9af0ebb1ce3a7fa221c5467b95dd87804458706828ff0aa954c315dbbc5c6181ba02ab03662255d606559ef105647b5e36d50c903be53be07820dcac573f555b17d23d1c9ebe3ea5156072db9a5785a46ad67b7183b4ceae10deeba4028b106cf82aeb662258d4dfb923488e8b5933b76fba6609800ce3c445a0444ab0b339ef2adc2d018800be0d3e30be663439637e2915dc288a0533a9adcfa80f8cedf9c2ba6f18d024377f273cf0c3cd6d3386b72ddcd3d2fad3f4eb8260b2420742bf02ca8d887938c4b3fa730a36e21a8d30d13ad4508d907bd17af149c7f9711d6828ea52f293c9ed8286a2a2219807fda9834d536021f5254d5a8214617c80f05012ac5baf82ddf700cdf1ad09e4e2d1ad48930c673211a2ef4b1f480b81be15a2b22101bba307a0e9fc93ec3702dc882241f8d9fe7ff543d785a539b5bd220772a2cc40c4f55e69cc4592c4995819e1434f3343916fd3f33810170273cd6ee20df23ecf7ac4e32101a8dedab8d02b9c0065bb1de5a450a90fb65e322bd9e51030435a468e540ed08f468dd674dbb66eebe1c4264e36499d4f38506493f9ba3b6135307c3061f797250dd06215148d969198c42984bd7c38982d7de7c0b278bfbf68c163274676f0a3a638cded56693309d598b623bf20a2cab40bff20dbe53c47d774c899c964d9e53a6ce0206cc71456767ab4bf325cbc825e2e550116bf6725d180dc6b79f665f0afd398c7f614044e2cf83b8e99d1c8c8c1cec6644b564b54c63940b284ad0aac4637f102aeca2ba5c63b91a0f89244753fe5c12bf1b6e82d3bafd9440f5d638d853af88cdec7a49ded042476004065282b7df115da2be6964c5283b4a5d0463c7095a32bccc81315134d93fac6d988b9941a4177785b2ac3c54c99e028295e1294d2dd44425d49bcea3c15e84141ac2a07f369337d99cd9f1b1f908f8890d457d912776848a8d4c54e99e7753f8ce80d0bd6be58d741b2553b8e12a28e6ceb06a6fd67399cda354b0dbbed3ef89fc0fd9f825c7d8a302a0c628260936ba000a2518d7657cbf8f421890b5e9fee4129489734588f9fb0276d1b0cd515ec66daa9edaec4d849351be6c6c9e2ce279052c02032e70448d8955f1515ec08bcfe7e7613ed39598fbb8dd0f61beba524a94eede2b971485011a7c274b123297faa6d9daf826ae76e527a54dbca42b9c9ba90d75f5e72504f37a8634bba932a2027ad98b26c57291ba8f4e56e132e367a19e44abb1d53b76b069644188d0cc5ce2dedfb869b4cf4c67cd52d210766df8173d954ac7916bddb37f3be9f1c7e8eb473b022d07668d1792b044b8c9497dccd6d04a2e98c63eb7a485adcc739b4e0102a0b24c36944581b9c7f6ac59e8a940e015a0aedaf1550d02a78ea75fea824dc29c9d073527c04bdae59593d012dfe77d278a6f563d563066cd744ec8cb6c100e3732c4fed503cc7b439bc6c20eadbcb5ad5ced824a8412c6009dbf5de51585faaa7174af6e1e8387aeccb6b72fe8605a35bfed596a093ca201b72bbdcb0f06047f0cf1972cddd6c751f229157d439544360c7cdec70df224c016f43163136e23b461d1e296181b675922d962d423e09f1e65c4f068b4a3a7737dd52be28a8cf1058e19bcc03e8344f8fdde4ade363d30dbb1924acccdaf49f9a011cbc8b73391e098ca2c6813a325b89a3b5aaae7223d9d67ceee0c82cc13e184ae81e46b6403fdf70b7637dc937485b501d28d1e2b0c2ca74b57b1df7c13fab5947afad05b247128c7822f263b9669ca0371ad4402533d904d630fed2d69e7c7b6956d33db5f0834770c5b8a6dfaaec5473dd86b68123c9fa83f0411e733fa9be91fe140669b792009ba75a0dfb66575c3b83c1181a256647e56d56d41a285021612274d18b8402f49c45a4aafa4f64068eb54ff02bea4e2095833814dc68650ea2a66828edf76759516d6cc1d72c21f7aaf74192a8b8662df4d1e079a00060ff725ab3efc7371347c32d51669368c47dcd8399fa77b2d9a6f50e90d398c1d3b6379f6e5210551ca9349fc22f81119f9b95ee664019e696b5dad73c3e84e7bd7b900a234a611d0d04013ea08a2cb8c3a237e1caf376c28005577fb3d29e1a402d13f2dddaf211102580f4f5647de0573bf08432d708367d405d6f4bc24fd6560c524941a77ced339db146bbf635b8e5d7cfbd1069897ccc097d46a4a408c8b7c7667aadc7b56f2e3600db47b9bfae5bfc300467dc7187d8233068fc3e013fc0b65fb5c01c9ff6339123af22eb9448aef272451fd8e51a1e28a68b87d9af76bfd7e372764bd9596e2317aa6f52a0000487676bce24072b6b3d5e9a63d86fa3b4694d46badd0c532442be98caf75b00c4fdc510da4e10617e6cbe04a19248dbfa8980635390c0d7fccb611288d26e866cecf7cd8848bb2858d9d1b978885fc7dae4db2b92805753667eb3ef9c33f8ea76ae36dabb86c5f6cf501fdb4d197cce37d4b4212e7d94fbe5e735ab2aac7f445c4638a5a397bb0de8683a0540fb2aa2dc4a5a426c6cd61804f3e88f54997fad174a5ec90dd5f7989a9b207fb73f4ef3b9a7c2b50da0f45c004023307983279c106fe6cfeccc58f4da2f2d17a4a07374ca3d6b1e4296803e14fdbe2e97047ce6013e29f68d93acddaa55e52112534e4d175825fa87bcb3a7e5c970fcbcdfe10995d60cec1cf83d714ad54a0bc456730901a2528de403152d9271c3fdb0572658d6033c9591ed0a63162417d1dfc7c4c6d26699c90d376c7698a991aa7844f46c3feb99fd36300866210fd9bf3780df8904e319424c908586cb4b7933e7319acac6753784ac2ea872e41778c7688814df5326cfee008f20bd854964b10734257bb6486074a4c49a16674f2e61d4b833d5cc39ecf228c941168539031ea66e4e6f3182055e4632bbb71ba92a896b33d14278957793d7e9a3501a86486bc317a0588a5b6c5bc7224b3c3239be388fc9002516ee6545a270dbc5096227267eafda67685ea02455e786163f6070c3929fecf94614124c39d079bd4376c2ce85c8976b7bc6c802fa99c166628c0aee9f089e9acefaa20441c4523fb9174570a5ac7d9863bdcf684b424c06a76433ddf6b0fab1bbe94f904e03d12889a470b62a38b4491d374d47b81151f98fd817fdbfe10e8a63e9adb62b17a7f251223e345bbda273356e8e58ffc683c101e7ff435257e0ad9644c23fca372b58250be03159913004d26ca350b092660081f9319deecd392455fd14fd20791e35697ab0b1bd98690b47f9346d5939728ec80d58d8764207b8e3fc4ebc5d7f70c81889b8f8c1370dd17096f22e39cad8f40c728ecf4234575305cc9d70fea2070744ed28a3e76d160533b217f9c831b80266b9e7510125e1a8046479eb4ad33a8b3bfa7e320fa4e9aa9fc4539b7f77d6c8edded34016814a8a2aaf9ce166fc40b21020b7788a371a01a7c203df16efc099cb05a61382c470f1c5fb0e64bf350d5955d93a83b17825f25db5daef9fac2e15cb2210addd6158c24973d9f73663d217b46a05aab5c658375155893e9a4ea4ae9f01006cc05d8bcbf1dc645eb5d2eb8a29a878258fe1a7263eff331211b654efd39c1e890e90084231ee413030be117fd91cd8308e7e55088a151e80ebb777211031815e6ec417eca8c7ea6c322ca1a6b37a148b90860f8a9351a2ff1b6c0a2c90d5554cc49e0972c8504e91ac73a02b762e44bdc46b06f7dc0b6458b9cffbc7cae944cc8d966f389e1f9859782566155d8b00aab30fd21dc95a2e3ffc3e3739378ad7f64436be5c9eca561c38ed15903b0ebfc58680daeefc451b42b998c7d3ab04dc403284748fb21528d5785919e490a811b944219be1e2d79439bdc04fe5eafdeb30b90c2ff8a2bfe6bf5b127f73f924b85f89a692544a51d5e96c2aada34ee941401b7cd42aa2af099499573fe064872e4bef545b8e992f3f7b3f6e880207d9c630e7753962619c2d9c24ec5a6b30e9c3b4c35d0fd33832e07c6dec0835d6a27c69834e4da0300570a15ae9302b0a347cc2bcc601483b20ed89120540c1f6b35a51cc6f7a2a688f85fe465893ad50967db832f3b48d7de677e9009ab9458a1f870d2622f923e8d8ccd95b5a1dca7250538046377ac736dff6ecc717fcac4b819c4f36073272750c8ed5164cd69955d7eaa484360d8db2574094724cc85866c6c750e469d9ba6cb3c28934bed6351f8a8d3fe17cad3a70b56f5cca195c2689636a445c12dd65f4d51952a0ac0370a073afdd5184d1442689437d982ed8bb2538f328409be497031b51dbcf1b8990ee5403ec220ffcf2dbe8a804169e4ac6f78065972665b6bde35e7af4e6e1719548a70e0904598e6f1921437181452cc1c23dc4a8dc469a964549d3d9f98453d1c2e6ab08ca428b820f92e8d799b4a051a2e759a6c5c2c38915d403c80d24438abbf62dcadb5b333ede068f01125409a4b441327fc3ad89d5a432b1921271eb531d36b9ea741ad6b5ce971739a823fe347d43b8f3ee7f2be74260c3b07d3a0cdb3226a473b5da3646bb253c4bc46383ec1611d974c2fbe93be6bde8af79aa8098e126db924a0914f14cf8f9eaaa7545c30f58edbd746c62495d1ddd6d24e94e2d15f85ae08b14db6e355e4fea9bf33a099f23f9d6d9b2b43bfbed46929c72a54704e2b6d197da4687f206e7a02402506eeceba6d55c17e80f1690f4c38ab0f91a6319cc45b88b3684a601e068a43ca15d0f6235420c4ae240e02dd4a38d74df9376d9cd7b5d9e7d2af35a3fad6f2646eb146bdf5bfcae7bc303a25ad832ad1aee563942566ed89ef960bf4c04a91c19f92c33b604dc3fc820eedb25bec8f6724c2c22ee1c7136e228a556fc5f4051de81be4372f166b372bd03f6ecf3e68fc6f16adc0e21b20ae55470e8cce0b322076ec742f2e28bca15969ad9321a474d299abdde1f030825cc8f14d5b91803bbfad69b24f79c061b5468a0ab5c34830297597b8ae60903e51528ee9578b61616e0d67d2f91f334b0c13f606ea63c45affa54d88abb380d456c95192ef85658092d526ac7cb3a278166a1203fb0301fcccf362c7e5f8185397311cb960e4d0c2c30f9d79c9970c4f7e92dd64c8f14caf5af78ac5b791665d649c5d48522ece7110a93e678925d1e3ea6ef2b87943b7b6f9c985e31ed93170c0d2d1ca982b52deb9c87fdb064760c0ff6d12617460e26acb7fbe576b66aedbf379bc6b384b7833113bcec6bea0e0eea229141b01bb8f225bfa6191f304f008c588e8ece32e12bdf4e7f3bed10691d9f099f9e97da62ae7d84c57c76010f34830999995cbb4ec83935618107b2dcb59c7621d7f0d823ed7bea8478209f9fa178711c6d209016c9a8a9e1d2c590b2509b05ed5f1110774b6805e8f977d0ab2d45d4ec10b1b7de567348e0a2063807ac657dd395a1d2fe6f6296957a27e4995cc7fecf0b7875eb594a5fd90a5ccc2cc824dca880698733bb6dbe13986a3400d355f82202b85907695021c42a41c9824444682748586b7b81062772e6d9090228c6eef820a7678e5858accd4d899dc321a2eca7257a0b9d50d4bef1aaca231e80eeab1b498fcb8b2833707a1b616f90cbb3ec4eb6a540b43c980750332131325697be5f4430e28767b14192a885a088bd1d784fa710c07832a0d57d6c2cc37c3872855569873110e7e46a46f2bd91afe0eafebf6eae0ba3f1a0678e814e10e1e3f7b28c35eaa95c47ca21bd5fa8fb76d1b1ccf58ab9920555230aae345bdee2b3c1fd3d3b30a157e6b95da40e6cbd990138a17ed0a236dcdd66c37d5a148989782dd48f411127aed830ad3f1d115c651a191251f62bf5cf4a7aca2022c2d96703bab241d2e2c5f9d613650a0b955d6a530bdff7b15477aa23922ed5beb18ee7dd6c69501e2867a6d9814adb88dfd809b55d806e0bc4895811902b619046f25cfb379146c23bea5ab6bc2abaa7ca773b97a147fad3c4ad6411c01907d386d3c7a85b4aabf2279785ffc26aa51e764437508d09ffed64aec7ac2274f5871c09bce2188893d8f8c58ff1d3c356953bf46c057314d572c7034a8d7e5ad800f3d83dc6cc62f835a7ee2ff666e6d98758e4dce36fc1bdbc2194b46ee13fbbf5834316220334083ae3811ec81b851e4d1c12d98b5a2e7e7680b14c0560acf99539be200ee31bf769b6039ce5fa2ff16a2890e2f83d1a0d6c0fb04cec3a33653bcb46e3b911812c93f826818c3b61d6cbaaf071a64ca90b61047513c7953613505daaa43edd0c2c8cff637b6ccb835aced0445fd3cf7536196cbd90cfcc677385a3cab2041a2cf9e73067f62ed6c9b2d336c95438d5cdf813f2192ef45573676c841c34012ef792f5a4a1b4574f478b44eea47d4747f66785df19116e0b68b5b1ebe8d8f1a433e4d3d706e49cb346c0af49795d579f8f3b7ed9cc03891d0088d1b3384089f9da36eb8d60dbe96ef70a6ccd9c5a45b429e00ccc1b67762ce6ab18b92aa58478181a6a278aaec1729d48aa2ba0896e6fecd91edd809d62430b1ad75034b60d2def806c58a9fce43f4d9e4cb7ac47d508ed7693ce2592b5d936eab4aa9e109ff3321af8dc90c084f88d455eca9ba10f22ceb4ae4886174dfb7cedae2a4ed52407e67651dde5d009bc57448eb3f0ca119db694f1daeccd9071a80bd2630fced3bf9cdb0011f3ee6eda64c83e95a1b5bcafb8e7186904c0c1c7073e66e5610007bc7cf93ff9daba938bc1aa84bd9cc169219af680b17d75d5a9a728540ce31bead5ccb97c21a78c9cf431942b787027f29ea03d5859c1e319b25c56603d7d3f96515a0a9e9eac4c65c9c802ee56d944a178bd94e02f59ec238a3a724091358998db0a50961fb18f8ac69c13c8a88f3e4d8b45ba707c34ea445bce15aba39981b053ac06b9189cf3d1454a5f79106a4c7c0edfcf6d6768b84eb37a859e515bef328c9a3a7e14cae3e917a74c9180dd7baf920324ffb52b237ce7f24af2c2241ee32d9683f89fe7602001aedcf91753f0d532b1eeeafaef27ebf642349462aff61f65a50c8ca413460ba304d17cb964aa669a96228615feb650a4622b4fc048ad4b9c14c6fb841f3659d208558cbacd4eb02bee016596599a67456d484a5ce581d624adccf43170774409744e8c75c5d4bdd3ece1db03c21c162a6c1192c67a30470a38205b93a8245f03edd944c530b49901eda938c3119b0e1b2847b2ddaa4000b4905cc63cf8b1bf19c0a53001ecc6fbbb361c93e343e9a852943edbb6940dabbe19bb6e8d33a9e2acce59d46152f881fd962159d0f7345ebd26d0ff7227e4a36d5f7594cabcd48ffe4761f8169ed2a11b4e228469bbd94cd0ee554b211c348fd33e79470a01c95d953bea8157ca3cf3282f07bbc7782cea44363692afa93871691ed66a61d19f70e5fa5de880fcdabd9feec87afe86fb38b3e97d3e1e07bcf6808cf87fa69cec781565a5384b34c828fe2bb8606b3001d26111780f26f8ab97f73dd81b7968242d746023d43e98a240c65a4f4ccf408a786dab6b3e48636ae9b83450d325e08160e393c2a2a480f7e4b4747752d1169bd13b0eec5731f8d1eb2020d3684e10ba0c2379dab4d8a004db88bdff38254d7bfc1ad1b0d406e1fd447206f7a8141b13cb0e03822dd0bf44d387c9d742d1a13fb81393e3ab3fbecac713bc6ae6a590f2f7ce56b8c4e55e780fb0d5475f4b42ececa9fe4defc9bb11b08fbce5923f4707aa794a69cff78447d893f1fe4ef542226f0282d616dbf3db145543da01fdb90b8323e8a2cb5badd544a0e49eb2c86d47ae1b6a747c65b5467c0bbfc373f98957b29fb72e6129d719b0b28c4bc60a61ca69a558e86c6099ad6c2755da1b532103010b329d558a16d6cde4031c60b1f63de0dd22910e7888035d048d698077842dfd658e88c6c853690a7f3bd8c6ea3c05861955505ec085ad82646d505cdcbb062a77aeb73cfffb783bd51537d8c7a7dd93071ee0d624e6ea097fef55815e96b5e3b0c000e6182286e23a4be319fe2b28de7aaf97ccc4816959a427ee8c795593afa7001fb3faa942ed9abe04924edaa4db79b40b73afd7d870f572de7b23f86794fc67117625f47187ecb83ded710be50dbc43e5ea30cb74beb418d5cbb0e92fa8ff25ee7d03b0db577805e61536ce2017f389f144f6903f34ddf58fd71a749805e890c724dcdcd639731d2ec914a1f00997f61002dc8f5d4c3ce1fc26426bf029d9116e55d023fc3925c68802bffad7bd7ff6390245e95f51c1596b7983adf1fe6b76ec9593410a044240e58f78a521f45e262137d0c1b6459232677462fd1b57de825cda6d908e49f3c5a83aaaa5ff344084a81a96e7326d71583d4fda716e4f3af5a2f68562f93bff6185cad6046ba7e8dc840834180c0510a6b634d42101baef249819849b991c125f65df0f82674b0d1b5ea71521d4b25fb0c058d0bf4d90580afa174e255427a3711f4ed1d9c1ab43fa51828e40b1ab09f4cb4b7369b294673de4fb56f683701026d4df1b546075260aec8146af3cbfee7489c81b1e7b587940f47e55d7b9a971934198363d8af7fd906bdce7f91e9805ae6ce7917c5aa0c344731c735b1a1e7a657fe9a39b4b15d5aa3a64090f2b829579ef5b0f9fee4ebb1b11a4f1f38146d2645002a7f006811550d5ccd91469436e9a79f0fda9b947cee331df6c45180aea04cc9152ec4f3c3dfe579f0015c587db9f312489039cd3e864713ed5983d0e3ab11c7ba33d263c481d575b0f6ffc0ab8149a1c7f3167b83c94f572957efd9c9fe5010b9a91791e8293ed90ae9f806faf500492322902d2b26c26c0a577189aca78caab31ef5ef3b7ffc4d7cecdd14972e6db75de2944ecd8036f9083b26aca0662a8015b904e1f82f593cdbb825006c8187962715f058ee46ee80d08a4280cb65a72a48d3ec4b01d3ce9d64aebd86462b086d2f6648dda841493efc84714bf3774c40ffc70b6ca0e948f8104a66455e3323e2fd451951c31ba01f595dd0e3c87b05545a6be7554108e736392fd83e5c2d29e7bd4724cc9607d887a4ded67417112904d0a878bcb6052bf9694867fbae55145219558886a1b0b58a9a97b27a4654455dcb0bd4a77c0268108568481bb665a8681437c0703b28221fded4d32907dc842a1393cf30cff3801588af07e600369cee3921ee2524457375a7c134d4a5d8d1226b72e2f43ee58053ee9695f9e452d95a7279d520ea9d2cbe8512cafb736ba6d9306572f7719b0591cc9090433493c41bec8f58eb30308b1482872e83125fa1f703a60c2c181f4ca335ad0048123c5b80e6f76d2543e134c4aa822c0a07b2084dfebc865e391511bc1c02e59e59c38a07b48ca7297a5d2e431c4f31499c8202dc9ecf5a52d489271689d7bfdbf699d3bae0378db623c379a703b4ac33283bf1db80cf9a81da5bcb22a67ca003d69017cae6edd4be19309716b95fc10f5da4513ff0883e1c154ed085956272f52211384db92a24f08acc4ad69228fa6f14a5168676bdf69bfbf6b66a1d2b16ed7136b2235751e91645724a01e256fc07d6c439b43c2d80f87dddebac8b72c0f8cf3dc86f3ecf46be64459838d41b83be2521f8a245b299b5cae1aee76586dc642bde3fe5453a518f639b700750efc6baae81b365a408cbd4d5381738b37c78df38733e5c592b439390542c3ef0af7f38678d24fb181b3f4b4a17f5145ab9da891a0b3eb29015ed7bb06506447f5c47af172471a92b613e07159e96cec0bc3c1bb3c48b99e497a0bca7021e329231bdf7e51f6b355888dae2ae2644d48c5ebbf489e54d4ec05ca721043348cdababbe3ce3166f292094ccfad2a07eeb1c53df942c931023384aeb9c8434e3fdc550c65e694814fb952199d6984bea377cea37162bd25c2c569d09509dc4789d0546b0f019abd00559fd9f0aadf420f7bf4c0025beabc552e674a943b0c2eaea592d40f754468b77d671d9912183ad13de952b0a87a97f395459c8f307b133efc53f0574e25123ad98f20aceda55f4b2a71c65e6cc26c2e7213006e95fd47de91a62a3e879576ca77d5e0975613c5eacccac7e302f859842efdaa0f18dc13dcd88be19e6cc819ed5d91c164cb41775e1ab208a9e0a7bc964107139d9877b4e8216821822884932ea77fc2af93f6c058660d4100ae419418a23e3889354d7ec0229fd4adb6151d96bfbcc6d8a6568c032d2315d975711dddcacdfaf00e67c3132148a32fe567d1788ad0049f3dc5972d9482366a8077fd954c915b5f3b9e9c9b7b0f011d04d085dfc50d65c063078be8a88991467f6508f212f2975b482ff3a9d132c61f7b956aa591599570f74e9bbb29b86ed4b6308cd5fe08e46dcbe5e56cbb55551cb8b8c2fc6aa314fd2db5f1a354ebc8be755dad300ef158d2c7a4434d2c98569228729346cff56c65471079419f7441b668601161567c8560c600b2155d44d2e951257ba214d1235308062172cfb6e5b95ab79ed3b5bd938c503755b597e0a5cb1f4cc1fa57b936e72706b4098c06f2db0af269737a5a8c908d5f6584cc3f0996d10f7ff9d14758f5570f900369c2eb424ad67a7333aba136ef857742abf75005b0d8e022f135c764497795254e02fe2043b4343dfdf50177108c1f489bb121de3a09002b2f190c4eb2feaf05576909b385a202924aa1c9113d9cca200d3eb3fa744c3e643393c3aac5ebc28fed5490dd6eda8152cde17159b6a104a679ecd66a92b321ebb89afd55938ee5f5e0efacb43b111413a5d246ffca19108f9a995a4ff08e79d4a41a84f044e002d36df0c24aa3d753663c701e9ecb58111d25b3309ed5785105015bf567d3c546dc4722ff9eeae0fb2605e7d154c92435bad2256c82c3f22daa798d796b9f8506974fa94416de507b3b0c6c9cdb567d7b05f4db3d5b7a6512ce3c39b3dc74a64c25948107d071ba11cb8f2e7f67d16a5d6effbd7a0612a3f1f46d883a6ebe5a771c116ddc14136328a0dfe699162a98985bd8c7fe014811278985514358959819b666b9554b8a8cc8463664829701b863e74fb90f9626515194589143e8ac5bb3ef06922b731984c3654d524d411993ec833135eec5e8dd63c0ae3fb5292ddc6e72fb850f29eb183121479621109fd91db3396a7a1bd3edd2a1757115e5bc858a0e320ff84f123ce0329494a2e2f235dfa29b81727abee7e595a33cc6e5cf181ad044ecade0bf13000e783266efb3fdf55cde8a006b788a2aaaaa9221e1ea0d61a10e1f62395c57e84e33a8454afd107d6a21850b839714e243d9e093238d8c07358b97723c41db451957034a913b43c10cb35859f6c77de5835b9ff666fa59347bccd5bd3a3c0678546230dc79aa475fa41452528b9fbd41829cedcb1dddc36ecf6bc938aec508bb8490dc2fc5c6424b101aabb06d4874e54d61294432b08851d28f25342717bb387f495ab02910b5625830a07c50b2ccf8a69c44495ded878f8199cb1d83c481593bb30998649e8e92464b94896721cc3cfd826b0115e19fe1299f9de7a0e7da5f4bf2eea9f91efc5fe392f590602dbe197bb2723b20d7e6ecdac86d54269900cb09cf0959e5c5c92760b4574bebb023819cb66a40a93b2c1b7e1104b8626a995fbc41fea96ef95cfaacff99017af6a4d50b411a25eba86a9a2e1a5a901709a5d23878d251d2b2999ed349d1ff055fd009fea4aa26c0e7782e613fb85eb4567c147fc39c3caa2a9966fa2bc552860e6d2cb07544f55314ef8f5c67cd62c70d3b4fbbfb9a8038b7f7fea1fe3e6e9b870aaae2ddd2c17fb309a690f0e1c4731d21726e0c40193e97c0baf397b55652755a26297e40cb24e8d23f9614d5f748afd405b033480195fc0525fae589c8e636adce9256c6993ff0b767989d2e5deccbc3c91bec5c6d094c8b695d801770e54e16a213c890ec40800b43be0b456f843406c0c5e8f19e2682b98f4e76cbb77ff74fe88fd9c876d64694d273c62fcb98c01f3ead65b0036b794cea70f42f6a5c7d4df9194dadc3606b8093228e3d6f43e77aaf21fa84205f0a14ef41dcc5f4e8cdb2f4e5a17876b5797b0d8aa1e1ac2ce2c077c29998bf9321ab5fbddf12b663446d4767400a18a5918c7e664792b8cd72feff61a1afb5d0fc5456b8a39d86e97f3b7cb2ad438afa6ed5bb4dfe310cfe39db6833212b4ac5167d3c7f6a7bb163b065cda33b6ed72b0e48083fdb2b6df75f566ed6fdffca55e0fcece27fe127a64063041c84573d0e570ef65c15261e2e1b5168b5a1600e1a4eddc1093c5007f1c2fb48d815844fc3ebeeef7970ec24d9b27ce9f5aedf99a81e6e41022d50105928718c102c51964f33d23d09637510583957a19467b41fbb76c6dc4dc1c15d5b634d4c206a9dcd5182c1e7e0873b80234cec73b2733404b37cb4a4f675545c06c75463dc01f050b5bdac86a6871e00b74a057fc33d8e2760442adf459ffc0c251b093a9621f175bc4d4b76e4a807db2db83da3cb3d4118bab1ef1cf478c182523509d39205b1e3c2921e5c483001ce4d6b4b0ee11f488efaa647e9800ff591720ff19554164bed4dc1944e4f263d74a8c5ccf1d7614f3a99e832a8a27e2b124f443fa217d1ac737586a40e1be58763a92a673f76f2f18b01e33ec1bc36958b02eaf27fae26985fdf938dfa4fc1ac991f52ddb23c5141c2813fe194ab63e47b1550e44c708037f618c695b9205d09a06a935090bc504470d992366a193089ba8a307ea036bfc6a01cea89a3acbad1d45915e0cd5126aac45ecd83ac67c25cc7cef040272bda4fc0d47647d2b9e423f36e1625bd8a6a4228fa1af6119c6f069ad1bbf8d5ec0e42d31543ec3f414c1870fffb38f9a5dbffa1ed07491471310ef274c8b0b272ef36149a686bcac75e14a38061062d3387c2f3193f7c6f149c7082f4e10d12df424f35564fa188c10ff4820a0ad189fbb09c5f27cc6cf239cff20d50d6ce65e846e9629cecbccd711406047110fa0a363e1263687e3b0a270fc89555c80eb61a5dfa3cc376e6fd0f678a2923111bc9691ef52f9fc594a260d7188a7c41792706f4b280324b127c976008b22d8804711b3d1b6e6b91063d84b950e5f4ad5fd5dd5109c9d0b1d404e7bd51434037c2b19cdd561bdf43512ba3dce04296313f21e361099f5e1d1839c0478322672701470217a943d9f03c155feb7835d535272d6cc05bde7d160a24134f6cc05f3046ce9ca1c765ada67dcda2c1d59d247db3292c386abc6e02799f2458ff296aedf8693ea15a7f584ad08568ab90a1f63faeed9164dfe933e61d9694a63c939f3ccd97c2ffc73b9c39ab49e6dc39f9b5db0869912051fae8c5e8731bbbde5a2ac97b19b9085c9c0f0178133ff1dc2644c59dc2eb18e25cac3b017e321115a7ad76e359bbd48dad4173e9a42a9c4edcda0bd8e4339bc5164ead1fd5b9856697269585bc10e02732177ab915350c7a580305a6b1bcde51279334dc6506e0e8b39250c8091191f02428684be0fbb5a520d845ce98b82e342b4d988d1fab43382cf05a6fe093006389dcd1863435649d640fb3b2ace92d28e610263097bb65ba36a8180c9816a5b6f1fed2f6af65e14cd0945f780074c886bceadb9de69c80905c276e39f6d64a7c2d96f3906c90615584429cd5a5f64b186e935b32c73718bdb58315db31c955a700c4998e4edb2ed344ad9858652c235fd90facff16a9d50682ed25631a3c9f0abe4c5bd7e0d0e2933c8cf0151766be4df7a9b82a0fb581bfc869ae8288a5eac488d5a25817fa2a95ce3378ec4e70a50002df7f0ed62580c0de78d377da7bd86ff0d2e68884c60245f0b604cbdbf75e105862f871d627c29eb86ade0f5fb920817d8240c1e30e2c760a101af6e88225600cb01a9c6d740f44b57cb0096dc6802f40ef468e8c854a49c69e7f4dcfc937237c83dc0f64a35e6e64471ad22570ec1666ee45ef53a71a17872df492ad71024f87add68260d7c9a4ee89aa49d78d21c9885ac91e2b23455d0eb102c1572015fd474ab5b5d91c6a1541d151638e3a814ff37d36832e56e97d7872f391d2128e9bac37c612f4af0ccf82638f3bada00841f6e6e59593aa7f7d734f04b77189139e7eb3b0e9f7696cc5bb6e040b95be3cd82020779fd4e84ec8310100cd0693ae1347affd6d24cf445be14944bd2dc3131d3a0af0d9d0cdefa2c701664fadd3e89d05840cc06b1ceb19455f4492ef255b989fae5a1742a76d94c0e4f67d47dfd0f5d07ea70ffe5cf1813354fc903f50eb5ca9601bcee16ed2db8a6e75eec5e497818817f491c93887697e7abf49883a9801a3113d7f4fce2de77e564c37c330deadb5711c22ba6064f814e5713c381d18a8b2e2507e039fe45ac3770047f63c50d77d1461c60af4494e8f598f921313ae3f9f2aaa3b356186c9bef9387c50c06861b76ad780164cb8de23848f58f326824c6951c6d0c9d8a48c6bcb65c8a933ce2954c2dae47a8cbe1346404125881ddab8d9051cf2db15d73c52d35d83015b0d3353597bd73e4e197ca98b20105cca4163a3ce77886284fab0829e9142e66521fb7cfa228fe8aede9ec3de2acf387aa8de84373153c57669a8174e03d4a3e8722e51daa380089791bc59d9b11ce5801e85b12dbe0cbafe05735e48c6cb69e5820c971f095c970ca71e37572bbfa04bbf4c06352ae9be5c364c4d11e2fdd2ee205a1327c8a4a393cd63496c5619e82c38d1edad8809a04f29e4963a88942777736f12ca295052d49fb2e6450b7e91dac4e5122975083c7d5bad4b74834dacf2c0a7eab3620460aeb48fcab292d9142a89e6f5a700cc9e9732091dec4766b9c1932b29ade972ca66df52cc07da0eb49d24e7675c2b1e28e24a1459e9760892f1d8fd16cfaad4173d117025c75ad8dbe45e0002c79f7f2b55923dbd083b6d6beb7f12ea490ecb0ab42c8bd13de9ea9243c15677845dd7709849e382d063631ddeb5e19ff94792297a177aa0b12f06de9eeb2d4bc64a2268e7bb28cf9bb5c6ef34c7990e0afaf35a8c37e5a650110aff1b5545e68261558b1484b95f484bd6b5eaa83b53e53d692f3ce52aad87b590b2fec0cb7bda8bda8880fa4c5e7598ec9ec8a0911a53848eb0e915494f6395ab5c598575dbc41bb7416d806811e9643fb21ff690dd5de5fdd25de8a9ef2d587f672f5afc0b9b57b2d505b60eb8ff689b08693df89bb2acede8a9afbb77252450361a55d7ca34ba70860aaad9339a4c16d1c8abfcb05adbc5fc7d6fd13523e88e4b44a4e4cdc784a61587fb81f0f5ea8efc95cad693dd67d66cbf09083c4b9953aeaf955657a13302da2f11cb1c5ac75b22df76abe1affe335601ad2f155b089303f02fe8a08fea0fc97e7f7600143b00bf1cfe7987f6640a69744c1855e0ce40984328bd924daeb1bb9d3d9b6025b9a37c1756780be14adb7eb745c1f0fcd06b75c9f709bcd0f290623f414a4f731b7a86cd73df4163486eeb5be4b8c77e1536dfda6bec828e2bfce3c28834feb8bc639dbe297806e5a4680cf863cd4ff52df2205220e6cb2872d0d021c6d777ecedf4beb077e7698a8dd263e661ae031ab839752256f01471c75021e53ef2df1f8e4cc6a76157915d3149e6ac1a54f568d5b2f48728d7ef4ab737bd5267153d22dee808e81abf6c1023f24d3e62074af10b0a730b0f6ef5f27c26c87355c18ec682cdd66a2b31f74e312ff65975d85ae25fabfed22903b7a3eb8f7d220e9a7300a3134ace1353aecd7d52d15dc7746402d71a6af1e03e27468476f9dfe19ab7ec50db3be30831dc9309964cc4462fbc499374a4c0327e0e823ea6f7fcf3d59372997b7ad21b9ae5d34cc7e5754a61b3dcf0d980bdae390bd8a30174041dcf20527928d794539c1039acbf2593c03c22f1070c626558f344c94f868e1002c198a29156d5450c91859dee19adb6c572b27f24c5d2df05f8efc81ade1d29151907f8b0ce62f2c1082d8ac1f6b4b2f402f80fe0cd8642720bdc861069d3082296dc9197b41ec8eff7de193fac887165200f27a3d80db7ffd0b7c38a72fcb4cc47a4db2c57b1c1c39b64bbb47cdc86992d46b027e9ec49052df51055a503725c8186b919681c26e97488ae2e6148ffea1192fbe2f4abd6eff463ad5d51979be40be1697f5a1abbc7b3a80d224566c052510c4bfd1489baad0a25210a2c8001b800a8057c04a20c18a06f90a01bda597c04fd4990602eed54380a68175f894622b9f3bccd9f99a1fae95256a275dc70631b40fa4cd143e18a9914b139934caf6158a789b7b1d532ef40e129a02b0d1b3abc85969d61a0b55046843773de1d46e5ca28a550ea61e8d6d7fa8756265cc251f860124cd739be734e0a075454f59d9b6c756a673745ec755df9a7207d9c27d8467d34be517beea8e9baa17dee35bf83122fefbdc4fea649f7d7c8f54a59b2d21b4b8a307d76eaed2544f5c122ae3a8827b140da2ba6cba979339a6a6092fa0a56193b16e1a04c955b3e3a3e71ed88f6266e536edf004cffc1ff33ed07f6fa2b5ba107221d84a5403a061629e5a744d85df930af71a62c247e71a63eb2d403734bdaf18d08daa63fd76e83b43112840bb96320655e36243d79c692b9594d127d88f5412eb8903361e059bf5a3ede577e561c1e7f88fec8dfe97f746298c6e44a7fde482b0f226c877a4631fa269f3b46de0cff5168b8fd4082862f286703d55cfec3df5d002634af661c7ef6a883f16411452961f924fefd41a652fc05565c7ae2ef140d6330e14cb7a6f6491f598e27c3cd41402ab4326ae798e139ac60d53ef68290c31376011f3601bc3484e06fdbae41dfc65698cd9d8f199a41635bf32924d0481be4fafe3b6853e929c740b4a27c3db4deb9791f69f2a6e1f5a8e2776912bae665e827b4470b3b067f868e986d86067580512b9655ea80087af9a5d47c1af62cf74fbecb43443bdbdd2cb5d5b537a0c6ecd62ffdb5df61aca1970abb37ab361cb938eeca4466a08ea86796d7b9702bbba6bbf1fd748fb66a028b0670c4743a9759b11d0ba0531f409f82835debce666a4178e26f0d82b59b400ef3963e34c74befe463813243ecaec08a98279521859b60dcbbd6c2cc3baad20629852a30c3ce6aaeed375f4a2eb215070e45bc2442662278052284b64ac1342df30ea5a7efb8921d165263e561c1d375c3ebe7da40876b8b3fc8460973ace1f61e85058c25874927fb798a8b731caaa6fae789b1c52fbfd33fcfe5a8f2ee939f3ad21db9a8f9a16e3c1f2d6d28eb1f855d05a9163175ea9a1d32fb26488de836321d91fede0ea3a6ec1955da8fe322ffb65ba044f7b843aaec73a2df5c5b198ff742a5a5e7b50d4ae9ff87edacdf8d65cff99eab8bb1e6d50892a26662da2f629a5ea7b32fdce95f6f3d3636de3c2168c2be73bf0868ce7016d2dfc7340d823f9f1b69321eab3df549bc53e6d0440c70bbfa532ac19cb2b5859a23c2af3bfd14917d47c1c15578d5bc13e1b7a5fee4bb166e6e2623785c11fc0a470ee6f2eccf0feb1275f6082519da41b11f2e6739f81c9818ef62360a0c3521e15c16f417201a06ae866e6e140dd170acb1f923e616311a480c57c0f9da711b3e177a216d33cf570ce25a017f68549c1fa0c5427535d86f62b40aa4483ff7bb9aba489e150ff8d7985642f0ae8928f5ccb09bfbd34768a4bd8da9a499fe228791c214eacc47ccc3d9fdef78ca26b5c237e57650ed2d6cfbf1e5c42abb2f90901a5b33f4cf587c6ffcc751ebcd4e077aaef30e7f452f6dc17c9705dcbd7e33ac88c707f834dc9f89d7a90e33045143750faad0688a145c3d107c33e0da2f35accbbc91b3e8bc7de588ca06a5f834824345bdacb12c9e696279f57f8ac0b2a27916b406e05515a007aafcbb9849de22db368e482f0569ab123f27aa9026d584ba184081057cde6e4236ac25bace027cbbe22812689865832c9736e6aa5bf4da058f13bf503db6a49f95ad6b1ad3f475f63f0a6619af1776ed4334fb8fa5ab793ab1c7f187c7dedd0a1d6cc41fe7c7680a29617c8d7d7f75d96bbf1f3cd6172fb0fc10b0a24e09c80d0ecba17d84004f13f83b92d00c1e55aa9450e06478dcab3e43f8ff199919e16d62cf2dc6429ce7e201ba7133d5dc1f974d4f1c8228c31b4b69c648c16f461017e79eb59db6ff1240c2c4d9124ac4974a78cb8e8f3d47ddaddab68bf8005de7137fb77643b2a4ae10aa06cd188e431705848327078c8793a50920e719f75a0f3bf7f8e40956e5ed88fa2849ca264a7fcfc5a5ff9d40f6f138809b857b03aef1ca44cbdd8c42bc138399822358a5ad05ad3d18e2c915af2f7ab9718892688f59ca5c77a112e0bbac0f68974910fd79ecb1b9ccb3185dfbccb783c68ee5831221ab5eff615fea95d954d7ea59b92d43409c42291f9c3cda163492002ddaa8fb59d164cc980ef94283a8064ea9b85a98faa8cd1c19074554bac503ee4e449ba8e547c971fdbe10ebc97b5ea85adc2abc56bcdb9a21f46a43dfa1dfe5df7ad574df8935c1c104d239366cc061e90c681315a5757a421d68e721067124856d7fc5dfdfbb202010eb4c80ff38911a14492464efe1bd800f9cdd7470bee05c5511384c21ac2a3704bc06a6aefe373245308e9c4b9386076a7e97457aa902fb3800c3b4543b1d3fa26a9e04889aa47d9bf143029738e2510ba4dfc2a4c2ebf3d8a449e9aeabdfd235f6c9db599cf3a858fb77d0d5aed2bfc3349406cad085de1ca7402791789fe4dbace4491743920347c7ff0351708637538e70af33533387a3377ccb6ddbb0e80d5bb6c442dcc994851a1025a4ecb78956d9f9dd52b57c1099f1b8de14703ad91f954be63b3f665baa0de46ca630eeacd7f1eade53770d42e740d0fc0ad5118fec50a957dd18d3eafe28869db34992db48f466f8dc250482f0afa7ce5173f1d524a336b866d9b24507731de27db7e07e263256eeddcc8e2db5bb45296fbf70e6ecd1ba76c574b4e7ab0a9bec04fbc9de08161146a1ea29d36c5345b7115320fe1fec3ec4c2e45fbd679a4719e21d2289a6287d007dbe64734ee758881b45fe5251e70faac41d6493e58a4c40f3a93a67bdc1a2b7de55ef46806cb9982f1340d5b601305efaa6561f2cc5294b119666d297dba4bf41e835386daf7258ac192f1828f917344d5692ed6f3f599e6a6f8852e4488d21cb708aa083b0177e8b1827b27f8cd5ee1f75d67dcbacdb3a814d27876c7ed2fe4435219a2ff9b87d30818261d6acebd0bda8588c9d11a0ad93bcebc9fb2283a9414fffa6bab43cdc2e3632038ebd6edf5a07143bb0699f50ed329fe8d14572523e54e59fc3a2b6b23df4e818fc62378784a8851d9d3a78410d32c8069d17edd07153ec1941244b8c420a44d3ea63848ca30efc11ea751aff6b168a7f9b82d4f1f8539c142ae76b06066cfe3747b39eb707f7a1fb56ecd247cf8723c170d1c172f56b9963d93aeb6171bc9bd2a4487ae5eb398b29d53308644285b64bf80072a30733827704e4e40841466030454b4021e3dbc48a69d799e3f543ec35d5b004e36a166dbd81a8c2ac91b71b91a0cfa1a20998326535bc317d05c79c350d6a273d8249b1fb5b0733a666e3e2ae9dfb931cde535630bc2836c5c0a7be1d4eb493b44da8709cd54e9c12c0daa297bac7b7d73ef13c023777c13c004e50377cadcfcaef67431cb3cf19ef884916911dbccb334edfdc7193548619392440daf54d5297c67140a36617a29824f35a69d7d3ca938da9b7ad625fd813a823b5165228d91fa14e0ac279a58e42a2a580a95c0d677665cc59368915d407c876039a00b112e5fe09c4869834733102858ce8d1bbdea2587dfcce15324f132ca95804497ba4204a830346dee4d68f8f77bf88bccefd48d67e6b73b6a37a40a1603b769a0976560c6279ed52a51504444677f18223ca59554b8ba5636b6d213bd994dcd63c6ddda9716b8d5673205b269925a8220b9fc45b1f3df75534a224abf4a4c552114a55743dfed048e580e440448ba63ad674e9320208f403cac330a82a6f958ba4dd24dbd5c06717720b9ac77bf04e0ce30b74884d76da601b38e0f008580c18df19523d97591cbd796c96d265a846fded45016ac86f674655db1143e4bc77f1e4cd46efe106077d6dfa017a80dfdc6d0d200805a110dac56d1d3b86762be15d7425e3070bb393c93647f3b3a32a7331348a0e28c3c4f59a0d17d6e32d62c2c9aeb5c55068417b41e3b2521a4da9d15440e31461b93314932c71e43f95fbfda2a9c59e13af63cf9d4ce578084c7a791374554729e78ce0dc83a78c8a9171901cba8f966d7eabbbc46fe34de79c97e4f78518c66c857fcf69297fdc157b5e39c2a88c66a5097fbb94351ad8ab9a7dfc09a463946a3355387144832e74f952a75a2a59dbe1770c05ce9a6e1668e3aaf32d717bde2adf52062518c2f081f78b8130aa839c402638962b1c8475f8a563c444b1aac636f95aa7392267e60722b8cd86098426039778f4b8d208ccbab344fed2fa912e1c8151f016705e1517be9fb8e092748d3013705a6bb570d0dcd3985fee573159a7d1ff2b7e6f64e8a49a7431b7121aadf9b2027303e5a7792af245345241332396decb22a71e4f93724cec3699d57b21aad33eb845e489bea8b6015c6919cbad898ecea5b6e9321845628fe5e9b498062858d55c177f8f98609c1b5bc3e684e3329d6b5313604e9a3111f66dd6d41f418a5dbe022e3685176f6e8e50dde7284003d660aea6f8beef67ae5215e92f01d213ea17aa19ae757894325186f3c6e93802f9968d7f69b73c68d7655b4ce5cc4b0df3c6ecbe31a8380f08a3de5d9fd8688825b5646888be172d36b74fa1542883e400d990d0462a9165818937cf0390328f9ec37551ef8885e3788b680cc4d94f3ff3ba7067fd52ddd95fecb5da7bb1d2770d4ab568155f6e9aae4ac99b2f3127b5a8e30ac55ab6497b315bc17b35b72b9a2ad413752dc3eaa09b9a0ed651a8c0924ddf4dae888d39cb8325982a350d53e707688cd95da4e05aa6f14add9b5e9a430044c07ea62a87c333aec31041b9a7881437a12d60fd6a000ee07507d931d504fa408d36719ab8562db0a07b4d147b934af04b0b157296cd31b3e540b558c3c0f51938f4a34e1550d1ba66304d5ab1bbda250302f7f2eed263cd48a00b5bee0520d6de09bfab235e69ee2a7e87e46814c17ac62b774dae46b91b7a238c9266b6f7a7bcf5e079ccf7b0a1b303d69c480182676dc8c323384b4190d45f92e1269cb6fe295f5f3a90fa29ec9ee877bda380455003f8e3bcb3d85747c059de9e6831653a5d2f5949488c1a7124276ababdd70adf202dfe47d58bd7e1b5bef116cd055aef6b3f7d3823b84371f6ffc965c2a3402ec322c13b293f4a1c946224fd2db6cb2aa21408a5bee05581282b3c45d05ae4edc6bf1d1df5e21abc35b5ff635c34583dc711ce3340a4795c999c09422d7dfef59b6b8d9b57b1c9dcb226e9e0898b164e3320da640a03e732f48af889c083de40c020c595655f32c685ae065f1fdb3798ffea76bcbd6d4195876fafe383188dbb1902c38766a99ae496202c9443f69923807c4750211773d21d28eec8c69890165e193a6eaa1e367e0e4e1968d8efcce41135491c60e4049d3d69b4257f8624792139aede14a73575b152cbb60a316e3e083ee3fb455a73fe890b000673ce8bfe3b8021b29f6d165df918b5c6cb0a8cc7a397f3fbeaf00c2a5e8c3d74493614b77df3b58b144158e99d82beda49aa815a9da8d0dbcb08170d5217f0163fa76c3ebc9dce4c830537565a2b480fbcf108da8b121f028d7f61f7e12da54782f4aa033f02c2bee47a03d1e72e04039d9bb713c35d287b8e5fee3a3d75c7e6fb07dee51572f20330f0e5221de88b7485947f7d5335d3c3a52d1ce70a1485242be30a241c427b85e6281b48a64b971c18ddf820f9fc28c103c907c4900a72f61df21393f47e424d1d574a301bcbd6b1a8dce6a087a9234dd23d9b509d9de60b6c7d10970a9641a0f708b6df95e98533032b327e18c46bcc13030c7bb478d9239118b7d40ff52e60d058d61c678cfead5284fb305d6b41938464d60fe100914a7363e0330131bf714a8378cd33dfb7f48004379d261e49a76f5acfdf4743a52e15390fdf875613730b909cc37577aa7121aaf3dc62ae94fec19441aac23c7103c7d51c327ce90c74c90e3d5d99ca0e781bca2b995d3dab405ef47e9d786d2a094053889a4c19d732274971b9d6656fb4cf2632522aa1ba9fb6f6546a023ef036525419a9ba3c333ebe7cac3b5a833325394cd3993eacfe2285edef50a94b85a1986246a998fccd050038cc2bc8bafdb734ee962536c66ae1e1d0e711911098954ac4766a3d0a521d42499e51bcdc6f953a5f3f52222621f2dd7ce348fed6a9e92605dfa3fbbb11655b70f0178f6bd7f2ca7d94069f9dc27bb31981728850ec7c53f27ea3c5c10bc640f5f208233ce60f55715624e42e56f530277ceba3210fdcb0760a30f759d1a85401e62520c7b8ef984b890b7d0e07661ebe45b54943bae3cb3b14d04c2c970508d598c500e8346edb83116d17a978fdc0dd2719f57d873c1cae8580631c21e0193abdb3bab331ce6546837aa68d5823b3be69cf90165996b0aa83f35ec59b30e1669c0d65a6d397a7da4199bdbd457e4d348e3aa2082536c923064079bf3ca3fcfde70fbea32cb0035758e4a90adefd029e2963a476860f3b92032c7d39f063fe85fe2f89c4413337c88b054aa54d61c5178d802938e99558f1dd3f66c3a0a28ddee76fd5dfa3fe3df51a9bc8d87c8de9df5c9bf374d026fb56850c668243c6c7319dea8a0ffdec97289123d2bec314bfa6b1dde3c3dedef4c09c28d1e64305ff8a488974f3e746bd23e372c19f9f68bcd99e13624090a3e0b48bcd44674e8490b23d078420bdb2345f52bd40d405cb127ec07ae82df0ac137f558d94237b7de8b9ca0f145696248b0287cd5f93ab56ef95cdff204a3538bdcc10ae16d469196d64cee08ea5c0c95e697e68ee1ff5852cf8b6b17607e92f107431818c49faae15a00abc36ac48816509930ce0171db01f05fca6b93aea977ce36c9dd267ba15d4cc7183ce3a8c901089ac7a2e246c64694ffbfed8c9de14ce1cf08dc132af98cdc7f74a3bc9d4ae00d17c3e0501647d8bf9587cf416b0043ffc26033f883d3cd5e43e0befe51297a514829fa7576ab568e7e73b99ffd78e1248c9b23bb3489776ce28b3f3e6a61f21cd3c048aeb0c451ee131513a074f8d3a4ada8f842fdba329fdc5597d14053b3941557c5c4105aef63ff056fe9b85cd1109db2ba214db8ab3aba0f69c33db8ad4369d340b7681418bfd386b33478105abaf80f96e0b467af6caae8bcc7a8196a4c8418bb94625f3cfcf40d04ea56e27f0336ddcf26d5bf32654f550c6dc07f1092f72f457053c5eeea66120c76a8d6c1d1fa5fffed2086002c59a35737ef4dba3bc3c0c00dcc9b28b790b68499dac7a8fe23fb8fcf3ccd14c296bcf5484e30703e1b20d0d5d98795ec471ecd692582a83ae7535102f180fd8b3f42a9a342bb81835806956744f21f68cde4a77c8f86fc11c60a3e5c9a422ed018dd909bd25684b3637aceb9e4ece37d901683f8926c62104c4b12feb995df160515af0524a9bd45a5d75564758db8b94c74d36ce282ec478f3a66ea093dd58f7eacf45bccf8b0c978e27a09bebf5eee106362260457ff5b84c6d2a88884f1853e322fef2d7605031f3ed98a36e5cdd6d328a9fed0989c967880b9da3c750e5dad621459c7e8cd2a6890ae33241a523aab7b4fd17e6e6ae55285a9503c1412a6c2cf004c9fbc59dfac687331c186846b21877a55048292e313b72a62fe25ad4c98a2309ccb83af2ab155060ca4b144238b9cdb9556524c0fd5a07fd87584fc5777474435bb3587905c657ed9bc709338858d189f58277c790ba394f22e2e0cf000dc589b7a79a628c720d84fc0dd0a51c01aaac30ef3b89ac68a43d190c2f61ad49901844458355b098bb3c9104ca6dee42b2eea1254d5b9f9fe555f95c378b3c1ab1ed8214f7e5a1328491e63ba31a2daa13ba381046b12eb9c9ef056f17edf621b08d07d6bdc85fe97a73865b18d7b4351545f18f2d3fe84320e0c1a55203c7ce93a97ef93e49e15473807161bf11d38ab1ce2af16e513e1a9836228140ea07ac1b62f8da3f35dcb24e69e6d6e67b922859bf95c7eb3e5056c344b6ce926a77b4494d5c1da4190d545753e88240bc4686e7a05cea381eb4cb7985391dd837362d9db69c84fe3ceabea870eb503ea4b12a20423edbffa5d854b6c06a6c079f1c48504c872fa59c19607d3018ccd223ca150518b1f4b872213fd88c6221fc77ce179495e02365e15a374f896f4b677da5e34ca16b2392cc322d3d6323f9f2ce78e49c0bdfd9fe316e032cf0fd545be4b9ef2a524001d8a532185ea37e80dcc9a3307e17a56910436f020d01fa8fab97f12fde1c3e51a81bb4071cb9db12687412e24747a3af78ed7499b0093c8c4ec4287d844dba5040c9d58fd90f7a70e1042a519698750bae378e1cdf3387d1bf1e0c46dabfcfe89256131911ec446a549ef013d39acfaee315cee1f5a8cbb1fd7f969f47ef150a4b8d641176e628669000afaef5d4420b185cea23d3dea122bc64317e244f1ac90e43539036e1464d1075ac053855f9477cc710e45e05a2d7e5191b85f10716386efbf1adc92f385a10a52d5750a96fb6f29c83f0a0fd1b75b66c8158ec97af3ac362ad3c4cdc868db73c037179d80947e3c3398227b24e911f0f635bdd37e7a42723d08aeec474a29e1935389b0a80e0f612bb016f0a100a44ea3b0c2235e2d186162b8b5fb537191b006fd05c666e901d31f87c263ab982d68f71eb8ad8853f68013a09d144054672ca47f4032e094f60b84e3b4b5d47de4775a8fde51040378629d2f34d3d4d490d56d40902df63f2e56e170ca3a93a838eda08d5228a7677c99455de0c12a6386dd2c6ed6988cd5be4a7b7bd9162a1aa06cf3e71508bd2cec17f17535d34ed9736eb5e663b22704459dd202932f9af4bbdd8fc39b71c9a057bd88c14e2fac1f27fefd8eee1f4c8fd41e50a9586601145b5684ef8d638ee1d44b208df6a6fb0dc2052252989a84e9aab7ddfb631e0d7b844d826e029f9cc24bd37f89fd05e8fc37c0f1a4e4459726fe943096c89908ed32ffbd905392ada794fb958578a03d78660e1e4fb185e994afb41ba1a32d6f1d584ec1eb90ba19b90649570906f0c1942e78984c9b6955ee151108f357995ee549b535598cd7465135edd84a9080769e2b50308a35b326cd879f21ebae10d585316972598baad1bb8ef91fda34217269e6c4e91ecee41920cf82974561c50a6a953b28a82a5d6a33f93a11e9aa1a193b4cd521c2118115bef6ff0d935cfd68a33b70deca85178e43d9de6c282729dce8d1690ccf4fa688dd4736113068822bfc6236314323d0baeaaf0b503b80ee6ea8bb163f3b50b9c1694c7497218c21f942dbcb4e6b0ce1e7b1f72782140cbb26da7294e5fcbee8bfd738742b851a73bc29b2e587db8adab05562cc890db0775273d32f4c339e2a8ea9715133d9ddfcc85e76f9a48904aac1ed0dda08575db1b183562919ab72851e851aee0bffd0d00036e648981d8b1138dbdffbc73c85c780deb6cd79dc3aac24f4bd02ab00f043c23224a5f4c3da60b5b5ea1f753bbc894f9c0f20bd770e395c88317508d862c88af452a72100dea4c292269f24b77beb7cb982179c83bf43e478773ee86935104c45ba420f3764ed51071322d6f07f6a5f28c768b066e771408fde1b31ef645ce4771cdc5efb51a69aa928e71b2aa9a41c622f11b0e0d064de089d6734443dce9aaaca4fc104eeb874b2bb5242605da7bae48c4c4a1d3cd9be76b205212ecfcaf72d0ce65b239aead122f7718dfa4d2dfd301425a8b80689cbe9c566d7385b3cd3cb546e1f9f3c2c464f1370293056683251fc02ba978a32398ab752e4a87173259ae6dffbf0558d739f2e3841d84572c5600a284a0a24a36f1d8784b2e834c18d2ae242eb667a0bc6ac8b7424abbb4a76c5079f940141e5e13582451014a5c9537c42aef3f11a5c197e9707f01e4f6acbcca4c0cf29d881651e16fdc204017bd6e70d262fc01576a7b24c2c267e50bafd881ed885296f32f466340c3ac9ffef879716cdf268afdd82bab17ec37311b8a8ecf3a1bad083d99669b9d55badf7509daebc57b30289a822a0aa2a4d74834eef960483ec19845a0defe52d65a38d33ddf59bc994d815481e4ede90f518196a382c812bf0e96ea51566011e06d94b11a3197af518ce4cc245f235119dd6c30b29d184bb0f52b5230beaea45edeb39159358497f191bab407a770fbfdd7d3594cb9ff75b78b8edb1cab9d44d477dfc7e59d4440453e83a1cddadc4436897ea5a4dbc22a5d28b56f739fa551447f83c6db464085a9bcb7c5ca4cdeb212cddd176e23025538537f3ccec870ece1b6903782cd823b737b4c2cea42d60e55678c43616176d49eb2d061676f57b192b072820b8d2b25df6a3715defb3c7fbcaad462efcd35f02b3e4570caec43f7f3bed774f075237d2ac926e3d95230c5b3c2e7deef323cad7a981eaa7dc65db53f548a37f86b31d7fa7ed6a3a9496917f7e6cd37a3644bbe03bed18919fe8106ccb15fc078e2cefb1fbc80b0e5d5a85ad8657951e1445b409b8d187bcdc90e12ca1bb2a4cb61024cc594e0eccdf79d67754a0986b4bdafb2c595a03b31c07833bc6f7ad6ae3a5c963195bee12174bee6dea804da3b9e317e195474354dec59659be746c1a0cc82a2b9027e09166205919528ad3f1b217bcc66b73d9d4f87e3230dc248755bb32014fa24fb6b07e607ee227b1f84ba4fdebe49edcd04b72501f39f3007045e6f4ffb162ca243f853a7dd4c702a403a61a1350c7ed17d2a97e55c846e97798f551a5d857cf12c78befb606966ae2725eb53b47fbe34ae8b119ee321271f7cc0816fe833195c86980698bd21f3cd86ca2fa610e807c533c4808ecfbcb7e01e5cf889d75facee9f3505bb50453004a2d78655e5cbbcdb2fc7d5b953cc457ba1bdb4b8d0846cee54ac7b58850d115631af4f2b260323e100204312e37ec33c7a139bf31c6b974560afc7f3edb37e50496cb4f12183e04bcfa00f61664c2f91d97ca6a94f5c895ad78534f82d46a1dec0cf3734277ab8ebf5f1d21f9147fed3aa1182bed9917a098bafd7210004509aa6f1c0ed25b5442d87f6ce7adc246c7295ccbaf4ad790a89dfcb32428afd95dbf8fffba4782db9ea824a63f1f4b9fba57bfab6dd1c90a03eee64ad45af3bd0024ca94a094dc5b16904a902caffa81f2bebf5ec1728ec6594146c3b608598a77f2fc3399cfab3f11c79f6eb53d2e4d2273c78401b1262eeeb1878b1e1d805723575e0f0fc074140764851f838e45921e9aecd7b459c506aea39feffd75df9b5a74230e6d0572df57520e82d46c5706195ae9b878b3fc4bd934bd9c1bb0eaded28ce0a5f3f210ee7bda15bca88c7f94e9296cfbd5808c42a2a135824aa8134e716352ca96ff08cbe6440fcb7d61eb84551cf4c6b8b26ed4346cb0b97afdebf25a5612e6e284dbf8ddcc266a6495e54e3a6e1b6e9594d8fc8abbe758386c185387e37d2f828ed50756a0bb09d01ddc50d41c46e6edac7e79deba3d36d480d32839cf2ade3ba91fb539da610bdbcc32531c19a2bc851bfd8ee4c98286b55e3f2f809ab07faacfd51da57d791c5251c774e5c6567c87791576eeac00375b38a54cc662e7e242f549ebfc69455f64c6af57ad2a57ba69abab3add49c7df99a88fce2e780edb5b97858f4fe75d18ce82ae7f5ab064a64337167cc6e5987927fe9efb2f7600c4c6a98a60c2f8e3d9c58eaadfd4e7c7adb814ba5d53a53acd50e67959909158c4c229aaccc0f170e03836ff9af179ccb8c70baa422d5034eb001bab3147d8f0413b4717075e793e4826fc8dafd9c6dbf26b0314265621f21efd1a151be73d025ad3c3d4a39ce42adf3e935322209efc9787b722229b6a51a09e69addeea6b660486a897ae71dee9e744c8e930b2b94d246444ba8db27085c34df0f94d9f9668f7204fecc5fab918fbc789f02d8e74e17eb7a16856e27472fda0369ef83ae964341ef48dc83ef4ace2c0329996f29f122ba5ef9eaf44032a56cd4967aee0c3de4909b25803da1f5181d2eae9193de4f3e96371facf93d5893ec43180de08a9cfa59ab0895954d6fd755d4c1a0eb3c8c1a5fa8844642b1b2f20b39f73a499742719c2b43496e055442e08483098a17f0c5abf263d7c71ed20bc0f19f48770831c951a616d315c0d7e095781f4e418d8739af7800f24af6eb3bf7f582470be33797d447ca4a76bbc3d7fc5544b8aca95b72b3c7cf1c6e11d00b858920140ba244ee67fddfa0417a7fa0b447db9a2c5b52d3952dd5c297c850f9c567eb20df6f60c8fa013ab7fdd2283c5c1df0356f72a8dd85aff6af61d604f64a738e6d40091369355af4363805b3e8a4ad06da381924b28d909c7bb331053e4bc34706783429cbf33b4b5a52e1bda94bbeb1fcc10bada8a10bbb07ccfd0ad4db1eec46ad68966779b468d3da93ba9a32c55618c10239d4900b0463b8409ecc74847fe650e95e639b5f6a3190c7a49b68f5e6fc63037b57d8fff3eab17548b357e642f9923202c8cdf59039ccbc4555e5369c846464b473c63c8c25b0672bfbff800f65726961db3f48cbeca136324022671f6125f9e2ce87a5e046ff9887cc4173c7a8fdd7dc6fddd6fb801de3afeaa598cd0fbba3707169ac8efd3de1de6147b1f3c6d49c2a6e162b31a1c71167da617fc138e70f96efa3d83becfdbe9ca250ea6eb50a0387d2b0bcd20c84eb81e20cbef4c45c784cd235551e7223ed29a33ea556c6c01a9bf44cc0ed1f40c28177080564</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-wave">      <input class="hbe hbe-input-field hbe-input-field-wave" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-wave" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-wave">文章被加密了, 请输入密码查看.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-wave" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">🔒这可是好东西啊~</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="加密文章" scheme="https://blog.liukairui.me/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/"/>
    
  </entry>
  
  <entry>
    <title>VueConf 2022 - Vue 的进化历程</title>
    <link href="https://blog.liukairui.me/article/VueConf2022-Vue%E7%9A%84%E8%BF%9B%E5%8C%96%E5%8E%86%E7%A8%8B/"/>
    <id>https://blog.liukairui.me/article/VueConf2022-Vue%E7%9A%84%E8%BF%9B%E5%8C%96%E5%8E%86%E7%A8%8B/</id>
    <published>2022-12-12T16:00:01.000Z</published>
    <updated>2022-12-12T16:00:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="库阶段library-2013-2015">库阶段(Library) 2013-2015</h2><p><strong>库与框架</strong>: 库更像是一个小模块嵌入于在大项目中,而框架则定义了一套自己的工程实践与配套工具</p><p>库阶段实现了基于 ES5 getter/setter 的响应式系统, MVVM, 模板数据绑定.并没有对构建工具等做出限制</p><p>此时 Vue 的组件与响应式系统强耦合, 没有编译过程, 直接将模板实例为 DOM并遍历实现数据绑定</p><h2 id="框架阶段framework-phase-2015-2016">框架阶段(Framework Phase)2015-2016</h2><p>实现 Vue 1.0</p><ul><li>引入了 Vue Router(SPA), vue-cli, Vuex(状态管理) 此时 Vue更像是一个框架了</li><li>引入了 <code>v-bind</code>, <code>v-on</code>, <code>v-for</code>及其缩写</li><li>实现了热更新与 Scoped CSS</li></ul><h2id="通用框架阶段universal-framework-phase-2016-2019">通用框架阶段(UniversalFramework Phase) 2016-2019</h2><p>完全重写, 实现 Vue 2.0.</p><ul><li>引入了模板编译 Virtual DOM</li><li>引入了基于 Virtual DOM 的服务端渲染</li><li>引入了基于 Virtual DOM 的跨端渲染</li><li>手动实现了 TS 定义</li><li>扩展了 vue-cli, 完成了工具链与 vue 的解绑</li><li>2.1 引入了作用域插槽</li><li>2.2 引入了基于路由的代码分割(SSR)</li><li>2.3 引入了基于路由的资源预加载(SSR, 基于 webpack 生成的 manifest文件分析资源引用关系)</li><li>2.4 引入了异步组件支持与编译输出(SSR)</li></ul><h2id="编译运行时混合阶compilerruntime-hybrid-phase-2019-now">编译/运行时混合阶(Compiler/RuntimeHybrid Phase) 2019-now</h2><p>Vue 2 的编译与运行模块是完全解耦的, 两者互不通信息,这导致编译器与运行时无法协作优化.</p><p>Vue 3</p><ul><li>实现了基于编译优化的 Virtual DOM 性能策略(Block Tree,PatchFlags)</li><li>提出了 Composition API(当时也提出了基于 class 的 API, 但是因为 class的装饰器语法不稳定, 最后选择了 Composition API). 切换 Composition API 后<ul><li>可扩展性得到了显著提升, 逻辑易于重组, 抽取, 复用</li><li>TS 更加友好</li></ul></li><li>实现了完全优化的 SSR 编译输出</li><li>开发了 Vite, 将 vue-cli 功能部分剥离到 Vite.</li><li>实现了同一份模版,不同的编译输出<ul><li>浏览器: 高度优化的 Virtual DOM 渲染函数</li><li>SSR: buffer + 字符串拼接</li><li>将来: Vapor mode (无 Virtual DOM 的渲染代码)</li></ul></li><li>单文件组件语法糖<ul><li><code>&lt;script setup&gt;</code></li><li>CSS v-bind()</li><li>Reactivity Transform</li></ul></li><li>3.1 引入了 Migration Build</li><li>3.2 引入了 <code>&lt;script setup&gt;</code></li></ul><p>现在的 Vue3</p><ul><li>core: 运行时, 编译器</li><li>文档</li><li>工具链 (create-vue)</li><li>SPA 路由 (Vue Router)</li><li>状态管理 (Pinia)</li><li>浏览器开发工具 (vue-devtools)</li><li>IDE 支持 (Volar)</li><li>TypeScript 支持 (将 tsc 扩展为 vue-tsc 以支持 sfc 检查)</li><li>静态分析 (eslint-plugin-vue)</li><li>单元测试 (<span class="citation"data-cites="vue/test-utils">@vue/test-utils</span>)</li></ul><h2 id="未来">未来</h2><ul><li>短期<ul><li>Reactivity Transform / Suspense 稳定化</li><li>SSR 水合改进 (lazy / on-demand / server-only)</li></ul></li><li>中到长期<ul><li>Vapor mode (受 Solid 启发的模版编译策略)</li></ul></li></ul>]]></content>
    
    
    <summary type="html">尤雨溪讲的关于框架设计的思考</summary>
    
    
    
    <category term="前端" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="前端框架" scheme="https://blog.liukairui.me/categories/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="前端" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="前端框架" scheme="https://blog.liukairui.me/tags/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    <category term="Vue" scheme="https://blog.liukairui.me/tags/Vue/"/>
    
    <category term="VueConf" scheme="https://blog.liukairui.me/tags/VueConf/"/>
    
  </entry>
  
</feed>
